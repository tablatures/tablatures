(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,i){var n=i("b622"),s=n("toStringTag"),r={};r[s]="z",e.exports="[object z]"===String(r)},"0366":function(e,t,i){var n=i("1c0b");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)}}return function(){return e.apply(t,arguments)}}},"0481":function(e,t,i){"use strict";var n=i("23e7"),s=i("a2bf"),r=i("7b0b"),a=i("50c4"),o=i("a691"),l=i("65f0");n({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=r(this),i=a(t.length),n=l(t,0);return n.length=s(n,t,t,i,0,void 0===e?1:o(e)),n}})},"04d1":function(e,t,i){var n=i("342f"),s=n.match(/firefox\/(\d+)/i);e.exports=!!s&&+s[1]},"0538":function(e,t,i){"use strict";var n=i("1c0b"),s=i("861d"),r=[].slice,a={},o=function(e,t,i){if(!(t in a)){for(var n=[],s=0;s<t;s++)n[s]="a["+s+"]";a[t]=Function("C,a","return new C("+n.join(",")+")")}return a[t](e,i)};e.exports=Function.bind||function(e){var t=n(this),i=r.call(arguments,1),a=function(){var n=i.concat(r.call(arguments));return this instanceof a?o(t,n.length,n):t.apply(e,n)};return s(t.prototype)&&(a.prototype=t.prototype),a}},"057f":function(e,t,i){var n=i("fc6a"),s=i("241c").f,r={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return s(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==r.call(e)?o(e):s(n(e))}},"06c5":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("fb6a"),i("d3b7"),i("b0c0"),i("a630"),i("3ca3");var n=i("6b75");function s(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(n["a"])(e,t):void 0}}},"06cf":function(e,t,i){var n=i("83ab"),s=i("d1e7"),r=i("5c6c"),a=i("fc6a"),o=i("a04b"),l=i("5135"),h=i("0cfb"),c=Object.getOwnPropertyDescriptor;t.f=n?c:function(e,t){if(e=a(e),t=o(t),h)try{return c(e,t)}catch(i){}if(l(e,t))return r(!s.f.call(e,t),e[t])}},"0789":function(e,t,i){"use strict";i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"e",(function(){return d})),i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f}));i("99af");var n=i("d9f7");function s(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return(e=Array()).concat.apply(e,[t].concat(n))}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top center 0",i=arguments.length>2?arguments[2]:void 0;return{name:e,functional:!0,props:{group:{type:Boolean,default:!1},hideOnLeave:{type:Boolean,default:!1},leaveAbsolute:{type:Boolean,default:!1},mode:{type:String,default:i},origin:{type:String,default:t}},render:function(t,i){var r="transition".concat(i.props.group?"-group":""),a={props:{name:e,mode:i.props.mode},on:{beforeEnter:function(e){e.style.transformOrigin=i.props.origin,e.style.webkitTransformOrigin=i.props.origin}}};return i.props.leaveAbsolute&&(a.on.leave=s(a.on.leave,(function(e){var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,s=e.offsetHeight;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=t+"px",e.style.left=i+"px",e.style.width=n+"px",e.style.height=s+"px"})),a.on.afterLeave=s(a.on.afterLeave,(function(e){if(e&&e._transitionInitialStyles){var t=e._transitionInitialStyles,i=t.position,n=t.top,s=t.left,r=t.width,a=t.height;delete e._transitionInitialStyles,e.style.position=i||"",e.style.top=n||"",e.style.left=s||"",e.style.width=r||"",e.style.height=a||""}}))),i.props.hideOnLeave&&(a.on.leave=s(a.on.leave,(function(e){e._initialDisplay=e.style.display,e.style.display="none"})),a.on.afterLeave=s(a.on.afterLeave,(function(e){e&&(e.style.display=e._initialDisplay||"")}))),t(r,Object(n["a"])(i.data,a),i.children)}}}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return{name:e,functional:!0,props:{mode:{type:String,default:i}},render:function(i,s){return i("transition",Object(n["a"])(s.data,{props:{name:e},on:t}),s.children)}}}var o=i("ade3"),l=i("80d2"),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?"width":"height",n="offset".concat(Object(l["x"])(i));return{beforeEnter:function(e){e._parent=e.parentNode,e._initialStyle=Object(o["a"])({transition:e.style.transition,overflow:e.style.overflow},i,e.style[i])},enter:function(t){var s=t._initialStyle;t.style.setProperty("transition","none","important"),t.style.overflow="hidden";var r="".concat(t[n],"px");t.style[i]="0",t.offsetHeight,t.style.transition=s.transition,e&&t._parent&&t._parent.classList.add(e),requestAnimationFrame((function(){t.style[i]=r}))},afterEnter:r,enterCancelled:r,leave:function(e){e._initialStyle=Object(o["a"])({transition:"",overflow:e.style.overflow},i,e.style[i]),e.style.overflow="hidden",e.style[i]="".concat(e[n],"px"),e.offsetHeight,requestAnimationFrame((function(){return e.style[i]="0"}))},afterLeave:s,leaveCancelled:s};function s(t){e&&t._parent&&t._parent.classList.remove(e),r(t)}function r(e){var t=e._initialStyle[i];e.style.overflow=e._initialStyle.overflow,null!=t&&(e.style[i]=t),delete e._initialStyle}},c=(r("carousel-transition"),r("carousel-reverse-transition"),r("tab-transition"),r("tab-reverse-transition"),r("menu-transition"),r("fab-transition","center center","out-in"),r("dialog-transition"),r("dialog-bottom-transition"),r("dialog-top-transition"),r("fade-transition")),u=r("scale-transition"),d=(r("scroll-x-transition"),r("scroll-x-reverse-transition"),r("scroll-y-transition"),r("scroll-y-reverse-transition"),r("slide-x-transition")),p=(r("slide-x-reverse-transition"),r("slide-y-transition"),r("slide-y-reverse-transition"),a("expand-transition",h())),f=a("expand-x-transition",h("",!0))},"07ac":function(e,t,i){var n=i("23e7"),s=i("6f53").values;n({target:"Object",stat:!0},{values:function(e){return s(e)}})},"0b25":function(e,t,i){var n=i("a691"),s=i("50c4");e.exports=function(e){if(void 0===e)return 0;var t=n(e),i=s(t);if(t!==i)throw RangeError("Wrong length or index");return i}},"0b42":function(e,t,i){var n=i("861d"),s=i("e8b5"),r=i("b622"),a=r("species");e.exports=function(e){var t;return s(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!s(t.prototype)?n(t)&&(t=t[a],null===t&&(t=void 0)):t=void 0),void 0===t?Array:t}},"0cb2":function(e,t,i){var n=i("7b0b"),s=Math.floor,r="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,l,h,c){var u=i+e.length,d=l.length,p=o;return void 0!==h&&(h=n(h),p=a),r.call(c,p,(function(n,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(u);case"<":a=h[r.slice(1,-1)];break;default:var o=+r;if(0===o)return n;if(o>d){var c=s(o/10);return 0===c?n:c<=d?void 0===l[c-1]?r.charAt(1):l[c-1]+r.charAt(1):n}a=l[o-1]}return void 0===a?"":a}))}},"0cfb":function(e,t,i){var n=i("83ab"),s=i("d039"),r=i("cc12");e.exports=!n&&!s((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},"0e8f":function(e,t,i){"use strict";i("20f6");var n=i("e8f2");t["a"]=Object(n["a"])("flex")},"0fd9":function(e,t,i){"use strict";var n=i("ade3"),s=i("5530"),r=(i("caad"),i("2532"),i("99af"),i("b64b"),i("ac1f"),i("5319"),i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("159b"),i("4b85"),i("2b0e")),a=i("d9f7"),o=i("80d2"),l=["sm","md","lg","xl"],h=["start","end","center"];function c(e,t){return l.reduce((function(i,n){return i[e+Object(o["x"])(n)]=t(),i}),{})}var u=function(e){return[].concat(h,["baseline","stretch"]).includes(e)},d=c("align",(function(){return{type:String,default:null,validator:u}})),p=function(e){return[].concat(h,["space-between","space-around"]).includes(e)},f=c("justify",(function(){return{type:String,default:null,validator:p}})),g=function(e){return[].concat(h,["space-between","space-around","stretch"]).includes(e)},m=c("alignContent",(function(){return{type:String,default:null,validator:g}})),b={align:Object.keys(d),justify:Object.keys(f),alignContent:Object.keys(m)},y={align:"align",justify:"justify",alignContent:"align-content"};function v(e,t,i){var n=y[e];if(null!=i){if(t){var s=t.replace(e,"");n+="-".concat(s)}return n+="-".concat(i),n.toLowerCase()}}var w=new Map;t["a"]=r["a"].extend({name:"v-row",functional:!0,props:Object(s["a"])(Object(s["a"])(Object(s["a"])({tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:u}},d),{},{justify:{type:String,default:null,validator:p}},f),{},{alignContent:{type:String,default:null,validator:g}},m),render:function(e,t){var i=t.props,s=t.data,r=t.children,o="";for(var l in i)o+=String(i[l]);var h=w.get(o);return h||function(){var e,t;for(t in h=[],b)b[t].forEach((function(e){var n=i[e],s=v(t,e,n);s&&h.push(s)}));h.push((e={"no-gutters":i.noGutters,"row--dense":i.dense},Object(n["a"])(e,"align-".concat(i.align),i.align),Object(n["a"])(e,"justify-".concat(i.justify),i.justify),Object(n["a"])(e,"align-content-".concat(i.alignContent),i.alignContent),e)),w.set(o,h)}(),e(i.tag,Object(a["a"])(s,{staticClass:"row",class:h}),r)}})},"107c":function(e,t,i){var n=i("d039"),s=i("da84"),r=s.RegExp;e.exports=n((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"10d2":function(e,t,i){"use strict";var n=i("8dd9");t["a"]=n["a"]},1148:function(e,t,i){"use strict";var n=i("a691"),s=i("577e"),r=i("1d80");e.exports=function(e){var t=s(r(this)),i="",a=n(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},1276:function(e,t,i){"use strict";var n=i("d784"),s=i("44e7"),r=i("825a"),a=i("1d80"),o=i("4840"),l=i("8aa5"),h=i("50c4"),c=i("577e"),u=i("14c3"),d=i("9263"),p=i("9f7f"),f=i("d039"),g=p.UNSUPPORTED_Y,m=[].push,b=Math.min,y=4294967295,v=!f((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));n("split",(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=c(a(this)),r=void 0===i?y:i>>>0;if(0===r)return[];if(void 0===e)return[n];if(!s(e))return t.call(n,e,r);var o,l,h,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,p+"g");while(o=d.call(g,n)){if(l=g.lastIndex,l>f&&(u.push(n.slice(f,o.index)),o.length>1&&o.index<n.length&&m.apply(u,o.slice(1)),h=o[0].length,f=l,u.length>=r))break;g.lastIndex===o.index&&g.lastIndex++}return f===n.length?!h&&g.test("")||u.push(""):u.push(n.slice(f)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var s=a(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,s,i):n.call(c(s),t,i)},function(e,s){var a=r(this),d=c(e),p=i(n,a,d,s,n!==t);if(p.done)return p.value;var f=o(a,RegExp),m=a.unicode,v=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(g?"g":"y"),w=new f(g?"^(?:"+a.source+")":a,v),S=void 0===s?y:s>>>0;if(0===S)return[];if(0===d.length)return null===u(w,d)?[d]:[];var _=0,k=0,T=[];while(k<d.length){w.lastIndex=g?0:k;var B,x=u(w,g?d.slice(k):d);if(null===x||(B=b(h(w.lastIndex+(g?k:0)),d.length))===_)k=l(d,k,m);else{if(T.push(d.slice(_,k)),T.length===S)return T;for(var N=1;N<=x.length-1;N++)if(T.push(x[N]),T.length===S)return T;k=_=B}}return T.push(d.slice(_)),T}]}),!v,g)},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"132d":function(e,t,i){"use strict";var n,s=i("5530"),r=(i("c96a"),i("caad"),i("2532"),i("a9e3"),i("498a"),i("7db0"),i("fb6a"),i("4804"),i("7e2b")),a=i("a9ad"),o=i("af2b"),l=i("7560"),h=i("80d2"),c=i("2b0e"),u=i("58df");function d(e){return["fas","far","fal","fab","fad","fak"].some((function(t){return e.includes(t)}))}function p(e){return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4}(function(e){e["xSmall"]="12px",e["small"]="16px",e["default"]="24px",e["medium"]="28px",e["large"]="36px",e["xLarge"]="40px"})(n||(n={}));var f=Object(u["a"])(r["a"],a["a"],o["a"],l["a"]).extend({name:"v-icon",props:{dense:Boolean,disabled:Boolean,left:Boolean,right:Boolean,size:[Number,String],tag:{type:String,required:!1,default:"i"}},computed:{medium:function(){return!1},hasClickListener:function(){return Boolean(this.listeners$.click||this.listeners$["!click"])}},methods:{getIcon:function(){var e="";return this.$slots.default&&(e=this.$slots.default[0].text.trim()),Object(h["w"])(this,e)},getSize:function(){var e={xSmall:this.xSmall,small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},t=Object(h["s"])(e).find((function(t){return e[t]}));return t&&n[t]||Object(h["f"])(this.size)},getDefaultData:function(){return{staticClass:"v-icon notranslate",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.hasClickListener,"v-icon--right":this.right,"v-icon--dense":this.dense},attrs:Object(s["a"])({"aria-hidden":!this.hasClickListener,disabled:this.hasClickListener&&this.disabled,type:this.hasClickListener?"button":void 0},this.attrs$),on:this.listeners$}},getSvgWrapperData:function(){var e=this.getSize(),t=Object(s["a"])(Object(s["a"])({},this.getDefaultData()),{},{style:e?{fontSize:e,height:e,width:e}:void 0});return this.applyColors(t),t},applyColors:function(e){e.class=Object(s["a"])(Object(s["a"])({},e.class),this.themeClasses),this.setTextColor(this.color,e)},renderFontIcon:function(e,t){var i=[],n=this.getDefaultData(),s="material-icons",r=e.indexOf("-"),a=r<=-1;a?i.push(e):(s=e.slice(0,r),d(s)&&(s="")),n.class[s]=!0,n.class[e]=!a;var o=this.getSize();return o&&(n.style={fontSize:o}),this.applyColors(n),t(this.hasClickListener?"button":this.tag,n,i)},renderSvgIcon:function(e,t){var i={class:"v-icon__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":!0}},n=this.getSize();return n&&(i.style={fontSize:n,height:n,width:n}),t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t("svg",i,[t("path",{attrs:{d:e}})])])},renderSvgIconComponent:function(e,t){var i={class:{"v-icon__component":!0}},n=this.getSize();n&&(i.style={fontSize:n,height:n,width:n}),this.applyColors(i);var s=e.component;return i.props=e.props,i.nativeOn=i.on,t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t(s,i)])}},render:function(e){var t=this.getIcon();return"string"===typeof t?p(t)?this.renderSvgIcon(t,e):this.renderFontIcon(t,e):this.renderSvgIconComponent(t,e)}});t["a"]=c["a"].extend({name:"v-icon",$_wrapperFor:f,functional:!0,render:function(e,t){var i=t.data,n=t.children,s="";return i.domProps&&(s=i.domProps.textContent||i.domProps.innerHTML||s,delete i.domProps.textContent,delete i.domProps.innerHTML),e(f,i,s?[s]:n)}})},1448:function(e,t,i){var n=i("dfb9"),s=i("b6b7");e.exports=function(e,t){return n(s(e),t)}},"145e":function(e,t,i){"use strict";var n=i("7b0b"),s=i("23cb"),r=i("50c4"),a=Math.min;e.exports=[].copyWithin||function(e,t){var i=n(this),o=r(i.length),l=s(e,o),h=s(t,o),c=arguments.length>2?arguments[2]:void 0,u=a((void 0===c?o:s(c,o))-h,o-l),d=1;h<l&&l<h+u&&(d=-1,h+=u-1,l+=u-1);while(u-- >0)h in i?i[l]=i[h]:delete i[l],l+=d,h+=d;return i}},"14c3":function(e,t,i){var n=i("c6b6"),s=i("9263");e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var r=i.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},"159b":function(e,t,i){var n=i("da84"),s=i("fdbc"),r=i("17c2"),a=i("9112");for(var o in s){var l=n[o],h=l&&l.prototype;if(h&&h.forEach!==r)try{a(h,"forEach",r)}catch(c){h.forEach=r}}},"15fd":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("a4d3"),i("b64b");function n(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}function s(e,t){if(null==e)return{};var i,s,r=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)i=a[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}},"166a":function(e,t,i){},"170b":function(e,t,i){"use strict";var n=i("ebb5"),s=i("50c4"),r=i("23cb"),a=i("b6b7"),o=n.aTypedArray,l=n.exportTypedArrayMethod;l("subarray",(function(e,t){var i=o(this),n=i.length,l=r(e,n),h=a(i);return new h(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,s((void 0===t?n:r(t,n))-l))}))},"17c2":function(e,t,i){"use strict";var n=i("b727").forEach,s=i("a640"),r=s("forEach");e.exports=r?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"182d":function(e,t,i){var n=i("f8cd");e.exports=function(e,t){var i=n(e);if(i%t)throw RangeError("Wrong offset");return i}},"18a5":function(e,t,i){"use strict";var n=i("23e7"),s=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("anchor")},{anchor:function(e){return s(this,"a","name",e)}})},"19aa":function(e,t){e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},"1b2c":function(e,t,i){},"1baa":function(e,t,i){"use strict";var n=i("5530"),s=(i("899c"),i("a9e3"),i("4de4"),i("caad"),i("2532"),i("a434"),i("159b"),i("fb6a"),i("7db0"),i("c740"),i("166a"),i("a452")),r=i("7560"),a=i("58df"),o=i("d9bd"),l=Object(a["a"])(s["a"],r["a"]).extend({name:"base-item-group",props:{activeClass:{type:String,default:"v-item--active"},mandatory:Boolean,max:{type:[Number,String],default:null},multiple:Boolean,tag:{type:String,default:"div"}},data:function(){return{internalLazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,items:[]}},computed:{classes:function(){return Object(n["a"])({"v-item-group":!0},this.themeClasses)},selectedIndex:function(){return this.selectedItem&&this.items.indexOf(this.selectedItem)||-1},selectedItem:function(){if(!this.multiple)return this.selectedItems[0]},selectedItems:function(){var e=this;return this.items.filter((function(t,i){return e.toggleMethod(e.getValue(t,i))}))},selectedValues:function(){return null==this.internalValue?[]:Array.isArray(this.internalValue)?this.internalValue:[this.internalValue]},toggleMethod:function(){var e=this;if(!this.multiple)return function(t){return e.internalValue===t};var t=this.internalValue;return Array.isArray(t)?function(e){return t.includes(e)}:function(){return!1}}},watch:{internalValue:"updateItemsState",items:"updateItemsState"},created:function(){this.multiple&&!Array.isArray(this.internalValue)&&Object(o["c"])("Model must be bound to an array if the multiple property is true.",this)},methods:{genData:function(){return{class:this.classes}},getValue:function(e,t){return null==e.value||""===e.value?t:e.value},onClick:function(e){this.updateInternalValue(this.getValue(e,this.items.indexOf(e)))},register:function(e){var t=this,i=this.items.push(e)-1;e.$on("change",(function(){return t.onClick(e)})),this.mandatory&&!this.selectedValues.length&&this.updateMandatory(),this.updateItem(e,i)},unregister:function(e){if(!this._isDestroyed){var t=this.items.indexOf(e),i=this.getValue(e,t);this.items.splice(t,1);var n=this.selectedValues.indexOf(i);if(!(n<0)){if(!this.mandatory)return this.updateInternalValue(i);this.multiple&&Array.isArray(this.internalValue)?this.internalValue=this.internalValue.filter((function(e){return e!==i})):this.internalValue=void 0,this.selectedItems.length||this.updateMandatory(!0)}}},updateItem:function(e,t){var i=this.getValue(e,t);e.isActive=this.toggleMethod(i)},updateItemsState:function(){var e=this;this.$nextTick((function(){if(e.mandatory&&!e.selectedItems.length)return e.updateMandatory();e.items.forEach(e.updateItem)}))},updateInternalValue:function(e){this.multiple?this.updateMultiple(e):this.updateSingle(e)},updateMandatory:function(e){if(this.items.length){var t=this.items.slice();e&&t.reverse();var i=t.find((function(e){return!e.disabled}));if(i){var n=this.items.indexOf(i);this.updateInternalValue(this.getValue(i,n))}}},updateMultiple:function(e){var t=Array.isArray(this.internalValue)?this.internalValue:[],i=t.slice(),n=i.findIndex((function(t){return t===e}));this.mandatory&&n>-1&&i.length-1<1||null!=this.max&&n<0&&i.length+1>this.max||(n>-1?i.splice(n,1):i.push(e),this.internalValue=i)},updateSingle:function(e){var t=e===this.internalValue;this.mandatory&&t||(this.internalValue=t?void 0:e)}},render:function(e){return e(this.tag,this.genData(),this.$slots.default)}}),h=(l.extend({name:"v-item-group",provide:function(){return{itemGroup:this}}}),i("a9ad"));t["a"]=Object(a["a"])(l,h["a"]).extend({name:"v-list-item-group",provide:function(){return{isInGroup:!0,listItemGroup:this}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},l.options.computed.classes.call(this)),{},{"v-list-item-group":!0})}},methods:{genData:function(){return this.setTextColor(this.color,Object(n["a"])(Object(n["a"])({},l.options.methods.genData.call(this)),{},{attrs:{role:"listbox"}}))}}})},"1be4":function(e,t,i){var n=i("d066");e.exports=n("document","documentElement")},"1c0b":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"1c7e":function(e,t,i){var n=i("b622"),s=n("iterator"),r=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){r=!0}};o[s]=function(){return this},Array.from(o,(function(){throw 2}))}catch(l){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var n={};n[s]=function(){return{next:function(){return{done:i=!0}}}},e(n)}catch(l){}return i}},"1c87":function(e,t,i){"use strict";var n=i("ade3"),s=i("5530"),r=(i("9911"),i("498a"),i("99af"),i("ac1f"),i("5319"),i("2b0e")),a=i("5607"),o=i("80d2");t["a"]=r["a"].extend({name:"routable",directives:{Ripple:a["a"]},props:{activeClass:String,append:Boolean,disabled:Boolean,exact:{type:Boolean,default:void 0},exactPath:Boolean,exactActiveClass:String,link:Boolean,href:[String,Object],to:[String,Object],nuxt:Boolean,replace:Boolean,ripple:{type:[Boolean,Object],default:null},tag:String,target:String},data:function(){return{isActive:!1,proxyClass:""}},computed:{classes:function(){var e={};return this.to||(this.activeClass&&(e[this.activeClass]=this.isActive),this.proxyClass&&(e[this.proxyClass]=this.isActive)),e},computedRipple:function(){var e;return null!=(e=this.ripple)?e:!this.disabled&&this.isClickable},isClickable:function(){return!this.disabled&&Boolean(this.isLink||this.$listeners.click||this.$listeners["!click"]||this.$attrs.tabindex)},isLink:function(){return this.to||this.href||this.link},styles:function(){return{}}},watch:{$route:"onRouteChange"},methods:{click:function(e){this.$emit("click",e)},generateRouteLink:function(){var e,t,i=this.exact,r=(e={attrs:{tabindex:"tabindex"in this.$attrs?this.$attrs.tabindex:void 0},class:this.classes,style:this.styles,props:{},directives:[{name:"ripple",value:this.computedRipple}]},Object(n["a"])(e,this.to?"nativeOn":"on",Object(s["a"])(Object(s["a"])({},this.$listeners),{},{click:this.click})),Object(n["a"])(e,"ref","link"),e);if("undefined"===typeof this.exact&&(i="/"===this.to||this.to===Object(this.to)&&"/"===this.to.path),this.to){var a=this.activeClass,o=this.exactActiveClass||a;this.proxyClass&&(a="".concat(a," ").concat(this.proxyClass).trim(),o="".concat(o," ").concat(this.proxyClass).trim()),t=this.nuxt?"nuxt-link":"router-link",Object.assign(r.props,{to:this.to,exact:i,exactPath:this.exactPath,activeClass:a,exactActiveClass:o,append:this.append,replace:this.replace})}else t=(this.href?"a":this.tag)||"div","a"===t&&this.href&&(r.attrs.href=this.href);return this.target&&(r.attrs.target=this.target),{tag:t,data:r}},onRouteChange:function(){var e=this;if(this.to&&this.$refs.link&&this.$route){var t="".concat(this.activeClass," ").concat(this.proxyClass||"").trim(),i="_vnode.data.class.".concat(t);this.$nextTick((function(){Object(o["l"])(e.$refs.link,i)&&e.toggle()}))}},toggle:function(){}}})},"1cdc":function(e,t,i){var n=i("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},"1d80":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},"1da1":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("d3b7");function n(e,t,i,n,s,r,a){try{var o=e[r](a),l=o.value}catch(h){return void i(h)}o.done?t(l):Promise.resolve(l).then(n,s)}function s(e){return function(){var t=this,i=arguments;return new Promise((function(s,r){var a=e.apply(t,i);function o(e){n(a,s,r,o,l,"next",e)}function l(e){n(a,s,r,o,l,"throw",e)}o(void 0)}))}}},"1dde":function(e,t,i){var n=i("d039"),s=i("b622"),r=i("2d00"),a=s("species");e.exports=function(e){return r>=51||!n((function(){var t=[],i=t.constructor={};return i[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"1f94":function(e,t,i){(function(e,i){(function(e,i){i(t)})(0,(function(t){"use strict";t.AlphaTabErrorType=void 0,function(e){e[e["General"]=0]="General",e[e["Format"]=1]="Format",e[e["AlphaTex"]=2]="AlphaTex"}(t.AlphaTabErrorType||(t.AlphaTabErrorType={}));class n extends Error{constructor(e,t="",i){super(t),this.type=e,this.inner=null!==i&&void 0!==i?i:null,Object.setPrototypeOf(this,n.prototype)}}class s extends n{constructor(e){super(t.AlphaTabErrorType.Format,e),Object.setPrototypeOf(this,s.prototype)}}class r{static getValue(e){return r._values||(r._values=new Map),e=e.toLowerCase().split(" ").join(""),r._values.has(e)?r._values.get(e):0}static isPiano(e){return e<=7||e>=16&&e<=23}static isGuitar(e){return e>=24&&e<=39||105===e||43===e}}var a,o,l,h,c,u,d,p,f,g,m,b,y,v,w,S,_,k,T,B,x,N,C,E,P,L,O,F,M,A,I,D,R,V,H,G,W,j,$,z,U,X,Y,q,J,Q,K,Z,ee,te,ie,ne,se,re,ae,oe,le;r._values=new Map([["acousticgrandpiano",0],["brightacousticpiano",1],["electricgrandpiano",2],["honkytonkpiano",3],["electricpiano1",4],["electricpiano2",5],["harpsichord",6],["clavinet",7],["celesta",8],["glockenspiel",9],["musicbox",10],["vibraphone",11],["marimba",12],["xylophone",13],["tubularbells",14],["dulcimer",15],["drawbarorgan",16],["percussiveorgan",17],["rockorgan",18],["churchorgan",19],["reedorgan",20],["accordion",21],["harmonica",22],["tangoaccordion",23],["acousticguitarnylon",24],["acousticguitarsteel",25],["electricguitarjazz",26],["electricguitarclean",27],["electricguitarmuted",28],["overdrivenguitar",29],["distortionguitar",30],["guitarharmonics",31],["acousticbass",32],["electricbassfinger",33],["electricbasspick",34],["fretlessbass",35],["slapbass1",36],["slapbass2",37],["synthbass1",38],["synthbass2",39],["violin",40],["viola",41],["cello",42],["contrabass",43],["tremolostrings",44],["pizzicatostrings",45],["orchestralharp",46],["timpani",47],["stringensemble1",48],["stringensemble2",49],["synthstrings1",50],["synthstrings2",51],["choiraahs",52],["voiceoohs",53],["synthvoice",54],["orchestrahit",55],["trumpet",56],["trombone",57],["tuba",58],["mutedtrumpet",59],["frenchhorn",60],["brasssection",61],["synthbrass1",62],["synthbrass2",63],["sopranosax",64],["altosax",65],["tenorsax",66],["baritonesax",67],["oboe",68],["englishhorn",69],["bassoon",70],["clarinet",71],["piccolo",72],["flute",73],["recorder",74],["panflute",75],["blownbottle",76],["shakuhachi",77],["whistle",78],["ocarina",79],["lead1square",80],["lead2sawtooth",81],["lead3calliope",82],["lead4chiff",83],["lead5charang",84],["lead6voice",85],["lead7fifths",86],["lead8bassandlead",87],["pad1newage",88],["pad2warm",89],["pad3polysynth",90],["pad4choir",91],["pad5bowed",92],["pad6metallic",93],["pad7halo",94],["pad8sweep",95],["fx1rain",96],["fx2soundtrack",97],["fx3crystal",98],["fx4atmosphere",99],["fx5brightness",100],["fx6goblins",101],["fx7echoes",102],["fx8scifi",103],["sitar",104],["banjo",105],["shamisen",106],["koto",107],["kalimba",108],["bagpipe",109],["fiddle",110],["shanai",111],["tinklebell",112],["agogo",113],["steeldrums",114],["woodblock",115],["taikodrum",116],["melodictom",117],["synthdrum",118],["reversecymbal",119],["guitarfretnoise",120],["breathnoise",121],["seashore",122],["birdtweet",123],["telephonering",124],["helicopter",125],["applause",126],["gunshot",127]]),function(e){e[e["Unknown"]=-2]="Unknown",e[e["NoOrDead"]=-1]="NoOrDead",e[e["Thumb"]=0]="Thumb",e[e["IndexFinger"]=1]="IndexFinger",e[e["MiddleFinger"]=2]="MiddleFinger",e[e["AnnularFinger"]=3]="AnnularFinger",e[e["LittleFinger"]=4]="LittleFinger"}(a||(a={})),t.TabRhythmMode=void 0,function(e){e[e["Hidden"]=0]="Hidden",e[e["ShowWithBeams"]=1]="ShowWithBeams",e[e["ShowWithBars"]=2]="ShowWithBars"}(t.TabRhythmMode||(t.TabRhythmMode={})),t.FingeringMode=void 0,function(e){e[e["ScoreDefault"]=0]="ScoreDefault",e[e["ScoreForcePiano"]=1]="ScoreForcePiano",e[e["SingleNoteEffectBand"]=2]="SingleNoteEffectBand",e[e["SingleNoteEffectBandForcePiano"]=3]="SingleNoteEffectBandForcePiano"}(t.FingeringMode||(t.FingeringMode={})),t.NotationMode=void 0,function(e){e[e["GuitarPro"]=0]="GuitarPro",e[e["SongBook"]=1]="SongBook"}(t.NotationMode||(t.NotationMode={})),function(e){e[e["ScoreTitle"]=0]="ScoreTitle",e[e["ScoreSubTitle"]=1]="ScoreSubTitle",e[e["ScoreArtist"]=2]="ScoreArtist",e[e["ScoreAlbum"]=3]="ScoreAlbum",e[e["ScoreWords"]=4]="ScoreWords",e[e["ScoreMusic"]=5]="ScoreMusic",e[e["ScoreWordsAndMusic"]=6]="ScoreWordsAndMusic",e[e["ScoreCopyright"]=7]="ScoreCopyright",e[e["GuitarTuning"]=8]="GuitarTuning",e[e["TrackNames"]=9]="TrackNames",e[e["ChordDiagrams"]=10]="ChordDiagrams",e[e["ParenthesisOnTiedBends"]=11]="ParenthesisOnTiedBends",e[e["TabNotesOnTiedBends"]=12]="TabNotesOnTiedBends",e[e["ZerosOnDiveWhammys"]=13]="ZerosOnDiveWhammys",e[e["EffectAlternateEndings"]=14]="EffectAlternateEndings",e[e["EffectCapo"]=15]="EffectCapo",e[e["EffectChordNames"]=16]="EffectChordNames",e[e["EffectCrescendo"]=17]="EffectCrescendo",e[e["EffectDynamics"]=18]="EffectDynamics",e[e["EffectFadeIn"]=19]="EffectFadeIn",e[e["EffectFermata"]=20]="EffectFermata",e[e["EffectFingering"]=21]="EffectFingering",e[e["EffectHarmonics"]=22]="EffectHarmonics",e[e["EffectLetRing"]=23]="EffectLetRing",e[e["EffectLyrics"]=24]="EffectLyrics",e[e["EffectMarker"]=25]="EffectMarker",e[e["EffectOttavia"]=26]="EffectOttavia",e[e["EffectPalmMute"]=27]="EffectPalmMute",e[e["EffectPickSlide"]=28]="EffectPickSlide",e[e["EffectPickStroke"]=29]="EffectPickStroke",e[e["EffectSlightBeatVibrato"]=30]="EffectSlightBeatVibrato",e[e["EffectSlightNoteVibrato"]=31]="EffectSlightNoteVibrato",e[e["EffectTap"]=32]="EffectTap",e[e["EffectTempo"]=33]="EffectTempo",e[e["EffectText"]=34]="EffectText",e[e["EffectTrill"]=35]="EffectTrill",e[e["EffectTripletFeel"]=36]="EffectTripletFeel",e[e["EffectWhammyBar"]=37]="EffectWhammyBar",e[e["EffectWideBeatVibrato"]=38]="EffectWideBeatVibrato",e[e["EffectWideNoteVibrato"]=39]="EffectWideNoteVibrato",e[e["EffectLeftHandTap"]=40]="EffectLeftHandTap"}(o||(o={}));class he{constructor(){this.notationMode=t.NotationMode.GuitarPro,this.fingeringMode=t.FingeringMode.ScoreDefault,this.elements=new Map,this.rhythmMode=t.TabRhythmMode.Hidden,this.rhythmHeight=15,this.transpositionPitches=[],this.displayTranspositionPitches=[],this.smallGraceTabNotes=!0,this.extendBendArrowsOnTiedNotes=!0,this.extendLineEffectsToBeatEnd=!1,this.slurHeight=5}isNotationElementVisible(e){return this.elements.has(e)?this.elements.get(e):!he.defaultElements.has(e)||he.defaultElements.get(e)}}he.defaultElements=new Map([[o.ZerosOnDiveWhammys,!1]]);class ce{constructor(){this.note=null,this.noteValue=0,this.octave=0}get realValue(){return 12*this.octave+this.noteValue}}class ue{static getIndex(e){let t=0,i=e;return i<0?t:0|Math.log2(e)}static keySignatureIsFlat(e){return e<0}static keySignatureIsNatural(e){return 0===e}static keySignatureIsSharp(e){return e>0}static applyPitchOffsets(e,t){for(let i=0;i<t.tracks.length;i++){if(i<e.notation.displayTranspositionPitches.length)for(let n of t.tracks[i].staves)n.displayTranspositionPitch=-e.notation.displayTranspositionPitches[i];if(i<e.notation.transpositionPitches.length)for(let n of t.tracks[i].staves)n.transpositionPitch=-e.notation.transpositionPitches[i]}}static fingerToString(e,i,n,s){if(e.notation.fingeringMode===t.FingeringMode.ScoreForcePiano||e.notation.fingeringMode===t.FingeringMode.SingleNoteEffectBandForcePiano||r.isPiano(i.voice.bar.staff.track.playbackInfo.program))switch(n){case a.Unknown:case a.NoOrDead:return null;case a.Thumb:return"1";case a.IndexFinger:return"2";case a.MiddleFinger:return"3";case a.AnnularFinger:return"4";case a.LittleFinger:return"5";default:return null}if(s)switch(n){case a.Unknown:case a.NoOrDead:return"0";case a.Thumb:return"T";case a.IndexFinger:return"1";case a.MiddleFinger:return"2";case a.AnnularFinger:return"3";case a.LittleFinger:return"4";default:return null}switch(n){case a.Unknown:case a.NoOrDead:return null;case a.Thumb:return"p";case a.IndexFinger:return"i";case a.MiddleFinger:return"m";case a.AnnularFinger:return"a";case a.LittleFinger:return"c";default:return null}}static isTuning(e){return!!ue.parseTuning(e)}static parseTuning(e){let t="",i="";for(let s=0;s<e.length;s++){let n=e.charCodeAt(s);if(n>=48&&n<=57){if(!t)return null;i+=String.fromCharCode(n)}else{if(!(n>=65&&n<=90||n>=97&&n<=122||35===n))return null;t+=String.fromCharCode(n)}}if(!i||!t)return null;let n=new ce;return n.octave=parseInt(i)+1,n.note=t.toLowerCase(),n.noteValue=ue.getToneForText(n.note),n}static getTuningForText(e){let t=ue.parseTuning(e);return t?t.realValue:-1}static getToneForText(e){let t=0;switch(e.toLowerCase()){case"c":t=0;break;case"c#":case"db":t=1;break;case"d":t=2;break;case"d#":case"eb":t=3;break;case"e":t=4;break;case"f":t=5;break;case"f#":case"gb":t=6;break;case"g":t=7;break;case"g#":case"ab":t=8;break;case"a":t=9;break;case"a#":case"bb":t=10;break;case"b":t=11;break;default:return 0}return t}static newGuid(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+"-"+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)+Math.floor(65536*(1+Math.random())).toString(16).substring(1)}static isAlmostEqualTo(e,t){return Math.abs(e-t)<1e-5}static toHexString(e,t=0){let i="",n="0123456789ABCDEF";do{i=String.fromCharCode(n.charCodeAt(15&e))+i,e>>=4}while(e>0);while(i.length<t)i="0"+i;return i}}class de{constructor(e,t,i,n=255){this.raw=0,this.raw=(255&n)<<24|(255&e)<<16|(255&t)<<8|255&i,this.updateRgba()}updateRgba(){255===this.a?this.rgba="#"+ue.toHexString(this.r,2)+ue.toHexString(this.g,2)+ue.toHexString(this.b,2):this.rgba=`rgba(${this.r},${this.g},${this.b},${this.a/255})`}get a(){return this.raw>>24&255}get r(){return this.raw>>16&255}get g(){return this.raw>>8&255}get b(){return 255&this.raw}static random(e=100){return new de(255*Math.random()|0,255*Math.random()|0,255*Math.random()|0,e)}static fromJson(e){switch(typeof e){case"number":{const t=new de(0,0,0,0);return t.raw=e,t.updateRgba(),t}case"string":{const t=e;if(t.startsWith("#")){if(4===t.length)return new de(17*parseInt(t.substring(1,1),16),17*parseInt(t.substring(2,1),16),17*parseInt(t.substring(3,1),16));if(5===t.length)return new de(17*parseInt(t.substring(1,1),16),17*parseInt(t.substring(2,1),16),17*parseInt(t.substring(3,1),16),17*parseInt(t.substring(4,1),16));if(7===t.length)return new de(parseInt(t.substring(1,2),16),parseInt(t.substring(3,2),16),parseInt(t.substring(5,2),16));if(9===t.length)return new de(parseInt(t.substring(1,2),16),parseInt(t.substring(3,2),16),parseInt(t.substring(5,2),16),parseInt(t.substring(7,2),16))}else if(t.startsWith("rgba")||t.startsWith("rgb")){const e=t.indexOf("("),i=t.lastIndexOf(")");if(-1===e||-1===i)throw new s("No values specified for rgb/rgba function");const n=t.substring(e+1,i).split(",");if(3===n.length)return new de(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]));if(4===n.length)return new de(parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),255*parseFloat(n[3]))}return null}}throw new s("Unsupported format for color")}static toJson(e){return e.raw}}de.BlackRgb="#000000";class pe{static parseEnum(e,i){switch(typeof e){case"string":const t=parseInt(e);return isNaN(t)?i[Object.keys(i).find(t=>t.toLowerCase()===e.toLowerCase())]:t;case"number":return e;case"undefined":case"object":return null}throw new n(t.AlphaTabErrorType.Format,`Could not parse enum value '${e}'`)}static forEach(e,t){if(e instanceof Map)e.forEach(t);else if("object"===typeof e)for(const i in e)t(e[i],i)}}class fe{constructor(e,t,i){this.text=e,this.startPos=t,this.endPos=i}}class ge{constructor(e){this.style="normal",this.variant="normal",this.weight="normal",this.stretch="normal",this.lineHeight="normal",this.size="1rem",this.families=[],this._currentTokenIndex=-1,this._input="",this._currentToken=null,this._input=e,this._tokens=this.splitToTokens(e)}splitToTokens(e){const t=[];let i=0;while(i<e.length){let n=i;while(n<e.length&&" "!==e.charAt(n))n++;n>i&&t.push(new fe(e.substring(i,n),i,n)),i=n+1}return t}parse(){var e;if(this.reset(),1===this._tokens.length)switch(null===(e=this._currentToken)||void 0===e?void 0:e.text){case"caption":case"icon":case"menu":case"message-box":case"small-caption":case"status-bar":case"inherit":return}this.fontStyleVariantWeight(),this.fontSizeLineHeight(),this.fontFamily()}fontFamily(){if(!this._currentToken)throw new Error("Missing font list");const e=this._input.substr(this._currentToken.startPos).trim();let t=0;while(t<e.length){let i=e.charAt(t);if(" "===i||","==i)t++;else if('"'===i||"'"===i){const n=this.findEndOfQuote(e,t+1,i);this.families.push(e.substring(t+1,n).split("\\"+i).join(i)),t=n+1}else{const i=this.findEndOfQuote(e,t+1,",");this.families.push(e.substring(t,i).trim()),t=i+1}}}findEndOfQuote(e,t,i){let n=!1;while(t<e.length){const s=e.charAt(t);if(!n&&s===i)return t;n=!n&&"\\"===s,t+=1}return e.length}fontSizeLineHeight(){if(!this._currentToken)throw new Error("Missing font size");const e=this._currentToken.text.split("/");if(e.length>=3)throw new Error(`Invalid font size '${this._currentToken}' specified`);if(this.nextToken(),e.length>=2)if("/"===e[1]){if(!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.size=e[0],this.lineHeight=e[1];else{if(!(e.length>=1))throw new Error("Missing font size");if(this.size=e[0],this._currentToken&&0===this._currentToken.text.indexOf("/"))if("/"===this._currentToken.text){if(this.nextToken(),!this._currentToken)throw new Error("Missing line-height after font size");this.lineHeight=this._currentToken.text,this.nextToken()}else this.lineHeight=this._currentToken.text.substr(1),this.nextToken()}}nextToken(){this._currentTokenIndex++,this._currentTokenIndex<this._tokens.length?this._currentToken=this._tokens[this._currentTokenIndex]:this._currentToken=null}fontStyleVariantWeight(){let e=!1,t=!1,i=!1,n=3,s=[];while(1){if(!this._currentToken)return;let r=this._currentToken.text;switch(r){case"normal":case"inherit":s.push(r),n--,this.nextToken();break;case"italic":case"oblique":this.style=r,e=!0,n--,this.nextToken();break;case"small-caps":this.variant=r,t=!0,n--,this.nextToken();break;case"bold":case"bolder":case"lighter":case"100":case"200":case"300":case"400":case"500":case"600":case"700":case"800":case"900":this.weight=r,i=!0,n--,this.nextToken();break;default:return}if(0===n)break}while(s.length>0){const n=s.pop();i?t?e||(this.style=n):this.variant=n:this.weight=n}}reset(){this._currentTokenIndex=-1,this.nextToken()}}(function(e){e[e["Plain"]=0]="Plain",e[e["Italic"]=1]="Italic"})(l||(l={})),function(e){e[e["Regular"]=0]="Regular",e[e["Bold"]=1]="Bold"}(h||(h={}));class me{constructor(e,t,i=l.Plain,n=h.Regular){this._cssScale=0,this._family=e,this._size=t,this._style=i,this._weight=n,this._css=this.toCssString()}reset(){this._cssScale=0,this._css=this.toCssString()}get family(){return this._family}set family(e){this._family=e,this.reset()}get size(){return this._size}set size(e){this._size=e,this.reset()}get style(){return this._style}set style(e){this._style=e,this.reset()}get weight(){return this._weight}set weight(e){this._weight=e,this.reset()}get isBold(){return this.weight===h.Bold}get isItalic(){return this.style===l.Italic}toCssString(e=1){if(!this._css||!(Math.abs(e-this._cssScale)<.01)){let t="";this.isBold&&(t+="bold "),this.isItalic&&(t+="italic "),t+=this.size*e,t+="px ",t+="'",t+=this.family,t+="'",this._css=t,this._cssScale=e}return this._css}static fromJson(e){switch(typeof e){case"undefined":return null;case"object":{const t=e;let i=t.get("family"),n=t.get("size"),s=pe.parseEnum(t.get("style"),l),r=pe.parseEnum(t.get("weight"),h);return new me(i,n,s,r)}case"string":{const i=new ge(e);i.parse();let n=i.families[0];(n.startsWith("'")&&n.endsWith("'")||n.startsWith('"')&&n.endsWith('"'))&&(n=n.substr(1,n.length-2));let s=i.size.toLowerCase(),r=0;switch(s){case"xx-small":r=7;break;case"x-small":r=10;break;case"small":case"smaller":r=13;break;case"medium":r=16;break;case"large":case"larger":r=18;break;case"x-large":r=24;break;case"xx-large":r=32;break;default:try{r=s.endsWith("em")?16*parseFloat(s.substr(0,s.length-2)):s.endsWith("pt")?16*parseFloat(s.substr(0,s.length-2))/12:s.endsWith("px")?parseFloat(s.substr(0,s.length-2)):12}catch(t){r=12}break}let a=l.Plain;"italic"===i.style&&(a=l.Italic);let o=h.Regular,c=i.weight.toLowerCase();switch(c){case"normal":case"lighter":break;default:o=h.Bold;break}return new me(n,r,a,o)}default:return null}}static toJson(e){const t=new Map;return t.set("family",e.family),t.set("size",e.size),t.set("style",e.style),t.set("weight",e.weight),t}}class be{constructor(){this.copyrightFont=new me(be.sansFont,12,l.Plain,h.Bold),this.titleFont=new me(be.serifFont,32,l.Plain),this.subTitleFont=new me(be.serifFont,20,l.Plain),this.wordsFont=new me(be.serifFont,15,l.Plain),this.effectFont=new me(be.serifFont,12,l.Italic),this.fretboardNumberFont=new me(be.sansFont,11,l.Plain),this.tablatureFont=new me(be.sansFont,13,l.Plain),this.graceFont=new me(be.sansFont,11,l.Plain),this.staffLineColor=new de(165,165,165,255),this.barSeparatorColor=new de(34,34,17,255),this.barNumberFont=new me(be.sansFont,11,l.Plain),this.barNumberColor=new de(200,0,0,255),this.fingeringFont=new me(be.serifFont,14,l.Plain),this.markerFont=new me(be.serifFont,14,l.Plain,h.Bold),this.mainGlyphColor=new de(0,0,0,255),this.secondaryGlyphColor=new de(0,0,0,100),this.scoreInfoColor=new de(0,0,0,255)}}be.sansFont="Arial",be.serifFont="Georgia",t.StaveProfile=void 0,function(e){e[e["Default"]=0]="Default",e[e["ScoreTab"]=1]="ScoreTab",e[e["Score"]=2]="Score",e[e["Tab"]=3]="Tab",e[e["TabMixed"]=4]="TabMixed"}(t.StaveProfile||(t.StaveProfile={})),t.LayoutMode=void 0,function(e){e[e["Page"]=0]="Page",e[e["Horizontal"]=1]="Horizontal"}(t.LayoutMode||(t.LayoutMode={}));class ye{constructor(){this.scale=1,this.stretchForce=1,this.layoutMode=t.LayoutMode.Page,this.staveProfile=t.StaveProfile.Default,this.barsPerRow=-1,this.startBar=1,this.barCount=-1,this.barCountPerPartial=10,this.resources=new be,this.padding=null}}class ve{init(e,t){this.data=e,this.settings=t}}class we extends n{constructor(e="Unsupported format",i=null){super(t.AlphaTabErrorType.Format,e),this.inner=i,Object.setPrototypeOf(this,we.prototype)}}(function(e){e[e["None"]=0]="None",e[e["Normal"]=1]="Normal",e[e["Heavy"]=2]="Heavy"})(c||(c={})),function(e){e[e["Tempo"]=0]="Tempo",e[e["Volume"]=1]="Volume",e[e["Instrument"]=2]="Instrument",e[e["Balance"]=3]="Balance"}(u||(u={}));class Se{constructor(){this.isLinear=!1,this.type=u.Tempo,this.value=0,this.ratioPosition=0,this.text=""}static buildTempoAutomation(e,t,i,n){(n<1||n>5)&&(n=2);let s=new Float32Array([1,.5,1,1.5,2,3]),r=new Se;return r.type=u.Tempo,r.isLinear=e,r.ratioPosition=t,r.value=i*s[n],r}static buildInstrumentAutomation(e,t,i){let n=new Se;return n.type=u.Instrument,n.isLinear=e,n.ratioPosition=t,n.value=i,n}}(function(e){e[e["Neutral"]=0]="Neutral",e[e["C3"]=1]="C3",e[e["C4"]=2]="C4",e[e["F4"]=3]="F4",e[e["G2"]=4]="G2"})(d||(d={})),function(e){e[e["_15ma"]=0]="_15ma",e[e["_8va"]=1]="_8va",e[e["Regular"]=2]="Regular",e[e["_8vb"]=3]="_8vb",e[e["_15mb"]=4]="_15mb"}(p||(p={})),function(e){e[e["None"]=0]="None",e[e["Simple"]=1]="Simple",e[e["FirstOfDouble"]=2]="FirstOfDouble",e[e["SecondOfDouble"]=3]="SecondOfDouble"}(f||(f={}));class _e{constructor(){this.id=_e._globalBarId++,this.index=0,this.nextBar=null,this.previousBar=null,this.clef=d.G2,this.clefOttava=p.Regular,this.voices=[],this.simileMark=f.None,this.isMultiVoice=!1}get masterBar(){return this.staff.track.score.masterBars[this.index]}get isEmpty(){for(let e=0,t=this.voices.length;e<t;e++)if(!this.voices[e].isEmpty)return!1;return!0}addVoice(e){e.bar=this,e.index=this.voices.length,this.voices.push(e)}finish(e){this.isMultiVoice=!1;for(let t=0,i=this.voices.length;t<i;t++){let i=this.voices[t];i.finish(e),t>0&&!i.isEmpty&&(this.isMultiVoice=!0)}}calculateDuration(){let e=0;for(let t of this.voices){let i=t.calculateDuration();i>e&&(e=i)}return e}}_e._globalBarId=0;class ke{static ticksToMillis(e,t){return e*(6e4/(t*ke.QuarterTime))|0}static millisToTicks(e,t){return e/(6e4/(t*ke.QuarterTime))|0}static toTicks(e){return ke.valueToTicks(e)}static valueToTicks(e){let t=e;return t<0&&(t=1/-t),ke.QuarterTime*(4/t)|0}static applyDot(e,t){return t?e+3*(e/4|0):e+(e/2|0)}static applyTuplet(e,t,i){return e*i/t|0}static removeTuplet(e,t,i){return e*t/i|0}static dynamicToVelocity(e){return ke.MinVelocity+e*ke.VelocityIncrement}}ke.QuarterTime=960,ke.MinVelocity=15,ke.VelocityIncrement=16;class Te{constructor(e=0,t=0){this.offset=e,this.value=t}}Te.MaxPosition=60,Te.MaxValue=12,function(e){e[e["Default"]=0]="Default",e[e["Gradual"]=1]="Gradual",e[e["Fast"]=2]="Fast"}(g||(g={})),function(e){e[e["None"]=0]="None",e[e["Custom"]=1]="Custom",e[e["Bend"]=2]="Bend",e[e["Release"]=3]="Release",e[e["BendRelease"]=4]="BendRelease",e[e["Hold"]=5]="Hold",e[e["Prebend"]=6]="Prebend",e[e["PrebendBend"]=7]="PrebendBend",e[e["PrebendRelease"]=8]="PrebendRelease"}(m||(m={})),function(e){e[e["None"]=0]="None",e[e["BrushUp"]=1]="BrushUp",e[e["BrushDown"]=2]="BrushDown",e[e["ArpeggioUp"]=3]="ArpeggioUp",e[e["ArpeggioDown"]=4]="ArpeggioDown"}(b||(b={})),function(e){e[e["None"]=0]="None",e[e["Crescendo"]=1]="Crescendo",e[e["Decrescendo"]=2]="Decrescendo"}(y||(y={})),function(e){e[e["QuadrupleWhole"]=-4]="QuadrupleWhole",e[e["DoubleWhole"]=-2]="DoubleWhole",e[e["Whole"]=1]="Whole",e[e["Half"]=2]="Half",e[e["Quarter"]=4]="Quarter",e[e["Eighth"]=8]="Eighth",e[e["Sixteenth"]=16]="Sixteenth",e[e["ThirtySecond"]=32]="ThirtySecond",e[e["SixtyFourth"]=64]="SixtyFourth",e[e["OneHundredTwentyEighth"]=128]="OneHundredTwentyEighth",e[e["TwoHundredFiftySixth"]=256]="TwoHundredFiftySixth"}(v||(v={})),function(e){e[e["PPP"]=0]="PPP",e[e["PP"]=1]="PP",e[e["P"]=2]="P",e[e["MP"]=3]="MP",e[e["MF"]=4]="MF",e[e["F"]=5]="F",e[e["FF"]=6]="FF",e[e["FFF"]=7]="FFF"}(w||(w={})),function(e){e[e["None"]=0]="None",e[e["OnBeat"]=1]="OnBeat",e[e["BeforeBeat"]=2]="BeforeBeat",e[e["BendGrace"]=3]="BendGrace"}(S||(S={})),function(e){e[e["None"]=0]="None",e[e["Natural"]=1]="Natural",e[e["Artificial"]=2]="Artificial",e[e["Pinch"]=3]="Pinch",e[e["Tap"]=4]="Tap",e[e["Semi"]=5]="Semi",e[e["Feedback"]=6]="Feedback"}(_||(_={})),function(e){e[e["Default"]=0]="Default",e[e["ForceNone"]=1]="ForceNone",e[e["ForceNatural"]=2]="ForceNatural",e[e["ForceSharp"]=3]="ForceSharp",e[e["ForceDoubleSharp"]=4]="ForceDoubleSharp",e[e["ForceFlat"]=5]="ForceFlat",e[e["ForceDoubleFlat"]=6]="ForceDoubleFlat"}(k||(k={})),function(e){e[e["None"]=0]="None",e[e["IntoFromBelow"]=1]="IntoFromBelow",e[e["IntoFromAbove"]=2]="IntoFromAbove"}(T||(T={})),function(e){e[e["None"]=0]="None",e[e["Shift"]=1]="Shift",e[e["Legato"]=2]="Legato",e[e["OutUp"]=3]="OutUp",e[e["OutDown"]=4]="OutDown",e[e["PickSlideDown"]=5]="PickSlideDown",e[e["PickSlideUp"]=6]="PickSlideUp"}(B||(B={})),function(e){e[e["None"]=0]="None",e[e["Slight"]=1]="Slight",e[e["Wide"]=2]="Wide"}(x||(x={}));class Be{constructor(e){this._value=void 0,this._factory=e}get value(){return void 0===this._value&&(this._value=this._factory()),this._value}}t.LogLevel=void 0,function(e){e[e["None"]=0]="None",e[e["Debug"]=1]="Debug",e[e["Info"]=2]="Info",e[e["Warning"]=3]="Warning",e[e["Error"]=4]="Error"}(t.LogLevel||(t.LogLevel={}));class xe{static format(e,t){return`[AlphaTab][${e}] ${t}`}debug(e,t,...i){console.debug(xe.format(e,t),...i)}warning(e,t,...i){console.warn(xe.format(e,t),...i)}info(e,t,...i){console.info(xe.format(e,t),...i)}error(e,t,...i){console.error(xe.format(e,t),...i)}}xe.logLevel=t.LogLevel.Info;class Ne{static shouldLog(e){return Ne.logLevel!==t.LogLevel.None&&e>=Ne.logLevel}static debug(e,i,...n){Ne.shouldLog(t.LogLevel.Debug)&&Ne.log.debug(e,i,...n)}static warning(e,i,...n){Ne.shouldLog(t.LogLevel.Warning)&&Ne.log.warning(e,i,...n)}static info(e,i,...n){Ne.shouldLog(t.LogLevel.Info)&&Ne.log.info(e,i,...n)}static error(e,i,...n){Ne.shouldLog(t.LogLevel.Error)&&Ne.log.error(e,i,...n)}}Ne.logLevel=t.LogLevel.Info,Ne.log=new xe,function(e){e[e["None"]=0]="None",e[e["Up"]=1]="Up",e[e["Down"]=2]="Down"}(N||(N={})),function(e){e[e["None"]=-1]="None",e[e["GClef"]=57424]="GClef",e[e["CClef"]=57436]="CClef",e[e["FClef"]=57442]="FClef",e[e["UnpitchedPercussionClef1"]=57449]="UnpitchedPercussionClef1",e[e["SixStringTabClef"]=57453]="SixStringTabClef",e[e["FourStringTabClef"]=57454]="FourStringTabClef",e[e["TimeSig0"]=57472]="TimeSig0",e[e["TimeSig1"]=57473]="TimeSig1",e[e["TimeSig2"]=57474]="TimeSig2",e[e["TimeSig3"]=57475]="TimeSig3",e[e["TimeSig4"]=57476]="TimeSig4",e[e["TimeSig5"]=57477]="TimeSig5",e[e["TimeSig6"]=57478]="TimeSig6",e[e["TimeSig7"]=57479]="TimeSig7",e[e["TimeSig8"]=57480]="TimeSig8",e[e["TimeSig9"]=57481]="TimeSig9",e[e["TimeSigCommon"]=57482]="TimeSigCommon",e[e["TimeSigCutCommon"]=57483]="TimeSigCutCommon",e[e["NoteheadDoubleWholeSquare"]=57505]="NoteheadDoubleWholeSquare",e[e["NoteheadDoubleWhole"]=57504]="NoteheadDoubleWhole",e[e["NoteheadWhole"]=57506]="NoteheadWhole",e[e["NoteheadHalf"]=57507]="NoteheadHalf",e[e["NoteheadBlack"]=57508]="NoteheadBlack",e[e["NoteheadNull"]=57509]="NoteheadNull",e[e["NoteheadXOrnate"]=57514]="NoteheadXOrnate",e[e["NoteheadTriangleUpWhole"]=57531]="NoteheadTriangleUpWhole",e[e["NoteheadTriangleUpHalf"]=57532]="NoteheadTriangleUpHalf",e[e["NoteheadTriangleUpBlack"]=57534]="NoteheadTriangleUpBlack",e[e["NoteheadDiamondBlackWide"]=57564]="NoteheadDiamondBlackWide",e[e["NoteheadDiamondWhite"]=57565]="NoteheadDiamondWhite",e[e["NoteheadDiamondWhiteWide"]=57566]="NoteheadDiamondWhiteWide",e[e["NoteheadCircleX"]=57523]="NoteheadCircleX",e[e["NoteheadXWhole"]=57511]="NoteheadXWhole",e[e["NoteheadXHalf"]=57512]="NoteheadXHalf",e[e["NoteheadXBlack"]=57513]="NoteheadXBlack",e[e["NoteheadParenthesis"]=57550]="NoteheadParenthesis",e[e["NoteheadSlashedBlack2"]=57552]="NoteheadSlashedBlack2",e[e["NoteheadCircleSlash"]=57591]="NoteheadCircleSlash",e[e["NoteheadHeavyX"]=57592]="NoteheadHeavyX",e[e["NoteheadHeavyXHat"]=57593]="NoteheadHeavyXHat",e[e["NoteQuarterUp"]=57813]="NoteQuarterUp",e[e["NoteEighthUp"]=57815]="NoteEighthUp",e[e["Tremolo3"]=57890]="Tremolo3",e[e["Tremolo2"]=57889]="Tremolo2",e[e["Tremolo1"]=57888]="Tremolo1",e[e["FlagEighthUp"]=57920]="FlagEighthUp",e[e["FlagEighthDown"]=57921]="FlagEighthDown",e[e["FlagSixteenthUp"]=57922]="FlagSixteenthUp",e[e["FlagSixteenthDown"]=57923]="FlagSixteenthDown",e[e["FlagThirtySecondUp"]=57924]="FlagThirtySecondUp",e[e["FlagThirtySecondDown"]=57925]="FlagThirtySecondDown",e[e["FlagSixtyFourthUp"]=57926]="FlagSixtyFourthUp",e[e["FlagSixtyFourthDown"]=57927]="FlagSixtyFourthDown",e[e["FlagOneHundredTwentyEighthUp"]=57928]="FlagOneHundredTwentyEighthUp",e[e["FlagOneHundredTwentyEighthDown"]=57929]="FlagOneHundredTwentyEighthDown",e[e["FlagTwoHundredFiftySixthUp"]=57930]="FlagTwoHundredFiftySixthUp",e[e["FlagTwoHundredFiftySixthDown"]=57931]="FlagTwoHundredFiftySixthDown",e[e["AccidentalFlat"]=57952]="AccidentalFlat",e[e["AccidentalNatural"]=57953]="AccidentalNatural",e[e["AccidentalSharp"]=57954]="AccidentalSharp",e[e["AccidentalDoubleSharp"]=57955]="AccidentalDoubleSharp",e[e["AccidentalDoubleFlat"]=57956]="AccidentalDoubleFlat",e[e["AccidentalQuarterToneFlatArrowUp"]=57968]="AccidentalQuarterToneFlatArrowUp",e[e["AccidentalQuarterToneSharpArrowUp"]=57972]="AccidentalQuarterToneSharpArrowUp",e[e["AccidentalQuarterToneNaturalArrowUp"]=57970]="AccidentalQuarterToneNaturalArrowUp",e[e["ArticAccentAbove"]=58528]="ArticAccentAbove",e[e["ArticStaccatoAbove"]=58530]="ArticStaccatoAbove",e[e["ArticMarcatoAbove"]=58540]="ArticMarcatoAbove",e[e["FermataAbove"]=58560]="FermataAbove",e[e["FermataShortAbove"]=58564]="FermataShortAbove",e[e["FermataLongAbove"]=58566]="FermataLongAbove",e[e["RestLonga"]=58593]="RestLonga",e[e["RestDoubleWhole"]=58594]="RestDoubleWhole",e[e["RestWhole"]=58595]="RestWhole",e[e["RestHalf"]=58596]="RestHalf",e[e["RestQuarter"]=58597]="RestQuarter",e[e["RestEighth"]=58598]="RestEighth",e[e["RestSixteenth"]=58599]="RestSixteenth",e[e["RestThirtySecond"]=58600]="RestThirtySecond",e[e["RestSixtyFourth"]=58601]="RestSixtyFourth",e[e["RestOneHundredTwentyEighth"]=58602]="RestOneHundredTwentyEighth",e[e["RestTwoHundredFiftySixth"]=58603]="RestTwoHundredFiftySixth",e[e["Repeat1Bar"]=58624]="Repeat1Bar",e[e["Repeat2Bars"]=58625]="Repeat2Bars",e[e["Ottava"]=58640]="Ottava",e[e["OttavaAlta"]=58641]="OttavaAlta",e[e["OttavaBassaVb"]=58652]="OttavaBassaVb",e[e["Quindicesima"]=58644]="Quindicesima",e[e["QuindicesimaAlta"]=58645]="QuindicesimaAlta",e[e["DynamicPPP"]=58666]="DynamicPPP",e[e["DynamicPP"]=58667]="DynamicPP",e[e["DynamicPiano"]=58656]="DynamicPiano",e[e["DynamicMP"]=58668]="DynamicMP",e[e["DynamicMF"]=58669]="DynamicMF",e[e["DynamicForte"]=58658]="DynamicForte",e[e["DynamicFF"]=58671]="DynamicFF",e[e["DynamicFFF"]=58672]="DynamicFFF",e[e["OrnamentTrill"]=58726]="OrnamentTrill",e[e["StringsDownBow"]=58896]="StringsDownBow",e[e["StringsUpBow"]=58898]="StringsUpBow",e[e["PictEdgeOfCymbal"]=59177]="PictEdgeOfCymbal",e[e["GuitarString0"]=59443]="GuitarString0",e[e["GuitarString1"]=59444]="GuitarString1",e[e["GuitarString2"]=59445]="GuitarString2",e[e["GuitarString3"]=59446]="GuitarString3",e[e["GuitarString4"]=59447]="GuitarString4",e[e["GuitarString5"]=59448]="GuitarString5",e[e["GuitarString6"]=59449]="GuitarString6",e[e["GuitarString7"]=59450]="GuitarString7",e[e["GuitarString8"]=59451]="GuitarString8",e[e["GuitarString9"]=59452]="GuitarString9",e[e["GuitarGolpe"]=59458]="GuitarGolpe",e[e["FretboardX"]=59481]="FretboardX",e[e["FretboardO"]=59482]="FretboardO",e[e["WiggleTrill"]=60068]="WiggleTrill",e[e["WiggleVibratoMediumFast"]=60126]="WiggleVibratoMediumFast",e[e["OctaveBaselineM"]=60565]="OctaveBaselineM",e[e["OctaveBaselineB"]=60563]="OctaveBaselineB"}(C||(C={})),function(e){e[e["Left"]=0]="Left",e[e["Center"]=1]="Center",e[e["Right"]=2]="Right"}(E||(E={})),function(e){e[e["Top"]=0]="Top",e[e["Middle"]=1]="Middle",e[e["Bottom"]=2]="Bottom"}(P||(P={}));class Ce{constructor(e="",t=0,i=0,n=C.None,s=C.None,r=C.None,a=C.None,o=P.Middle){this.elementType=e,this.outputMidiNumber=i,this.staffLine=t,this.noteHeadDefault=n,this.noteHeadHalf=s!==C.None?s:n,this.noteHeadWhole=r!==C.None?r:n,this.techniqueSymbol=a,this.techniqueSymbolPlacement=o}getSymbol(e){switch(e){case v.Whole:return this.noteHeadWhole;case v.Half:return this.noteHeadHalf;default:return this.noteHeadDefault}}}class Ee{static articulationFromElementVariation(e,t){return e<Ee.gp6ElementAndVariationToArticulation.length?(t>=Ee.gp6ElementAndVariationToArticulation.length&&(t=0),Ee.gp6ElementAndVariationToArticulation[e][t]):38}static getArticulation(e){const t=e.percussionArticulation,i=e.beat.voice.bar.staff.track.percussionArticulations;return t<i.length?i[t]:Ee.getArticulationByValue(t)}static getElementAndVariation(e){const t=Ee.getArticulation(e);if(!t)return[-1,-1];for(let i=0;i<Ee.gp6ElementAndVariationToArticulation.length;i++){const e=Ee.gp6ElementAndVariationToArticulation[i];for(let n=0;n<e.length;n++){const s=Ee.getArticulationByValue(e[n]);if((null===s||void 0===s?void 0:s.outputMidiNumber)===t.outputMidiNumber)return[i,n]}}return[-1,-1]}static getArticulationByValue(e){return Ee.instrumentArticulations.has(e)?Ee.instrumentArticulations.get(e):null}}Ee.gp6ElementAndVariationToArticulation=[[35,35,35],[38,91,37],[99,100,99],[56,100,56],[102,103,102],[43,43,43],[45,45,45],[47,47,47],[48,48,48],[50,50,50],[42,92,46],[44,44,44],[57,98,57],[49,97,49],[55,95,55],[51,93,127],[52,96,52]],Ee.instrumentArticulations=new Map([[38,new Ce("snare",3,38,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[37,new Ce("snare",3,37,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[91,new Ce("snare",3,38,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[42,new Ce("hiHat",-1,42,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[92,new Ce("hiHat",-1,46,C.NoteheadCircleSlash,C.NoteheadCircleSlash,C.NoteheadCircleSlash)],[46,new Ce("hiHat",-1,46,C.NoteheadCircleX,C.NoteheadCircleX,C.NoteheadCircleX)],[44,new Ce("hiHat",9,44,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[35,new Ce("kickDrum",8,35,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[36,new Ce("kickDrum",7,36,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[50,new Ce("tom",1,50,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[48,new Ce("tom",2,48,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[47,new Ce("tom",4,47,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[45,new Ce("tom",5,45,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[43,new Ce("tom",6,43,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[93,new Ce("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.PictEdgeOfCymbal,P.Bottom)],[51,new Ce("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[53,new Ce("ride",0,53,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[94,new Ce("ride",0,51,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,P.Top)],[55,new Ce("splash",-2,55,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[95,new Ce("splash",-2,55,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,P.Bottom)],[52,new Ce("china",-3,52,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat)],[96,new Ce("china",-3,52,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat,C.NoteheadHeavyXHat)],[49,new Ce("crash",-2,49,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX)],[97,new Ce("crash",-2,49,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX,C.ArticStaccatoAbove,P.Bottom)],[57,new Ce("crash",-1,57,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX)],[98,new Ce("crash",-1,57,C.NoteheadHeavyX,C.NoteheadHeavyX,C.NoteheadHeavyX,C.ArticStaccatoAbove,P.Bottom)],[99,new Ce("cowbell",1,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[100,new Ce("cowbell",1,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[56,new Ce("cowbell",0,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[101,new Ce("cowbell",0,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[102,new Ce("cowbell",-1,56,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpHalf,C.NoteheadTriangleUpWhole)],[103,new Ce("cowbell",-1,56,C.NoteheadXBlack,C.NoteheadXHalf,C.NoteheadXWhole)],[77,new Ce("woodblock",-9,77,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[76,new Ce("woodblock",-10,76,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[60,new Ce("bongo",-4,60,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[104,new Ce("bongo",-5,60,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,P.Middle)],[105,new Ce("bongo",-6,60,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[61,new Ce("bongo",-7,61,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[106,new Ce("bongo",-8,61,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,P.Middle)],[107,new Ce("bongo",-16,61,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[66,new Ce("timbale",10,66,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[65,new Ce("timbale",9,65,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[68,new Ce("agogo",12,68,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[67,new Ce("agogo",11,67,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[64,new Ce("conga",17,64,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[108,new Ce("conga",16,64,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[109,new Ce("conga",15,64,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,P.Middle)],[63,new Ce("conga",14,63,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[110,new Ce("conga",13,63,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[62,new Ce("conga",19,62,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.NoteheadParenthesis,P.Middle)],[72,new Ce("whistle",-11,72,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[71,new Ce("whistle",-17,71,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[73,new Ce("guiro",38,73,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[74,new Ce("guiro",37,74,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[86,new Ce("surdo",36,86,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[87,new Ce("surdo",35,87,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadParenthesis,P.Middle)],[54,new Ce("tambourine",3,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack)],[111,new Ce("tambourine",2,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.StringsUpBow,P.Bottom)],[112,new Ce("tambourine",1,54,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.NoteheadTriangleUpBlack,C.StringsDownBow,P.Bottom)],[113,new Ce("tambourine",-7,54,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[79,new Ce("cuica",30,79,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[78,new Ce("cuica",29,78,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[58,new Ce("vibraslap",28,58,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[81,new Ce("triangle",27,81,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[80,new Ce("triangle",26,80,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadParenthesis,P.Middle)],[114,new Ce("grancassa",25,43,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[115,new Ce("piatti",18,49,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[116,new Ce("piatti",24,49,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[69,new Ce("cabasa",23,69,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[117,new Ce("cabasa",22,69,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,P.Bottom)],[85,new Ce("castanets",21,85,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[75,new Ce("claves",20,75,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[70,new Ce("maraca",-12,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[118,new Ce("maraca",-13,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,P.Bottom)],[119,new Ce("maraca",-14,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[120,new Ce("maraca",-15,70,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,P.Bottom)],[82,new Ce("shaker",-23,54,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[122,new Ce("shaker",-24,54,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,P.Bottom)],[84,new Ce("bellTree",-18,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[123,new Ce("bellTree",-19,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole,C.StringsUpBow,P.Bottom)],[83,new Ce("jingleBell",-20,53,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[124,new Ce("unpitched",-21,62,C.NoteheadNull,C.NoteheadNull,C.NoteheadNull,C.GuitarGolpe,P.Top)],[125,new Ce("unpitched",-22,62,C.NoteheadNull,C.NoteheadNull,C.NoteheadNull,C.GuitarGolpe,P.Bottom)],[39,new Ce("handClap",3,39,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[40,new Ce("snare",3,40,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[31,new Ce("snare",3,40,C.NoteheadSlashedBlack2,C.NoteheadSlashedBlack2,C.NoteheadSlashedBlack2)],[41,new Ce("tom",5,41,C.NoteheadBlack,C.NoteheadHalf,C.NoteheadWhole)],[59,new Ce("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.PictEdgeOfCymbal,P.Bottom)],[126,new Ce("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[127,new Ce("ride",2,59,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite,C.NoteheadDiamondWhite)],[29,new Ce("ride",2,59,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack,C.ArticStaccatoAbove,P.Top)],[30,new Ce("crash",-3,49,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[33,new Ce("snare",3,37,C.NoteheadXBlack,C.NoteheadXBlack,C.NoteheadXBlack)],[34,new Ce("snare",3,38,C.NoteheadBlack,C.NoteheadBlack,C.NoteheadBlack)]]);class Pe{constructor(){this.id=Pe.GlobalNoteId++,this.index=0,this.accentuated=c.None,this.bendType=m.None,this.bendStyle=g.Default,this.bendOrigin=null,this.isContinuedBend=!1,this.bendPoints=[],this.maxBendPoint=null,this.fret=-1,this.string=-1,this.octave=-1,this.tone=-1,this.percussionArticulation=-1,this.isVisible=!0,this.isLeftHandTapped=!1,this.isHammerPullOrigin=!1,this.hammerPullOriginNoteId=-1,this.hammerPullDestinationNoteId=-1,this.isSlurDestination=!1,this.slurOriginNoteId=-1,this.slurDestinationNoteId=-1,this.harmonicType=_.None,this.harmonicValue=0,this.isGhost=!1,this.isLetRing=!1,this.letRingDestination=null,this.isPalmMute=!1,this.palmMuteDestination=null,this.isDead=!1,this.isStaccato=!1,this.slideInType=T.None,this.slideOutType=B.None,this.slideTarget=null,this.slideOrigin=null,this.vibrato=x.None,this.tieOriginNoteId=-1,this.tieDestinationNoteId=-1,this.isTieDestination=!1,this.leftHandFinger=a.Unknown,this.rightHandFinger=a.Unknown,this.isFingering=!1,this.trillValue=-1,this.trillSpeed=v.ThirtySecond,this.durationPercent=1,this.accidentalMode=k.Default,this.dynamics=w.F,this.isEffectSlurOrigin=!1,this.hasEffectSlur=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null}get hasBend(){return this.bendType!==m.None}get isStringed(){return this.string>=0}get isPiano(){return!this.isStringed&&this.octave>=0&&this.tone>=0}get isPercussion(){return!this.isStringed&&this.percussionArticulation>=0}get element(){return this.isPercussion?Ee.getElementAndVariation(this)[0]:-1}get variation(){return this.isPercussion?Ee.getElementAndVariation(this)[1]:-1}get isHammerPullDestination(){return!!this.hammerPullOrigin}get hammerPullOrigin(){return-1===this.hammerPullOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.hammerPullOriginNoteId)}get hammerPullDestination(){return-1===this.hammerPullDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.hammerPullDestinationNoteId)}get isSlurOrigin(){return!!this.slurDestination}get slurOrigin(){return-1===this.slurOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.slurOriginNoteId)}get slurDestination(){return-1===this.slurDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.slurDestinationNoteId)}get isHarmonic(){return this.harmonicType!==_.None}get tieOrigin(){return-1===this.tieOriginNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.tieOriginNoteId)}get tieDestination(){return-1===this.tieDestinationNoteId?null:this.beat.voice.bar.staff.track.score.getNoteById(this.tieDestinationNoteId)}get isTieOrigin(){return-1!==this.tieDestinationNoteId}get trillFret(){return this.trillValue-this.stringTuning}get isTrill(){return this.trillValue>=0}get isEffectSlurDestination(){return!!this.effectSlurOrigin}get stringTuning(){return this.beat.voice.bar.staff.capo+Pe.getStringTuning(this.beat.voice.bar.staff,this.string)}static getStringTuning(e,t){return e.tuning.length>0?e.tuning[e.tuning.length-(t-1)-1]:0}get realValue(){let e=this.realValueWithoutHarmonic;return this.isStringed&&(this.harmonicType===_.Natural?e=this.harmonicPitch+this.stringTuning-this.beat.voice.bar.staff.transpositionPitch:e+=this.harmonicPitch),e}get realValueWithoutHarmonic(){return this.isPercussion?this.percussionArticulation:this.isStringed?this.fret+this.stringTuning-this.beat.voice.bar.staff.transpositionPitch:this.isPiano?12*this.octave+this.tone-this.beat.voice.bar.staff.transpositionPitch:0}get harmonicPitch(){if(this.harmonicType===_.None||!this.isStringed)return 0;let e=this.harmonicValue;return ue.isAlmostEqualTo(e,2.4)?36:ue.isAlmostEqualTo(e,2.7)?34:e<3?0:e<=3.5?31:e<=4?28:e<=5?24:e<=6?34:e<=7?19:e<=8.5?36:e<=9?28:e<=10?34:e<=11?0:e<=12?12:e<14?0:e<=15?34:e<=16?28:e<=17?36:e<=18?0:e<=19?19:e<=21?0:e<=22?36:e<=24?24:0}get initialBendValue(){return this.hasBend?Math.floor(this.bendPoints[0].value/2):this.bendOrigin?Math.floor(this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value/2):this.isTieDestination&&this.tieOrigin.bendOrigin?Math.floor(this.tieOrigin.bendOrigin.bendPoints[this.tieOrigin.bendOrigin.bendPoints.length-1].value/2):this.beat.hasWhammyBar?Math.floor(this.beat.whammyBarPoints[0].value/2):this.beat.isContinuedWhammy?Math.floor(this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value/2):0}get displayValue(){return this.displayValueWithoutBend+this.initialBendValue}get displayValueWithoutBend(){let e=this.realValue;switch(this.harmonicType!==_.Natural&&this.harmonicType!==_.None&&(e-=this.harmonicPitch),this.beat.ottava){case p._15ma:e-=24;break;case p._8va:e-=12;break;case p.Regular:break;case p._8vb:e+=12;break;case p._15mb:e+=24;break}switch(this.beat.voice.bar.clefOttava){case p._15ma:e-=24;break;case p._8va:e-=12;break;case p.Regular:break;case p._8vb:e+=12;break;case p._15mb:e+=24;break}return e-this.beat.voice.bar.staff.displayTranspositionPitch}get hasQuarterToneOffset(){return this.hasBend?this.bendPoints[0].value%2!==0:this.bendOrigin?this.bendOrigin.bendPoints[this.bendOrigin.bendPoints.length-1].value%2!==0:this.beat.hasWhammyBar?this.beat.whammyBarPoints[0].value%2!==0:!!this.beat.isContinuedWhammy&&this.beat.previousBeat.whammyBarPoints[this.beat.previousBeat.whammyBarPoints.length-1].value%2!==0}addBendPoint(e){this.bendPoints.push(e),(!this.maxBendPoint||e.value>this.maxBendPoint.value)&&(this.maxBendPoint=e),this.bendType===m.None&&(this.bendType=m.Custom)}finish(e){let i=new Be(()=>Pe.nextNoteOnSameLine(this)),n=e&&e.notation.notationMode===t.NotationMode.SongBook;if(this.isTieDestination&&(this.chain(),n&&this.tieOrigin&&this.tieOrigin.isLetRing&&(this.isLetRing=!0)),this.isLetRing&&(i.value&&i.value.isLetRing?this.letRingDestination=i.value:this.letRingDestination=this,n&&this.isTieDestination&&!this.tieOrigin.hasBend&&(this.isVisible=!1)),this.isPalmMute&&(i.value&&i.value.isPalmMute?this.palmMuteDestination=i.value:this.palmMuteDestination=this),this.isHammerPullOrigin){let e=Pe.findHammerPullDestination(this);e?(this.hammerPullDestinationNoteId=e.id,e.hammerPullOriginNoteId=this.id):this.isHammerPullOrigin=!1}switch(this.slideOutType){case B.Shift:case B.Legato:this.slideTarget=i.value,this.slideTarget?this.slideTarget.slideOrigin=this:this.slideOutType=B.None;break}let s=null;if(this.isHammerPullOrigin&&this.hammerPullDestination?s=this.hammerPullDestination:this.slideOutType===B.Legato&&this.slideTarget&&(s=this.slideTarget),s&&(this.hasEffectSlur=!0,this.effectSlurOrigin&&this.beat.pickStroke===N.None?(this.effectSlurOrigin.effectSlurDestination=s,this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin,this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=s,this.effectSlurDestination.effectSlurOrigin=this)),this.bendPoints.length>0&&this.bendType===m.Custom){let e=this.isTieDestination&&this.tieOrigin.hasBend;if(this.isContinuedBend=e,4===this.bendPoints.length){let t=this.bendPoints[0],i=this.bendPoints[1],n=this.bendPoints[2],s=this.bendPoints[3];i.value===n.value?s.value>t.value?i.value>s.value?this.bendType=m.BendRelease:!e&&t.value>0?(this.bendType=m.PrebendBend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=m.Bend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):s.value<t.value?e?(this.bendType=m.Release,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=m.PrebendRelease,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):i.value>t.value?this.bendType=m.BendRelease:t.value>0&&!e?(this.bendType=m.Prebend,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):(this.bendType=m.Hold,this.bendPoints.splice(2,1),this.bendPoints.splice(1,1)):Ne.warning("Model","Unsupported bend type detected, fallback to custom",null)}else if(2===this.bendPoints.length){let t=this.bendPoints[0],i=this.bendPoints[1];i.value>t.value?!e&&t.value>0?this.bendType=m.PrebendBend:this.bendType=m.Bend:i.value<t.value?this.bendType=e?m.Release:m.PrebendRelease:this.bendType=m.Hold}}else 0===this.bendPoints.length&&(this.bendType=m.None);this.initialBendValue>0&&(this.accidentalMode=k.Default)}static nextNoteOnSameLine(e){let t=e.beat.nextBeat;while(t&&t.voice.bar.index<=e.beat.voice.bar.index+Pe.MaxOffsetForSameLineSearch){let i=t.getNoteOnString(e.string);if(i)return i;t=t.nextBeat}return null}static findHammerPullDestination(e){let t=e.beat.nextBeat;while(t&&t.voice.bar.index<=e.beat.voice.bar.index+Pe.MaxOffsetForSameLineSearch){let i=t.getNoteOnString(e.string);if(i)return i;for(let n=e.string;n>0;n--)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}for(let n=e.string;n<=e.beat.voice.bar.staff.tuning.length;n++)if(i=t.getNoteOnString(n),i){if(i.isLeftHandTapped)return i;break}t=t.nextBeat}return null}static findTieOrigin(e){let t=e.beat.previousBeat;while(t&&t.voice.bar.index>=e.beat.voice.bar.index-Pe.MaxOffsetForSameLineSearch){if(e.isStringed){let i=t.getNoteOnString(e.string);if(i)return i}else if(-1===e.octave&&-1===e.tone){if(e.index<t.notes.length)return t.notes[e.index]}else{let i=t.getNoteWithRealValue(e.realValue);if(i)return i}t=t.previousBeat}return null}chain(){if(this.beat.voice.bar.staff.track.score.registerNote(this),!this.isTieDestination)return;let e;-1===this.tieOriginNoteId?(e=Pe.findTieOrigin(this),this.tieOriginNoteId=e?e.id:-1):e=this.tieOrigin,e?(e.tieDestinationNoteId=this.id,this.fret=e.fret,this.octave=e.octave,this.tone=e.tone,e.hasBend&&(this.bendOrigin=this.tieOrigin)):this.isTieDestination=!1}}Pe.GlobalNoteId=0,Pe.MaxOffsetForSameLineSearch=3;class Le{constructor(e){this._isEqualLengthTuplet=!0,this.totalDuration=0,this.beats=[],this.isFull=!1,this.voice=e}check(e){if(0===this.beats.length)return this.beats.push(e),this.totalDuration+=e.playbackDuration,!0;if(e.graceType!==S.None)return!0;if(e.voice!==this.voice||this.isFull||e.tupletNumerator!==this.beats[0].tupletNumerator||e.tupletDenominator!==this.beats[0].tupletDenominator)return!1;if(e.playbackDuration!==this.beats[0].playbackDuration&&(this._isEqualLengthTuplet=!1),this.beats.push(e),this.totalDuration+=e.playbackDuration,this._isEqualLengthTuplet)this.beats.length===this.beats[0].tupletNumerator&&(this.isFull=!0);else{let e=this.beats[0].tupletNumerator/this.beats[0].tupletDenominator|0;for(let t of Le.AllTicks)if(this.totalDuration===t*e){this.isFull=!0;break}}return!0}}Le.HalfTicks=1920,Le.QuarterTicks=960,Le.EighthTicks=480,Le.SixteenthTicks=240,Le.ThirtySecondTicks=120,Le.SixtyFourthTicks=60,Le.OneHundredTwentyEighthTicks=30,Le.TwoHundredFiftySixthTicks=15,Le.AllTicks=[Le.HalfTicks,Le.QuarterTicks,Le.EighthTicks,Le.SixteenthTicks,Le.ThirtySecondTicks,Le.SixtyFourthTicks,Le.OneHundredTwentyEighthTicks,Le.TwoHundredFiftySixthTicks],function(e){e[e["None"]=0]="None",e[e["Custom"]=1]="Custom",e[e["Dive"]=2]="Dive",e[e["Dip"]=3]="Dip",e[e["Hold"]=4]="Hold",e[e["Predive"]=5]="Predive",e[e["PrediveDive"]=6]="PrediveDive"}(L||(L={}));class Oe{static clone(e){const t=new Te;return t.offset=e.offset,t.value=e.value,t}}class Fe{static clone(e){const t=new Pe;t.index=e.index,t.accentuated=e.accentuated,t.bendType=e.bendType,t.bendStyle=e.bendStyle,t.isContinuedBend=e.isContinuedBend,t.bendPoints=[];for(const i of e.bendPoints)t.addBendPoint(Oe.clone(i));return t.fret=e.fret,t.string=e.string,t.octave=e.octave,t.tone=e.tone,t.percussionArticulation=e.percussionArticulation,t.isVisible=e.isVisible,t.isLeftHandTapped=e.isLeftHandTapped,t.isHammerPullOrigin=e.isHammerPullOrigin,t.hammerPullOriginNoteId=e.hammerPullOriginNoteId,t.hammerPullDestinationNoteId=e.hammerPullDestinationNoteId,t.isSlurDestination=e.isSlurDestination,t.slurOriginNoteId=e.slurOriginNoteId,t.slurDestinationNoteId=e.slurDestinationNoteId,t.harmonicType=e.harmonicType,t.harmonicValue=e.harmonicValue,t.isGhost=e.isGhost,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.isDead=e.isDead,t.isStaccato=e.isStaccato,t.slideInType=e.slideInType,t.slideOutType=e.slideOutType,t.vibrato=e.vibrato,t.tieOriginNoteId=e.tieOriginNoteId,t.tieDestinationNoteId=e.tieDestinationNoteId,t.isTieDestination=e.isTieDestination,t.leftHandFinger=e.leftHandFinger,t.rightHandFinger=e.rightHandFinger,t.isFingering=e.isFingering,t.trillValue=e.trillValue,t.trillSpeed=e.trillSpeed,t.durationPercent=e.durationPercent,t.accidentalMode=e.accidentalMode,t.dynamics=e.dynamics,t}}class Me{static clone(e){const t=new Se;return t.isLinear=e.isLinear,t.type=e.type,t.value=e.value,t.ratioPosition=e.ratioPosition,t.text=e.text,t}}class Ae{static clone(e){const t=new De;t.index=e.index,t.notes=[];for(const i of e.notes)t.addNote(Fe.clone(i));t.isEmpty=e.isEmpty,t.whammyStyle=e.whammyStyle,t.ottava=e.ottava,t.isLegatoOrigin=e.isLegatoOrigin,t.duration=e.duration,t.isLetRing=e.isLetRing,t.isPalmMute=e.isPalmMute,t.automations=[];for(const i of e.automations)t.automations.push(Me.clone(i));t.dots=e.dots,t.fadeIn=e.fadeIn,t.lyrics=e.lyrics?e.lyrics.slice():null,t.hasRasgueado=e.hasRasgueado,t.pop=e.pop,t.slap=e.slap,t.tap=e.tap,t.text=e.text,t.brushType=e.brushType,t.brushDuration=e.brushDuration,t.tupletDenominator=e.tupletDenominator,t.tupletNumerator=e.tupletNumerator,t.isContinuedWhammy=e.isContinuedWhammy,t.whammyBarType=e.whammyBarType,t.whammyBarPoints=[];for(const i of e.whammyBarPoints)t.addWhammyBarPoint(Oe.clone(i));return t.vibrato=e.vibrato,t.chordId=e.chordId,t.graceType=e.graceType,t.pickStroke=e.pickStroke,t.tremoloSpeed=e.tremoloSpeed,t.crescendo=e.crescendo,t.displayStart=e.displayStart,t.playbackStart=e.playbackStart,t.displayDuration=e.displayDuration,t.playbackDuration=e.playbackDuration,t.dynamics=e.dynamics,t.invertBeamDirection=e.invertBeamDirection,t.preferredBeamDirection=e.preferredBeamDirection,t.isEffectSlurOrigin=e.isEffectSlurOrigin,t.beamingMode=e.beamingMode,t}}class Ie{constructor(){this.beats=[],this.id="empty",this.isComplete=!1}addBeat(e){e.graceIndex=this.beats.length,e.graceGroup=this,this.beats.push(e)}finish(){this.beats.length>0&&(this.id=this.beats[0].absoluteDisplayStart+"_"+this.beats[0].voice.index)}}(function(e){e[e["Auto"]=0]="Auto",e[e["ForceSplitToNext"]=1]="ForceSplitToNext",e[e["ForceMergeWithNext"]=2]="ForceMergeWithNext"})(O||(O={}));class De{constructor(){this.id=De._globalBeatId++,this.index=0,this.previousBeat=null,this.nextBeat=null,this.notes=[],this.noteStringLookup=new Map,this.noteValueLookup=new Map,this.isEmpty=!1,this.whammyStyle=g.Default,this.ottava=p.Regular,this.fermata=null,this.isLegatoOrigin=!1,this.minNote=null,this.maxNote=null,this.maxStringNote=null,this.minStringNote=null,this.duration=v.Quarter,this.isLetRing=!1,this.isPalmMute=!1,this.automations=[],this.dots=0,this.fadeIn=!1,this.lyrics=null,this.hasRasgueado=!1,this.pop=!1,this.slap=!1,this.tap=!1,this.text=null,this.brushType=b.None,this.brushDuration=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.tupletGroup=null,this.isContinuedWhammy=!1,this.whammyBarType=L.None,this.whammyBarPoints=[],this.maxWhammyPoint=null,this.minWhammyPoint=null,this.vibrato=x.None,this.chordId=null,this.graceType=S.None,this.graceGroup=null,this.graceIndex=-1,this.pickStroke=N.None,this.tremoloSpeed=null,this.crescendo=y.None,this.displayStart=0,this.playbackStart=0,this.displayDuration=0,this.playbackDuration=0,this.dynamics=w.F,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isEffectSlurOrigin=!1,this.effectSlurOrigin=null,this.effectSlurDestination=null,this.beamingMode=O.Auto}get isLastOfVoice(){return this.index===this.voice.beats.length-1}get isLegatoDestination(){return!!this.previousBeat&&this.previousBeat.isLegatoOrigin}get isRest(){return this.isEmpty||0===this.notes.length}get isFullBarRest(){return this.isRest&&1===this.voice.beats.length&&this.duration===v.Whole}get hasTuplet(){return!(-1===this.tupletDenominator&&-1===this.tupletNumerator)&&!(1===this.tupletDenominator&&1===this.tupletNumerator)}get hasWhammyBar(){return this.whammyBarType!==L.None}get hasChord(){return!!this.chordId}get chord(){return this.chordId?this.voice.bar.staff.chords.get(this.chordId):null}get isTremolo(){return!!this.tremoloSpeed}get absoluteDisplayStart(){return this.voice.bar.masterBar.start+this.displayStart}get absolutePlaybackStart(){return this.voice.bar.masterBar.start+this.playbackStart}get isEffectSlurDestination(){return!!this.effectSlurOrigin}addWhammyBarPoint(e){this.whammyBarPoints.push(e),(!this.maxWhammyPoint||e.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=e),(!this.minWhammyPoint||e.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=e),this.whammyBarType===L.None&&(this.whammyBarType=L.Custom)}removeWhammyBarPoint(e){if(e<0||e>=this.whammyBarPoints.length)return;this.whammyBarPoints.splice(e,1);let t=this.whammyBarPoints[e];if(t===this.maxWhammyPoint){this.maxWhammyPoint=null;for(let e of this.whammyBarPoints)(!this.maxWhammyPoint||e.value>this.maxWhammyPoint.value)&&(this.maxWhammyPoint=e)}if(t===this.minWhammyPoint){this.minWhammyPoint=null;for(let e of this.whammyBarPoints)(!this.minWhammyPoint||e.value<this.minWhammyPoint.value)&&(this.minWhammyPoint=e)}}addNote(e){e.beat=this,e.index=this.notes.length,this.notes.push(e),e.isStringed&&this.noteStringLookup.set(e.string,e)}removeNote(e){let t=this.notes.indexOf(e);t>=0&&this.notes.splice(t,1)}getAutomation(e){for(let t=0,i=this.automations.length;t<i;t++){let i=this.automations[t];if(i.type===e)return i}return null}getNoteOnString(e){return this.noteStringLookup.has(e)?this.noteStringLookup.get(e):null}calculateDuration(){if(this.isFullBarRest)return this.voice.bar.masterBar.calculateDuration();let e=ke.toTicks(this.duration);return 2===this.dots?e=ke.applyDot(e,!0):1===this.dots&&(e=ke.applyDot(e,!1)),this.tupletDenominator>0&&this.tupletNumerator>=0&&(e=ke.applyTuplet(e,this.tupletNumerator,this.tupletDenominator)),e}updateDurations(){let e=this.calculateDuration();switch(this.playbackDuration=e,this.graceType){case S.BeforeBeat:case S.OnBeat:switch(this.duration){case v.Sixteenth:this.playbackDuration=ke.toTicks(v.SixtyFourth);break;case v.ThirtySecond:this.playbackDuration=ke.toTicks(v.OneHundredTwentyEighth);break;default:this.playbackDuration=ke.toTicks(v.ThirtySecond);break}this.displayDuration=0;break;case S.BendGrace:this.playbackDuration/=2,this.displayDuration=0;break;default:this.displayDuration=e;let t=this.previousBeat;t&&t.graceType===S.BendGrace&&(this.playbackDuration=t.playbackDuration);break}}finishTuplet(){let e=this.previousBeat,t=e?e.tupletGroup:null;(this.hasTuplet||this.graceType!==S.None&&t)&&(e&&t&&t.check(this)||(t=new Le(this.voice),t.check(this)),this.tupletGroup=t)}finish(e){switch(null===this.getAutomation(u.Instrument)&&0===this.index&&0===this.voice.index&&0===this.voice.bar.index&&0===this.voice.bar.staff.index&&this.automations.push(Se.buildInstrumentAutomation(!1,0,this.voice.bar.staff.track.playbackInfo.program)),this.graceType){case S.OnBeat:case S.BeforeBeat:let e=this.graceGroup.beats.length;this.duration=1===e?v.Eighth:2===e?v.Sixteenth:v.ThirtySecond;break}let i=e?e.notation.notationMode:t.NotationMode.GuitarPro,n="grad"===this.text||"grad."===this.text;n&&i===t.NotationMode.SongBook&&(this.text="");let s=!1;this.minNote=null,this.maxNote=null,this.minStringNote=null,this.maxStringNote=null;let r=0,a=!1;for(let o=0,l=this.notes.length;o<l;o++){let l=this.notes[o];if(l.dynamics=this.dynamics,l.finish(e),l.isLetRing&&(this.isLetRing=!0),l.isPalmMute&&(this.isPalmMute=!0),i===t.NotationMode.SongBook&&l.hasBend&&this.graceType!==S.BendGrace){if(!l.isTieOrigin)switch(l.bendType){case m.Bend:case m.PrebendRelease:case m.PrebendBend:s=!0;break}n||l.bendStyle===g.Gradual?(n=!0,l.bendStyle=g.Gradual,s=!1):l.bendStyle=g.Fast}l.isVisible&&(r++,(!this.minNote||l.realValue<this.minNote.realValue)&&(this.minNote=l),(!this.maxNote||l.realValue>this.maxNote.realValue)&&(this.maxNote=l),(!this.minStringNote||l.string<this.minStringNote.string)&&(this.minStringNote=l),(!this.maxStringNote||l.string>this.maxStringNote.string)&&(this.maxStringNote=l),l.hasEffectSlur&&(a=!0))}if(a&&(this.effectSlurOrigin?(this.effectSlurOrigin.effectSlurDestination=this.nextBeat,this.effectSlurOrigin.effectSlurDestination&&(this.effectSlurOrigin.effectSlurDestination.effectSlurOrigin=this.effectSlurOrigin),this.effectSlurOrigin=null):(this.isEffectSlurOrigin=!0,this.effectSlurDestination=this.nextBeat,this.effectSlurDestination&&(this.effectSlurDestination.effectSlurOrigin=this))),this.notes.length>0&&0===r&&(this.isEmpty=!0),this.isRest||this.isLetRing&&this.isPalmMute)this.isRest&&this.previousBeat&&e&&e.notation.notationMode===t.NotationMode.GuitarPro&&(this.previousBeat.isLetRing&&(this.isLetRing=!0),this.previousBeat.isPalmMute&&(this.isPalmMute=!0));else{let e=this.previousBeat;while(e&&e.isRest)this.isLetRing||(e.isLetRing=!1),this.isPalmMute||(e.isPalmMute=!1),e=e.previousBeat}if(this.whammyBarPoints.length>0&&this.whammyBarType===L.Custom){i===t.NotationMode.SongBook&&(this.whammyStyle=n?g.Gradual:g.Fast);let e=!!this.previousBeat&&this.previousBeat.hasWhammyBar;if(this.isContinuedWhammy=e,4===this.whammyBarPoints.length){let n=this.whammyBarPoints[0],s=this.whammyBarPoints[1],r=this.whammyBarPoints[2],a=this.whammyBarPoints[3];s.value===r.value?n.value<s.value&&s.value<a.value||n.value>s.value&&s.value>a.value?(0===n.value||e?this.whammyBarType=L.Dive:this.whammyBarType=L.PrediveDive,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):n.value>s.value&&s.value<a.value||n.value<s.value&&s.value>a.value?(this.whammyBarType=L.Dip,s.offset!==r.offset&&i!==t.NotationMode.SongBook||this.whammyBarPoints.splice(2,1)):n.value===s.value&&s.value===a.value?(0===n.value||e?this.whammyBarType=L.Hold:this.whammyBarType=L.Predive,this.whammyBarPoints.splice(2,1),this.whammyBarPoints.splice(1,1)):Ne.warning("Model","Unsupported whammy type detected, fallback to custom",null):Ne.warning("Model","Unsupported whammy type detected, fallback to custom",null)}}if(this.updateDurations(),s){let e=Ae.clone(this);e.id=De._globalBeatId++,e.pickStroke=N.None;for(let t=0,i=e.notes.length;t<i;t++){let i=e.notes[t],n=this.notes[t];if(i.bendType=m.None,i.maxBendPoint=null,i.bendPoints=[],i.bendStyle=g.Default,i.id=Pe.GlobalNoteId++,n.isTieOrigin&&(i.tieDestinationNoteId=n.tieDestination.id,n.tieDestination.tieOriginNoteId=i.id),n.isTieDestination&&(i.tieOriginNoteId=n.tieOrigin?n.tieOrigin.id:-1,n.tieOrigin.tieDestinationNoteId=i.id),n.hasBend&&n.isTieOrigin){let e=Pe.findTieOrigin(n);if(e&&e.hasBend){i.bendType=m.Hold;let e=n.bendPoints[n.bendPoints.length-1];i.addBendPoint(new Te(0,e.value)),i.addBendPoint(new Te(Te.MaxPosition,e.value))}}i.isTieDestination=!0}this.graceType=S.BendGrace,this.graceGroup=new Ie,this.graceGroup.addBeat(this),this.graceGroup.isComplete=!0,this.graceGroup.finish(),this.updateDurations(),this.voice.insertBeat(this,e),e.graceGroup=new Ie,e.graceGroup.addBeat(this),e.graceGroup.isComplete=!0,e.graceGroup.finish()}}isBefore(e){return this.voice.bar.index<e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index<e.index}isAfter(e){return this.voice.bar.index>e.voice.bar.index||e.voice.bar.index===this.voice.bar.index&&this.index>e.index}hasNoteOnString(e){return this.noteStringLookup.has(e)}getNoteWithRealValue(e){return this.noteValueLookup.has(e)?this.noteValueLookup.get(e):null}chain(){for(const e of this.notes)this.noteValueLookup.set(e.realValue,e),e.chain()}}De._globalBeatId=0;class Re{constructor(){this.name="",this.firstFret=1,this.strings=[],this.barreFrets=[],this.showName=!0,this.showDiagram=!0,this.showFingering=!0}}(function(e){e[e["IgnoreSpaces"]=0]="IgnoreSpaces",e[e["Begin"]=1]="Begin",e[e["Text"]=2]="Text",e[e["Comment"]=3]="Comment",e[e["Dash"]=4]="Dash"})(F||(F={}));class Ve{constructor(){this.startBar=0,this.text=""}finish(e=!1){this.chunks=[],this.parse(this.text,0,this.chunks,e)}parse(e,t,i,n){if(!e)return;let s=F.Begin,r=F.Begin,a=!1,o=0;while(t<e.length){let i=e.charCodeAt(t);switch(s){case F.IgnoreSpaces:switch(i){case Ve.CharCodeLF:case Ve.CharCodeCR:case Ve.CharCodeTab:break;case Ve.CharCodeSpace:if(!a){s=r;continue}break;default:a=!1,s=r;continue}break;case F.Begin:switch(i){case Ve.CharCodeBrackedOpen:s=F.Comment;break;default:o=t,s=F.Text;continue}break;case F.Comment:switch(i){case Ve.CharCodeBrackedClose:s=F.Begin;break}break;case F.Text:switch(i){case Ve.CharCodeDash:s=F.Dash;break;case Ve.CharCodeCR:case Ve.CharCodeLF:case Ve.CharCodeSpace:let i=e.substr(o,t-o);this.addChunk(i,n),s=F.IgnoreSpaces,r=F.Begin;break}break;case F.Dash:switch(i){case Ve.CharCodeDash:break;default:let i=e.substr(o,t-o);this.addChunk(i,n),a=!0,s=F.IgnoreSpaces,r=F.Begin;continue}break}t+=1}s===F.Text&&t!==o&&this.addChunk(e.substr(o,t-o),n)}addChunk(e,t){e=this.prepareChunk(e),(!t||e.length>0&&"-"!==e)&&this.chunks.push(e)}prepareChunk(e){let t=e.split("+").join(" "),i=t.length;while(i>0&&"_"===t.charAt(i-1))i--;return i!==t.length?t.substr(0,i):t}}Ve.CharCodeLF=10,Ve.CharCodeTab=9,Ve.CharCodeCR=13,Ve.CharCodeSpace=32,Ve.CharCodeBrackedClose=93,Ve.CharCodeBrackedOpen=91,Ve.CharCodeDash=45,function(e){e[e["Cb"]=-7]="Cb",e[e["Gb"]=-6]="Gb",e[e["Db"]=-5]="Db",e[e["Ab"]=-4]="Ab",e[e["Eb"]=-3]="Eb",e[e["Bb"]=-2]="Bb",e[e["F"]=-1]="F",e[e["C"]=0]="C",e[e["G"]=1]="G",e[e["D"]=2]="D",e[e["A"]=3]="A",e[e["E"]=4]="E",e[e["B"]=5]="B",e[e["FSharp"]=6]="FSharp",e[e["CSharp"]=7]="CSharp"}(M||(M={})),function(e){e[e["Major"]=0]="Major",e[e["Minor"]=1]="Minor"}(A||(A={})),function(e){e[e["NoTripletFeel"]=0]="NoTripletFeel",e[e["Triplet16th"]=1]="Triplet16th",e[e["Triplet8th"]=2]="Triplet8th",e[e["Dotted16th"]=3]="Dotted16th",e[e["Dotted8th"]=4]="Dotted8th",e[e["Scottish16th"]=5]="Scottish16th",e[e["Scottish8th"]=6]="Scottish8th"}(I||(I={}));class He{constructor(){this.alternateEndings=0,this.nextMasterBar=null,this.previousMasterBar=null,this.index=0,this.keySignature=M.C,this.keySignatureType=A.Major,this.isDoubleBar=!1,this.isRepeatStart=!1,this.repeatCount=0,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.timeSignatureCommon=!1,this.tripletFeel=I.NoTripletFeel,this.section=null,this.tempoAutomation=null,this.fermata=new Map,this.start=0,this.isAnacrusis=!1}get isRepeatEnd(){return this.repeatCount>0}get isSectionStart(){return!!this.section}calculateDuration(e=!0){if(this.isAnacrusis&&e){let e=0;for(let t of this.score.tracks)for(let i of t.staves){let t=this.index<i.bars.length?i.bars[this.index].calculateDuration():0;t>e&&(e=t)}return e}return this.timeSignatureNumerator*ke.valueToTicks(this.timeSignatureDenominator)}addFermata(e,t){this.fermata.set(e,t)}getFermata(e){return this.fermata.has(e.playbackStart)?this.fermata.get(e.playbackStart):null}}He.MaxAlternateEndings=8;class Ge{constructor(){this.hideDynamics=!1}}class We{constructor(){this.masterBars=[],this.openings=[],this.closings=[],this.isOpened=!1,this.isClosed=!1}addMasterBar(e){0===this.openings.length&&this.openings.push(e),this.masterBars.push(e),e.repeatGroup=this,e.isRepeatEnd?(this.closings.push(e),this.isClosed=!0,this.isOpened||(this.masterBars[0].isRepeatStart=!0,this.isOpened=!0)):this.isClosed&&(this.isClosed=!1,this.openings.push(e))}}class je{constructor(){this._noteByIdLookup=new Map,this._currentRepeatGroup=new We,this.album="",this.artist="",this.copyright="",this.instructions="",this.music="",this.notices="",this.subTitle="",this.title="",this.words="",this.tab="",this.tempo=120,this.tempoLabel="",this.masterBars=[],this.tracks=[],this.stylesheet=new Ge}rebuildRepeatGroups(){let e=new We;for(let t of this.masterBars)(t.isRepeatStart||this._currentRepeatGroup.isClosed&&t.alternateEndings<=0)&&(e=new We),e.addMasterBar(t)}addMasterBar(e){e.score=this,e.index=this.masterBars.length,0!==this.masterBars.length&&(e.previousMasterBar=this.masterBars[this.masterBars.length-1],e.previousMasterBar.nextMasterBar=e,e.start=e.previousMasterBar.start+e.previousMasterBar.calculateDuration()),(e.isRepeatStart||this._currentRepeatGroup.isClosed&&e.alternateEndings<=0)&&(this._currentRepeatGroup=new We),this._currentRepeatGroup.addMasterBar(e),this.masterBars.push(e)}addTrack(e){e.score=this,e.index=this.tracks.length,this.tracks.push(e)}finish(e){this._noteByIdLookup.clear();for(let t=0,i=this.tracks.length;t<i;t++)this.tracks[t].finish(e)}registerNote(e){this._noteByIdLookup.set(e.id,e)}getNoteById(e){return this._noteByIdLookup.has(e)?this._noteByIdLookup.get(e):null}}class $e{constructor(){this.marker="",this.text=""}}class ze{constructor(){this.volume=15,this.balance=8,this.port=1,this.program=0,this.primaryChannel=0,this.secondaryChannel=0,this.isMute=!1,this.isSolo=!1}}class Ue{constructor(e="",t=null,i=!1){this.isStandard=i,this.name=e,this.tunings=null!==t&&void 0!==t?t:[]}static getTextForTuning(e,t){let i=Ue.getTextPartsForTuning(e);return t?i.join(""):i[0]}static getTextPartsForTuning(e,t=-1){let i=e/12|0,n=e%12,s=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"];return[s[n],(i+t).toString()]}static getDefaultTuningFor(e){return Ue._defaultTunings.has(e)?Ue._defaultTunings.get(e):null}static getPresetsFor(e){switch(e){case 7:return Ue._sevenStrings;case 6:return Ue._sixStrings;case 5:return Ue._fiveStrings;case 4:return Ue._fourStrings}return[]}static initialize(){Ue._defaultTunings.set(7,new Ue("Guitar 7 strings",[64,59,55,50,45,40,35],!0)),Ue._sevenStrings.push(Ue._defaultTunings.get(7)),Ue._defaultTunings.set(6,new Ue("Guitar Standard Tuning",[64,59,55,50,45,40],!0)),Ue._sixStrings.push(Ue._defaultTunings.get(6)),Ue._sixStrings.push(new Ue("Guitar Tune down  step",[63,58,54,49,44,39],!1)),Ue._sixStrings.push(new Ue("Guitar Tune down 1 step",[62,57,53,48,43,38],!1)),Ue._sixStrings.push(new Ue("Guitar Tune down 2 step",[60,55,51,46,41,36],!1)),Ue._sixStrings.push(new Ue("Guitar Dropped D Tuning",[64,59,55,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Dropped D Tuning variant",[64,57,55,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Double Dropped D Tuning",[62,59,55,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Dropped E Tuning",[66,61,57,52,47,40],!1)),Ue._sixStrings.push(new Ue("Guitar Dropped C Tuning",[62,57,53,48,43,36],!1)),Ue._sixStrings.push(new Ue("Guitar Open C Tuning",[64,60,55,48,43,36],!1)),Ue._sixStrings.push(new Ue("Guitar Open Cm Tuning",[63,60,55,48,43,36],!1)),Ue._sixStrings.push(new Ue("Guitar Open C6 Tuning",[64,57,55,48,43,36],!1)),Ue._sixStrings.push(new Ue("Guitar Open Cmaj7 Tuning",[64,59,55,52,43,36],!1)),Ue._sixStrings.push(new Ue("Guitar Open D Tuning",[62,57,54,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open Dm Tuning",[62,57,53,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open D5 Tuning",[62,57,50,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open D6 Tuning",[62,59,54,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open Dsus4 Tuning",[62,57,55,50,45,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open E Tuning",[64,59,56,52,47,40],!1)),Ue._sixStrings.push(new Ue("Guitar Open Em Tuning",[64,59,55,52,47,40],!1)),Ue._sixStrings.push(new Ue("Guitar Open Esus11 Tuning",[64,59,55,52,45,40],!1)),Ue._sixStrings.push(new Ue("Guitar Open F Tuning",[65,60,53,48,45,41],!1)),Ue._sixStrings.push(new Ue("Guitar Open G Tuning",[62,59,55,50,43,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open Gm Tuning",[62,58,55,50,43,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open G6 Tuning",[64,59,55,50,43,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open Gsus4 Tuning",[62,60,55,50,43,38],!1)),Ue._sixStrings.push(new Ue("Guitar Open A Tuning",[64,61,57,52,45,40],!1)),Ue._sixStrings.push(new Ue("Guitar Open Am Tuning",[64,60,57,52,45,40],!1)),Ue._sixStrings.push(new Ue("Guitar Nashville Tuning",[64,59,67,62,57,52],!1)),Ue._sixStrings.push(new Ue("Bass 6 Strings Tuning",[48,43,38,33,28,23],!1)),Ue._sixStrings.push(new Ue("Lute or Vihuela Tuning",[64,59,54,50,45,40],!1)),Ue._defaultTunings.set(5,new Ue("Bass 5 Strings Tuning",[43,38,33,28,23],!0)),Ue._fiveStrings.push(Ue._defaultTunings.get(5)),Ue._fiveStrings.push(new Ue("Banjo Dropped C Tuning",[62,59,55,48,67],!1)),Ue._fiveStrings.push(new Ue("Banjo Open D Tuning",[62,57,54,50,69],!1)),Ue._fiveStrings.push(new Ue("Banjo Open G Tuning",[62,59,55,50,67],!1)),Ue._fiveStrings.push(new Ue("Banjo G Minor Tuning",[62,58,55,50,67],!1)),Ue._fiveStrings.push(new Ue("Banjo G Modal Tuning",[62,57,55,50,67],!1)),Ue._defaultTunings.set(4,new Ue("Bass Standard Tuning",[43,38,33,28],!0)),Ue._fourStrings.push(Ue._defaultTunings.get(4)),Ue._fourStrings.push(new Ue("Bass Tune down  step",[42,37,32,27],!1)),Ue._fourStrings.push(new Ue("Bass Tune down 1 step",[41,36,31,26],!1)),Ue._fourStrings.push(new Ue("Bass Tune down 2 step",[39,34,29,24],!1)),Ue._fourStrings.push(new Ue("Bass Dropped D Tuning",[43,38,33,26],!1)),Ue._fourStrings.push(new Ue("Ukulele C Tuning",[45,40,36,43],!1)),Ue._fourStrings.push(new Ue("Ukulele G Tuning",[52,47,43,38],!1)),Ue._fourStrings.push(new Ue("Mandolin Standard Tuning",[64,57,50,43],!1)),Ue._fourStrings.push(new Ue("Mandolin or Violin Tuning",[76,69,62,55],!1)),Ue._fourStrings.push(new Ue("Viola Tuning",[69,62,55,48],!1)),Ue._fourStrings.push(new Ue("Cello Tuning",[57,50,43,36],!1))}static findTuning(e){let t=Ue.getPresetsFor(e.length);for(let i=0,n=t.length;i<n;i++){let n=t[i],s=!0;for(let t=0,i=e.length;t<i;t++)if(e[t]!==n.tunings[t]){s=!1;break}if(s)return n}return null}finish(){const e=Ue.findTuning(this.tunings);e&&(this.name=e.name,this.isStandard=e.isStandard),this.name=this.name.trim()}}Ue._sevenStrings=[],Ue._sixStrings=[],Ue._fiveStrings=[],Ue._fourStrings=[],Ue._defaultTunings=new Map,Ue.defaultAccidentals=["","#","","#","","","#","","#","","#",""],Ue.defaultSteps=["C","C","D","D","E","F","F","G","G","A","A","B"],Ue.initialize();class Xe{constructor(){this.index=0,this.bars=[],this.chords=new Map,this.capo=0,this.transpositionPitch=0,this.displayTranspositionPitch=0,this.stringTuning=new Ue("",[],!1),this.showTablature=!0,this.showStandardNotation=!0,this.isPercussion=!1,this.standardNotationLineCount=5}get tuning(){return this.stringTuning.tunings}get tuningName(){return this.stringTuning.name}get isStringed(){return this.stringTuning.tunings.length>0}finish(e){this.stringTuning.finish();for(let t=0,i=this.bars.length;t<i;t++)this.bars[t].finish(e)}addChord(e,t){t.staff=this,this.chords.set(e,t)}addBar(e){let t=this.bars;e.staff=this,e.index=t.length,t.length>0&&(e.previousBar=t[t.length-1],e.previousBar.nextBar=e),t.push(e)}}class Ye{constructor(){this.index=0,this.staves=[],this.playbackInfo=new ze,this.color=new de(200,0,0,255),this.name="",this.shortName="",this.percussionArticulations=[]}ensureStaveCount(e){while(this.staves.length<e)this.addStaff(new Xe)}addStaff(e){e.index=this.staves.length,e.track=this,this.staves.push(e)}finish(e){this.shortName||(this.shortName=this.name,this.shortName.length>Ye.ShortNameMaxLength&&(this.shortName=this.shortName.substr(0,Ye.ShortNameMaxLength)));for(let t=0,i=this.staves.length;t<i;t++)this.staves[t].finish(e)}applyLyrics(e){for(let i of e)i.finish();let t=this.staves[0];for(let i=0;i<e.length;i++){let n=e[i];if(n.startBar>=0&&n.startBar<t.bars.length){let s=t.bars[n.startBar].voices[0].beats[0];for(let t=0;t<n.chunks.length&&s;t++){while(s&&(s.isEmpty||s.isRest))s=s.nextBeat;s&&(s.lyrics||(s.lyrics=new Array(e.length)),s.lyrics[i]=n.chunks[t],s=s.nextBeat)}}}}}Ye.ShortNameMaxLength=10;class qe{constructor(){this.id=qe._globalBarId++,this.index=0,this.beats=[],this.isEmpty=!0}insertBeat(e,t){t.nextBeat=e.nextBeat,t.nextBeat&&(t.nextBeat.previousBeat=t),t.previousBeat=e,t.voice=this,e.nextBeat=t,this.beats.splice(e.index+1,0,t)}addBeat(e){e.voice=this,e.index=this.beats.length,this.beats.push(e),e.isEmpty||(this.isEmpty=!1)}chain(e){if(this.bar){if(e.index<this.beats.length-1)e.nextBeat=this.beats[e.index+1],e.nextBeat.previousBeat=e;else if(e.isLastOfVoice&&e.voice.bar.nextBar){let t=this.bar.nextBar.voices[this.index];t.beats.length>0?(e.nextBeat=t.beats[0],e.nextBeat.previousBeat=e):e.nextBeat.previousBeat=e}e.chain()}}addGraceBeat(e){if(0===this.beats.length)return void this.addBeat(e);let t=this.beats[this.beats.length-1];this.beats.splice(this.beats.length-1,1),this.addBeat(e),this.addBeat(t),this.isEmpty=!1}getBeatAtPlaybackStart(e){return this._beatLookup.has(e)?this._beatLookup.get(e):null}finish(e){this._beatLookup=new Map;let t=null;for(let s=0;s<this.beats.length;s++){let e=this.beats[s];e.index=s,this.chain(e),e.graceType===S.None?(e.graceGroup=t,t&&(t.isComplete=!0),t=null):(t||(t=new Ie),t.addBeat(e))}let i=0,n=0;for(let s=0;s<this.beats.length;s++){let t=this.beats[s];if(t.index=s,t.finish(e),t.graceType===S.None){if(t.graceGroup){const e=t.graceGroup.beats[0],i=t.graceGroup.beats[t.graceGroup.beats.length-1];if(e.graceType!==S.BendGrace){let s=i.playbackStart+i.playbackDuration-e.playbackStart;switch(e.graceType){case S.BeforeBeat:e.previousBeat?(e.previousBeat.playbackDuration-=s,n=e.previousBeat.voice==this?e.previousBeat.playbackStart+e.previousBeat.playbackDuration:-s):n=-s;for(const e of t.graceGroup.beats)this._beatLookup.delete(e.playbackStart),e.playbackStart=n,this._beatLookup.set(e.playbackStart,t),n+=e.playbackDuration;break;case S.OnBeat:t.playbackDuration-=s,n=i.voice===this?i.playbackStart+i.playbackDuration:-s;break}}}t.displayStart=i,t.playbackStart=n,t.fermata?this.bar.masterBar.addFermata(t.playbackStart,t.fermata):t.fermata=this.bar.masterBar.getFermata(t),this._beatLookup.set(t.playbackStart,t)}else t.displayStart=i,t.playbackStart=n;t.finishTuplet(),t.graceGroup&&t.graceGroup.finish(),i+=t.displayDuration,n+=t.playbackDuration}}calculateDuration(){if(this.isEmpty||0===this.beats.length)return 0;let e=this.beats[this.beats.length-1],t=this.beats[0];return e.playbackStart+e.playbackDuration-t.playbackStart}}qe._globalBarId=0;class Je{static uint16ToInt16(e){return Je._dataView.setUint16(0,e,!0),Je._dataView.getInt16(0,!0)}static int16ToUint32(e){return Je._dataView.setInt16(0,e,!0),Je._dataView.getUint32(0,!0)}static int32ToUint16(e){return Je._dataView.setInt32(0,e,!0),Je._dataView.getUint16(0,!0)}static int32ToInt16(e){return Je._dataView.setInt32(0,e,!0),Je._dataView.getInt16(0,!0)}static int32ToUint32(e){return Je._dataView.setInt32(0,e,!0),Je._dataView.getUint32(0,!0)}static uint8ToInt8(e){return Je._dataView.setUint8(0,e),Je._dataView.getInt8(0)}}Je._conversionBuffer=new ArrayBuffer(8),Je._dataView=new DataView(Je._conversionBuffer);class Qe{static readInt32BE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return t<<24|i<<16|n<<8|s}static readInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return s<<24|n<<16|i<<8|t}static readUInt32LE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return s<<24|n<<16|i<<8|t}static decodeUInt32LE(e,t){let i=e[t],n=e[t+1],s=e[t+2],r=e[t+3];return r<<24|s<<16|n<<8|i}static readUInt16LE(e){let t=e.readByte(),i=e.readByte();return Je.int32ToUint16(i<<8|t)}static readInt16LE(e){let t=e.readByte(),i=e.readByte();return Je.int32ToInt16(i<<8|t)}static readUInt32BE(e){let t=e.readByte(),i=e.readByte(),n=e.readByte(),s=e.readByte();return Je.int32ToUint32(t<<24|i<<16|n<<8|s)}static readUInt16BE(e){let t=e.readByte(),i=e.readByte();return Je.int32ToInt16(t<<8|i)}static readInt16BE(e){let t=e.readByte(),i=e.readByte();return Je.int32ToInt16(t<<8|i)}static readByteArray(e,t){let i=new Uint8Array(t);return e.read(i,0,t),i}static read8BitChars(e,t){let i=new Uint8Array(t);return e.read(i,0,i.length),Qe.toString(i,"utf-8")}static read8BitString(e){let t="",i=e.readByte();while(0!==i)t+=String.fromCharCode(i),i=e.readByte();return t}static read8BitStringLength(e,t){let i="",n=-1;for(let r=0;r<t;r++){let t=e.readByte();0===t&&-1===n&&(n=r),i+=String.fromCharCode(t)}let s=i;return n>=0?s.substr(0,n):s}static readSInt8(e){let t=e.readByte();return-256*((255&t)>>7)+(255&t)}static readInt24(e,t){let i=e[t]|e[t+1]<<8|e[t+2]<<16;return 8388608===(8388608&i)&&(i|=255<<24),i}static readInt16(e,t){return Je.int32ToInt16(e[t]|e[t+1]<<8)}static toString(e,t){let i=Qe.detectEncoding(e);i&&(t=i),t||(t="utf-8");let n=new TextDecoder(t);return n.decode(e.buffer)}static detectEncoding(e){return e.length>2&&254===e[0]&&255===e[1]?"utf-16be":e.length>2&&255===e[0]&&254===e[1]?"utf-16le":e.length>4&&0===e[0]&&0===e[1]&&254===e[2]&&255===e[3]?"utf-32be":e.length>4&&255===e[0]&&254===e[1]&&0===e[2]&&0===e[3]?"utf-32le":null}static stringToBytes(e){let t=new TextEncoder;return t.encode(e)}static writeInt32BE(e,t){e.writeByte(t>>24&255),e.writeByte(t>>16&255),e.writeByte(t>>8&255),e.writeByte(t>>0&255)}static writeInt32LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255),e.writeByte(t>>16&255),e.writeByte(t>>24&255)}static writeUInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}static writeInt16LE(e,t){e.writeByte(t>>0&255),e.writeByte(t>>8&255)}}class Ke{constructor(){this._capacity=0,this.length=0,this.position=0}get bytesWritten(){return this.position}getBuffer(){return this._buffer}static empty(){return Ke.withCapacity(0)}static withCapacity(e){let t=new Ke;return t._buffer=new Uint8Array(e),t._capacity=e,t}static fromBuffer(e){let t=new Ke;return t._buffer=e,t.length=e.length,t._capacity=t.length,t}static fromString(e){let t=Qe.stringToBytes(e);return Ke.fromBuffer(t)}reset(){this.position=0}skip(e){this.position+=e}setCapacity(e){if(e!==this._capacity){if(e>0){let t=new Uint8Array(e);this.length>0&&t.set(this._buffer.subarray(0,0+this.length),0),this._buffer=t}this._capacity=e}}readByte(){let e=this.length-this.position;return e<=0?-1:this._buffer[this.position++]}read(e,t,i){let n=this.length-this.position;if(n>i&&(n=i),n<=0)return 0;if(n<=8){let i=n;while(--i>=0)e[t+i]=this._buffer[this.position+i]}else e.set(this._buffer.subarray(this.position,this.position+n),t);return this.position+=n,n}writeByte(e){let t=new Uint8Array(1);t[0]=e,this.write(t,0,1)}write(e,t,i){let n=this.position+i;if(n>this.length&&(n>this._capacity&&this.ensureCapacity(n),this.length=n),i<=8&&e!==this._buffer){let n=i;while(--n>=0)this._buffer[this.position+n]=e[t+n]}else{let n=Math.min(i,e.length-t);this._buffer.set(e.subarray(t,t+n),this.position)}this.position=n}ensureCapacity(e){if(e>this._capacity){let t=e;t<256&&(t=256),t<2*this._capacity&&(t=2*this._capacity),this.setCapacity(t)}}readAll(){return this.toArray()}toArray(){let e=new Uint8Array(this.length);return e.set(this._buffer.subarray(0,0+this.length),0),e}}(function(e){e[e["No"]=0]="No",e[e["Eof"]=1]="Eof",e[e["Number"]=2]="Number",e[e["DoubleDot"]=3]="DoubleDot",e[e["Dot"]=4]="Dot",e[e["String"]=5]="String",e[e["Tuning"]=6]="Tuning",e[e["LParensis"]=7]="LParensis",e[e["RParensis"]=8]="RParensis",e[e["LBrace"]=9]="LBrace",e[e["RBrace"]=10]="RBrace",e[e["Pipe"]=11]="Pipe",e[e["MetaCommand"]=12]="MetaCommand",e[e["Multiply"]=13]="Multiply",e[e["LowerThan"]=14]="LowerThan",e[e["Property"]=15]="Property"})(D||(D={}));class Ze extends n{constructor(e){super(t.AlphaTabErrorType.AlphaTex,e),this.position=0,this.nonTerm="",this.expected=D.No,this.symbol=D.No,this.symbolData=null,Object.setPrototypeOf(this,Ze.prototype)}static symbolError(e,t,i,n,s=null){let r;r=s?`MalFormed AlphaTex: @${e}: Error on block ${t}, invalid value: ${s}`:`MalFormed AlphaTex: @${e}: Error on block ${t}, expected a ${D[i]} found a ${D[n]}: '${s}'`;let a=new Ze(r);return a.position=e,a.nonTerm=t,a.expected=i,a.symbol=n,a.symbolData=s,a}static errorMessage(e,t){t="MalFormed AlphaTex: @"+e+": "+t;let i=new Ze(t);return i.position=e,i}}class et extends ve{constructor(){super(),this._trackChannel=0,this._input="",this._ch=0,this._curChPos=0,this._sy=D.No,this._syData="",this._allowNegatives=!1,this._allowTuning=!1,this._currentDuration=v.QuadrupleWhole,this._currentDynamics=w.PPP,this._currentTuplet=0,this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this.logErrors=!1}get name(){return"AlphaTex"}initFromString(e,t){this.data=Ke.empty(),this._input=e,this.settings=t}readScore(){try{if(this.data.length>0&&(this._input=Qe.toString(this.data.readAll(),this.settings.importer.encoding)),this._allowTuning=!0,this._lyrics=new Map,this.createDefaultScore(),this._curChPos=0,this._currentDuration=v.Quarter,this._currentDynamics=w.F,this._currentTuplet=1,this._ch=this.nextChar(),this._sy=this.newSy(),this._sy===D.LowerThan)throw new we("Unknown start sign <");this.score(),this.consolidate(),this._score.finish(this.settings),this._score.rebuildRepeatGroups();for(const[e,t]of this._lyrics)this._score.tracks[e].applyLyrics(t);return this._score}catch(e){throw e instanceof Ze?new we(e.message):e}}consolidate(){for(let e of this._score.tracks)for(let t of e.staves)while(t.bars.length<this._score.masterBars.length){let e=this.newBar(t),i=new De;i.isEmpty=!0,e.voices[0].addBeat(i)}}error(e,t,i=!0){let n;throw n=i?Ze.symbolError(this._curChPos,e,t,this._sy,null):Ze.symbolError(this._curChPos,e,t,t,this._syData),this.logErrors&&Ne.error(this.name,n.message),n}errorMessage(e){let t=Ze.errorMessage(this._curChPos,e);throw this.logErrors&&Ne.error(this.name,t.message),t}createDefaultScore(){this._score=new je,this._score.tempo=120,this._score.tempoLabel="",this.newTrack()}newTrack(){this._currentTrack=new Ye,this._currentTrack.ensureStaveCount(1),this._currentTrack.playbackInfo.program=25,this._currentTrack.playbackInfo.primaryChannel=this._trackChannel++,this._currentTrack.playbackInfo.secondaryChannel=this._trackChannel++,this._currentStaff=this._currentTrack.staves[0],this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=Ue.getDefaultTuningFor(6).tunings,this._score.addTrack(this._currentTrack),this._lyrics.set(this._currentTrack.index,[]),this._currentDynamics=w.F}parseClefFromString(e){switch(e.toLowerCase()){case"g2":case"treble":return d.G2;case"f4":case"bass":return d.F4;case"c3":case"tenor":return d.C3;case"c4":case"alto":return d.C4;case"n":case"neutral":return d.Neutral;default:return d.G2}}parseClefFromInt(e){switch(e){case 43:return d.G2;case 65:return d.F4;case 48:return d.C3;case 60:return d.C4;default:return d.G2}}parseTripletFeelFromString(e){switch(e.toLowerCase()){case"no":case"none":return I.NoTripletFeel;case"t16":case"triplet-16th":return I.Triplet16th;case"t8":case"triplet-8th":return I.Triplet8th;case"d16":case"dotted-16th":return I.Dotted16th;case"d8":case"dotted-8th":return I.Dotted8th;case"s16":case"scottish-16th":return I.Scottish16th;case"s8":case"scottish-8th":return I.Scottish8th;default:return I.NoTripletFeel}}parseTripletFeelFromInt(e){switch(e){case 0:return I.NoTripletFeel;case 1:return I.Triplet16th;case 2:return I.Triplet8th;case 3:return I.Dotted16th;case 4:return I.Dotted8th;case 5:return I.Scottish16th;case 6:return I.Scottish8th;default:return I.NoTripletFeel}}parseKeySignature(e){switch(e.toLowerCase()){case"cb":return-7;case"gb":return-6;case"db":return-5;case"ab":return-4;case"eb":return-3;case"bb":return-2;case"f":return-1;case"c":return 0;case"g":return 1;case"d":return 2;case"a":return 3;case"e":return 4;case"b":return 5;case"f#":return 6;case"c#":return 7;default:return 0}}nextChar(){return this._curChPos<this._input.length?this._ch=this._input.charCodeAt(this._curChPos++):this._ch=0,this._ch}newSy(){this._sy=D.No;do{if(this._ch===et.Eof)this._sy=D.Eof;else if(32===this._ch||11===this._ch||13===this._ch||10===this._ch||9===this._ch)this._ch=this.nextChar();else if(47===this._ch)if(this._ch=this.nextChar(),47===this._ch)while(13!==this._ch&&10!==this._ch&&this._ch!==et.Eof)this._ch=this.nextChar();else if(42===this._ch)while(0!==this._ch)if(42===this._ch){if(this._ch=this.nextChar(),47===this._ch){this._ch=this.nextChar();break}}else this._ch=this.nextChar();else this.error("symbol",D.String,!1);else if(34===this._ch||39===this._ch){let e=this._ch;this._ch=this.nextChar();let t="";this._sy=D.String;while(this._ch!==e&&this._ch!==et.Eof)t+=String.fromCharCode(this._ch),this._ch=this.nextChar();this._syData=t,this._ch=this.nextChar()}else if(45===this._ch)if(this._allowNegatives&&this.isDigit(this._ch)){let e=this.readNumber();this._sy=D.Number,this._syData=e}else this._sy=D.String,this._syData=this.readName();else if(46===this._ch)this._sy=D.Dot,this._ch=this.nextChar();else if(58===this._ch)this._sy=D.DoubleDot,this._ch=this.nextChar();else if(40===this._ch)this._sy=D.LParensis,this._ch=this.nextChar();else if(92===this._ch){this._ch=this.nextChar();let e=this.readName();this._sy=D.MetaCommand,this._syData=e}else if(41===this._ch)this._sy=D.RParensis,this._ch=this.nextChar();else if(123===this._ch)this._sy=D.LBrace,this._ch=this.nextChar();else if(125===this._ch)this._sy=D.RBrace,this._ch=this.nextChar();else if(124===this._ch)this._sy=D.Pipe,this._ch=this.nextChar();else if(42===this._ch)this._sy=D.Multiply,this._ch=this.nextChar();else if(60===this._ch)this._sy=D.LowerThan,this._ch=this.nextChar();else if(this.isDigit(this._ch)){let e=this.readNumber();this._sy=D.Number,this._syData=e}else if(et.isLetter(this._ch)){let e=this.readName(),t=this._allowTuning?ue.parseTuning(e):null;t?(this._sy=D.Tuning,this._syData=t):(this._sy=D.String,this._syData=e)}else this.error("symbol",D.String,!1)}while(this._sy===D.No);return this._sy}static isLetter(e){return!et.isTerminal(e)&&(e>=33&&e<=47||e>=58&&e<=126||e>128)}static isTerminal(e){return 46===e||123===e||125===e||91===e||93===e||40===e||41===e||124===e||39===e||34===e||92===e}isDigit(e){return e>=48&&e<=57||45===e&&this._allowNegatives}readName(){let e="";do{e+=String.fromCharCode(this._ch),this._ch=this.nextChar()}while(et.isLetter(this._ch)||this.isDigit(this._ch)||35===this._ch);return e}readNumber(){let e="";do{e+=String.fromCharCode(this._ch),this._ch=this.nextChar()}while(this.isDigit(this._ch));return parseInt(e)}score(){if(this._sy===D.Eof)throw new we("Unexpected end of file");const e=this.metaData(),t=this.bars();if(!e&&!t)throw new we("No alphaTex data found")}metaData(){let e=!1,t=!0;while(this._sy===D.MetaCommand&&t){let i=this._syData.toLowerCase();switch(i){case"title":this._sy=this.newSy(),this._sy===D.String?this._score.title=this._syData:this.error("title",D.String,!0),this._sy=this.newSy(),e=!0;break;case"subtitle":this._sy=this.newSy(),this._sy===D.String?this._score.subTitle=this._syData:this.error("subtitle",D.String,!0),this._sy=this.newSy(),e=!0;break;case"artist":this._sy=this.newSy(),this._sy===D.String?this._score.artist=this._syData:this.error("artist",D.String,!0),this._sy=this.newSy(),e=!0;break;case"album":this._sy=this.newSy(),this._sy===D.String?this._score.album=this._syData:this.error("album",D.String,!0),this._sy=this.newSy(),e=!0;break;case"words":this._sy=this.newSy(),this._sy===D.String?this._score.words=this._syData:this.error("words",D.String,!0),this._sy=this.newSy(),e=!0;break;case"music":this._sy=this.newSy(),this._sy===D.String?this._score.music=this._syData:this.error("music",D.String,!0),this._sy=this.newSy(),e=!0;break;case"copyright":this._sy=this.newSy(),this._sy===D.String?this._score.copyright=this._syData:this.error("copyright",D.String,!0),this._sy=this.newSy(),e=!0;break;case"tempo":this._sy=this.newSy(),this._sy===D.Number?this._score.tempo=this._syData:this.error("tempo",D.Number,!0),this._sy=this.newSy(),e=!0;break;default:this.handleStaffMeta()?e=!0:e?this.error("metaDataTags",D.String,!1):t=!1;break}}return e?(this._sy!==D.Dot&&this.error("song",D.Dot,!0),this._sy=this.newSy()):this._sy===D.Dot&&(this._sy=this.newSy()),e}handleStaffMeta(){let e=this._syData.toLowerCase();switch(e){case"capo":return this._sy=this.newSy(),this._sy===D.Number?this._currentStaff.capo=this._syData:this.error("capo",D.Number,!0),this._sy=this.newSy(),!0;case"tuning":this._sy=this.newSy();let e=this._currentStaff.tuning.length;switch(this._staffHasExplicitTuning=!0,this._staffTuningApplied=!1,this._sy){case D.String:let e=this._syData.toLowerCase();"piano"===e||"none"===e||"voice"===e?(this._currentStaff.stringTuning.tunings=[],this._currentStaff.displayTranspositionPitch=0):this.error("tuning",D.Tuning,!0),this._sy=this.newSy();break;case D.Tuning:let t=[];do{let e=this._syData;t.push(e.realValue),this._sy=this.newSy()}while(this._sy===D.Tuning);this._currentStaff.stringTuning.tunings=t;break;default:this.error("tuning",D.Tuning,!0);break}return e!==this._currentStaff.tuning.length&&this._currentStaff.chords.size>0&&this.errorMessage("Tuning must be defined before any chord"),!0;case"instrument":if(this._sy=this.newSy(),this._staffTuningApplied=!1,this._sy===D.Number){let e=this._syData;e>=0&&e<=128?this._currentTrack.playbackInfo.program=this._syData:this.error("instrument",D.Number,!1)}else if(this._sy===D.String){let e=this._syData.toLowerCase();this._currentTrack.playbackInfo.program=r.getValue(e)}else this.error("instrument",D.Number,!0);return this._sy=this.newSy(),!0;case"lyrics":this._sy=this.newSy();let t=new Ve;return t.startBar=0,t.text="",this._sy===D.Number&&(t.startBar=this._syData,this._sy=this.newSy()),this._sy===D.String?(t.text=this._syData,this._sy=this.newSy()):this.error("lyrics",D.String,!0),this._lyrics.get(this._currentTrack.index).push(t),!0;case"chord":this._sy=this.newSy();let i=new Re;this.chordProperties(i),this._sy===D.String?(i.name=this._syData,this._sy=this.newSy()):this.error("chord-name",D.Number,!0);for(let n=0;n<this._currentStaff.tuning.length;n++)this._sy===D.Number?i.strings.push(this._syData):this._sy===D.String&&"x"===this._syData.toLowerCase()&&i.strings.push(-1),this._sy=this.newSy();return this._currentStaff.addChord(this.getChordId(this._currentStaff,i.name),i),!0;default:return!1}}chordProperties(e){if(this._sy===D.LBrace){this._sy=this.newSy();while(this._sy===D.String)switch(this._syData.toLowerCase()){case"firstfret":switch(this._sy=this.newSy(),this._sy){case D.Number:e.firstFret=this._syData;break;default:this.error("chord-firstfret",D.Number,!0);break}this._sy=this.newSy();break;case"showdiagram":switch(this._sy=this.newSy(),this._sy){case D.String:e.showDiagram="false"!==this._syData.toLowerCase();break;case D.Number:e.showDiagram=0!==this._syData;break;default:this.error("chord-showdiagram",D.String,!0);break}this._sy=this.newSy();break;case"showfingering":switch(this._sy=this.newSy(),this._sy){case D.String:e.showDiagram="false"!==this._syData.toLowerCase();break;case D.Number:e.showFingering=0!==this._syData;break;default:this.error("chord-showfingering",D.String,!0);break}this._sy=this.newSy();break;case"showname":switch(this._sy=this.newSy(),this._sy){case D.String:e.showName="false"!==this._syData.toLowerCase();break;case D.Number:e.showName=0!==this._syData;break;default:this.error("chord-showname",D.String,!0);break}this._sy=this.newSy();break;case"barre":this._sy=this.newSy();while(this._sy===D.Number)e.barreFrets.push(this._syData),this._sy=this.newSy();break;default:this.error("chord-properties",D.String,!1);break}this._sy!==D.RBrace&&this.error("chord-properties",D.RBrace,!0),this._sy=this.newSy()}}bars(){let e=this.bar();while(this._sy!==D.Eof)if(this._sy===D.Pipe)this._sy=this.newSy(),this.bar();else{if(this._sy!==D.MetaCommand)break;this.bar()}return e}trackStaffMeta(){let e=!1;if(this._sy===D.MetaCommand){e=!0;let t=this._syData.toLowerCase();"track"===t&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._score.masterBars.length>0&&this.newTrack(),this._sy===D.String&&(this._currentTrack.name=this._syData,this._sy=this.newSy()),this._sy===D.String&&(this._currentTrack.shortName=this._syData,this._sy=this.newSy())),this._sy===D.MetaCommand&&(t=this._syData.toLowerCase(),"staff"===t&&(this._staffHasExplicitTuning=!1,this._staffTuningApplied=!1,this._sy=this.newSy(),this._currentTrack.staves[0].bars.length>0&&(this._currentTrack.ensureStaveCount(this._currentTrack.staves.length+1),this._currentStaff=this._currentTrack.staves[this._currentTrack.staves.length-1],this._currentDynamics=w.F),this.staffProperties()))}return e}staffProperties(){if(this._sy!==D.LBrace)return;this._sy=this.newSy();let e=!1,t=!1;while(this._sy===D.String)switch(this._syData.toLowerCase()){case"score":e=!0,this._sy=this.newSy();break;case"tabs":t=!0,this._sy=this.newSy();break;default:this.error("staff-properties",D.String,!1);break}(e||t)&&(this._currentStaff.showStandardNotation=e,this._currentStaff.showTablature=t),this._sy!==D.RBrace&&this.error("staff-properties",D.RBrace,!0),this._sy=this.newSy()}bar(){const e=this.trackStaffMeta();let t=this.newBar(this._currentStaff);if(this._currentStaff.bars.length>this._score.masterBars.length){let e=new He;this._score.addMasterBar(e),e.index>0&&(e.keySignature=e.previousMasterBar.keySignature,e.keySignatureType=e.previousMasterBar.keySignatureType,e.timeSignatureDenominator=e.previousMasterBar.timeSignatureDenominator,e.timeSignatureNumerator=e.previousMasterBar.timeSignatureNumerator,e.tripletFeel=e.previousMasterBar.tripletFeel)}const i=this.barMeta(t);if(!this._staffTuningApplied&&!this._staffHasExplicitTuning){const e=this._currentTrack.playbackInfo.program;this._currentStaff.displayTranspositionPitch=0,this._currentStaff.stringTuning.tunings=[],15==e||e>=24&&e<=31?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=Ue.getDefaultTuningFor(6).tunings):e>=32&&e<=39?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):40==e||44==e||45==e||48==e||49==e||50==e||51==e?this._currentStaff.stringTuning.tunings=[52,57,50,43]:41==e?this._currentStaff.stringTuning.tunings=[57,50,43,36]:42==e?this._currentStaff.stringTuning.tunings=[45,38,31,24]:43==e?(this._currentStaff.displayTranspositionPitch=-12,this._currentStaff.stringTuning.tunings=[43,38,33,28]):105==e?this._currentStaff.stringTuning.tunings=[50,47,43,38,55]:106==e?this._currentStaff.stringTuning.tunings=[57,52,45]:107==e?this._currentStaff.stringTuning.tunings=[52,45,38,31]:110==e&&(this._currentStaff.stringTuning.tunings=[64,57,50,43]),this._staffTuningApplied=!0}let n=!1,s=t.voices[0];while(this._sy!==D.Pipe&&this._sy!==D.Eof){if(!this.beat(s))break;n=!0}if(0===s.beats.length){let e=new De;e.isEmpty=!0,s.addBeat(e)}return e||i||n}newBar(e){let t=new _e;e.addBar(t),t.index>0&&(t.clef=t.previousBar.clef);let i=new qe;return t.addVoice(i),t}beat(e){this.beatDuration();let t=new De;if(e.addBeat(t),this._sy===D.LParensis){this._sy=this.newSy(),this.note(t);while(this._sy!==D.RParensis&&this._sy!==D.Eof)if(!this.note(t))break;this._sy!==D.RParensis&&this.error("note-list",D.RParensis,!0),this._sy=this.newSy()}else if(this._sy===D.String&&"r"===this._syData.toLowerCase())this._sy=this.newSy();else if(!this.note(t))return e.beats.splice(e.beats.length-1,1),!1;this._sy===D.Dot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==D.Number&&this.error("duration",D.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._sy=this.newSy()),t.duration=this._currentDuration,t.dynamics=this._currentDynamics,1===this._currentTuplet||t.hasTuplet||this.applyTuplet(t,this._currentTuplet);let i=1;this._sy===D.Multiply&&(this._sy=this.newSy(),this._sy!==D.Number?this.error("multiplier",D.Number,!0):i=this._syData,this._sy=this.newSy()),this.beatEffects(t);for(let n=0;n<i-1;n++)e.addBeat(Ae.clone(t));return!0}beatDuration(){if(this._sy===D.DoubleDot&&(this._allowNegatives=!0,this._sy=this.newSy(),this._allowNegatives=!1,this._sy!==D.Number&&this.error("duration",D.Number,!0),this._currentDuration=this.parseDuration(this._syData),this._currentTuplet=1,this._sy=this.newSy(),this._sy===D.LBrace)){this._sy=this.newSy();while(this._sy===D.String){let e=this._syData.toLowerCase();switch(e){case"tu":this._sy=this.newSy(),this._sy!==D.Number&&this.error("duration-tuplet",D.Number,!0),this._currentTuplet=this._syData,this._sy=this.newSy();break;default:this.error("beat-duration",D.String,!1);break}}this._sy!==D.RBrace&&this.error("beat-duration",D.RBrace,!0),this._sy=this.newSy()}}beatEffects(e){if(this._sy===D.LBrace){this._sy=this.newSy();while(this._sy===D.String)this._syData=this._syData.toLowerCase(),this.applyBeatEffect(e)||this.error("beat-effects",D.String,!1);this._sy!==D.RBrace&&this.error("beat-effects",D.RBrace,!0),this._sy=this.newSy()}}applyBeatEffect(e){let t=this._syData.toLowerCase();if("f"===t)return e.fadeIn=!0,this._sy=this.newSy(),!0;if("v"===t)return e.vibrato=x.Slight,this._sy=this.newSy(),!0;if("s"===t)return e.slap=!0,this._sy=this.newSy(),!0;if("p"===t)return e.pop=!0,this._sy=this.newSy(),!0;if("tt"===t)return e.tap=!0,this._sy=this.newSy(),!0;if("dd"===t)return e.dots=2,this._sy=this.newSy(),!0;if("d"===t)return e.dots=1,this._sy=this.newSy(),!0;if("su"===t)return e.pickStroke=N.Up,this._sy=this.newSy(),!0;if("sd"===t)return e.pickStroke=N.Down,this._sy=this.newSy(),!0;if("tu"===t)return this._sy=this.newSy(),this._sy!==D.Number?(this.error("tuplet",D.Number,!0),!1):(this.applyTuplet(e,this._syData),this._sy=this.newSy(),!0);if("tb"===t||"tbe"===t){let i="tbe"===t;if(this._sy=this.newSy(),this._sy!==D.LParensis)return this.error("tremolobar-effect",D.LParensis,!0),!1;this._allowNegatives=!0,this._sy=this.newSy();while(this._sy!==D.RParensis&&this._sy!==D.Eof){let t=0,n=0;if(i){if(this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;if(t=this._syData,this._sy=this.newSy(),this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;n=this._syData}else{if(this._sy!==D.Number)return this.error("tremolobar-effect",D.Number,!0),!1;t=0,n=this._syData}e.addWhammyBarPoint(new Te(t,n)),this._sy=this.newSy()}while(e.whammyBarPoints.length>60)e.removeWhammyBarPoint(e.whammyBarPoints.length-1);if(i)e.whammyBarPoints.sort((e,t)=>e.offset-t.offset);else{let t=e.whammyBarPoints.length,i=60/t|0,n=0;while(n<t)e.whammyBarPoints[n].offset=Math.min(60,n*i),n++}return this._allowNegatives=!1,this._sy!==D.RParensis?(this.error("tremolobar-effect",D.RParensis,!0),!1):(this._sy=this.newSy(),!0)}if("ch"===t){this._sy=this.newSy();let t=this._syData,i=this.getChordId(this._currentStaff,t);if(!this._currentStaff.chords.has(i)){let e=new Re;e.showDiagram=!1,e.name=t,this._currentStaff.addChord(i,e)}return e.chordId=i,this._sy=this.newSy(),!0}if("gr"===t)return this._sy=this.newSy(),"ob"===this._syData.toLowerCase()?(e.graceType=S.OnBeat,this._sy=this.newSy()):"b"===this._syData.toLowerCase()?(e.graceType=S.BendGrace,this._sy=this.newSy()):e.graceType=S.BeforeBeat,!0;if("dy"===t){switch(this.newSy(),this._syData.toLowerCase()){case"ppp":e.dynamics=w.PPP;break;case"pp":e.dynamics=w.PP;break;case"p":e.dynamics=w.P;break;case"mp":e.dynamics=w.MP;break;case"mf":e.dynamics=w.MF;break;case"f":e.dynamics=w.F;break;case"ff":e.dynamics=w.FF;break;case"fff":e.dynamics=w.FFF;break}return this._currentDynamics=e.dynamics,this.newSy(),!0}if("cre"===t)return e.crescendo=y.Crescendo,this.newSy(),!0;if("dec"===t)return e.crescendo=y.Decrescendo,this.newSy(),!0;if("tp"===t){this._sy=this.newSy();let t=v.Eighth;if(this._sy===D.Number){switch(this._syData){case 8:t=v.Eighth;break;case 16:t=v.Sixteenth;break;case 32:t=v.ThirtySecond;break;default:t=v.Eighth;break}this._sy=this.newSy()}return e.tremoloSpeed=t,!0}return!1}getChordId(e,t){return t.toLowerCase()+e.index+e.track.index}applyTuplet(e,t){switch(t){case 3:e.tupletNumerator=3,e.tupletDenominator=2;break;case 5:e.tupletNumerator=5,e.tupletDenominator=4;break;case 6:e.tupletNumerator=6,e.tupletDenominator=4;break;case 7:e.tupletNumerator=7,e.tupletDenominator=4;break;case 9:e.tupletNumerator=9,e.tupletDenominator=8;break;case 10:e.tupletNumerator=10,e.tupletDenominator=8;break;case 11:e.tupletNumerator=11,e.tupletDenominator=8;break;case 12:e.tupletNumerator=12,e.tupletDenominator=8;break;default:e.tupletNumerator=1,e.tupletDenominator=1;break}}note(e){let t=!1,i=!1,n=-1,s=-1,r=-1;switch(this._sy){case D.Number:n=this._syData;break;case D.String:t="x"===this._syData,i="-"===this._syData,i||t?n=0:this.error("note-fret",D.Number,!0);break;case D.Tuning:let e=this._syData;s=e.octave,r=e.noteValue;break;default:return!1}this._sy=this.newSy();let a=-1===s&&this._currentStaff.tuning.length>0,o=-1;a&&(this._sy!==D.Dot&&this.error("note",D.Dot,!0),this._sy=this.newSy(),this._sy!==D.Number&&this.error("note-string",D.Number,!0),o=this._syData,(o<1||o>this._currentStaff.tuning.length)&&this.error("note-string",D.Number,!1),this._sy=this.newSy());let l=new Pe;return a?(l.string=this._currentStaff.tuning.length-(o-1),l.isDead=t,l.isTieDestination=i,i||(l.fret=n)):(l.octave=s,l.tone=r,l.isTieDestination=i),e.addNote(l),this.noteEffects(l),!0}noteEffects(e){if(this._sy===D.LBrace){this._sy=this.newSy();while(this._sy===D.String){let t=this._syData.toLowerCase();if(this._syData=t,"b"===t||"be"===t){let t="be"===this._syData;this._sy=this.newSy(),this._sy!==D.LParensis&&this.error("bend-effect",D.LParensis,!0),this._sy=this.newSy();while(this._sy!==D.RParensis&&this._sy!==D.Eof){let i=0,n=0;t?(this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),i=this._syData,this._sy=this.newSy(),this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),n=this._syData):(this._sy!==D.Number&&this.error("bend-effect-value",D.Number,!0),n=this._syData),e.addBendPoint(new Te(i,n)),this._sy=this.newSy()}while(e.bendPoints.length>60)e.bendPoints.splice(e.bendPoints.length-1,1);if(t)e.bendPoints.sort((e,t)=>e.offset-t.offset);else{let t=e.bendPoints.length,i=60/(t-1)|0,n=0;while(n<t)e.bendPoints[n].offset=Math.min(60,n*i),n++}this._sy!==D.RParensis&&this.error("bend-effect",D.RParensis,!0),this._sy=this.newSy()}else if("nh"===t)e.harmonicType=_.Natural,this._sy=this.newSy();else if("ah"===t)e.harmonicType=_.Artificial,this._sy=this.newSy();else if("th"===t)e.harmonicType=_.Tap,this._sy=this.newSy();else if("ph"===t)e.harmonicType=_.Pinch,this._sy=this.newSy();else if("sh"===t)e.harmonicType=_.Semi,this._sy=this.newSy();else if("tr"===t){this._sy=this.newSy(),this._sy!==D.Number&&this.error("trill-effect",D.Number,!0);let t=this._syData;this._sy=this.newSy();let i=v.Sixteenth;if(this._sy===D.Number){switch(this._syData){case 16:i=v.Sixteenth;break;case 32:i=v.ThirtySecond;break;case 64:i=v.SixtyFourth;break;default:i=v.Sixteenth;break}this._sy=this.newSy()}e.trillValue=t+e.stringTuning,e.trillSpeed=i}else if("v"===t)this._sy=this.newSy(),e.vibrato=x.Slight;else if("sl"===t)this._sy=this.newSy(),e.slideOutType=B.Legato;else if("ss"===t)this._sy=this.newSy(),e.slideOutType=B.Shift;else if("sib"===t)this._sy=this.newSy(),e.slideInType=T.IntoFromBelow;else if("sia"===t)this._sy=this.newSy(),e.slideInType=T.IntoFromAbove;else if("sou"===t)this._sy=this.newSy(),e.slideOutType=B.OutUp;else if("sod"===t)this._sy=this.newSy(),e.slideOutType=B.OutDown;else if("psd"===t)this._sy=this.newSy(),e.slideOutType=B.PickSlideDown;else if("psu"===t)this._sy=this.newSy(),e.slideOutType=B.PickSlideUp;else if("h"===t)this._sy=this.newSy(),e.isHammerPullOrigin=!0;else if("lht"===t)this._sy=this.newSy(),e.isLeftHandTapped=!0;else if("g"===t)this._sy=this.newSy(),e.isGhost=!0;else if("ac"===t)this._sy=this.newSy(),e.accentuated=c.Normal;else if("hac"===t)this._sy=this.newSy(),e.accentuated=c.Heavy;else if("pm"===t)this._sy=this.newSy(),e.isPalmMute=!0;else if("st"===t)this._sy=this.newSy(),e.isStaccato=!0;else if("lr"===t)this._sy=this.newSy(),e.isLetRing=!0;else if("x"===t)this._sy=this.newSy(),e.fret=0,e.isDead=!0;else if("-"===t||"t"===t)this._sy=this.newSy(),e.isTieDestination=!0;else if("lf"===t){this._sy=this.newSy();let t=a.Thumb;this._sy===D.Number&&(t=this.toFinger(this._syData),this._sy=this.newSy()),e.leftHandFinger=t}else if("rf"===t){this._sy=this.newSy();let t=a.Thumb;this._sy===D.Number&&(t=this.toFinger(this._syData),this._sy=this.newSy()),e.rightHandFinger=t}else this.applyBeatEffect(e.beat)||this.error(t,D.String,!1)}this._sy!==D.RBrace&&this.error("note-effect",D.RBrace,!1),this._sy=this.newSy()}}toFinger(e){switch(e){case 1:return a.Thumb;case 2:return a.IndexFinger;case 3:return a.MiddleFinger;case 4:return a.AnnularFinger;case 5:return a.LittleFinger}return a.Thumb}parseDuration(e){switch(e){case-4:return v.QuadrupleWhole;case-2:return v.DoubleWhole;case 1:return v.Whole;case 2:return v.Half;case 4:return v.Quarter;case 8:return v.Eighth;case 16:return v.Sixteenth;case 32:return v.ThirtySecond;case 64:return v.SixtyFourth;case 128:return v.OneHundredTwentyEighth;default:return v.Quarter}}barMeta(e){let t=!1,i=e.masterBar;while(this._sy===D.MetaCommand){t=!0;let n=this._syData.toLowerCase();if("ts"===n)this._sy=this.newSy(),this._sy!==D.Number&&this.error("timesignature-numerator",D.Number,!0),i.timeSignatureNumerator=this._syData,this._sy=this.newSy(),this._sy!==D.Number&&this.error("timesignature-denominator",D.Number,!0),i.timeSignatureDenominator=this._syData,this._sy=this.newSy();else if("ro"===n)i.isRepeatStart=!0,this._sy=this.newSy();else if("rc"===n)this._sy=this.newSy(),this._sy!==D.Number&&this.error("repeatclose",D.Number,!0),i.repeatCount=this._syData,this._sy=this.newSy();else if("ks"===n)this._sy=this.newSy(),this._sy!==D.String&&this.error("keysignature",D.String,!0),i.keySignature=this.parseKeySignature(this._syData.toLowerCase()),this._sy=this.newSy();else if("clef"===n){switch(this._sy=this.newSy(),this._sy){case D.String:e.clef=this.parseClefFromString(this._syData.toLowerCase());break;case D.Number:e.clef=this.parseClefFromInt(this._syData);break;case D.Tuning:let t=this._syData;e.clef=this.parseClefFromInt(t.realValue);break;default:this.error("clef",D.String,!0);break}this._sy=this.newSy()}else if("tempo"===n){this._sy=this.newSy(),this._sy!==D.Number&&this.error("tempo",D.Number,!0);let e=new Se;e.isLinear=!1,e.type=u.Tempo,e.value=this._syData,i.tempoAutomation=e,this._sy=this.newSy()}else if("section"===n){this._sy=this.newSy(),this._sy!==D.String&&this.error("section",D.String,!0);let e=this._syData;this._sy=this.newSy();let t="";this._sy===D.String&&(t=e,e=this._syData,this._sy=this.newSy());let n=new $e;n.marker=t,n.text=e,i.section=n}else if("tf"===n){switch(this._allowTuning=!1,this._sy=this.newSy(),this._allowTuning=!0,this._sy){case D.String:i.tripletFeel=this.parseTripletFeelFromString(this._syData.toLowerCase());break;case D.Number:i.tripletFeel=this.parseTripletFeelFromInt(this._syData);break;default:this.error("triplet-feel",D.String,!0);break}this._sy=this.newSy()}else"ac"===n?(i.isAnacrusis=!0,this._sy=this.newSy()):0===e.index&&this.handleStaffMeta()||this.error("measure-effects",D.String,!1)}if(0===i.index&&!i.tempoAutomation){let e=new Se;e.isLinear=!1,e.type=u.Tempo,e.value=this._score.tempo,i.tempoAutomation=e}return t}}et.Eof=0;class tt extends ve{constructor(){super(),this._versionNumber=0,this._globalTripletFeel=I.NoTripletFeel,this._lyricsTrack=0,this._lyrics=[],this._barCount=0,this._trackCount=0,this._playbackInfos=[],this._beatTextChunksByTrack=new Map}get name(){return"Guitar Pro 3-5"}readScore(){return this.readVersion(),this._score=new je,this.readScoreInformation(),this._versionNumber<500&&(this._globalTripletFeel=it.gpReadBool(this.data)?I.Triplet8th:I.NoTripletFeel),this._versionNumber>=400&&this.readLyrics(),this._versionNumber>=510&&this.data.skip(19),this._versionNumber>=500&&(this.readPageSetup(),this._score.tempoLabel=it.gpReadStringIntByte(this.data,this.settings.importer.encoding)),this._score.tempo=Qe.readInt32LE(this.data),this._versionNumber>=510&&it.gpReadBool(this.data),Qe.readInt32LE(this.data),this._versionNumber>=400&&this.data.readByte(),this.readPlaybackInfos(),this._versionNumber>=500&&(this.data.skip(38),this.data.skip(4)),this._barCount=Qe.readInt32LE(this.data),this._trackCount=Qe.readInt32LE(this.data),this.readMasterBars(),this.readTracks(),this.readBars(),this._score.masterBars.length>0&&(this._score.masterBars[0].tempoAutomation=Se.buildTempoAutomation(!1,0,this._score.tempo,2),this._score.masterBars[0].tempoAutomation.text=this._score.tempoLabel),this._score.finish(this.settings),this._lyrics&&this._lyricsTrack>=0&&this._score.tracks[this._lyricsTrack].applyLyrics(this._lyrics),this._score}readVersion(){let e=it.gpReadStringByteLength(this.data,30,this.settings.importer.encoding);if(!e.startsWith(tt.VersionString))throw new we("Unsupported format");e=e.substr(tt.VersionString.length+1);let t=e.indexOf(String.fromCharCode(46));this._versionNumber=100*parseInt(e.substr(0,t))+parseInt(e.substr(t+1)),Ne.debug(this.name,"Guitar Pro version "+e+" detected")}readScoreInformation(){var e;this._score.title=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.subTitle=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.artist=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.album=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.words=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.music=this._versionNumber>=500?it.gpReadStringIntUnused(this.data,this.settings.importer.encoding):this._score.words,this._score.copyright=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.tab=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding),this._score.instructions=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding);let t=Qe.readInt32LE(this.data),i="";for(let n=0;n<t;n++)n>0&&(i+="\r\n"),i+=null===(e=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding))||void 0===e?void 0:e.toString();this._score.notices=i}readLyrics(){this._lyrics=[],this._lyricsTrack=Qe.readInt32LE(this.data)-1;for(let e=0;e<5;e++){let e=new Ve;e.startBar=Qe.readInt32LE(this.data)-1,e.text=it.gpReadStringInt(this.data,this.settings.importer.encoding),this._lyrics.push(e)}}readPageSetup(){this.data.skip(30);for(let e=0;e<10;e++)it.gpReadStringIntByte(this.data,this.settings.importer.encoding)}readPlaybackInfos(){this._playbackInfos=[];for(let e=0;e<64;e++){let t=new ze;t.primaryChannel=e,t.secondaryChannel=e,t.program=Qe.readInt32LE(this.data),t.volume=this.data.readByte(),t.balance=this.data.readByte(),this.data.skip(6),this._playbackInfos.push(t)}}readMasterBars(){for(let e=0;e<this._barCount;e++)this.readMasterBar()}readMasterBar(){let e=null;this._score.masterBars.length>0&&(e=this._score.masterBars[this._score.masterBars.length-1]);let t=new He,i=this.data.readByte();if(0!==(1&i)?t.timeSignatureNumerator=this.data.readByte():e&&(t.timeSignatureNumerator=e.timeSignatureNumerator),0!==(2&i)?t.timeSignatureDenominator=this.data.readByte():e&&(t.timeSignatureDenominator=e.timeSignatureDenominator),t.isRepeatStart=0!==(4&i),0!==(8&i)&&(t.repeatCount=this.data.readByte()+(this._versionNumber>=500?0:1)),0!==(16&i))if(this._versionNumber<500){let i=e,n=0;while(i){if(i.isRepeatEnd&&i!==e)break;if(i.isRepeatStart)break;n|=i.alternateEndings,i=i.previousMasterBar}let s=0,r=this.data.readByte();for(let e=0;e<8;e++){let t=1<<e;r>e&&0===(n&t)&&(s|=t)}t.alternateEndings=s}else t.alternateEndings=this.data.readByte();if(0!==(32&i)){let e=new $e;e.text=it.gpReadStringIntByte(this.data,this.settings.importer.encoding),e.marker="",it.gpReadColor(this.data,!1),t.section=e}if(0!==(64&i)?(t.keySignature=Qe.readSInt8(this.data),t.keySignatureType=this.data.readByte()):e&&(t.keySignature=e.keySignature,t.keySignatureType=e.keySignatureType),this._versionNumber>=500&&0!==(3&i)&&this.data.skip(4),this._versionNumber>=500&&0===(16&i)&&(t.alternateEndings=this.data.readByte()),this._versionNumber>=500){let e=this.data.readByte();switch(e){case 1:t.tripletFeel=I.Triplet8th;break;case 2:t.tripletFeel=I.Triplet16th;break}this.data.readByte()}else t.tripletFeel=this._globalTripletFeel;t.isDoubleBar=0!==(128&i),this._score.addMasterBar(t)}readTracks(){for(let e=0;e<this._trackCount;e++)this.readTrack()}readTrack(){let e=new Ye;e.ensureStaveCount(1),this._score.addTrack(e);let t=e.staves[0],i=this.data.readByte();e.name=it.gpReadStringByteLength(this.data,40,this.settings.importer.encoding),0!==(1&i)&&(t.isPercussion=!0);let n=Qe.readInt32LE(this.data),s=[];for(let r=0;r<7;r++){let e=Qe.readInt32LE(this.data);n>r&&s.push(e)}t.stringTuning.tunings=s;let a=Qe.readInt32LE(this.data),o=Qe.readInt32LE(this.data)-1,l=Qe.readInt32LE(this.data)-1;if(this.data.skip(4),o>=0&&o<this._playbackInfos.length){let n=this._playbackInfos[o];n.port=a,n.isSolo=0!==(16&i),n.isMute=0!==(32&i),n.secondaryChannel=l,r.isGuitar(n.program)&&(t.displayTranspositionPitch=-12),e.playbackInfo=n}t.capo=Qe.readInt32LE(this.data),e.color=it.gpReadColor(this.data,!1),this._versionNumber>=500&&(this.data.readByte(),this.data.readByte(),this.data.skip(43)),this._versionNumber>=510&&(this.data.skip(4),it.gpReadStringIntByte(this.data,this.settings.importer.encoding),it.gpReadStringIntByte(this.data,this.settings.importer.encoding))}readBars(){for(let e=0;e<this._barCount;e++)for(let t=0;t<this._trackCount;t++)this.readBar(this._score.tracks[t])}readBar(e){let t=new _e,i=e.staves[0];i.isPercussion&&(t.clef=d.Neutral),i.addBar(t);let n=1;this._versionNumber>=500&&(this.data.readByte(),n=2);for(let s=0;s<n;s++)this.readVoice(e,t)}readVoice(e,t){let i=Qe.readInt32LE(this.data);if(0===i)return;let n=new qe;t.addVoice(n);for(let s=0;s<i;s++)this.readBeat(e,t,n)}readBeat(e,t,i){let n=new De,s=this.data.readByte();if(0!==(1&s)&&(n.dots=1),0!==(64&s)){let e=this.data.readByte();n.isEmpty=0===(2&e)}i.addBeat(n);let r=Qe.readSInt8(this.data);switch(r){case-2:n.duration=v.Whole;break;case-1:n.duration=v.Half;break;case 0:n.duration=v.Quarter;break;case 1:n.duration=v.Eighth;break;case 2:n.duration=v.Sixteenth;break;case 3:n.duration=v.ThirtySecond;break;case 4:n.duration=v.SixtyFourth;break;default:n.duration=v.Quarter;break}if(0!==(32&s))switch(n.tupletNumerator=Qe.readInt32LE(this.data),n.tupletNumerator){case 1:n.tupletDenominator=1;break;case 3:n.tupletDenominator=2;break;case 5:case 6:case 7:n.tupletDenominator=4;break;case 9:case 10:case 11:case 12:case 13:n.tupletDenominator=8;break;case 2:case 4:case 8:break;default:n.tupletNumerator=1,n.tupletDenominator=1;break}0!==(2&s)&&this.readChord(n);let a=this.settings.importer.beatTextAsLyrics&&e.index!==this._lyricsTrack;if(0!==(4&s)){const t=it.gpReadStringIntUnused(this.data,this.settings.importer.encoding);if(a){const i=new Ve;i.text=t.trim(),i.finish(!0);const n=[];for(let e=i.chunks.length-1;e>=0;e--)n.push(i.chunks[e]);this._beatTextChunksByTrack.set(e.index,n)}else n.text=t}let o=_.None;0!==(8&s)&&(o=this.readBeatEffects(n)),0!==(16&s)&&this.readMixTableChange(n);let l=this.data.readByte();for(let h=6;h>=0;h--)if(0!==(l&1<<h)&&6-h<t.staff.tuning.length){const s=this.readNote(e,t,i,n,6-h);o!==_.None&&(s.harmonicType=o,s.harmonicType===_.Natural&&(s.harmonicValue=this.deltaFretToHarmonicValue(s.fret)))}if(this._versionNumber>=500){this.data.readByte();let e=this.data.readByte();0!==(8&e)&&this.data.readByte()}a&&!n.isRest&&this._beatTextChunksByTrack.has(e.index)&&this._beatTextChunksByTrack.get(e.index).length>0&&(n.lyrics=[this._beatTextChunksByTrack.get(e.index).pop()])}readChord(e){let t=new Re,i=ue.newGuid();if(this._versionNumber>=500){this.data.skip(17),t.name=it.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=Qe.readInt32LE(this.data);for(let s=0;s<7;s++){let i=Qe.readInt32LE(this.data);s<e.voice.bar.staff.tuning.length&&t.strings.push(i)}let i=this.data.readByte(),n=new Uint8Array(5);this.data.read(n,0,n.length);for(let e=0;e<i;e++)t.barreFrets.push(n[e]);this.data.skip(26)}else if(0!==this.data.readByte())if(this._versionNumber>=400){this.data.skip(16),t.name=it.gpReadStringByteLength(this.data,21,this.settings.importer.encoding),this.data.skip(4),t.firstFret=Qe.readInt32LE(this.data);for(let s=0;s<7;s++){let i=Qe.readInt32LE(this.data);s<e.voice.bar.staff.tuning.length&&t.strings.push(i)}let i=this.data.readByte(),n=new Uint8Array(5);this.data.read(n,0,n.length);for(let e=0;e<i;e++)t.barreFrets.push(n[e]);this.data.skip(26)}else{this.data.skip(25),t.name=it.gpReadStringByteLength(this.data,34,this.settings.importer.encoding),t.firstFret=Qe.readInt32LE(this.data);for(let i=0;i<6;i++){let n=Qe.readInt32LE(this.data);i<e.voice.bar.staff.tuning.length&&t.strings.push(n)}this.data.skip(36)}else{let i=this._versionNumber>=406?7:6;if(t.name=it.gpReadStringIntByte(this.data,this.settings.importer.encoding),t.firstFret=Qe.readInt32LE(this.data),t.firstFret>0)for(let n=0;n<i;n++){let i=Qe.readInt32LE(this.data);n<e.voice.bar.staff.tuning.length&&t.strings.push(i)}}t.name&&(e.chordId=i,e.voice.bar.staff.addChord(e.chordId,t))}readBeatEffects(e){let t=this.data.readByte(),i=0;if(this._versionNumber>=400&&(i=this.data.readByte()),e.fadeIn=0!==(16&t),(this._versionNumber<400&&0!==(1&t)||0!==(2&t))&&(e.vibrato=x.Slight),e.hasRasgueado=0!==(1&i),0!==(32&t)&&this._versionNumber>=400){let t=Qe.readSInt8(this.data);switch(t){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0;break}}else if(0!==(32&t)){let t=Qe.readSInt8(this.data);switch(t){case 1:e.tap=!0;break;case 2:e.slap=!0;break;case 3:e.pop=!0;break}this.data.skip(4)}if(0!==(4&i)&&this.readTremoloBarEffect(e),0!==(64&t)){let t=0,i=0;this._versionNumber<500?(i=this.data.readByte(),t=this.data.readByte()):(t=this.data.readByte(),i=this.data.readByte()),t>0?(e.brushType=b.BrushUp,e.brushDuration=tt.toStrokeValue(t)):i>0&&(e.brushType=b.BrushDown,e.brushDuration=tt.toStrokeValue(i))}if(0!==(2&i))switch(Qe.readSInt8(this.data)){case 0:e.pickStroke=N.None;break;case 1:e.pickStroke=N.Up;break;case 2:e.pickStroke=N.Down;break}if(this._versionNumber<400){if(0!==(4&t))return _.Natural;if(0!==(8&t))return _.Artificial}return _.None}readTremoloBarEffect(e){this.data.readByte(),Qe.readInt32LE(this.data);let t=Qe.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let t=new Te(0,0);t.offset=Qe.readInt32LE(this.data),t.value=Qe.readInt32LE(this.data)/tt.BendStep|0,it.gpReadBool(this.data),e.addWhammyBarPoint(t)}}static toStrokeValue(e){switch(e){case 1:return 30;case 2:return 30;case 3:return 60;case 4:return 120;case 5:return 240;case 6:return 480;default:return 0}}readMixTableChange(e){let t=new nt;t.instrument=Qe.readSInt8(this.data),this._versionNumber>=500&&this.data.skip(16),t.volume=Qe.readSInt8(this.data),t.balance=Qe.readSInt8(this.data);let i=Qe.readSInt8(this.data),n=Qe.readSInt8(this.data),s=Qe.readSInt8(this.data),r=Qe.readSInt8(this.data);if(this._versionNumber>=500&&(t.tempoName=it.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.tempo=Qe.readInt32LE(this.data),t.volume>=0&&this.data.readByte(),t.balance>=0&&this.data.readByte(),i>=0&&this.data.readByte(),n>=0&&this.data.readByte(),s>=0&&this.data.readByte(),r>=0&&this.data.readByte(),t.tempo>=0&&(t.duration=Qe.readSInt8(this.data),this._versionNumber>=510&&this.data.readByte()),this._versionNumber>=400&&this.data.readByte(),this._versionNumber>=500&&this.data.readByte(),this._versionNumber>=510&&(it.gpReadStringIntByte(this.data,this.settings.importer.encoding),it.gpReadStringIntByte(this.data,this.settings.importer.encoding)),t.volume>=0){let i=new Se;i.isLinear=!0,i.type=u.Volume,i.value=t.volume,e.automations.push(i)}if(t.balance>=0){let i=new Se;i.isLinear=!0,i.type=u.Balance,i.value=t.balance,e.automations.push(i)}if(t.instrument>=0){let i=new Se;i.isLinear=!0,i.type=u.Instrument,i.value=t.instrument,e.automations.push(i)}if(t.tempo>=0){let i=new Se;i.isLinear=!0,i.type=u.Tempo,i.value=t.tempo,e.automations.push(i),e.voice.bar.masterBar.tempoAutomation=i}}readNote(e,t,i,n,s){let r=new Pe;r.string=t.staff.tuning.length-s;let a=this.data.readByte();if(0!==(2&a)?r.accentuated=c.Heavy:0!==(64&a)&&(r.accentuated=c.Normal),r.isGhost=0!==(4&a),0!==(32&a)){let e=this.data.readByte();3===e?r.isDead=!0:2===e&&(r.isTieDestination=!0)}if(0!==(1&a)&&this._versionNumber<500&&(this.data.readByte(),this.data.readByte()),0!==(16&a)){let e=Qe.readSInt8(this.data);r.dynamics=this.toDynamicValue(e),n.dynamics=r.dynamics}0!==(32&a)&&(r.fret=Qe.readSInt8(this.data)),0!==(128&a)&&(r.leftHandFinger=Qe.readSInt8(this.data),r.rightHandFinger=Qe.readSInt8(this.data),r.isFingering=!0);let o=!1;if(this._versionNumber>=500){0!==(1&a)&&(r.durationPercent=it.gpReadDouble(this.data));let e=this.data.readByte();o=0!==(2&e)}if(n.addNote(r),0!==(8&a)&&this.readNoteEffects(e,i,n,r),t.staff.isPercussion&&(r.percussionArticulation=r.fret,r.string=-1,r.fret=-1),o){const e=Ue.defaultAccidentals[r.realValueWithoutHarmonic%12];"#"===e?r.accidentalMode=k.ForceFlat:"b"===e&&(r.accidentalMode=k.ForceSharp)}return r}toDynamicValue(e){switch(e){case 1:return w.PPP;case 2:return w.PP;case 3:return w.P;case 4:return w.MP;case 5:return w.MF;case 6:return w.F;case 7:return w.FF;case 8:return w.FFF;default:return w.F}}readNoteEffects(e,t,i,n){let s=this.data.readByte(),r=0;this._versionNumber>=400&&(r=this.data.readByte()),0!==(1&s)&&this.readBend(n),0!==(16&s)&&this.readGrace(t,n),0!==(4&r)&&this.readTremoloPicking(i),0!==(8&r)?this.readSlide(n):this._versionNumber<400&&0!==(4&s)&&(n.slideOutType=B.Shift),0!==(16&r)&&this.readArtificialHarmonic(n),0!==(32&r)&&this.readTrill(n),n.isLetRing=0!==(8&s),n.isHammerPullOrigin=0!==(2&s),0!==(64&r)&&(n.vibrato=x.Slight),n.isPalmMute=0!==(2&r),n.isStaccato=0!==(1&r)}readBend(e){this.data.readByte(),Qe.readInt32LE(this.data);let t=Qe.readInt32LE(this.data);if(t>0)for(let i=0;i<t;i++){let t=new Te(0,0);t.offset=Qe.readInt32LE(this.data),t.value=Qe.readInt32LE(this.data)/tt.BendStep|0,it.gpReadBool(this.data),e.addBendPoint(t)}}readGrace(e,t){let i=new De,n=new Pe;n.string=t.string,n.fret=Qe.readSInt8(this.data),i.duration=v.ThirtySecond,i.dynamics=this.toDynamicValue(Qe.readSInt8(this.data));let s=Qe.readSInt8(this.data);switch(s){case 0:break;case 1:n.slideOutType=B.Legato,n.slideTarget=t;break;case 2:break;case 3:n.isHammerPullOrigin=!0;break}if(n.dynamics=i.dynamics,this.data.skip(1),this._versionNumber<500)i.graceType=S.BeforeBeat;else{let e=this.data.readByte();n.isDead=0!==(1&e),i.graceType=0!==(2&e)?S.OnBeat:S.BeforeBeat}e.addGraceBeat(i),i.addNote(n)}readTremoloPicking(e){let t=this.data.readByte();switch(t){case 1:e.tremoloSpeed=v.Eighth;break;case 2:e.tremoloSpeed=v.Sixteenth;break;case 3:e.tremoloSpeed=v.ThirtySecond;break}}readSlide(e){if(this._versionNumber>=500){let t=Qe.readSInt8(this.data);0!==(1&t)?e.slideOutType=B.Shift:0!==(2&t)?e.slideOutType=B.Legato:0!==(4&t)?e.slideOutType=B.OutDown:0!==(8&t)&&(e.slideOutType=B.OutUp),0!==(16&t)?e.slideInType=T.IntoFromBelow:0!==(32&t)&&(e.slideInType=T.IntoFromAbove)}else{let t=Qe.readSInt8(this.data);switch(t){case 1:e.slideOutType=B.Shift;break;case 2:e.slideOutType=B.Legato;break;case 3:e.slideOutType=B.OutDown;break;case 4:e.slideOutType=B.OutUp;break;case-1:e.slideInType=T.IntoFromBelow;break;case-2:e.slideInType=T.IntoFromAbove;break}}}readArtificialHarmonic(e){let t=this.data.readByte();if(this._versionNumber>=500)switch(t){case 1:e.harmonicType=_.Natural,e.harmonicValue=this.deltaFretToHarmonicValue(e.fret);break;case 2:this.data.readByte(),this.data.readByte(),this.data.readByte(),e.harmonicType=_.Artificial;break;case 3:e.harmonicType=_.Tap,e.harmonicValue=this.deltaFretToHarmonicValue(this.data.readByte());break;case 4:e.harmonicType=_.Pinch,e.harmonicValue=12;break;case 5:e.harmonicType=_.Semi,e.harmonicValue=12;break}else if(this._versionNumber>=400)switch(t){case 1:e.harmonicType=_.Natural;break;case 3:e.harmonicType=_.Tap;break;case 4:e.harmonicType=_.Pinch;break;case 5:e.harmonicType=_.Semi;break;case 15:e.harmonicType=_.Artificial;break;case 17:e.harmonicType=_.Artificial;break;case 22:e.harmonicType=_.Artificial;break}}deltaFretToHarmonicValue(e){switch(e){case 2:return 2.4;case 3:return 3.2;case 4:case 5:case 7:case 9:case 12:case 16:case 17:case 19:case 24:return e;case 8:return 8.2;case 10:return 9.6;case 14:case 15:return 14.7;case 21:case 22:return 21.7;default:return 12}}readTrill(e){switch(e.trillValue=this.data.readByte()+e.stringTuning,this.data.readByte()){case 1:e.trillSpeed=v.Sixteenth;break;case 2:e.trillSpeed=v.ThirtySecond;break;case 3:e.trillSpeed=v.SixtyFourth;break}}}tt.VersionString="FICHIER GUITAR PRO ",tt.BendStep=25;class it{static gpReadDouble(e){let t=new Uint8Array(8);e.read(t,0,t.length);let i=new Float64Array(t.buffer);return i[0]}static gpReadFloat(e){let t=new Uint8Array(4);t[3]=e.readByte(),t[2]=e.readByte(),t[2]=e.readByte(),t[1]=e.readByte();let i=new Float32Array(t.buffer);return i[0]}static gpReadColor(e,t=!1){let i=e.readByte(),n=e.readByte(),s=e.readByte(),r=255;return t?r=e.readByte():e.skip(1),new de(i,n,s,r)}static gpReadBool(e){return 0!==e.readByte()}static gpReadStringIntUnused(e,t){return e.skip(4),it.gpReadString(e,e.readByte(),t)}static gpReadStringInt(e,t){return it.gpReadString(e,Qe.readInt32LE(e),t)}static gpReadStringIntByte(e,t){let i=Qe.readInt32LE(e)-1;return e.readByte(),it.gpReadString(e,i,t)}static gpReadString(e,t,i){let n=new Uint8Array(t);return e.read(n,0,n.length),Qe.toString(n,i)}static gpWriteString(e,t){const i=Qe.stringToBytes(t);e.writeByte(t.length),e.write(i,0,i.length)}static gpReadStringByteLength(e,t,i){let n=e.readByte(),s=it.gpReadString(e,n,i);return n<t&&e.skip(t-n),s}}class nt{constructor(){this.volume=-1,this.balance=-1,this.instrument=-1,this.tempoName="",this.tempo=-1,this.duration=-1}}class st{constructor(){this.x=0,this.y=0,this.w=0,this.h=0}}(function(e){e[e["Boolean"]=0]="Boolean",e[e["Integer"]=1]="Integer",e[e["Float"]=2]="Float",e[e["String"]=3]="String",e[e["Point"]=4]="Point",e[e["Size"]=5]="Size",e[e["Rectangle"]=6]="Rectangle",e[e["Color"]=7]="Color"})(R||(R={}));class rt{constructor(e){this.raw=new Map;let t=Ke.fromBuffer(e),i=Qe.readInt32BE(t);for(let n=0;n<i;n++){let e=it.gpReadString(t,t.readByte(),"utf-8"),i=t.readByte();switch(i){case R.Boolean:let i=1===t.readByte();this.addValue(e,i);break;case R.Integer:let n=Qe.readInt32BE(t);this.addValue(e,n);break;case R.Float:let s=it.gpReadFloat(t);this.addValue(e,s);break;case R.String:let r=it.gpReadString(t,Qe.readInt16BE(t),"utf-8");this.addValue(e,r);break;case R.Point:let a=Qe.readInt32BE(t),o=Qe.readInt32BE(t);this.addValue(e,new Te(a,o));break;case R.Size:let l=Qe.readInt32BE(t),h=Qe.readInt32BE(t);this.addValue(e,new Te(l,h));break;case R.Rectangle:let c=new st;c.x=Qe.readInt32BE(t),c.y=Qe.readInt32BE(t),c.w=Qe.readInt32BE(t),c.h=Qe.readInt32BE(t),this.addValue(e,c);break;case R.Color:let u=it.gpReadColor(t,!0);this.addValue(e,u);break}}}apply(e){for(const[t,i]of this.raw)switch(t){case"StandardNotation/hideDynamics":e.stylesheet.hideDynamics=i;break}}addValue(e,t){this.raw.set(e,t)}static writeForScore(e){const t=Ke.withCapacity(128);return Qe.writeInt32BE(t,1),rt.writeBooleanEntry(t,"StandardNotation/hideDynamics",e.stylesheet.hideDynamics),t.toArray()}static writeBooleanEntry(e,t,i){it.gpWriteString(e,t),e.writeByte(R.Boolean),e.writeByte(i?1:0)}}(function(e){e[e["Short"]=0]="Short",e[e["Medium"]=1]="Medium",e[e["Long"]=2]="Long"})(V||(V={}));class at{constructor(){this.type=V.Short,this.length=0}}(function(e){e[e["None"]=0]="None",e[e["Element"]=1]="Element",e[e["Text"]=2]="Text",e[e["CDATA"]=3]="CDATA",e[e["Document"]=4]="Document",e[e["DocumentType"]=5]="DocumentType"})(H||(H={}));class ot{constructor(){this.nodeType=H.None,this.localName=null,this.value=null,this.childNodes=[],this.attributes=new Map,this.firstChild=null,this.firstElement=null}addChild(e){this.childNodes.push(e),this.firstChild=e,e.nodeType!==H.Element&&e.nodeType!==H.CDATA||(this.firstElement=e)}getAttribute(e){return this.attributes.has(e)?this.attributes.get(e):""}getElementsByTagName(e,t=!1){let i=[];return this.searchElementsByTagName(this.childNodes,i,e,t),i}searchElementsByTagName(e,t,i,n=!1){for(let s of e)s&&s.nodeType===H.Element&&s.localName===i&&t.push(s),n&&this.searchElementsByTagName(s.childNodes,t,i,!0)}findChildElement(e){for(let t of this.childNodes)if(t&&t.nodeType===H.Element&&t.localName===e)return t;return null}addElement(e){const t=new ot;return t.nodeType=H.Element,t.localName=e,this.addChild(t),t}get innerText(){var e,t;if(this.nodeType===H.Element||this.nodeType===H.Document){if(this.firstElement&&this.firstElement.nodeType===H.CDATA)return this.firstElement.innerText;let t="";for(let n of this.childNodes)t+=null===(e=n.innerText)||void 0===e?void 0:e.toString();let i=t;return i.trim()}return null!==(t=this.value)&&void 0!==t?t:""}set innerText(e){const t=new ot;t.nodeType=H.Text,t.value=e,this.childNodes=[t]}setCData(e){const t=new ot;t.nodeType=H.CDATA,t.value=e,this.childNodes=[t]}}class lt extends n{constructor(e,i,n){super(t.AlphaTabErrorType.Format,e),this.pos=0,this.xml=i,this.pos=n,Object.setPrototypeOf(this,lt.prototype)}}(function(e){e[e["IgnoreSpaces"]=0]="IgnoreSpaces",e[e["Begin"]=1]="Begin",e[e["BeginNode"]=2]="BeginNode",e[e["TagName"]=3]="TagName",e[e["Body"]=4]="Body",e[e["AttribName"]=5]="AttribName",e[e["Equals"]=6]="Equals",e[e["AttvalBegin"]=7]="AttvalBegin",e[e["AttribVal"]=8]="AttribVal",e[e["Childs"]=9]="Childs",e[e["Close"]=10]="Close",e[e["WaitEnd"]=11]="WaitEnd",e[e["WaitEndRet"]=12]="WaitEndRet",e[e["Pcdata"]=13]="Pcdata",e[e["Header"]=14]="Header",e[e["Comment"]=15]="Comment",e[e["Doctype"]=16]="Doctype",e[e["Cdata"]=17]="Cdata",e[e["Escape"]=18]="Escape"})(G||(G={}));class ht{static parse(e,t,i){var n;let s=e.charCodeAt(t),r=G.Begin,a=G.Begin,o=0,l="",h=G.Begin,c=null,u=null,d=0,p=0;while(t<e.length){switch(s=e.charCodeAt(t),r){case G.IgnoreSpaces:switch(s){case ht.CharCodeLF:case ht.CharCodeCR:case ht.CharCodeTab:case ht.CharCodeSpace:break;default:r=a;continue}break;case G.Begin:switch(s){case ht.CharCodeLowerThan:r=G.IgnoreSpaces,a=G.BeginNode;break;default:o=t,r=G.Pcdata;continue}break;case G.Pcdata:if(s===ht.CharCodeLowerThan){l+=e.substr(o,t-o);let n=new ot;n.nodeType=H.Text,n.value=l,l="",i.addChild(n),r=G.IgnoreSpaces,a=G.BeginNode}else s===ht.CharCodeAmp&&(l+=e.substr(o,t-o),r=G.Escape,h=G.Pcdata,o=t+1);break;case G.Cdata:if(s===ht.CharCodeBrackedClose&&e.charCodeAt(t+1)===ht.CharCodeBrackedClose&&e.charCodeAt(t+2)===ht.CharCodeGreaterThan){let n=new ot;n.nodeType=H.CDATA,n.value=e.substr(o,t-o),i.addChild(n),t+=2,r=G.Begin}break;case G.BeginNode:switch(s){case ht.CharCodeExclamation:if(e.charCodeAt(t+1)===ht.CharCodeBrackedOpen){if(t+=2,"CDATA["!==e.substr(t,6).toUpperCase())throw new lt("Expected <![CDATA[",e,t);t+=5,r=G.Cdata,o=t+1}else if(e.charCodeAt(t+1)===ht.CharCodeUpperD||e.charCodeAt(t+1)===ht.CharCodeLowerD){if("OCTYPE"!==e.substr(t+2,6).toUpperCase())throw new lt("Expected <!DOCTYPE",e,t);t+=8,r=G.Doctype,o=t+1}else{if(e.charCodeAt(t+1)!==ht.CharCodeMinus||e.charCodeAt(t+2)!==ht.CharCodeMinus)throw new lt("Expected \x3c!--",e,t);t+=2,r=G.Comment,o=t+1}break;case ht.CharCodeQuestion:r=G.Header,o=t;break;case ht.CharCodeSlash:if(!i)throw new lt("Expected node name",e,t);o=t+1,r=G.IgnoreSpaces,a=G.Close;break;default:r=G.TagName,o=t;continue}break;case G.TagName:if(!ht.isValidChar(s)){if(t===o)throw new lt("Expected node name",e,t);c=new ot,c.nodeType=H.Element,c.localName=e.substr(o,t-o),i.addChild(c),r=G.IgnoreSpaces,a=G.Body;continue}break;case G.Body:switch(s){case ht.CharCodeSlash:r=G.WaitEnd;break;case ht.CharCodeGreaterThan:r=G.Childs;break;default:r=G.AttribName,o=t;continue}break;case G.AttribName:if(!ht.isValidChar(s)){if(o===t)throw new lt("Expected attribute name",e,t);let i=e.substr(o,t-o);if(u=i,c.attributes.has(u))throw new lt(`Duplicate attribute [${u}]`,e,t);r=G.IgnoreSpaces,a=G.Equals;continue}break;case G.Equals:switch(s){case ht.CharCodeEquals:r=G.IgnoreSpaces,a=G.AttvalBegin;break;default:throw new lt("Expected =",e,t)}break;case G.AttvalBegin:switch(s){case ht.CharCodeDoubleQuote:case ht.CharCodeSingleQuote:l="",r=G.AttribVal,o=t+1,p=s;break}break;case G.AttribVal:switch(s){case ht.CharCodeAmp:l+=e.substr(o,t-o),r=G.Escape,h=G.AttribVal,o=t+1;break;default:if(s===p){l+=e.substr(o,t-o);let i=l;l="",c.attributes.set(u,i),r=G.IgnoreSpaces,a=G.Body}break}break;case G.Childs:t=ht.parse(e,t,c),o=t,r=G.Begin;break;case G.WaitEnd:switch(s){case ht.CharCodeGreaterThan:r=G.Begin;break;default:throw new lt("Expected >",e,t)}break;case G.WaitEndRet:switch(s){case ht.CharCodeGreaterThan:return t;default:throw new lt("Expected >",e,t)}case G.Close:if(!ht.isValidChar(s)){if(o===t)throw new lt("Expected node name",e,t);let n=e.substr(o,t-o);if(n!==i.localName)throw new lt("Expected </"+i.localName+">",e,t);r=G.IgnoreSpaces,a=G.WaitEndRet;continue}break;case G.Comment:s===ht.CharCodeMinus&&e.charCodeAt(t+1)===ht.CharCodeMinus&&e.charCodeAt(t+2)===ht.CharCodeGreaterThan&&(t+=2,r=G.Begin);break;case G.Doctype:if(s===ht.CharCodeBrackedOpen)d++;else if(s===ht.CharCodeBrackedClose)d--;else if(s===ht.CharCodeGreaterThan&&0===d){let n=new ot;n.nodeType=H.DocumentType,n.value=e.substr(o,t-o),i.addChild(n),r=G.Begin}break;case G.Header:s===ht.CharCodeQuestion&&e.charCodeAt(t+1)===ht.CharCodeGreaterThan&&(t++,r=G.Begin);break;case G.Escape:if(s===ht.CharCodeSemi){let i=e.substr(o,t-o);if(i.charCodeAt(0)===ht.CharCodeSharp){let e=i.charCodeAt(1)===ht.CharCodeLowerX?parseInt("0"+i.substr(1,i.length-1)):parseInt(i.substr(1,i.length-1));l+=String.fromCharCode(e)}else ht.Escapes.has(i)?l+=ht.Escapes.get(i):l+=null===(n="&"+i+";")||void 0===n?void 0:n.toString();o=t+1,r=h}else ht.isValidChar(s)||s===ht.CharCodeSharp||(l+="&",l+=e.substr(o,t-o),t--,o=t+1,r=h);break}t++}if(r===G.Begin&&(o=t,r=G.Pcdata),r===G.Pcdata){if(t!==o){l+=e.substr(o,t-o);let n=new ot;n.nodeType=H.Text,n.value=l,i.addChild(n)}return t}if(r===G.Escape&&h===G.Pcdata){l+="&",l+=e.substr(o,t-o);let n=new ot;return n.nodeType=H.Text,n.value=l,i.addChild(n),t}throw new lt("Unexpected end",e,t)}static isValidChar(e){return e>=ht.CharCodeLowerA&&e<=ht.CharCodeLowerZ||e>=ht.CharCodeUpperA&&e<=ht.CharCodeUpperZ||e>=ht.CharCode0&&e<=ht.CharCode9||e===ht.CharCodeColon||e===ht.CharCodeDot||e===ht.CharCodeUnderscore||e===ht.CharCodeMinus}}ht.CharCodeLF=10,ht.CharCodeTab=9,ht.CharCodeCR=13,ht.CharCodeSpace=32,ht.CharCodeLowerThan=60,ht.CharCodeAmp=38,ht.CharCodeBrackedClose=93,ht.CharCodeBrackedOpen=91,ht.CharCodeGreaterThan=62,ht.CharCodeExclamation=33,ht.CharCodeUpperD=68,ht.CharCodeLowerD=100,ht.CharCodeMinus=45,ht.CharCodeQuestion=63,ht.CharCodeSlash=47,ht.CharCodeEquals=61,ht.CharCodeDoubleQuote=34,ht.CharCodeSingleQuote=39,ht.CharCodeSharp=35,ht.CharCodeLowerX=120,ht.CharCodeLowerA=97,ht.CharCodeLowerZ=122,ht.CharCodeUpperA=65,ht.CharCodeUpperZ=90,ht.CharCode0=48,ht.CharCode9=57,ht.CharCodeColon=58,ht.CharCodeDot=46,ht.CharCodeUnderscore=95,ht.CharCodeSemi=59,ht.Escapes=new Map([["lt","<"],["gt",">"],["amp","&"],["quot",'"'],["apos","'"]]);class ct{constructor(e,t){this._result=[],this._indention=e,this._xmlHeader=t,this._currentIndention="",this._isStartOfLine=!0}static write(e,t,i){const n=new ct(t,i);return n.writeNode(e),n.toString()}writeNode(e){switch(e.nodeType){case H.None:break;case H.Element:this._result.length>0&&this.writeLine(),this.write("<"+e.localName);for(const[t,i]of e.attributes)this.write(` ${t}="`),this.writeAttributeValue(i),this.write('"');if(0===e.childNodes.length)this.write("/>");else{if(this.write(">"),1!==e.childNodes.length||e.firstElement){this.indent();for(const t of e.childNodes)t.nodeType===H.Element&&this.writeNode(t);this.unindend(),this.writeLine()}else this.writeNode(e.childNodes[0]);this.write(`</${e.localName}>`)}break;case H.Text:e.value&&this.write(e.value);break;case H.CDATA:null!==e.value&&this.write(`<![CDATA[${e.value}]]>`);break;case H.Document:this._xmlHeader&&this.write('<?xml version="1.0" encoding="utf-8"?>');for(const t of e.childNodes)this.writeNode(t);break;case H.DocumentType:this.write(`<!DOCTYPE ${e.value}>`);break}}unindend(){this._currentIndention=this._currentIndention.substr(0,this._currentIndention.length-this._indention.length)}indent(){this._currentIndention+=this._indention}writeAttributeValue(e){for(let t=0;t<e.length;t++){const i=e.charAt(t);switch(i){case"<":this._result.push("&lt;");break;case">":this._result.push("&gt;");break;case"&":this._result.push("&amp;");break;case"'":this._result.push("&apos;");break;case'"':this._result.push("&quot;");break;default:this._result.push(i);break}}}write(e){this._isStartOfLine&&this._result.push(this._currentIndention),this._result.push(e),this._isStartOfLine=!1}writeLine(e=null){e&&this.write(e),this._indention.length>0&&!this._isStartOfLine&&(this._result.push("\n"),this._isStartOfLine=!0)}toString(){return this._result.join("").trimRight()}}class ut extends ot{constructor(){super(),this.nodeType=H.Document}parse(e){ht.parse(e,0,this)}toString(){return this.toFormattedString()}toFormattedString(e="",t=!1){return ct.write(this,e,t)}}(function(e){e[e["Up"]=0]="Up",e[e["Down"]=1]="Down"})(W||(W={}));class dt{constructor(){this.id="",this.dots=0,this.tupletDenominator=-1,this.tupletNumerator=-1,this.value=v.Quarter}}class pt{constructor(){this.name="",this.path="",this.role="",this.program=0}get uniqueId(){return this.path+";"+this.name+";"+this.role}}class ft{constructor(){this._hasAnacrusis=!1,this._skipApplyLyrics=!1}parseXml(e,t){this._masterTrackAutomations=new Map,this._automationsPerTrackIdAndBarIndex=new Map,this._tracksMapping=[],this._tracksById=new Map,this._masterBars=[],this._barsOfMasterBar=[],this._voicesOfBar=new Map,this._barsById=new Map,this._voiceById=new Map,this._beatsOfVoice=new Map,this._beatById=new Map,this._rhythmOfBeat=new Map,this._rhythmById=new Map,this._notesOfBeat=new Map,this._noteById=new Map,this._tappedNotes=new Map,this._lyricsByTrack=new Map,this._soundsByTrack=new Map,this._skipApplyLyrics=!1;let i=new ut;try{i.parse(e)}catch(n){throw new we("Could not parse XML",n)}if(this.parseDom(i),this.buildModel(),this.score.finish(t),!this._skipApplyLyrics&&this._lyricsByTrack.size>0)for(const[s,r]of this._lyricsByTrack){let e=this._tracksById.get(s);e.applyLyrics(r)}}parseDom(e){let t=e.firstElement;if(t){if("GPIF"!==t.localName)throw new we("Root node of XML was not GPIF");this.score=new je;for(let e of t.childNodes)if(e.nodeType===H.Element)switch(e.localName){case"Score":this.parseScoreNode(e);break;case"MasterTrack":this.parseMasterTrackNode(e);break;case"Tracks":this.parseTracksNode(e);break;case"MasterBars":this.parseMasterBarsNode(e);break;case"Bars":this.parseBars(e);break;case"Voices":this.parseVoices(e);break;case"Beats":this.parseBeats(e);break;case"Notes":this.parseNotes(e);break;case"Rhythms":this.parseRhythms(e);break}}}parseScoreNode(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Title":this.score.title=t.firstChild.innerText;break;case"SubTitle":this.score.subTitle=t.firstChild.innerText;break;case"Artist":this.score.artist=t.firstChild.innerText;break;case"Album":this.score.album=t.firstChild.innerText;break;case"Words":this.score.words=t.firstChild.innerText;break;case"Music":this.score.music=t.firstChild.innerText;break;case"WordsAndMusic":if(t.firstChild&&""!==t.firstChild.innerText){let e=t.firstChild.innerText;e&&!this.score.words&&(this.score.words=e),e&&!this.score.music&&(this.score.music=e)}break;case"Copyright":this.score.copyright=t.firstChild.innerText;break;case"Tabber":this.score.tab=t.firstChild.innerText;break;case"Instructions":this.score.instructions=t.firstChild.innerText;break;case"Notices":this.score.notices=t.firstChild.innerText;break}}parseMasterTrackNode(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Automations":this.parseAutomations(t,this._masterTrackAutomations,null);break;case"Tracks":this._tracksMapping=t.innerText.split(" ");break;case"Anacrusis":this._hasAnacrusis=!0;break}}parseAutomations(e,t,i){for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Automation":this.parseAutomation(n,t,i);break}}parseAutomation(e,t,i){let n=null,s=!1,r=-1,a=0,o=0,l=null,h=0,c=null;for(let d of e.childNodes)if(d.nodeType===H.Element)switch(d.localName){case"Type":n=d.innerText;break;case"Linear":s="true"===d.innerText.toLowerCase();break;case"Bar":r=parseInt(d.innerText);break;case"Position":a=parseFloat(d.innerText);break;case"Value":if(d.firstElement&&d.firstElement.nodeType===H.CDATA)l=d.innerText;else{let e=d.innerText.split(" ");1===e.length?(o=parseFloat(e[0]),h=1):(o=parseFloat(e[0]),h=parseInt(e[1]))}break;case"Text":c=d.innerText;break}if(!n)return;let u=null;switch(n){case"Tempo":u=Se.buildTempoAutomation(s,a,o,h);break;case"Sound":l&&i&&i.has(l)&&(u=Se.buildInstrumentAutomation(s,a,i.get(l).program));break}u&&(c&&(u.text=c),r>=0&&(t.has(r)||t.set(r,[]),t.get(r).push(u)))}parseTracksNode(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Track":this.parseTrack(t);break}}parseTrack(e){this._articulationByName=new Map;let t=new Ye;t.ensureStaveCount(1);let i=t.staves[0];i.showStandardNotation=!0;let n=e.getAttribute("id");for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"Name":t.name=s.innerText;break;case"Color":let e=s.innerText.split(" ");if(e.length>=3){let i=parseInt(e[0]),n=parseInt(e[1]),s=parseInt(e[2]);t.color=new de(i,n,s,255)}break;case"Instrument":let i=s.getAttribute("ref");(i.endsWith("-gs")||i.endsWith("GrandStaff"))&&(t.ensureStaveCount(2),t.staves[1].showStandardNotation=!0);break;case"InstrumentSet":this.parseInstrumentSet(t,s);break;case"NotationPatch":this.parseNotationPatch(t,s);break;case"ShortName":t.shortName=s.innerText;break;case"Lyrics":this.parseLyrics(n,s);break;case"Properties":this.parseTrackProperties(t,s);break;case"GeneralMidi":case"MidiConnection":case"MIDISettings":this.parseGeneralMidi(t,s);break;case"Sounds":this.parseSounds(n,t,s);break;case"PlaybackState":let r=s.innerText;t.playbackInfo.isSolo="Solo"===r,t.playbackInfo.isMute="Mute"===r;break;case"PartSounding":this.parsePartSounding(t,s);break;case"Staves":this.parseStaves(t,s);break;case"Transpose":this.parseTranspose(t,s);break;case"RSE":this.parseRSE(t,s);break;case"Automations":this.parseTrackAutomations(n,s);break}this._tracksById.set(n,t)}parseTrackAutomations(e,t){const i=new Map;this._automationsPerTrackIdAndBarIndex.set(e,i),this.parseAutomations(t,i,this._soundsByTrack.get(e))}parseNotationPatch(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"LineCount":const t=parseInt(i.innerText);for(let i of e.staves)i.standardNotationLineCount=t;break;case"Elements":this.parseElements(e,i);break}}parseInstrumentSet(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Type":switch(i.innerText){case"drumKit":for(let t of e.staves)t.isPercussion=!0;break}if("drumKit"===i.innerText)for(let i of e.staves)i.isPercussion=!0;break;case"Elements":this.parseElements(e,i);break;case"LineCount":const t=parseInt(i.innerText);for(let i of e.staves)i.standardNotationLineCount=t;break}}parseElements(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Element":this.parseElement(e,i);break}}parseElement(e,t){const i=t.findChildElement("Type"),n=i?i.innerText:"";for(let s of t.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"Name":case"Articulations":this.parseArticulations(e,s,n);break}}parseArticulations(e,t,i){for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Articulation":this.parseArticulation(e,n,i);break}}parseArticulation(e,t,i){const n=new Ce;n.outputMidiNumber=-1,n.elementType=i;let s="";for(let r of t.childNodes)if(r.nodeType===H.Element){const e=r.innerText;switch(r.localName){case"Name":s=r.innerText;break;case"OutputMidiNumber":e.length>0&&(n.outputMidiNumber=parseInt(e));break;case"TechniqueSymbol":n.techniqueSymbol=this.parseTechniqueSymbol(e);break;case"TechniquePlacement":switch(e){case"outside":n.techniqueSymbolPlacement=P.Bottom;break;case"inside":n.techniqueSymbolPlacement=P.Middle;break;case"above":n.techniqueSymbolPlacement=P.Bottom;break;case"below":n.techniqueSymbolPlacement=P.Top;break}break;case"Noteheads":const t=e.split(" ");t.length>=1&&(n.noteHeadDefault=this.parseNoteHead(t[0])),t.length>=2&&(n.noteHeadHalf=this.parseNoteHead(t[1])),t.length>=3&&(n.noteHeadWhole=this.parseNoteHead(t[2])),n.noteHeadHalf==C.None&&(n.noteHeadHalf=n.noteHeadDefault),n.noteHeadWhole==C.None&&(n.noteHeadWhole=n.noteHeadDefault);break;case"StaffLine":e.length>0&&(n.staffLine=parseInt(e));break}}-1!==n.outputMidiNumber?(e.percussionArticulations.push(n),s.length>0&&this._articulationByName.set(s,n)):s.length>0&&this._articulationByName.has(s)&&(this._articulationByName.get(s).staffLine=n.staffLine)}parseTechniqueSymbol(e){switch(e){case"pictEdgeOfCymbal":return C.PictEdgeOfCymbal;case"articStaccatoAbove":return C.ArticStaccatoAbove;case"noteheadParenthesis":return C.NoteheadParenthesis;case"stringsUpBow":return C.StringsUpBow;case"stringsDownBow":return C.StringsDownBow;case"guitarGolpe":return C.GuitarGolpe;default:return C.None}}parseNoteHead(e){switch(e){case"noteheadDoubleWholeSquare":return C.NoteheadDoubleWholeSquare;case"noteheadDoubleWhole":return C.NoteheadDoubleWhole;case"noteheadWhole":return C.NoteheadWhole;case"noteheadHalf":return C.NoteheadHalf;case"noteheadBlack":return C.NoteheadBlack;case"noteheadNull":return C.NoteheadNull;case"noteheadXOrnate":return C.NoteheadXOrnate;case"noteheadTriangleUpWhole":return C.NoteheadTriangleUpWhole;case"noteheadTriangleUpHalf":return C.NoteheadTriangleUpHalf;case"noteheadTriangleUpBlack":return C.NoteheadTriangleUpBlack;case"noteheadDiamondBlackWide":return C.NoteheadDiamondBlackWide;case"noteheadDiamondWhite":return C.NoteheadDiamondWhite;case"noteheadDiamondWhiteWide":return C.NoteheadDiamondWhiteWide;case"noteheadCircleX":return C.NoteheadCircleX;case"noteheadXWhole":return C.NoteheadXWhole;case"noteheadXHalf":return C.NoteheadXHalf;case"noteheadXBlack":return C.NoteheadXBlack;case"noteheadParenthesis":return C.NoteheadParenthesis;case"noteheadSlashedBlack2":return C.NoteheadSlashedBlack2;case"noteheadCircleSlash":return C.NoteheadCircleSlash;case"noteheadHeavyX":return C.NoteheadHeavyX;case"noteheadHeavyXHat":return C.NoteheadHeavyXHat;default:return Ne.warning("GPIF","Unknown notehead symbol",e),C.None}}parseStaves(e,t){let i=0;for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Staff":e.ensureStaveCount(i+1);let t=e.staves[i];this.parseStaff(t,n),i++;break}}parseStaff(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Properties":this.parseStaffProperties(e,i);break}}parseStaffProperties(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Property":this.parseStaffProperty(e,i);break}}parseStaffProperty(e,t){let i=t.getAttribute("name");switch(i){case"Tuning":for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Pitches":let i=t.findChildElement("Pitches").innerText.split(" "),s=new Array(i.length);for(let e=0;e<s.length;e++)s[s.length-1-e]=parseInt(i[e]);e.stringTuning.tunings=s;break;case"Label":e.stringTuning.name=n.innerText;break}e.isPercussion||(e.showTablature=!0);break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForStaff(e,t);break;case"CapoFret":let i=parseInt(t.findChildElement("Fret").innerText);e.capo=i;break}}parseLyrics(e,t){let i=[];for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Line":i.push(this.parseLyricsLine(n));break}this._lyricsByTrack.set(e,i)}parseLyricsLine(e){let t=new Ve;for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Offset":t.startBar=parseInt(i.innerText);break;case"Text":t.text=i.innerText;break}return t}parseDiagramCollectionForTrack(e,t){let i=t.findChildElement("Items");for(let n of i.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Item":this.parseDiagramItemForTrack(e,n);break}}parseDiagramCollectionForStaff(e,t){let i=t.findChildElement("Items");for(let n of i.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Item":this.parseDiagramItemForStaff(e,n);break}}parseDiagramItemForTrack(e,t){let i=new Re,n=t.getAttribute("id");for(let s of e.staves)s.addChord(n,i);this.parseDiagramItemForChord(i,t)}parseDiagramItemForStaff(e,t){let i=new Re,n=t.getAttribute("id");e.addChord(n,i),this.parseDiagramItemForChord(i,t)}parseDiagramItemForChord(e,t){e.name=t.getAttribute("name");let i=t.findChildElement("Diagram"),n=parseInt(i.getAttribute("stringCount")),s=parseInt(i.getAttribute("baseFret"));e.firstFret=s+1;for(let r=0;r<n;r++)e.strings.push(-1);for(let r of i.childNodes)if(r.nodeType===H.Element)switch(r.localName){case"Fret":let t=parseInt(r.getAttribute("string"));e.strings[n-t-1]=s+parseInt(r.getAttribute("fret"));break;case"Fingering":let i=new Map;for(let n of r.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Position":let t=a.Unknown,r=s+parseInt(n.getAttribute("fret"));switch(n.getAttribute("finger")){case"Index":t=a.IndexFinger;break;case"Middle":t=a.MiddleFinger;break;case"Rank":t=a.AnnularFinger;break;case"Pinky":t=a.LittleFinger;break;case"Thumb":t=a.Thumb;break}t!==a.Unknown&&(i.has(t)?e.barreFrets.push(r):i.set(t,!0));break}break;case"Property":switch(r.getAttribute("name")){case"ShowName":e.showName="true"===r.getAttribute("value");break;case"ShowDiagram":e.showDiagram="true"===r.getAttribute("value");break;case"ShowFingering":e.showFingering="true"===r.getAttribute("value");break}break}}parseTrackProperties(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Property":this.parseTrackProperty(e,i);break}}parseTrackProperty(e,t){let i=t.getAttribute("name");switch(i){case"Tuning":let i=t.findChildElement("Pitches").innerText.split(" "),n=new Array(i.length);for(let e=0;e<n.length;e++)n[n.length-1-e]=parseInt(i[e]);for(let t of e.staves)t.stringTuning.tunings=n,t.showStandardNotation=!0,t.showTablature=!0;break;case"DiagramCollection":case"ChordCollection":this.parseDiagramCollectionForTrack(e,t);break;case"CapoFret":let s=parseInt(t.findChildElement("Fret").innerText);for(let t of e.staves)t.capo=s;break}}parseGeneralMidi(e,t){for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Program":e.playbackInfo.program=parseInt(n.innerText);break;case"Port":e.playbackInfo.port=parseInt(n.innerText);break;case"PrimaryChannel":e.playbackInfo.primaryChannel=parseInt(n.innerText);break;case"SecondaryChannel":e.playbackInfo.secondaryChannel=parseInt(n.innerText);break}let i="Percussion"===t.getAttribute("table");if(i)for(let n of e.staves)n.isPercussion=!0}parseSounds(e,t,i){for(let n of i.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Sound":this.parseSound(e,t,n);break}}parseSound(e,t,i){const n=new pt;for(let s of i.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"Name":n.name=s.innerText;break;case"Path":n.path=s.innerText;break;case"Role":n.role=s.innerText;break;case"MIDI":this.parseSoundMidi(n,s);break}"Factory"!==n.role&&0!==t.playbackInfo.program||(t.playbackInfo.program=n.program),this._soundsByTrack.has(e)||this._soundsByTrack.set(e,new Map),this._soundsByTrack.get(e).set(n.uniqueId,n)}parseSoundMidi(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Program":e.program=parseInt(i.innerText);break}}parsePartSounding(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"TranspositionPitch":for(let t of e.staves)t.displayTranspositionPitch=parseInt(i.innerText);break}}parseTranspose(e,t){let i=0,n=0;for(let s of t.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"Chromatic":n=parseInt(s.innerText);break;case"Octave":i=parseInt(s.innerText);break}for(let s of e.staves)s.displayTranspositionPitch=12*i+n}parseRSE(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"ChannelStrip":this.parseChannelStrip(e,i);break}}parseChannelStrip(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Parameters":this.parseChannelStripParameters(e,i);break}}parseChannelStripParameters(e,t){if(t.firstChild&&t.firstChild.value){let i=t.firstChild.value.split(" ");i.length>=12&&(e.playbackInfo.balance=Math.floor(16*parseFloat(i[11])),e.playbackInfo.volume=Math.floor(16*parseFloat(i[12])))}}parseMasterBarsNode(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"MasterBar":this.parseMasterBar(t);break}}parseMasterBar(e){let t=new He;0===this._masterBars.length&&this._hasAnacrusis&&(t.isAnacrusis=!0);for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Time":let e=i.innerText.split("/");t.timeSignatureNumerator=parseInt(e[0]),t.timeSignatureDenominator=parseInt(e[1]);break;case"DoubleBar":t.isDoubleBar=!0;break;case"Section":t.section=new $e,t.section.marker=i.findChildElement("Letter").innerText,t.section.text=i.findChildElement("Text").innerText;break;case"Repeat":"true"===i.getAttribute("start").toLowerCase()&&(t.isRepeatStart=!0),"true"===i.getAttribute("end").toLowerCase()&&i.getAttribute("count")&&(t.repeatCount=parseInt(i.getAttribute("count")));break;case"AlternateEndings":let n=i.innerText.split(" "),s=0;for(let t=0;t<n.length;t++)s|=1<<-1+parseInt(n[t]);t.alternateEndings=s;break;case"Bars":this._barsOfMasterBar.push(i.innerText.split(" "));break;case"TripletFeel":switch(i.innerText){case"NoTripletFeel":t.tripletFeel=I.NoTripletFeel;break;case"Triplet8th":t.tripletFeel=I.Triplet8th;break;case"Triplet16th":t.tripletFeel=I.Triplet16th;break;case"Dotted8th":t.tripletFeel=I.Dotted8th;break;case"Dotted16th":t.tripletFeel=I.Dotted16th;break;case"Scottish8th":t.tripletFeel=I.Scottish8th;break;case"Scottish16th":t.tripletFeel=I.Scottish16th;break}break;case"Key":t.keySignature=parseInt(i.findChildElement("AccidentalCount").innerText);let r=i.findChildElement("Mode");if(r)switch(r.innerText.toLowerCase()){case"major":t.keySignatureType=A.Major;break;case"minor":t.keySignatureType=A.Minor;break}break;case"Fermatas":this.parseFermatas(t,i);break}this._masterBars.push(t)}parseFermatas(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Fermata":this.parseFermata(e,i);break}}parseFermata(e,t){let i=0,n=new at;for(let s of t.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"Type":switch(s.innerText){case"Short":n.type=V.Short;break;case"Medium":n.type=V.Medium;break;case"Long":n.type=V.Long;break}break;case"Length":n.length=parseFloat(s.innerText);break;case"Offset":let e=s.innerText.split("/");if(2===e.length){let t=parseInt(e[0]),n=parseInt(e[1]);i=t/n*ke.QuarterTime|0}break}e.addFermata(i,n)}parseBars(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Bar":this.parseBar(t);break}}parseBar(e){let t=new _e,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Voices":this._voicesOfBar.set(i,n.innerText.split(" "));break;case"Clef":switch(n.innerText){case"Neutral":t.clef=d.Neutral;break;case"G2":t.clef=d.G2;break;case"F4":t.clef=d.F4;break;case"C4":t.clef=d.C4;break;case"C3":t.clef=d.C3;break}break;case"Ottavia":switch(n.innerText){case"8va":t.clefOttava=p._8va;break;case"15ma":t.clefOttava=p._15ma;break;case"8vb":t.clefOttava=p._8vb;break;case"15mb":t.clefOttava=p._15mb;break}break;case"SimileMark":switch(n.innerText){case"Simple":t.simileMark=f.Simple;break;case"FirstOfDouble":t.simileMark=f.FirstOfDouble;break;case"SecondOfDouble":t.simileMark=f.SecondOfDouble;break}break}this._barsById.set(i,t)}parseVoices(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Voice":this.parseVoice(t);break}}parseVoice(e){let t=new qe,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Beats":this._beatsOfVoice.set(i,n.innerText.split(" "));break}this._voiceById.set(i,t)}parseBeats(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Beat":this.parseBeat(t);break}}parseBeat(e){let t=new De,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Notes":this._notesOfBeat.set(i,n.innerText.split(" "));break;case"Rhythm":this._rhythmOfBeat.set(i,n.getAttribute("ref"));break;case"Fadding":"FadeIn"===n.innerText&&(t.fadeIn=!0);break;case"Tremolo":switch(n.innerText){case"1/2":t.tremoloSpeed=v.Eighth;break;case"1/4":t.tremoloSpeed=v.Sixteenth;break;case"1/8":t.tremoloSpeed=v.ThirtySecond;break}break;case"Chord":t.chordId=n.innerText;break;case"Hairpin":switch(n.innerText){case"Crescendo":t.crescendo=y.Crescendo;break;case"Decrescendo":t.crescendo=y.Decrescendo;break}break;case"Arpeggio":"Up"===n.innerText?t.brushType=b.ArpeggioUp:t.brushType=b.ArpeggioDown;break;case"Properties":this.parseBeatProperties(n,t);break;case"XProperties":this.parseBeatXProperties(n,t);break;case"FreeText":t.text=n.innerText;break;case"TransposedPitchStemOrientation":switch(n.innerText){case"Upward":t.preferredBeamDirection=W.Up;break;case"Downward":t.preferredBeamDirection=W.Down;break}break;case"Dynamic":switch(n.innerText){case"PPP":t.dynamics=w.PPP;break;case"PP":t.dynamics=w.PP;break;case"P":t.dynamics=w.P;break;case"MP":t.dynamics=w.MP;break;case"MF":t.dynamics=w.MF;break;case"F":t.dynamics=w.F;break;case"FF":t.dynamics=w.FF;break;case"FFF":t.dynamics=w.FFF;break}break;case"GraceNotes":switch(n.innerText){case"OnBeat":t.graceType=S.OnBeat;break;case"BeforeBeat":t.graceType=S.BeforeBeat;break}break;case"Legato":"true"===n.getAttribute("origin")&&(t.isLegatoOrigin=!0);break;case"Whammy":let e=new Te(0,0);e.value=this.toBendValue(parseFloat(n.getAttribute("originValue"))),e.offset=this.toBendOffset(parseFloat(n.getAttribute("originOffset"))),t.addWhammyBarPoint(e);let s=new Te(0,0);s.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),s.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset1"))),t.addWhammyBarPoint(s);let r=new Te(0,0);r.value=this.toBendValue(parseFloat(n.getAttribute("middleValue"))),r.offset=this.toBendOffset(parseFloat(n.getAttribute("middleOffset2"))),t.addWhammyBarPoint(r);let a=new Te(0,0);a.value=this.toBendValue(parseFloat(n.getAttribute("destinationValue"))),a.offset=this.toBendOffset(parseFloat(n.getAttribute("destinationOffset"))),t.addWhammyBarPoint(a);break;case"Ottavia":switch(n.innerText){case"8va":t.ottava=p._8va;break;case"8vb":t.ottava=p._8vb;break;case"15ma":t.ottava=p._15ma;break;case"15mb":t.ottava=p._15mb;break}break;case"Lyrics":t.lyrics=this.parseBeatLyrics(n),this._skipApplyLyrics=!0;break}this._beatById.set(i,t)}parseBeatLyrics(e){const t=[];for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"Line":t.push(i.innerText);break}return t}parseBeatXProperties(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"XProperty":let e=i.getAttribute("id"),n=0;switch(e){case"1124204545":n=parseInt(i.findChildElement("Int").innerText),t.invertBeamDirection=1===n;break;case"687935489":n=parseInt(i.findChildElement("Int").innerText),t.brushDuration=n;break}break}}parseBeatProperties(e,t){let i=!1,n=null,s=null,r=null,a=null,o=null;for(let l of e.childNodes)if(l.nodeType===H.Element)switch(l.localName){case"Property":let e=l.getAttribute("name");switch(e){case"Brush":"Up"===l.findChildElement("Direction").innerText?t.brushType=b.BrushUp:t.brushType=b.BrushDown;break;case"PickStroke":"Up"===l.findChildElement("Direction").innerText?t.pickStroke=N.Up:t.pickStroke=N.Down;break;case"Slapped":l.findChildElement("Enable")&&(t.slap=!0);break;case"Popped":l.findChildElement("Enable")&&(t.pop=!0);break;case"VibratoWTremBar":switch(l.findChildElement("Strength").innerText){case"Wide":t.vibrato=x.Wide;break;case"Slight":t.vibrato=x.Slight;break}break;case"WhammyBar":i=!0;break;case"WhammyBarExtend":break;case"WhammyBarOriginValue":n||(n=new Te(0,0)),n.value=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarOriginOffset":n||(n=new Te(0,0)),n.offset=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleValue":s=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset1":r=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarMiddleOffset2":a=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarDestinationValue":o||(o=new Te(Te.MaxPosition,0)),o.value=this.toBendValue(parseFloat(l.findChildElement("Float").innerText));break;case"WhammyBarDestinationOffset":o||(o=new Te(0,0)),o.offset=this.toBendOffset(parseFloat(l.findChildElement("Float").innerText));break}break}i&&(n||(n=new Te(0,0)),o||(o=new Te(Te.MaxPosition,0)),t.addWhammyBarPoint(n),r&&s&&t.addWhammyBarPoint(new Te(r,s)),a&&s&&t.addWhammyBarPoint(new Te(a,s)),r||a||!s||t.addWhammyBarPoint(new Te(Te.MaxPosition/2|0,s)),t.addWhammyBarPoint(o))}parseNotes(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Note":this.parseNote(t);break}}parseNote(e){let t=new Pe,i=e.getAttribute("id");for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Properties":this.parseNoteProperties(n,t,i);break;case"AntiAccent":"normal"===n.innerText.toLowerCase()&&(t.isGhost=!0);break;case"LetRing":t.isLetRing=!0;break;case"Trill":t.trillValue=parseInt(n.innerText),t.trillSpeed=v.Sixteenth;break;case"Accent":let e=parseInt(n.innerText);0!==(1&e)&&(t.isStaccato=!0),0!==(4&e)&&(t.accentuated=c.Heavy),0!==(8&e)&&(t.accentuated=c.Normal);break;case"Tie":"true"===n.getAttribute("destination").toLowerCase()&&(t.isTieDestination=!0);break;case"Vibrato":switch(n.innerText){case"Slight":t.vibrato=x.Slight;break;case"Wide":t.vibrato=x.Wide;break}break;case"LeftFingering":switch(t.isFingering=!0,n.innerText){case"P":t.leftHandFinger=a.Thumb;break;case"I":t.leftHandFinger=a.IndexFinger;break;case"M":t.leftHandFinger=a.MiddleFinger;break;case"A":t.leftHandFinger=a.AnnularFinger;break;case"C":t.leftHandFinger=a.LittleFinger;break}break;case"RightFingering":switch(t.isFingering=!0,n.innerText){case"P":t.rightHandFinger=a.Thumb;break;case"I":t.rightHandFinger=a.IndexFinger;break;case"M":t.rightHandFinger=a.MiddleFinger;break;case"A":t.rightHandFinger=a.AnnularFinger;break;case"C":t.rightHandFinger=a.LittleFinger;break}break;case"InstrumentArticulation":t.percussionArticulation=parseInt(n.innerText);break}this._noteById.set(i,t)}parseNoteProperties(e,t,i){let n=!1,s=null,r=null,a=null,o=null,l=null,h=-1,c=-1;for(let u of e.childNodes)if(u.nodeType===H.Element)switch(u.localName){case"Property":let e=u.getAttribute("name");switch(e){case"String":t.string=parseInt(u.findChildElement("String").innerText)+1;break;case"Fret":t.fret=parseInt(u.findChildElement("Fret").innerText);break;case"Element":h=parseInt(u.findChildElement("Element").innerText);break;case"Variation":c=parseInt(u.findChildElement("Variation").innerText);break;case"Tapped":this._tappedNotes.set(i,!0);break;case"HarmonicType":let e=u.findChildElement("HType");if(e)switch(e.innerText){case"NoHarmonic":t.harmonicType=_.None;break;case"Natural":t.harmonicType=_.Natural;break;case"Artificial":t.harmonicType=_.Artificial;break;case"Pinch":t.harmonicType=_.Pinch;break;case"Tap":t.harmonicType=_.Tap;break;case"Semi":t.harmonicType=_.Semi;break;case"Feedback":t.harmonicType=_.Feedback;break}break;case"HarmonicFret":let d=u.findChildElement("HFret");d&&(t.harmonicValue=parseFloat(d.innerText));break;case"Muted":u.findChildElement("Enable")&&(t.isDead=!0);break;case"PalmMuted":u.findChildElement("Enable")&&(t.isPalmMute=!0);break;case"Octave":t.octave=parseInt(u.findChildElement("Number").innerText),-1===t.tone&&(t.tone=0);break;case"Tone":t.tone=parseInt(u.findChildElement("Step").innerText);break;case"ConcertPitch":this.parseConcertPitch(u,t);break;case"Bended":n=!0;break;case"BendOriginValue":s||(s=new Te(0,0)),s.value=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendOriginOffset":s||(s=new Te(0,0)),s.offset=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleValue":r=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleOffset1":a=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendMiddleOffset2":o=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"BendDestinationValue":l||(l=new Te(Te.MaxPosition,0)),l.value=this.toBendValue(parseFloat(u.findChildElement("Float").innerText));break;case"BendDestinationOffset":l||(l=new Te(0,0)),l.offset=this.toBendOffset(parseFloat(u.findChildElement("Float").innerText));break;case"HopoOrigin":u.findChildElement("Enable")&&(t.isHammerPullOrigin=!0);break;case"HopoDestination":break;case"LeftHandTapped":t.isLeftHandTapped=!0;break;case"Slide":let p=parseInt(u.findChildElement("Flags").innerText);0!==(1&p)?t.slideOutType=B.Shift:0!==(2&p)?t.slideOutType=B.Legato:0!==(4&p)?t.slideOutType=B.OutDown:0!==(8&p)&&(t.slideOutType=B.OutUp),0!==(16&p)?t.slideInType=T.IntoFromBelow:0!==(32&p)&&(t.slideInType=T.IntoFromAbove),0!==(64&p)?t.slideOutType=B.PickSlideDown:0!==(128&p)&&(t.slideOutType=B.PickSlideUp);break}break}n&&(s||(s=new Te(0,0)),l||(l=new Te(Te.MaxPosition,0)),t.addBendPoint(s),a&&r&&t.addBendPoint(new Te(a,r)),o&&r&&t.addBendPoint(new Te(o,r)),a||o||!r||t.addBendPoint(new Te(Te.MaxPosition/2|0,r)),t.addBendPoint(l)),-1!==h&&-1!==c&&(t.percussionArticulation=Ee.articulationFromElementVariation(h,c))}parseConcertPitch(e,t){const i=e.findChildElement("Pitch");if(i)for(let n of i.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"Accidental":switch(n.innerText){case"x":t.accidentalMode=k.ForceDoubleSharp;break;case"#":t.accidentalMode=k.ForceSharp;break;case"b":t.accidentalMode=k.ForceFlat;break;case"bb":t.accidentalMode=k.ForceDoubleFlat;break}break}}toBendValue(e){return e*ft.BendPointValueFactor|0}toBendOffset(e){return e*ft.BendPointPositionFactor}parseRhythms(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"Rhythm":this.parseRhythm(t);break}}parseRhythm(e){let t=new dt,i=e.getAttribute("id");t.id=i;for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"NoteValue":switch(n.innerText){case"Long":t.value=v.QuadrupleWhole;break;case"DoubleWhole":t.value=v.DoubleWhole;break;case"Whole":t.value=v.Whole;break;case"Half":t.value=v.Half;break;case"Quarter":t.value=v.Quarter;break;case"Eighth":t.value=v.Eighth;break;case"16th":t.value=v.Sixteenth;break;case"32nd":t.value=v.ThirtySecond;break;case"64th":t.value=v.SixtyFourth;break;case"128th":t.value=v.OneHundredTwentyEighth;break;case"256th":t.value=v.TwoHundredFiftySixth;break}break;case"PrimaryTuplet":t.tupletNumerator=parseInt(n.getAttribute("num")),t.tupletDenominator=parseInt(n.getAttribute("den"));break;case"AugmentationDot":t.dots=parseInt(n.getAttribute("count"));break}this._rhythmById.set(i,t)}buildModel(){for(let e=0,t=this._masterBars.length;e<t;e++){let t=this._masterBars[e];this.score.addMasterBar(t)}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e);this.score.addTrack(t)}for(let e of this._barsOfMasterBar){let t=0;for(let i=0,n=0;i<e.length&&n<this.score.tracks.length;i++){let s=e[i];if(s!==ft.InvalidId){let e=this._barsById.get(s),i=this.score.tracks[n],r=i.staves[t];if(r.addBar(e),this._voicesOfBar.has(s))for(let t of this._voicesOfBar.get(s))if(t!==ft.InvalidId){let i=this._voiceById.get(t);if(e.addVoice(i),this._beatsOfVoice.has(t))for(let e of this._beatsOfVoice.get(t))if(e!==ft.InvalidId){let t=Ae.clone(this._beatById.get(e));i.addBeat(t);let n=this._rhythmOfBeat.get(e),s=this._rhythmById.get(n);if(t.duration=s.value,t.dots=s.dots,t.tupletNumerator=s.tupletNumerator,t.tupletDenominator=s.tupletDenominator,this._notesOfBeat.has(e))for(let i of this._notesOfBeat.get(e))if(i!==ft.InvalidId){const e=Fe.clone(this._noteById.get(i));r.isPercussion?(e.fret=-1,e.string=-1):e.percussionArticulation=-1,t.addNote(e),this._tappedNotes.has(i)&&(t.tap=!0)}}}else{let t=new qe;e.addVoice(t);let i=new De;i.isEmpty=!0,i.duration=v.Quarter,t.addBeat(i)}t===i.staves.length-1?(n++,t=0):t++}else n++}}for(let e of this._tracksMapping){if(!e)continue;let t=this._tracksById.get(e),i=!1;for(const e of t.staves)if(e.isPercussion){i=!0;break}if(i||(t.percussionArticulations=[]),this._automationsPerTrackIdAndBarIndex.has(e)){const i=this._automationsPerTrackIdAndBarIndex.get(e);for(const[e,n]of i)if(t.staves.length>0&&e<t.staves[0].bars.length){const i=t.staves[0].bars[e];if(i.voices.length>0&&i.voices[0].beats.length>0){const e=i.voices[0].beats[0];for(const t of n)e.automations.push(t)}}}}for(const[e,t]of this._masterTrackAutomations){let i=this.score.masterBars[e];for(let n=0,s=t.length;n<s;n++){let s=t[n];s.type===u.Tempo&&(0===e&&(this.score.tempo=0|s.value,s.text&&(this.score.tempoLabel=s.text)),i.tempoAutomation=s)}}}}ft.InvalidId="-1",ft.BendPointPositionFactor=Te.MaxPosition/100,ft.BendPointValueFactor=.04;class gt{constructor(){this.showSlash=!1,this.showStandardNotation=!1,this.showTablature=!1}}class mt{constructor(){this.isMultiRest=!1,this.tracks=[]}}class bt{constructor(e){this.parts=[],this.zoomLevel=0,this.layout=0;let t=Ke.fromBuffer(e),i=Qe.readInt32BE(t);for(let n=0;n<i;n++){let e=new mt;this.parts.push(e),e.isMultiRest=it.gpReadBool(t);let i=Qe.readInt32BE(t);for(let n=0;n<i;n++){let i=t.readByte();0===i&&(i=1);let n=new gt;n.showStandardNotation=0!==(1&i),n.showTablature=0!==(2&i),n.showSlash=0!==(4&i),e.tracks.push(n)}}}apply(e){let t=0,i=0;for(let n of this.parts)for(let s of n.tracks){if(i<e.tracks.length){let n=e.tracks[i];if(t<n.staves.length){let e=n.staves[t];e.showTablature=s.showTablature,e.showStandardNotation=s.showStandardNotation}}i++,i>=e.tracks.length&&(t++,i=0)}}static writeForScore(e){const t=Ke.withCapacity(128),i=[new mt];for(const n of e.tracks)for(const e of n.staves){const t=new gt;if(t.showStandardNotation=e.showStandardNotation,t.showTablature=e.showTablature,0===e.index)i[0].tracks.push(t);else{let e=new mt;e.tracks.push(t),i.push(e)}}Qe.writeInt32BE(t,i.length);for(const n of i){t.writeByte(n.isMultiRest?1:0),Qe.writeInt32BE(t,n.tracks.length);for(const e of n.tracks){let i=0;e.showStandardNotation&&(i|=1),e.showTablature&&(i|=2),e.showSlash&&(i|=4),t.writeByte(i)}}return t.toArray()}}class yt{}class vt extends yt{constructor(e){super(),this.n=e}}class wt extends yt{constructor(e,t){super(),this.left=e,this.right=t}}class St extends yt{constructor(e,t){super(),this.n=e,this.table=t}}class _t{static make(e,t,i,n){let r=[],a=[];if(n>32)throw new s("Invalid huffman");for(let s=0;s<n;s++)r.push(0),a.push(0);for(let h=0;h<i;h++){let i=e[h+t];if(i>=n)throw new s("Invalid huffman");r[i]++}let o=0;for(let s=1;s<n-1;s++)o=o+r[s]<<1,a[s]=o;let l=new Map;for(let s=0;s<i;s++){let i=e[s+t];if(0!==i){let e=a[i-1];a[i-1]=e+1,l.set(e<<5|i,s)}}return _t.treeCompress(new wt(_t.treeMake(l,n,0,1),_t.treeMake(l,n,1,1)))}static treeMake(e,t,i,n){if(n>t)throw new s("Invalid huffman");let r=i<<5|n;return e.has(r)?new vt(e.get(r)):(i<<=1,n+=1,new wt(_t.treeMake(e,t,i,n),_t.treeMake(e,t,1|i,n)))}static treeCompress(e){let t=_t.treeDepth(e);if(0===t)return e;if(1===t){if(e instanceof wt)return new wt(_t.treeCompress(e.left),_t.treeCompress(e.right));throw new s("assert")}let i=1<<t,n=[];for(let s=0;s<i;s++)n.push(new vt(-1));return _t.treeWalk(n,0,0,t,e),new St(t,n)}static treeWalk(e,t,i,n,s){s instanceof wt&&n>0?(_t.treeWalk(e,t,i+1,n-1,s.left),_t.treeWalk(e,t|1<<i,i+1,n-1,s.right)):e[t]=_t.treeCompress(s)}static treeDepth(e){if(e instanceof vt)return 0;if(e instanceof St)throw new s("assert");if(e instanceof wt){let t=_t.treeDepth(e.left),i=_t.treeDepth(e.right);return 1+(t<i?t:i)}return 0}}(function(e){e[e["Head"]=0]="Head",e[e["Block"]=1]="Block",e[e["CData"]=2]="CData",e[e["Flat"]=3]="Flat",e[e["Crc"]=4]="Crc",e[e["Dist"]=5]="Dist",e[e["DistOne"]=6]="DistOne",e[e["Done"]=7]="Done"})(j||(j={}));class kt{constructor(){this.buffer=new Uint8Array(kt.BufferSize),this.pos=0}slide(){let e=new Uint8Array(kt.BufferSize);this.pos-=kt.Size,e.set(this.buffer.subarray(kt.Size,kt.Size+this.pos),0),this.buffer=e}addBytes(e,t,i){this.pos+i>kt.BufferSize&&this.slide(),this.buffer.set(e.subarray(t,t+i),this.pos),this.pos+=i}addByte(e){this.pos===kt.BufferSize&&this.slide(),this.buffer[this.pos]=e,this.pos++}getLastChar(){return this.buffer[this.pos-1]}available(){return this.pos}}kt.Size=32768,kt.BufferSize=65536;class Tt{constructor(e){this._nbits=0,this._bits=0,this._state=j.Block,this._isFinal=!1,this._huffman=Tt._fixedHuffman,this._huffdist=null,this._len=0,this._dist=0,this._needed=0,this._output=null,this._outpos=0,this._lengths=[],this._window=new kt,this._input=e;for(let t=0;t<19;t++)this._lengths.push(-1)}static buildFixedHuffman(){let e=[];for(let t=0;t<288;t++)e.push(t<=143?8:t<=255?9:t<=279?7:8);return _t.make(e,0,288,10)}readBytes(e,t,i){if(this._needed=i,this._outpos=t,this._output=e,i>0)while(this.inflateLoop());return i-this._needed}inflateLoop(){switch(this._state){case j.Head:let e=this._input.readByte(),t=15&e;if(8!==t)throw new s("Invalid data");let i=this._input.readByte(),n=0!==(32&i);if(((e<<8)+i)%31!==0)throw new s("Invalid data");if(n)throw new s("Unsupported dictionary");return this._state=j.Block,!0;case j.Crc:return this._state=j.Done,!0;case j.Done:return!1;case j.Block:switch(this._isFinal=this.getBit(),this.getBits(2)){case 0:this._len=Qe.readUInt16LE(this._input);let e=Qe.readUInt16LE(this._input);if(e!==65535-this._len)throw new s("Invalid data");this._state=j.Flat;let t=this.inflateLoop();return this.resetBits(),t;case 1:return this._huffman=Tt._fixedHuffman,this._huffdist=null,this._state=j.CData,!0;case 2:let i=this.getBits(5)+257,n=this.getBits(5)+1,r=this.getBits(4)+4;for(let s=0;s<r;s++)this._lengths[Tt.CodeLengthsPos[s]]=this.getBits(3);for(let s=r;s<19;s++)this._lengths[Tt.CodeLengthsPos[s]]=0;this._huffman=_t.make(this._lengths,0,19,8);let a=[];for(let s=0;s<i+n;s++)a.push(0);return this.inflateLengths(a,i+n),this._huffdist=_t.make(a,i,n,16),this._huffman=_t.make(a,0,i,16),this._state=j.CData,!0;default:throw new s("Invalid data")}case j.Flat:{let e=this._len<this._needed?this._len:this._needed,t=Qe.readByteArray(this._input,e);return this._len-=e,this.addBytes(t,0,e),0===this._len&&(this._state=this._isFinal?j.Crc:j.Block),this._needed>0}case j.DistOne:{let e=this._len<this._needed?this._len:this._needed;return this.addDistOne(e),this._len-=e,0===this._len&&(this._state=j.CData),this._needed>0}case j.Dist:while(this._len>0&&this._needed>0){let e=this._len<this._dist?this._len:this._dist,t=this._needed<e?this._needed:e;this.addDist(this._dist,t),this._len-=t}return 0===this._len&&(this._state=j.CData),this._needed>0;case j.CData:let r=this.applyHuffman(this._huffman);if(r<256)return this.addByte(r),this._needed>0;if(256===r)return this._state=this._isFinal?j.Crc:j.Block,!0;{r=r-257&255;let e=Tt.LenExtraBitsTbl[r];if(-1===e)throw new s("Invalid data");this._len=Tt.LenBaseValTbl[r]+this.getBits(e);let t=this._huffdist,i=t?this.applyHuffman(t):this.getRevBits(5);if(e=Tt.DistExtraBitsTbl[i],-1===e)throw new s("Invalid data");if(this._dist=Tt.DistBaseValTbl[i]+this.getBits(e),this._dist>this._window.available())throw new s("Invalid data");return this._state=1===this._dist?j.DistOne:j.Dist,!0}}return!1}addDistOne(e){let t=this._window.getLastChar();for(let i=0;i<e;i++)this.addByte(t)}addByte(e){this._window.addByte(e),this._output[this._outpos]=e,this._needed--,this._outpos++}addDist(e,t){this.addBytes(this._window.buffer,this._window.pos-e,t)}getBit(){0===this._nbits&&(this._nbits=8,this._bits=this._input.readByte());let e=1===(1&this._bits);return this._nbits--,this._bits=this._bits>>1,e}getBits(e){while(this._nbits<e)this._bits=this._bits|this._input.readByte()<<this._nbits,this._nbits+=8;let t=this._bits&(1<<e)-1;return this._nbits-=e,this._bits=this._bits>>e,t}getRevBits(e){return 0===e?0:this.getBit()?1<<e-1|this.getRevBits(e-1):this.getRevBits(e-1)}resetBits(){this._bits=0,this._nbits=0}addBytes(e,t,i){this._window.addBytes(e,t,i),this._output.set(e.subarray(t,t+i),this._outpos),this._needed-=i,this._outpos+=i}inflateLengths(e,t){let i=0,n=0;while(i<t){let r=this.applyHuffman(this._huffman);switch(r){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:n=r,e[i]=r,i++;break;case 16:let a=i+3+this.getBits(2);if(a>t)throw new s("Invalid data");while(i<a)e[i]=n,i++;break;case 17:if(i+=3+this.getBits(3),i>t)throw new s("Invalid data");break;case 18:if(i+=11+this.getBits(7),i>t)throw new s("Invalid data");break;default:throw new s("Invalid data")}}}applyHuffman(e){if(e instanceof vt)return e.n;if(e instanceof wt)return this.applyHuffman(this.getBit()?e.right:e.left);if(e instanceof St)return this.applyHuffman(e.table[this.getBits(e.n)]);throw new s("Invalid data")}}Tt.LenExtraBitsTbl=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1],Tt.LenBaseValTbl=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Tt.DistExtraBitsTbl=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1],Tt.DistBaseValTbl=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Tt.CodeLengthsPos=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Tt._fixedHuffman=Tt.buildFixedHuffman();class Bt{constructor(e,t){this.fullName=e;let i=e.lastIndexOf("/");this.fileName=-1===i||i===e.length-1?this.fullName:e.substr(i+1),this.data=t}}Bt.OptionalDataDescriptorSignature=134695760,Bt.CompressionMethodDeflate=8,Bt.LocalFileHeaderSignature=67324752,Bt.CentralFileHeaderSignature=33639248,Bt.EndOfCentralDirSignature=101010256;class xt{constructor(e){this._readable=e}read(){let e=[];while(1){let t=this.readEntry();if(!t)break;e.push(t)}return e}readEntry(){let e=this._readable,t=Qe.readInt32LE(e);if(t!==Bt.LocalFileHeaderSignature)return null;Qe.readUInt16LE(e);let i=Qe.readUInt16LE(e),n=Qe.readUInt16LE(e),s=0!==n;if(s&&n!==Bt.CompressionMethodDeflate)return null;Qe.readInt16LE(this._readable),Qe.readInt16LE(this._readable),Qe.readInt32LE(e),Qe.readInt32LE(e);let r,a=Qe.readInt32LE(e),o=Qe.readInt16LE(e),l=Qe.readInt16LE(e),h=Qe.toString(Qe.readByteArray(e,o),"utf-8");if(e.skip(l),s){let e=Ke.empty(),t=new Tt(this._readable),i=new Uint8Array(65536);while(1){let n=t.readBytes(i,0,i.length);if(e.write(i,0,n),n<i.length)break}r=e.toArray()}else r=Qe.readByteArray(this._readable,a);if(0!==(8&i)){let e=Qe.readInt32LE(this._readable);e===Bt.OptionalDataDescriptorSignature&&Qe.readInt32LE(this._readable),Qe.readInt32LE(this._readable),Qe.readInt32LE(this._readable)}return new Bt(h,r)}}class Nt extends ve{get name(){return"Guitar Pro 7"}constructor(){super()}readScore(){Ne.debug(this.name,"Loading ZIP entries");let e,t=new xt(this.data);try{e=t.read()}catch(o){throw new we("No Zip archive",o)}Ne.debug(this.name,"Zip entries loaded");let i=null,n=null,s=null;for(let l of e)switch(l.fileName){case"score.gpif":i=Qe.toString(l.data,this.settings.importer.encoding);break;case"BinaryStylesheet":n=l.data;break;case"PartConfiguration":s=l.data;break}if(!i)throw new we("No score.gpif found in zip archive");Ne.debug(this.name,"Start Parsing score.gpif");let r=new ft;r.parseXml(i,this.settings),Ne.debug(this.name,"score.gpif parsed");let a=r.score;if(n){Ne.debug(this.name,"Start Parsing BinaryStylesheet");let e=new rt(n);e.apply(a),Ne.debug(this.name,"BinaryStylesheet parsed")}if(s){Ne.debug(this.name,"Start Parsing Part Configuration");let e=new bt(s);e.apply(a),Ne.debug(this.name,"Part Configuration parsed")}return a}}class Ct extends n{constructor(){super(t.AlphaTabErrorType.Format,"Unexpected end of data within reader"),Object.setPrototypeOf(this,Ct.prototype)}}class Et{constructor(e){this._currentByte=0,this._position=Et.ByteSize,this._source=e}readByte(){return this.readBits(8)}readBytes(e){const t=new Uint8Array(e);for(let i=0;i<e;i++)t[i]=255&this.readByte();return t}readBits(e){let t=0,i=e-1;while(i>=0)t|=this.readBit()<<i,i--;return t}readBitsReversed(e){let t=0;for(let i=0;i<e;i++)t|=this.readBit()<<i;return t}readBit(){if(this._position>=8){if(this._currentByte=this._source.readByte(),-1===this._currentByte)throw new Ct;this._position=0}const e=this._currentByte>>Et.ByteSize-this._position-1&1;return this._position++,e}readAll(){let e=Ke.empty();try{while(1)e.writeByte(255&this.readByte())}catch(t){if(!(t instanceof Ct))throw t}return e.toArray()}}Et.ByteSize=8;class Pt{constructor(){this.fileName="",this.fileSize=0,this.data=null}}class Lt{constructor(){this.files=[],this.files=[],this.fileFilter=e=>!0}load(e){let t=new Et(e);this.readBlock(t)}readHeader(e){return this.getString(e.readBytes(4),0,4)}decompress(e,t=!1){let i,n=Ke.empty(),s=this.getInteger(e.readBytes(4),0);try{while(n.length<s){let t=e.readBits(1);if(1===t){let t=e.readBits(4),s=e.readBitsReversed(t),r=e.readBitsReversed(t),a=n.length-s,o=Math.min(s,r);i=n.getBuffer(),n.write(i,a,o)}else{let t=e.readBitsReversed(2);for(let i=0;i<t;i++)n.writeByte(e.readByte())}}}catch(h){if(!(h instanceof Ct))throw h}i=n.getBuffer();let r=t?4:0,a=n.length-r,o=new Uint8Array(a),l=a;return o.set(i.subarray(r,r+l),0),o}readBlock(e){let t=this.readHeader(e);if("BCFZ"===t)this.readUncompressedBlock(this.decompress(e,!0));else{if("BCFS"!==t)throw new we("Unsupported format");this.readUncompressedBlock(e.readAll())}}readUncompressedBlock(e){let t=4096,i=t;while(i+3<e.length){let n=this.getInteger(e,i);if(2===n){let n=new Pt;n.fileName=this.getString(e,i+4,127),n.fileSize=this.getInteger(e,i+140);let s=!this.fileFilter||this.fileFilter(n.fileName);s&&this.files.push(n);let r=i+148,a=0,o=0,l=s?Ke.withCapacity(n.fileSize):null;while(1){if(a=this.getInteger(e,r+4*o++),0===a)break;i=a*t,s&&l.write(e,i,t)}if(s){n.data=new Uint8Array(Math.min(n.fileSize,l.length));let e=l.toArray();n.data.set(e.subarray(0,0+n.data.length),0)}}i+=t}}getString(e,t,i){let n="";for(let s=0;s<i;s++){let i=255&e[t+s];if(0===i)break;n+=String.fromCharCode(i)}return n}getInteger(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}}Lt.HeaderBcFs="BCFS",Lt.HeaderBcFz="BCFZ",Lt.ScoreGpif="score.gpif",Lt.BinaryStylesheet="BinaryStylesheet",Lt.PartConfiguration="PartConfiguration";class Ot extends ve{get name(){return"Guitar Pro 6"}constructor(){super()}readScore(){Ne.debug(this.name,"Loading GPX filesystem");let e=new Lt;e.fileFilter=e=>e.endsWith("score.gpif")||e.endsWith("BinaryStylesheet")||e.endsWith("PartConfiguration"),e.load(this.data),Ne.debug(this.name,"GPX filesystem loaded");let t=null,i=null,n=null;for(let a of e.files)switch(a.fileName){case"score.gpif":t=Qe.toString(a.data,this.settings.importer.encoding);break;case"BinaryStylesheet":i=a.data;break;case"PartConfiguration":n=a.data;break}if(!t)throw new we("No score.gpif found in GPX");Ne.debug(this.name,"Start Parsing score.gpif");let s=new ft;s.parseXml(t,this.settings),Ne.debug(this.name,"score.gpif parsed");let r=s.score;if(i){Ne.debug(this.name,"Start Parsing BinaryStylesheet");let e=new rt(i);e.apply(r),Ne.debug(this.name,"BinaryStylesheet parsed")}if(n){Ne.debug(this.name,"Start Parsing Part Configuration");let e=new bt(n);e.apply(r),Ne.debug(this.name,"Part Configuration parsed")}return r}}class Ft extends ve{constructor(){super(),this._currentPartGroup=null,this._trackFirstMeasureNumber=0,this._maxVoices=0,this._currentDirection=null,this._currentChord=null,this._divisionsPerQuarterNote=0,this._voiceOfStaff=new Map,this._isBeamContinue=!1,this._previousBeatWasPulled=!1,this._previousBeat=null}get name(){return"MusicXML"}readScore(){this._trackById=new Map,this._partGroups=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._slurStarts=new Map;let e=Qe.toString(this.data.readAll(),this.settings.importer.encoding),t=new ut;try{t.parse(e)}catch(i){throw new we("Unsupported format")}return this._score=new je,this._score.tempo=120,this.parseDom(t),this.settings.importer.mergePartGroupsInMusicXml&&this.mergePartGroups(),this._score.finish(this.settings),this._score.rebuildRepeatGroups(),this._score}mergePartGroups(){let e=!1;for(const t of this._partGroups.values())t.length>1&&(this.mergeGroup(t),e=!0);if(e)for(let t=0;t<this._score.tracks.length;t++)this._score.tracks[t].index=t}mergeGroup(e){let t=e[0];for(let i=1;i<e.length;i++){let n=e[i];for(let e of n.staves)t.addStaff(e);let s=this._score.tracks.indexOf(n);this._score.tracks.splice(s,1)}}parseDom(e){let t=e.firstElement;if(!t)throw new we("Unsupported format");switch(t.localName){case"score-partwise":this.parsePartwise(t);break;case"score-timewise":break;default:throw new we("Unsupported format")}}parsePartwise(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"work":this.parseWork(t);break;case"movement-title":this._score.title=t.innerText;break;case"identification":this.parseIdentification(t);break;case"part-list":this.parsePartList(t);break;case"part":this.parsePart(t);break}}parseWork(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"work-title":this._score.title=t.innerText;break}}parsePart(e){let t=e.getAttribute("id");if(!this._trackById.has(t)){if(1!==this._trackById.size)return;for(const[e,i]of this._trackById)0!==i.staves.length&&0!==i.staves[0].bars.length||(t=e);if(!this._trackById.has(t))return}let i=this._trackById.get(t),n=!0;this._maxVoices=0;for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"measure":this.parseMeasure(s,i,n)&&(n=!1);break}for(let s of i.staves)for(let e of s.bars)this.ensureVoices(e)}parseMeasure(e,t,i){if("yes"===e.getAttribute("implicit")&&0===e.getElementsByTagName("note",!1).length)return!1;let n=0;if(i)this._divisionsPerQuarterNote=0,this._trackFirstMeasureNumber=parseInt(e.getAttribute("number")),this._trackFirstMeasureNumber||(this._trackFirstMeasureNumber=0),n=0;else{if(n=parseInt(e.getAttribute("number")),!n)return!1;n-=this._trackFirstMeasureNumber}if(i){let i=e.getElementsByTagName("attributes",!1);if(i.length>0){let e=i[0].getElementsByTagName("staves",!1);if(e.length>0){let i=parseInt(e[0].innerText);t.ensureStaveCount(i)}}}let s=new Array(t.staves.length),r=null;for(let a=t.staves[0].bars.length;a<=n;a++)for(let e=0;e<t.staves.length;e++){let i=new _e;if(s[e]=i,t.staves[e].bars.length>0){let n=t.staves[e].bars[t.staves[e].bars.length-1];i.clef=n.clef}r=this.getOrCreateMasterBar(n),t.staves[e].addBar(i),this.ensureVoices(i)}if(r){let i=!1;for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"note":this.parseNoteBeat(n,s);break;case"forward":this.parseForward(n,s);break;case"direction":this.parseDirection(n,r);break;case"attributes":i||(this.parseAttributes(n,s,r,t),i=!0);break;case"harmony":this.parseHarmony(n,t);break;case"sound":break;case"barline":this.parseBarline(n,r);break}}return!0}ensureVoices(e){while(e.voices.length<this._maxVoices){let t=new qe;e.addVoice(t);let i=new De;i.isEmpty=!0,i.chordId=this._currentChord,t.addBeat(i)}}getOrCreateBeat(e,t,i){let n=0,s=e.getElementsByTagName("voice",!1);s.length>0&&(n=parseInt(s[0].innerText)-1);let r=this._previousBeatWasPulled;this._previousBeatWasPulled=!1;let a,o,l=e.getElementsByTagName("staff",!1),h=1;if(l.length>0){h=parseInt(l[0].innerText),(this._isBeamContinue||r)&&this._previousBeat.voice.bar.staff.index!==h-1&&(h=this._previousBeat.voice.bar.staff.index+1,this._previousBeatWasPulled=!0);let e=t[0].staff.track.index+"-"+h;this._voiceOfStaff.has(e)||this._voiceOfStaff.set(e,n)}h--,a=h<0?t[0]:h>=t.length?t[t.length-1]:t[h];let c=this.getOrCreateVoice(a,n);return i&&c.beats.length>0||1===c.beats.length&&c.isEmpty?o=c.beats[c.beats.length-1]:(o=new De,o.isEmpty=!1,c.addBeat(o)),this._isBeamContinue=!1,this._previousBeat=o,o}parseForward(e,t){let i=this.getOrCreateBeat(e,t,!1),n=parseInt(e.findChildElement("duration").innerText),s=n*v.Quarter/this._divisionsPerQuarterNote,r=[v.SixtyFourth,v.ThirtySecond,v.Sixteenth,v.Eighth,v.Quarter,v.Half,v.Whole];for(let a of r)if(s>=a){i.duration=a,s-=a;break}i.isEmpty=!1}parseStaffDetails(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"staff-lines":for(let e of t.staves)e.stringTuning.tunings=new Array(parseInt(i.innerText)).fill(0);break;case"staff-tuning":this.parseStaffTuning(i,t);break}for(let i of t.staves)this.isEmptyTuning(i.tuning)&&(i.stringTuning.tunings=[])}parseStaffTuning(e,t){let i=parseInt(e.getAttribute("line")),n="C",s="",r=0;for(let o of e.childNodes)if(o.nodeType===H.Element)switch(o.localName){case"tuning-step":n=o.innerText;break;case"tuning-alter":r=parseInt(o.innerText);break;case"tuning-octave":s=o.innerText;break}let a=ue.getTuningForText(n+s)+r;for(let o of t.staves)o.tuning[o.tuning.length-i]=a}parseHarmony(e,t){let i=null,n="";for(let r of e.childNodes)if(r.nodeType===H.Element)switch(r.localName){case"root":for(let e of r.childNodes)if(e.nodeType===H.Element)switch(e.localName){case"root-step":i=e.innerText;break;case"root-alter":switch(parseInt(r.innerText)){case-2:n=" bb";break;case-1:n=" b";break;case 0:n="";break;case 1:n=" #";break;case 2:n=" ##";break}break}break}let s=new Re;s.name=i+n,this._currentChord=ue.newGuid();for(let r of t.staves)r.addChord(this._currentChord,s)}parseBarline(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"repeat":this.parseRepeat(i,t);break;case"ending":this.parseEnding(i,t);break}}parseEnding(e,t){let i=parseInt(e.getAttribute("number"));i>0&&(--i,t.alternateEndings=t.alternateEndings|1<<i&255)}parseRepeat(e,t){let i=e.getAttribute("direction"),n=parseInt(e.getAttribute("times"));(n<0||isNaN(n))&&(n=2),"backward"===i?t.repeatCount=n:"forward"===i&&(t.isRepeatStart=!0)}parseNoteBeat(e,t){let i=e.getElementsByTagName("chord",!1).length>0,n=this.getOrCreateBeat(e,t,i);!n.chordId&&this._currentChord&&(n.chordId=this._currentChord,this._currentChord=null),this._currentDirection&&(n.text=this._currentDirection,this._currentDirection=null);let s=new Pe;n.voice.isEmpty=!1,n.isEmpty=!1,n.addNote(s),n.dots=0;let r=!1;for(let a of e.childNodes)if(a.nodeType===H.Element)switch(a.localName){case"grace":n.graceType=S.BeforeBeat,n.duration=v.ThirtySecond;break;case"duration":if(n.isRest&&!r){let e=parseInt(a.innerText);switch(e){case 1:n.duration=v.Whole;break;case 2:n.duration=v.Half;break;case 4:n.duration=v.Quarter;break;case 8:n.duration=v.Eighth;break;case 16:n.duration=v.Sixteenth;break;case 32:n.duration=v.ThirtySecond;break;case 64:n.duration=v.SixtyFourth;break;default:n.duration=v.Quarter;break}}break;case"tie":this.parseTied(a,s);break;case"cue":break;case"instrument":break;case"type":n.duration=this.getDuration(a.innerText),n.graceType!==S.None&&n.duration<v.Sixteenth&&(n.duration=v.Eighth);break;case"dot":n.dots++;break;case"accidental":this.parseAccidental(a,s);break;case"time-modification":this.parseTimeModification(a,n);break;case"stem":break;case"notehead":"yes"===a.getAttribute("parentheses")&&(s.isGhost=!0);break;case"beam":let e=a.innerText;"continue"===e&&(this._isBeamContinue=!0);break;case"notations":this.parseNotations(a,n,s);break;case"lyric":this.parseLyric(a,n);break;case"pitch":this.parsePitch(a,s);break;case"unpitched":this.parseUnpitched(a,s);break;case"rest":r="yes"===a.getAttribute("measure"),n.isEmpty=!1,n.notes=[],n.duration=v.Whole;break}if(s.isStringed)for(let a=0;a<n.notes.length;a++)if(n.notes[a].string===s.string&&n.notes[a]!==s){n.removeNote(s);break}}getDuration(e){switch(e){case"256th":case"128th":case"64th":return v.SixtyFourth;case"32nd":return v.ThirtySecond;case"16th":return v.Sixteenth;case"eighth":return v.Eighth;case"quarter":return v.Quarter;case"half":return v.Half;case"long":case"breve":case"whole":return v.Whole}return v.Quarter}parseLyric(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"text":t.text?t.text+=" "+i.innerText:t.text=i.innerText;break}}parseAccidental(e,t){switch(e.innerText){case"sharp":t.accidentalMode=k.ForceSharp;break;case"natural":t.accidentalMode=k.ForceNatural;break;case"flat":t.accidentalMode=k.ForceFlat;break}}parseTied(e,t){"start"===e.getAttribute("type")?this._tieStartIds.has(t.id)||(this._tieStartIds.set(t.id,!0),this._tieStarts.push(t)):"stop"===e.getAttribute("type")&&this._tieStarts.length>0&&!t.isTieDestination&&(t.isTieDestination=!0,t.tieOriginNoteId=this._tieStarts[0].id,this._tieStarts.splice(0,1),this._tieStartIds.delete(t.id))}parseNotations(e,t,i){for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"articulations":this.parseArticulations(n,i);break;case"tied":this.parseTied(n,i);break;case"slide":case"glissando":"start"===n.getAttribute("type")&&(i.slideOutType=B.Shift);break;case"dynamics":this.parseDynamics(n,t);break;case"technical":this.parseTechnical(n,i);break;case"ornaments":this.parseOrnaments(n,i);break;case"slur":let e=n.getAttribute("number");switch(e||(e="1"),n.getAttribute("type")){case"start":this._slurStarts.set(e,i);break;case"stop":if(this._slurStarts.has(e)){i.isSlurDestination=!0;let t=this._slurStarts.get(e);t.slurDestinationNoteId=i.id,i.slurOriginNoteId=i.id}break}break}}parseOrnaments(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"tremolo":let e=parseInt(i.innerText);switch(e){case 1:t.beat.tremoloSpeed=v.Eighth;break;case 2:t.beat.tremoloSpeed=v.Sixteenth;break;case 3:t.beat.tremoloSpeed=v.ThirtySecond;break}break}}parseTechnical(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"string":t.string=parseInt(i.innerText),-2147483648!==t.string&&(t.string=t.beat.voice.bar.staff.tuning.length-t.string+1);break;case"fret":t.fret=parseInt(i.innerText);break;case"down-bow":t.beat.pickStroke=N.Down;break;case"up-bow":t.beat.pickStroke=N.Up;break}-2147483648!==t.string&&-2147483648!==t.fret||(t.string=-1,t.fret=-1)}parseArticulations(e,t){for(let i of e.childNodes)switch(i.localName){case"accent":t.accentuated=c.Normal;break;case"strong-accent":t.accentuated=c.Heavy;break;case"staccato":case"detached-legato":t.isStaccato=!0;break}}parseDynamics(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"p":t.dynamics=w.P;break;case"pp":t.dynamics=w.PP;break;case"ppp":t.dynamics=w.PPP;break;case"f":t.dynamics=w.F;break;case"ff":t.dynamics=w.FF;break;case"fff":t.dynamics=w.FFF;break;case"mp":t.dynamics=w.MP;break;case"mf":t.dynamics=w.MF;break}}parseTimeModification(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"actual-notes":t.tupletNumerator=parseInt(i.innerText);break;case"normal-notes":t.tupletDenominator=parseInt(i.innerText);break}}parseUnpitched(e,t){let i="",n=0,s=0;for(let a of e.childNodes)if(a.nodeType===H.Element)switch(a.localName){case"display-step":i=a.innerText;break;case"display-alter":n=parseInt(a.innerText);break;case"display-octave":s=parseInt(a.innerText);break}let r=12*s+ue.getToneForText(i)+n;t.octave=r/12|0,t.tone=r-12*t.octave}parsePitch(e,t){let i="",n=0,s=0;for(let a of e.childNodes)if(a.nodeType===H.Element)switch(a.localName){case"step":i=a.innerText;break;case"alter":n=parseFloat(a.innerText),isNaN(n)&&(n=0);break;case"octave":s=parseInt(a.innerText)+1;break}let r=12*s+ue.getToneForText(i)+(0|n);t.octave=r/12|0,t.tone=r-12*t.octave}getOrCreateVoice(e,t){if(t<e.voices.length)return e.voices[t];for(let i=e.voices.length;i<=t;i++)e.addVoice(new qe);return this._maxVoices=Math.max(this._maxVoices,e.voices.length),e.voices[t]}parseDirection(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"sound":let e=i.getAttribute("tempo");if(e){let i=new Se;i.isLinear=!0,i.type=u.Tempo,i.value=parseInt(e),t.tempoAutomation=i}break;case"direction-type":let n=i.firstElement;switch(n.localName){case"words":this._currentDirection=n.innerText;break;case"metronome":this.parseMetronome(n,t);break}break}}parseMetronome(e,t){let i=v.Quarter,n=120;for(let r of e.childNodes)if(r.nodeType===H.Element)switch(r.localName){case"beat-unit":i=this.getDuration(r.innerText);break;case"per-minute":n=parseInt(r.innerText);break}let s=new Se;s.type=u.Tempo,s.value=n*(i/4|0),t.tempoAutomation=s}parseAttributes(e,t,i,n){let s=0,r=!1;for(let a of e.childNodes)if(a.nodeType===H.Element)switch(a.localName){case"divisions":this._divisionsPerQuarterNote=parseInt(a.innerText);break;case"key":this.parseKey(a,i);break;case"time":this.parseTime(a,i),r=!0;break;case"clef":s=parseInt(a.getAttribute("number")),isNaN(s)&&(s=1),this.parseClef(a,t[s-1]);break;case"staff-details":this.parseStaffDetails(a,n);break;case"transpose":this.parseTranspose(a,n);break}r||(i.timeSignatureCommon=!0)}parseTranspose(e,t){let i=0;for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"chromatic":i+=parseInt(n.innerText);break;case"octave-change":i+=12*parseInt(n.innerText);break}for(let n of t.staves)n.transpositionPitch=i}parseClef(e,t){let i="s",n=0;for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"sign":i=s.innerText.toLowerCase();break;case"line":n=parseInt(s.innerText);break;case"clef-octave-change":switch(parseInt(s.innerText)){case-2:t.clefOttava=p._15mb;break;case-1:t.clefOttava=p._8vb;break;case 1:t.clefOttava=p._8va;break;case 2:t.clefOttava=p._15mb;break}break}switch(i){case"g":t.clef=d.G2;break;case"f":t.clef=d.F4;break;case"c":t.clef=3===n?d.C3:d.C4;break;case"percussion":t.clef=d.Neutral,t.staff.isPercussion=!0;break;case"tab":t.clef=d.G2,t.staff.showTablature=!0;break;default:t.clef=d.G2;break}}parseTime(e,t){"common"===e.getAttribute("symbol")&&(t.timeSignatureCommon=!0);let i=!1,n=!1;for(let s of e.childNodes)if(s.nodeType===H.Element){let e=s.innerText;switch(s.localName){case"beats":i||(-1===e.indexOf("+")?t.timeSignatureNumerator=parseInt(e):t.timeSignatureNumerator=4,i=!0);break;case"beat-type":n||(-1===e.indexOf("+")?t.timeSignatureDenominator=parseInt(e):t.timeSignatureDenominator=4,n=!0);break}}}parseKey(e,t){let i=-2147483648,n="";for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"fifths":i=parseInt(s.innerText);break;case"key-step":break;case"key-alter":break;case"mode":n=s.innerText;break}t.keySignature=-7<=i&&i<=7?i:M.C,t.keySignatureType="minor"===n?A.Minor:A.Major}getOrCreateMasterBar(e){if(e<this._score.masterBars.length)return this._score.masterBars[e];for(let t=this._score.masterBars.length;t<=e;t++){let e=new He;if(this._score.masterBars.length>0){let t=this._score.masterBars[this._score.masterBars.length-1];e.timeSignatureDenominator=t.timeSignatureDenominator,e.timeSignatureNumerator=t.timeSignatureNumerator,e.keySignature=t.keySignature,e.keySignatureType=t.keySignatureType}this._score.addMasterBar(e)}return this._score.masterBars[e]}parseIdentification(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"creator":"composer"===t.getAttribute("type")&&(this._score.music=t.innerText);break;case"rights":this._score.copyright&&(this._score.copyright+="\n"),this._score.copyright+=t.innerText;break}}parsePartList(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"part-group":this.parsePartGroup(t);break;case"score-part":this.parseScorePart(t);break}}parsePartGroup(e){let t=e.getAttribute("type");switch(t){case"start":this._currentPartGroup=e.getAttribute("number"),this._partGroups.set(this._currentPartGroup,[]);break;case"stop":this._currentPartGroup=null;break}}parseScorePart(e){let t=e.getAttribute("id"),i=new Ye;i.ensureStaveCount(1);let n=i.staves[0];n.showStandardNotation=!0,this._trackById.set(t,i),this._score.addTrack(i),this._currentPartGroup&&this._partGroups.get(this._currentPartGroup).push(i);for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"part-name":i.name=s.innerText;break;case"part-abbreviation":i.shortName=s.innerText;break;case"midi-instrument":this.parseMidiInstrument(s,i);break}this.isEmptyTuning(i.staves[0].tuning)&&(i.staves[0].stringTuning.tunings=[])}isEmptyTuning(e){if(!e)return!0;for(let t=0;t<e.length;t++)if(0!==e[t])return!1;return!0}parseMidiInstrument(e,t){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"midi-channel":t.playbackInfo.primaryChannel=parseInt(i.innerText);break;case"midi-program":t.playbackInfo.program=parseInt(i.innerText);break;case"volume":t.playbackInfo.volume=Math.floor(parseInt(i.innerText)/100*16);break;case"pan":t.playbackInfo.balance=Math.max(0,Math.min(16,Math.floor((parseInt(i.innerText)+90)/180*16)));break}}}(function(e){e[e["PerNotePitchBend"]=96]="PerNotePitchBend",e[e["NoteOff"]=128]="NoteOff",e[e["NoteOn"]=144]="NoteOn",e[e["NoteAftertouch"]=160]="NoteAftertouch",e[e["Controller"]=176]="Controller",e[e["ProgramChange"]=192]="ProgramChange",e[e["ChannelAftertouch"]=208]="ChannelAftertouch",e[e["PitchBend"]=224]="PitchBend",e[e["SystemExclusive"]=240]="SystemExclusive",e[e["SystemExclusive2"]=247]="SystemExclusive2",e[e["Meta"]=255]="Meta"})($||($={}));class Mt{constructor(e,t,i,n,s){this.track=e,this.tick=t,this.message=i|n<<8|s<<16}get channel(){return 15&this.message}get command(){return 240&this.message}get data1(){return(65280&this.message)>>8}set data1(e){this.message&=-65281,this.message|=e<<8}get data2(){return(16711680&this.message)>>16}set data2(e){this.message&=-16711681,this.message|=e<<16}writeTo(e){let t=new Uint8Array([this.message>>24&255,this.message>>16&255,this.message>>8&255,255&this.message]);e.write(t,0,t.length)}}(function(e){e[e["SequenceNumber"]=0]="SequenceNumber",e[e["TextEvent"]=1]="TextEvent",e[e["CopyrightNotice"]=2]="CopyrightNotice",e[e["SequenceOrTrackName"]=3]="SequenceOrTrackName",e[e["InstrumentName"]=4]="InstrumentName",e[e["LyricText"]=5]="LyricText",e[e["MarkerText"]=6]="MarkerText",e[e["CuePoint"]=7]="CuePoint",e[e["PatchName"]=8]="PatchName",e[e["PortName"]=9]="PortName",e[e["MidiChannel"]=32]="MidiChannel",e[e["MidiPort"]=33]="MidiPort",e[e["EndOfTrack"]=47]="EndOfTrack",e[e["Tempo"]=81]="Tempo",e[e["SmpteOffset"]=84]="SmpteOffset",e[e["TimeSignature"]=88]="TimeSignature",e[e["KeySignature"]=89]="KeySignature",e[e["SequencerSpecific"]=127]="SequencerSpecific"})(z||(z={}));class At extends Mt{get channel(){return-1}get command(){return 255&this.message}get metaStatus(){return this.data1}constructor(e,t,i,n,s){super(e,t,i,n,s)}}(function(e){e[e["SystemExclusive"]=240]="SystemExclusive",e[e["MtcQuarterFrame"]=241]="MtcQuarterFrame",e[e["SongPosition"]=242]="SongPosition",e[e["SongSelect"]=243]="SongSelect",e[e["TuneRequest"]=246]="TuneRequest",e[e["SystemExclusive2"]=247]="SystemExclusive2"})(U||(U={}));class It extends Mt{get channel(){return-1}get command(){return 255&this.message}constructor(e,t,i,n,s){super(e,t,i,n,s)}}(function(e){e[e["MetronomeTick"]=0]="MetronomeTick",e[e["Rest"]=1]="Rest"})(X||(X={}));class Dt extends It{constructor(e,t,i,n,s){super(e,t,i,255&n,n>>8&255),this.data=s}get isMetronome(){return this.manufacturerId==Dt.AlphaTabManufacturerId&&this.data[0]==X.MetronomeTick}get metronomeNumerator(){return this.isMetronome?this.data[1]:-1}get metronomeDurationInTicks(){return this.isMetronome?Qe.decodeUInt32LE(this.data,2):-1}get metronomeDurationInMilliseconds(){return this.isMetronome?Qe.decodeUInt32LE(this.data,6):-1}get isRest(){return this.manufacturerId==Dt.AlphaTabManufacturerId&&this.data[0]==X.Rest}get manufacturerId(){return this.message>>8}writeTo(e){e.writeByte(240);let t=this.data.length+2;e.writeByte(this.manufacturerId);let i=new Uint8Array([t>>24&255,t>>16&255,t>>8&255,255&t]);e.write(i,0,i.length),e.writeByte(247)}static encodeMetronome(e,t,i){const n=Ke.withCapacity(10);return n.writeByte(X.MetronomeTick),n.writeByte(e),Qe.writeInt32LE(n,t),Qe.writeInt32LE(n,i),n.toArray()}}Dt.AlphaTabManufacturerId=125;class Rt{constructor(e,t){this.time=0,this.eventIndex=e,this.event=t,this.isMetronome=this.event instanceof Dt&&this.event.isMetronome}static newMetronomeEvent(e,t,i,n,s){const r=new Dt(0,t,$.SystemExclusive2,Dt.AlphaTabManufacturerId,Dt.encodeMetronome(i,n,s)),a=new Rt(e,r);return a}}class Vt{}Vt.DefaultChannelCount=17,Vt.MetronomeChannel=Vt.DefaultChannelCount-1,Vt.AudioChannels=2,Vt.MinVolume=0,Vt.MinProgram=0,Vt.MaxProgram=127,Vt.MinPlaybackSpeed=.125,Vt.MaxPlaybackSpeed=8,Vt.MaxPitchWheel=16384,Vt.MaxPitchWheel20=4294967296,Vt.DefaultPitchWheel=Vt.MaxPitchWheel/2,Vt.MicroBufferCount=32,Vt.MicroBufferSize=64;class Ht{constructor(e,t,i){this.bpm=e,this.ticks=t,this.time=i}}class Gt{constructor(){this.tempoChanges=[],this.firstProgramEventPerChannel=new Map,this.firstTimeSignatureNumerator=0,this.firstTimeSignatureDenominator=0,this.synthData=[],this.division=0,this.eventIndex=0,this.currentTime=0,this.playbackRange=null,this.playbackRangeStartTime=0,this.playbackRangeEndTime=0,this.endTick=0,this.endTime=0}}class Wt{constructor(e){this._oneTimeState=null,this._countInState=null,this.isLooping=!1,this.playbackSpeed=1,this._synthesizer=e,this._mainState=new Gt,this._currentState=this._mainState}get isPlayingOneTimeMidi(){return this._currentState==this._oneTimeState}get isPlayingCountIn(){return this._currentState==this._countInState}get playbackRange(){return this._currentState.playbackRange}set playbackRange(e){this._currentState.playbackRange=e,e&&(this._currentState.playbackRangeStartTime=this.tickPositionToTimePositionWithSpeed(e.startTick,1),this._currentState.playbackRangeEndTime=this.tickPositionToTimePositionWithSpeed(e.endTick,1))}get currentTime(){return this._currentState.currentTime}get endTick(){return this._currentState.endTick}get endTime(){return this._currentState.endTime/this.playbackSpeed}seek(e){if(e*=this.playbackSpeed,this.playbackRange&&(e<this._currentState.playbackRangeStartTime?e=this._currentState.playbackRangeStartTime:e>this._currentState.playbackRangeEndTime&&(e=this._currentState.playbackRangeEndTime)),e>this._currentState.currentTime)this.silentProcess(e-this._currentState.currentTime);else if(e<this._currentState.currentTime){this._currentState.currentTime=0,this._currentState.eventIndex=0;let t=this._synthesizer.metronomeVolume;this._synthesizer.noteOffAll(!0),this._synthesizer.resetSoft(),this._synthesizer.setupMetronomeChannel(t),this.silentProcess(e)}}silentProcess(e){if(e<=0)return;let t=Date.now(),i=this._currentState.currentTime+e;while(this._currentState.currentTime<i)this.fillMidiEventQueueLimited(i-this._currentState.currentTime)&&this._synthesizer.synthesizeSilent(Vt.MicroBufferSize);this._currentState.currentTime=i;let n=Date.now()-t;Ne.debug("Sequencer","Silent seek finished in "+n+"ms")}loadOneTimeMidi(e){this._oneTimeState=this.createStateFromFile(e),this._currentState=this._oneTimeState}loadMidi(e){this._mainState=this.createStateFromFile(e),this._currentState=this._mainState}createStateFromFile(e){const t=new Gt;t.tempoChanges=[],t.division=e.division,t.eventIndex=0,t.currentTime=0,t.synthData=[];let i=120,n=0,s=0,r=0,a=0,o=0,l=0,h=0,c=0;for(let u of e.events){let d=new Rt(t.synthData.length,u);t.synthData.push(d);let p=u.tick-c;if(n+=p,s+=p*(6e4/(i*e.division)),d.time=s,c=u.tick,a>0)while(l<n){let e=Rt.newMetronomeEvent(t.synthData.length,l,Math.floor(l/a)%r,a,o);t.synthData.push(e),e.time=h,l+=a,h+=o}if(u.command===$.Meta&&u.data1===z.Tempo){let r=u;i=6e7/r.value,t.tempoChanges.push(new Ht(i,n,s)),o=a*(6e4/(i*e.division))}else if(u.command===$.Meta&&u.data1===z.TimeSignature){let n=u,s=Math.pow(2,n.data[1]);r=n.data[0],a=t.division*(4/s)|0,o=a*(6e4/(i*e.division)),0===t.firstTimeSignatureDenominator&&(t.firstTimeSignatureNumerator=n.data[0],t.firstTimeSignatureDenominator=s)}else if(u.command===$.ProgramChange){let e=u.channel;t.firstProgramEventPerChannel.has(e)||t.firstProgramEventPerChannel.set(e,d)}}return t.synthData.sort((e,t)=>e.time>t.time?1:e.time<t.time?-1:e.eventIndex-t.eventIndex),t.endTime=s,t.endTick=n,t}fillMidiEventQueue(){return this.fillMidiEventQueueLimited(-1)}fillMidiEventQueueLimited(e){let t=Vt.MicroBufferSize/this._synthesizer.outSampleRate*1e3*this.playbackSpeed,i=this.internalEndTime;e>0&&(e<t&&(t=e),i=Math.min(this.internalEndTime,this._currentState.currentTime+e));let n=!1;this._currentState.currentTime+=t;while(this._currentState.eventIndex<this._currentState.synthData.length&&this._currentState.synthData[this._currentState.eventIndex].time<this._currentState.currentTime&&this._currentState.currentTime<i)this._synthesizer.dispatchEvent(this._currentState.synthData[this._currentState.eventIndex]),this._currentState.eventIndex++,n=!0;return n}tickPositionToTimePosition(e){return this.tickPositionToTimePositionWithSpeed(e,this.playbackSpeed)}timePositionToTickPosition(e){return this.timePositionToTickPositionWithSpeed(e,this.playbackSpeed)}tickPositionToTimePositionWithSpeed(e,t){let i=0,n=120,s=0;for(const r of this._currentState.tempoChanges){if(e<r.ticks)break;i=r.time,n=r.bpm,s=r.ticks}return e-=s,i+=e*(6e4/(n*this._currentState.division)),i/t}timePositionToTickPositionWithSpeed(e,t){e*=t;let i=0,n=120,s=0;for(const r of this._currentState.tempoChanges){if(e<r.time)break;i=r.ticks,n=r.bpm,s=r.time}return e-=s,i+=e/(6e4/(n*this._currentState.division))|0,i+1}get internalEndTime(){return this.playbackRange?this._currentState.playbackRangeEndTime:this._currentState.endTime}get isFinished(){return this._currentState.currentTime>=this.internalEndTime}stop(){this.playbackRange?this.playbackRange&&(this._currentState.currentTime=this.playbackRange.startTick,this._currentState.eventIndex=0):(this._currentState.currentTime=0,this._currentState.eventIndex=0)}resetOneTimeMidi(){this._oneTimeState=null,this._currentState=this._mainState}resetCountIn(){this._countInState=null,this._currentState=this._mainState}startCountIn(){this.generateCountInMidi(),this._currentState=this._countInState,this.stop(),this._synthesizer.noteOffAll(!0)}generateCountInMidi(){const e=new Gt;e.division=this._mainState.division;let t=120,i=4,n=4;0===this._mainState.eventIndex?(t=this._mainState.tempoChanges[0].bpm,i=this._mainState.firstTimeSignatureNumerator,n=this._mainState.firstTimeSignatureDenominator):(t=this._synthesizer.currentTempo,i=this._synthesizer.timeSignatureNumerator,n=this._synthesizer.timeSignatureDenominator),e.tempoChanges.push(new Ht(t,0,0));let s=e.division*(4/n)|0,r=s*(6e4/(t*this._mainState.division)),a=0,o=0;for(let l=0;l<i;l++){let t=Rt.newMetronomeEvent(e.synthData.length,a,l,s,r);e.synthData.push(t),t.time=o,a+=s,o+=r}e.synthData.sort((e,t)=>e.time>t.time?1:e.time<t.time?-1:e.eventIndex-t.eventIndex),e.endTime=o,e.endTick=a,this._countInState=e}}(function(e){e[e["Paused"]=0]="Paused",e[e["Playing"]=1]="Playing"})(Y||(Y={}));class jt{constructor(e,t){this.state=e,this.stopped=t}}class $t{constructor(e,t,i,n,s){this.currentTime=e,this.endTime=t,this.currentTick=i,this.endTick=n,this.isSeek=s}}class zt{constructor(){this.id="",this.size=0}static load(e,t,i){if(e&&zt.HeaderSize>e.size)return!1;if(i.position+zt.HeaderSize>=i.length)return!1;if(t.id=Qe.read8BitStringLength(i,4),t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122)return!1;if(t.size=Qe.readUInt32LE(i),e&&zt.HeaderSize+t.size>e.size)return!1;e&&(e.size-=zt.HeaderSize+t.size);let n="RIFF"===t.id,s="LIST"===t.id;return(!n||!e)&&(!n&&!s||(t.id=Qe.read8BitStringLength(i,4),!(t.id.charCodeAt(0)<=32||t.id.charCodeAt(0)>=122)&&(t.size-=4,!0)))}}zt.HeaderSize=8;class Ut{constructor(){this.phdrs=[],this.pbags=[],this.pmods=[],this.pgens=[],this.insts=[],this.ibags=[],this.imods=[],this.igens=[],this.sHdrs=[],this.fontSamples=new Float32Array(0)}load(e){const t=new zt,i=new zt;if(!zt.load(null,t,e)||"sfbk"!==t.id)throw new s("Soundfont is not a valid Soundfont2 file");while(zt.load(t,i,e)){let t=new zt;if("pdta"===i.id)while(zt.load(i,t,e))switch(t.id){case"phdr":for(let i=0,n=t.size/Zt.SizeInFile|0;i<n;i++)this.phdrs.push(new Zt(e));break;case"pbag":for(let i=0,n=t.size/Qt.SizeInFile|0;i<n;i++)this.pbags.push(new Qt(e));break;case"pmod":for(let i=0,n=t.size/ei.SizeInFile|0;i<n;i++)this.pmods.push(new ei(e));break;case"pgen":for(let i=0,n=t.size/Kt.SizeInFile|0;i<n;i++)this.pgens.push(new Kt(e));break;case"inst":for(let i=0,n=t.size/Jt.SizeInFile|0;i<n;i++)this.insts.push(new Jt(e));break;case"ibag":for(let i=0,n=t.size/Xt.SizeInFile|0;i<n;i++)this.ibags.push(new Xt(e));break;case"imod":for(let i=0,n=t.size/Yt.SizeInFile|0;i<n;i++)this.imods.push(new Yt(e));break;case"igen":for(let i=0,n=t.size/qt.SizeInFile|0;i<n;i++)this.igens.push(new qt(e));break;case"shdr":for(let i=0,n=t.size/ti.SizeInFile|0;i<n;i++)this.sHdrs.push(new ti(e));break;default:e.position+=t.size;break}else if("sdta"===i.id)while(zt.load(i,t,e))switch(t.id){case"smpl":this.fontSamples=Ut.loadSamples(t,e);break;default:e.position+=t.size;break}else e.position+=i.size}}static loadSamples(e,t){let i=e.size/2|0;const n=new Float32Array(i);let s=0;const r=new Uint8Array(2048),a=new Int16Array(r.length/2|0);while(i>0){let e=Math.min(i,r.length/2|0);t.read(r,0,2*e);for(let t=0;t<e;t++)a[t]=r[2*t+1]<<8|r[2*t],n[s+t]=a[t]/32767;i-=e,s+=e}return n}}class Xt{constructor(e){this.instGenNdx=Qe.readUInt16LE(e),this.instModNdx=Qe.readUInt16LE(e)}}Xt.SizeInFile=4;class Yt{constructor(e){this.modSrcOper=Qe.readUInt16LE(e),this.modDestOper=Qe.readUInt16LE(e),this.modAmount=Qe.readInt16LE(e),this.modAmtSrcOper=Qe.readUInt16LE(e),this.modTransOper=Qe.readUInt16LE(e)}}Yt.SizeInFile=10;class qt{constructor(e){this.genOper=Qe.readUInt16LE(e),this.genAmount=new ii(e)}}qt.SizeInFile=4;class Jt{constructor(e){this.instName=Qe.read8BitStringLength(e,20),this.instBagNdx=Qe.readUInt16LE(e)}}Jt.SizeInFile=22;class Qt{constructor(e){this.genNdx=Qe.readUInt16LE(e),this.modNdx=Qe.readUInt16LE(e)}}Qt.SizeInFile=4;class Kt{constructor(e){this.genOper=Qe.readUInt16LE(e),this.genAmount=new ii(e)}}Kt.SizeInFile=4,Kt.GenInstrument=41,Kt.GenKeyRange=43,Kt.GenVelRange=44,Kt.GenSampleId=53;class Zt{constructor(e){this.presetName=Qe.read8BitStringLength(e,20),this.preset=Qe.readUInt16LE(e),this.bank=Qe.readUInt16LE(e),this.presetBagNdx=Qe.readUInt16LE(e),this.library=Qe.readUInt32LE(e),this.genre=Qe.readUInt32LE(e),this.morphology=Qe.readUInt32LE(e)}}Zt.SizeInFile=38;class ei{constructor(e){this.modSrcOper=Qe.readUInt16LE(e),this.modDestOper=Qe.readUInt16LE(e),this.modAmount=Qe.readUInt16LE(e),this.modAmtSrcOper=Qe.readUInt16LE(e),this.modTransOper=Qe.readUInt16LE(e)}}ei.SizeInFile=10;class ti{constructor(e){this.sampleName=Qe.read8BitStringLength(e,20),this.start=Qe.readUInt32LE(e),this.end=Qe.readUInt32LE(e),this.startLoop=Qe.readUInt32LE(e),this.endLoop=Qe.readUInt32LE(e),this.sampleRate=Qe.readUInt32LE(e),this.originalPitch=e.readByte(),this.pitchCorrection=Qe.readSInt8(e),this.sampleLink=Qe.readUInt16LE(e),this.sampleType=Qe.readUInt16LE(e)}}ti.SizeInFile=46;class ii{constructor(e){this.wordAmount=Qe.readUInt16LE(e)}get shortAmount(){return Je.uint16ToInt16(this.wordAmount)}get lowByteAmount(){return 255&this.wordAmount}get highByteAmount(){return(65280&this.wordAmount)>>8&255}}class ni{constructor(){this.presetIndex=0,this.bank=0,this.pitchWheel=0,this.perNotePitchWheel=new Map,this.midiPan=0,this.midiVolume=0,this.midiExpression=0,this.midiRpn=0,this.midiData=0,this.panOffset=0,this.gainDb=0,this.pitchRange=0,this.tuning=0,this.mixVolume=0,this.mute=!1,this.solo=!1}}class si{constructor(){this.activeChannel=0,this.channelList=[]}setupVoice(e,t){const i=this.channelList[this.activeChannel],n=t.region.pan+i.panOffset;t.playingChannel=this.activeChannel,t.mixVolume=i.mixVolume,t.noteGainDb+=i.gainDb,t.updatePitchRatio(i,e.outSampleRate),n<=-.5?(t.panFactorLeft=1,t.panFactorRight=0):n>=.5?(t.panFactorLeft=0,t.panFactorRight=1):(t.panFactorLeft=Math.sqrt(.5-n),t.panFactorRight=Math.sqrt(.5+n))}}(function(e){e[e["None"]=0]="None",e[e["Continuous"]=1]="Continuous",e[e["Sustain"]=2]="Sustain"})(q||(q={})),function(e){e[e["StereoInterleaved"]=0]="StereoInterleaved",e[e["StereoUnweaved"]=1]="StereoUnweaved",e[e["Mono"]=2]="Mono"}(J||(J={}));class ri{constructor(){this.name="",this.presetNumber=0,this.bank=0,this.regions=null,this.fontSamples=null}}class ai{static timecents2Secs(e){return Math.pow(2,e/1200)}static decibelsToGain(e){return e>-100?Math.pow(10,.05*e):0}static gainToDecibels(e){return e<=1e-5?-100:20*Math.log10(e)}static cents2Hertz(e){return 8.176*Math.pow(2,e/1200)}static clamp(e,t,i){return e<=t?t:e>=i?i:e}}class oi{constructor(e){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0,e&&(this.delay=e.delay,this.attack=e.attack,this.hold=e.hold,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.keynumToHold=e.keynumToHold,this.keynumToDecay=e.keynumToDecay)}clear(){this.delay=0,this.attack=0,this.hold=0,this.decay=0,this.sustain=0,this.release=0,this.keynumToHold=0,this.keynumToDecay=0}envToSecs(e){this.delay=this.delay<-11950?0:ai.timecents2Secs(this.delay),this.attack=this.attack<-11950?0:ai.timecents2Secs(this.attack),this.release=this.release<-11950?0:ai.timecents2Secs(this.release),0===this.keynumToHold&&(this.hold=this.hold<-11950?0:ai.timecents2Secs(this.hold)),0===this.keynumToDecay&&(this.decay=this.decay<-11950?0:ai.timecents2Secs(this.decay)),this.sustain<0?this.sustain=0:this.sustain=e?ai.decibelsToGain(-this.sustain/10):1-this.sustain/1e3}}(function(e){e[e["StartAddrsOffset"]=0]="StartAddrsOffset",e[e["EndAddrsOffset"]=1]="EndAddrsOffset",e[e["StartloopAddrsOffset"]=2]="StartloopAddrsOffset",e[e["EndloopAddrsOffset"]=3]="EndloopAddrsOffset",e[e["StartAddrsCoarseOffset"]=4]="StartAddrsCoarseOffset",e[e["ModLfoToPitch"]=5]="ModLfoToPitch",e[e["VibLfoToPitch"]=6]="VibLfoToPitch",e[e["ModEnvToPitch"]=7]="ModEnvToPitch",e[e["InitialFilterFc"]=8]="InitialFilterFc",e[e["InitialFilterQ"]=9]="InitialFilterQ",e[e["ModLfoToFilterFc"]=10]="ModLfoToFilterFc",e[e["ModEnvToFilterFc"]=11]="ModEnvToFilterFc",e[e["EndAddrsCoarseOffset"]=12]="EndAddrsCoarseOffset",e[e["ModLfoToVolume"]=13]="ModLfoToVolume",e[e["Unused1"]=14]="Unused1",e[e["ChorusEffectsSend"]=15]="ChorusEffectsSend",e[e["ReverbEffectsSend"]=16]="ReverbEffectsSend",e[e["Pan"]=17]="Pan",e[e["Unused2"]=18]="Unused2",e[e["Unused3"]=19]="Unused3",e[e["Unused4"]=20]="Unused4",e[e["DelayModLFO"]=21]="DelayModLFO",e[e["FreqModLFO"]=22]="FreqModLFO",e[e["DelayVibLFO"]=23]="DelayVibLFO",e[e["FreqVibLFO"]=24]="FreqVibLFO",e[e["DelayModEnv"]=25]="DelayModEnv",e[e["AttackModEnv"]=26]="AttackModEnv",e[e["HoldModEnv"]=27]="HoldModEnv",e[e["DecayModEnv"]=28]="DecayModEnv",e[e["SustainModEnv"]=29]="SustainModEnv",e[e["ReleaseModEnv"]=30]="ReleaseModEnv",e[e["KeynumToModEnvHold"]=31]="KeynumToModEnvHold",e[e["KeynumToModEnvDecay"]=32]="KeynumToModEnvDecay",e[e["DelayVolEnv"]=33]="DelayVolEnv",e[e["AttackVolEnv"]=34]="AttackVolEnv",e[e["HoldVolEnv"]=35]="HoldVolEnv",e[e["DecayVolEnv"]=36]="DecayVolEnv",e[e["SustainVolEnv"]=37]="SustainVolEnv",e[e["ReleaseVolEnv"]=38]="ReleaseVolEnv",e[e["KeynumToVolEnvHold"]=39]="KeynumToVolEnvHold",e[e["KeynumToVolEnvDecay"]=40]="KeynumToVolEnvDecay",e[e["Instrument"]=41]="Instrument",e[e["Reserved1"]=42]="Reserved1",e[e["KeyRange"]=43]="KeyRange",e[e["VelRange"]=44]="VelRange",e[e["StartloopAddrsCoarseOffset"]=45]="StartloopAddrsCoarseOffset",e[e["Keynum"]=46]="Keynum",e[e["Velocity"]=47]="Velocity",e[e["InitialAttenuation"]=48]="InitialAttenuation",e[e["Reserved2"]=49]="Reserved2",e[e["EndloopAddrsCoarseOffset"]=50]="EndloopAddrsCoarseOffset",e[e["CoarseTune"]=51]="CoarseTune",e[e["FineTune"]=52]="FineTune",e[e["SampleID"]=53]="SampleID",e[e["SampleModes"]=54]="SampleModes",e[e["Reserved3"]=55]="Reserved3",e[e["ScaleTuning"]=56]="ScaleTuning",e[e["ExclusiveClass"]=57]="ExclusiveClass",e[e["OverridingRootKey"]=58]="OverridingRootKey",e[e["Unused5"]=59]="Unused5",e[e["EndOper"]=60]="EndOper"})(Q||(Q={}));class li{constructor(e){this.loopMode=q.None,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv=new oi,this.modEnv=new oi,this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,e&&(this.loopMode=e.loopMode,this.sampleRate=e.sampleRate,this.loKey=e.loKey,this.hiKey=e.hiKey,this.loVel=e.loVel,this.hiVel=e.hiVel,this.group=e.group,this.offset=e.offset,this.end=e.end,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.transpose=e.transpose,this.tune=e.tune,this.pitchKeyCenter=e.pitchKeyCenter,this.pitchKeyTrack=e.pitchKeyTrack,this.attenuation=e.attenuation,this.pan=e.pan,this.ampEnv=new oi(e.ampEnv),this.modEnv=new oi(e.modEnv),this.initialFilterQ=e.initialFilterQ,this.initialFilterFc=e.initialFilterFc,this.modEnvToPitch=e.modEnvToPitch,this.modEnvToFilterFc=e.modEnvToFilterFc,this.modLfoToFilterFc=e.modLfoToFilterFc,this.modLfoToVolume=e.modLfoToVolume,this.delayModLFO=e.delayModLFO,this.freqModLFO=e.freqModLFO,this.modLfoToPitch=e.modLfoToPitch,this.delayVibLFO=e.delayVibLFO,this.freqVibLFO=e.freqVibLFO,this.vibLfoToPitch=e.vibLfoToPitch)}clear(e){this.loopMode=q.None,this.sampleRate=0,this.loKey=0,this.hiKey=0,this.loVel=0,this.hiVel=0,this.group=0,this.offset=0,this.end=0,this.loopStart=0,this.loopEnd=0,this.transpose=0,this.tune=0,this.pitchKeyCenter=0,this.pitchKeyTrack=0,this.attenuation=0,this.pan=0,this.ampEnv.clear(),this.modEnv.clear(),this.initialFilterQ=0,this.initialFilterFc=0,this.modEnvToPitch=0,this.modEnvToFilterFc=0,this.modLfoToFilterFc=0,this.modLfoToVolume=0,this.delayModLFO=0,this.freqModLFO=0,this.modLfoToPitch=0,this.delayVibLFO=0,this.freqVibLFO=0,this.vibLfoToPitch=0,this.hiKey=127,this.hiVel=127,this.pitchKeyCenter=60,e||(this.pitchKeyTrack=100,this.pitchKeyCenter=-1,this.ampEnv.delay=-12e3,this.ampEnv.attack=-12e3,this.ampEnv.hold=-12e3,this.ampEnv.decay=-12e3,this.ampEnv.release=-12e3,this.modEnv.delay=-12e3,this.modEnv.attack=-12e3,this.modEnv.hold=-12e3,this.modEnv.decay=-12e3,this.modEnv.release=-12e3,this.initialFilterFc=13500,this.delayModLFO=-12e3,this.delayVibLFO=-12e3)}operator(e,t){switch(e){case Q.StartAddrsOffset:this.offset+=Je.int16ToUint32(t.shortAmount);break;case Q.EndAddrsOffset:this.end+=Je.int16ToUint32(t.shortAmount);break;case Q.StartloopAddrsOffset:this.loopStart+=Je.int16ToUint32(t.shortAmount);break;case Q.EndloopAddrsOffset:this.loopEnd+=Je.int16ToUint32(t.shortAmount);break;case Q.StartAddrsCoarseOffset:this.offset+=32768*Je.int16ToUint32(t.shortAmount);break;case Q.ModLfoToPitch:this.modLfoToPitch=t.shortAmount;break;case Q.VibLfoToPitch:this.vibLfoToPitch=t.shortAmount;break;case Q.ModEnvToPitch:this.modEnvToPitch=t.shortAmount;break;case Q.InitialFilterFc:this.initialFilterFc=t.shortAmount;break;case Q.InitialFilterQ:this.initialFilterQ=t.shortAmount;break;case Q.ModLfoToFilterFc:this.modLfoToFilterFc=t.shortAmount;break;case Q.ModEnvToFilterFc:this.modEnvToFilterFc=t.shortAmount;break;case Q.EndAddrsCoarseOffset:this.end+=32768*Je.int16ToUint32(t.shortAmount);break;case Q.ModLfoToVolume:this.modLfoToVolume=t.shortAmount;break;case Q.Pan:this.pan=t.shortAmount/1e3;break;case Q.DelayModLFO:this.delayModLFO=t.shortAmount;break;case Q.FreqModLFO:this.freqModLFO=t.shortAmount;break;case Q.DelayVibLFO:this.delayVibLFO=t.shortAmount;break;case Q.FreqVibLFO:this.freqVibLFO=t.shortAmount;break;case Q.DelayModEnv:this.modEnv.delay=t.shortAmount;break;case Q.AttackModEnv:this.modEnv.attack=t.shortAmount;break;case Q.HoldModEnv:this.modEnv.hold=t.shortAmount;break;case Q.DecayModEnv:this.modEnv.decay=t.shortAmount;break;case Q.SustainModEnv:this.modEnv.sustain=t.shortAmount;break;case Q.ReleaseModEnv:this.modEnv.release=t.shortAmount;break;case Q.KeynumToModEnvHold:this.modEnv.keynumToHold=t.shortAmount;break;case Q.KeynumToModEnvDecay:this.modEnv.keynumToDecay=t.shortAmount;break;case Q.DelayVolEnv:this.ampEnv.delay=t.shortAmount;break;case Q.AttackVolEnv:this.ampEnv.attack=t.shortAmount;break;case Q.HoldVolEnv:this.ampEnv.hold=t.shortAmount;break;case Q.DecayVolEnv:this.ampEnv.decay=t.shortAmount;break;case Q.SustainVolEnv:this.ampEnv.sustain=t.shortAmount;break;case Q.ReleaseVolEnv:this.ampEnv.release=t.shortAmount;break;case Q.KeynumToVolEnvHold:this.ampEnv.keynumToHold=t.shortAmount;break;case Q.KeynumToVolEnvDecay:this.ampEnv.keynumToDecay=t.shortAmount;break;case Q.KeyRange:this.loKey=t.lowByteAmount,this.hiKey=t.highByteAmount;break;case Q.VelRange:this.loVel=t.lowByteAmount,this.hiVel=t.highByteAmount;break;case Q.StartloopAddrsCoarseOffset:this.loopStart+=32768*Je.int16ToUint32(t.shortAmount);break;case Q.InitialAttenuation:this.attenuation+=.1*t.shortAmount;break;case Q.EndloopAddrsCoarseOffset:this.loopEnd+=32768*Je.int16ToUint32(t.shortAmount);break;case Q.CoarseTune:this.transpose+=t.shortAmount;break;case Q.FineTune:this.tune+=t.shortAmount;break;case Q.SampleModes:this.loopMode=3===(3&t.wordAmount)?q.Sustain:1===(3&t.wordAmount)?q.Continuous:q.None;break;case Q.ScaleTuning:this.pitchKeyTrack=t.shortAmount;break;case Q.ExclusiveClass:this.group=t.wordAmount;break;case Q.OverridingRootKey:this.pitchKeyCenter=t.shortAmount;break}}}(function(e){e[e["None"]=0]="None",e[e["Delay"]=1]="Delay",e[e["Attack"]=2]="Attack",e[e["Hold"]=3]="Hold",e[e["Decay"]=4]="Decay",e[e["Sustain"]=5]="Sustain",e[e["Release"]=6]="Release",e[e["Done"]=7]="Done"})(K||(K={}));class hi{constructor(){this.level=0,this.slope=0,this.samplesUntilNextSegment=0,this.segment=K.None,this.midiVelocity=0,this.parameters=null,this.segmentIsExponential=!1,this.isAmpEnv=!1}nextSegment(e,t){if(this.parameters)while(1)switch(e){case K.None:if(this.samplesUntilNextSegment=this.parameters.delay*t|0,this.samplesUntilNextSegment>0)return this.segment=K.Delay,this.segmentIsExponential=!1,this.level=0,void(this.slope=0);e=K.Delay;break;case K.Delay:if(this.samplesUntilNextSegment=this.parameters.attack*t|0,this.samplesUntilNextSegment>0)return this.isAmpEnv||(this.samplesUntilNextSegment=this.parameters.attack*((145-this.midiVelocity)/144)*t|0),this.segment=K.Attack,this.segmentIsExponential=!1,this.level=0,void(this.slope=1/this.samplesUntilNextSegment);e=K.Attack;break;case K.Attack:if(this.samplesUntilNextSegment=this.parameters.hold*t|0,this.samplesUntilNextSegment>0)return this.segment=K.Hold,this.segmentIsExponential=!1,this.level=1,void(this.slope=0);e=K.Hold;break;case K.Hold:if(this.samplesUntilNextSegment=this.parameters.decay*t|0,this.samplesUntilNextSegment>0){if(this.segment=K.Decay,this.level=1,this.isAmpEnv){let e=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(e),this.segmentIsExponential=!0,this.parameters.sustain>0&&(this.samplesUntilNextSegment=Math.log(this.parameters.sustain)/e|0)}else this.slope=-1/this.samplesUntilNextSegment,this.samplesUntilNextSegment=this.parameters.decay*(1-this.parameters.sustain)*t|0,this.segmentIsExponential=!1;return}e=K.Decay;break;case K.Decay:return this.segment=K.Sustain,this.level=this.parameters.sustain,this.slope=0,this.samplesUntilNextSegment=2147483647,void(this.segmentIsExponential=!1);case K.Sustain:if(this.segment=K.Release,this.samplesUntilNextSegment=(this.parameters.release<=0?hi.FastReleaseTime:this.parameters.release)*t|0,this.isAmpEnv){let e=-9.226/this.samplesUntilNextSegment;this.slope=Math.exp(e),this.segmentIsExponential=!0}else this.slope=-this.level/this.samplesUntilNextSegment,this.segmentIsExponential=!1;return;default:return this.segment=K.Done,this.segmentIsExponential=!1,this.level=0,this.slope=0,void(this.samplesUntilNextSegment=134217727)}}setup(e,t,i,n,s){this.parameters=new oi(e),this.parameters.keynumToHold>0&&(this.parameters.hold+=this.parameters.keynumToHold*(60-t),this.parameters.hold=this.parameters.hold<-1e4?0:ai.timecents2Secs(this.parameters.hold)),this.parameters.keynumToDecay>0&&(this.parameters.decay+=this.parameters.keynumToDecay*(60-t),this.parameters.decay=this.parameters.decay<-1e4?0:ai.timecents2Secs(this.parameters.decay)),this.midiVelocity=0|i,this.isAmpEnv=n,this.nextSegment(K.None,s)}process(e,t){this.slope>0&&(this.segmentIsExponential?this.level*=Math.pow(this.slope,e):this.level+=this.slope*e),this.samplesUntilNextSegment-=e,this.samplesUntilNextSegment<=0&&this.nextSegment(this.segment,t)}}hi.FastReleaseTime=.01;class ci{constructor(){this.samplesUntil=0,this.level=0,this.delta=0}setup(e,t,i){this.samplesUntil=e*i|0,this.delta=4*ai.cents2Hertz(t)/i,this.level=0}process(e){this.samplesUntil>e?this.samplesUntil-=e:(this.level+=this.delta*e,this.level>1?(this.delta=-this.delta,this.level=2-this.level):this.level<-1&&(this.delta=-this.delta,this.level=-2-this.level))}}class ui{constructor(e){this.qInv=0,this.a0=0,this.a1=0,this.b1=0,this.b2=0,this.z1=0,this.z2=0,this.active=!1,e&&(this.qInv=e.qInv,this.a0=e.a0,this.a1=e.a1,this.b1=e.b1,this.b2=e.b2,this.z1=e.z1,this.z2=e.z2,this.active=e.active)}setup(e){let t=Math.tan(Math.PI*e),i=t*t,n=1/(1+t*this.qInv+i);this.a0=i*n,this.a1=2*this.a0,this.b1=2*(i-1)*n,this.b2=(1-t*this.qInv+i)*n}process(e){let t=e*this.a0+this.z1;return this.z1=e*this.a1+this.z2-this.b1*t,this.z2=e*this.a0-this.b2*t,t}}class di{constructor(){this.playingPreset=0,this.playingKey=0,this.playingChannel=0,this.region=null,this.pitchInputTimecents=0,this.pitchOutputFactor=0,this.sourceSamplePosition=0,this.noteGainDb=0,this.panFactorLeft=0,this.panFactorRight=0,this.playIndex=0,this.loopStart=0,this.loopEnd=0,this.ampEnv=new hi,this.modEnv=new hi,this.lowPass=new ui,this.modLfo=new ci,this.vibLfo=new ci,this.mixVolume=0,this.mute=!1}updatePitchRatio(e,t){let i=e.pitchWheel;e.perNotePitchWheel.has(this.playingKey)&&(i+=e.perNotePitchWheel.get(this.playingKey)-8192);const n=8192===i?e.tuning:i/16383*e.pitchRange*2-e.pitchRange+e.tuning;this.calcPitchRatio(n,t)}calcPitchRatio(e,t){if(!this.region)return;const i=this.playingKey+this.region.transpose+this.region.tune/100;let n=this.region.pitchKeyCenter+(i-this.region.pitchKeyCenter)*(this.region.pitchKeyTrack/100);0!==e&&(n+=e),this.pitchInputTimecents=100*n,this.pitchOutputFactor=this.region.sampleRate/(ai.timecents2Secs(100*this.region.pitchKeyCenter)*t)}end(e){this.region&&(this.ampEnv.nextSegment(K.Sustain,e),this.modEnv.nextSegment(K.Sustain,e),this.region.loopMode===q.Sustain&&(this.loopEnd=this.loopStart))}endQuick(e){this.ampEnv.parameters.release=0,this.ampEnv.nextSegment(K.Sustain,e),this.modEnv.parameters.release=0,this.modEnv.nextSegment(K.Sustain,e)}render(e,t,i,n,s){if(!this.region)return;let r=this.region;const a=e.presets[this.playingPreset];let o=a.fontSamples,l=0,h=e.outputMode===J.StereoUnweaved?n:-1,c=0!==r.modEnvToPitch||0!==r.modEnvToFilterFc,u=this.modLfo.delta>0&&(0!==r.modLfoToPitch||0!==r.modLfoToFilterFc||0!==r.modLfoToVolume),d=this.vibLfo.delta>0&&0!==r.vibLfoToPitch,p=this.loopStart<this.loopEnd,f=this.loopStart,g=this.loopEnd,m=r.end,b=g+1,y=this.sourceSamplePosition,v=new ui(this.lowPass),w=0!==r.modLfoToFilterFc||0!==r.modEnvToFilterFc,S=0,_=0,k=0,T=0,B=0!==r.modLfoToPitch||0!==r.modEnvToPitch||0!==r.vibLfoToPitch,x=0,N=0,C=0,E=0,P=0!==r.modLfoToVolume,L=0,O=0;w?(S=e.outSampleRate,_=r.initialFilterFc,k=r.modLfoToFilterFc,T=r.modEnvToFilterFc):(S=0,_=0,k=0,T=0),B?(x=0,N=r.modLfoToPitch,C=r.vibLfoToPitch,E=r.modEnvToPitch):(x=ai.timecents2Secs(this.pitchInputTimecents)*this.pitchOutputFactor,N=0,C=0,E=0),P?O=.1*r.modLfoToVolume:(L=ai.decibelsToGain(this.noteGainDb),O=0);while(n>0){let r,a,F=0,M=n>di.RenderEffectSampleBlock?di.RenderEffectSampleBlock:n;if(n-=M,w){let e=_+this.modLfo.level*k+this.modEnv.level*T;v.active=e<=13500,v.active&&v.setup(ai.cents2Hertz(e)/S)}switch(B&&(x=ai.timecents2Secs(this.pitchInputTimecents+(this.modLfo.level*N+this.vibLfo.level*C+this.modEnv.level*E))*this.pitchOutputFactor),P&&(L=ai.decibelsToGain(this.noteGainDb+this.modLfo.level*O)),r=L*this.ampEnv.level,s?r=0:r*=this.mixVolume,this.ampEnv.process(M,e.outSampleRate),c&&this.modEnv.process(M,e.outSampleRate),u&&this.modLfo.process(M),d&&this.vibLfo.process(M),e.outputMode){case J.StereoInterleaved:a=r*this.panFactorLeft,F=r*this.panFactorRight;while(M-- >0&&y<m){let e=0|y,n=e>=g&&p?f:e+1,s=y-e,r=o[e]*(1-s)+o[n]*s;v.active&&(r=v.process(r)),t[i+l]+=r*a,l++,t[i+l]+=r*F,l++,y+=x,y>=b&&p&&(y-=g-f+1)}break;case J.StereoUnweaved:a=r*this.panFactorLeft,F=r*this.panFactorRight;while(M-- >0&&y<m){let e=0|y,n=e>=g&&p?f:e+1,s=y-e,r=o[e]*(1-s)+o[n]*s;v.active&&(r=v.process(r)),t[i+l]+=r*a,l++,t[i+h]+=r*F,h++,y+=x,y>=b&&p&&(y-=g-f+1)}break;case J.Mono:while(M-- >0&&y<m){let e=0|y,n=e>=g&&p?f:e+1,s=y-e,a=o[e]*(1-s)+o[n]*s;v.active&&(a=v.process(a)),t[i+l]=a*r,l++,y+=x,y>=b&&p&&(y-=g-f+1)}break}if(y>=m||this.ampEnv.segment===K.Done)return void this.kill()}this.sourceSamplePosition=y,(v.active||w)&&(this.lowPass=v)}kill(){this.playingPreset=-1}}di.RenderEffectSampleBlock=Vt.MicroBufferSize;class pi{constructor(){this._items=[],this._position=0,this.isEmpty=!0}clear(){this._items=[],this._position=0,this.isEmpty=!0}enqueue(e){this.isEmpty=!1,this._items.push(e)}peek(){return this._items[this._position]}dequeue(){const e=this._items[this._position];return this._position++,this._position>=this._items.length/2&&(this._items=this._items.slice(this._position),this._position=0),this.isEmpty=0==this._items.length,e}toArray(){const e=this._items.slice(this._position);return e.reverse(),e}}class fi{constructor(e){this._midiEventQueue=new pi,this._mutedChannels=new Map,this._soloChannels=new Map,this._isAnySolo=!1,this.currentTempo=0,this.timeSignatureNumerator=0,this.timeSignatureDenominator=0,this.presets=null,this._voices=[],this._channels=null,this._voicePlayIndex=0,this.outputMode=J.StereoInterleaved,this.outSampleRate=0,this.globalGainDb=0,this.outSampleRate=e}synthesize(e,t,i){return this.fillWorkingBuffer(e,t,i)}synthesizeSilent(e){this.fillWorkingBuffer(null,0,e)}channelGetMixVolume(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].mixVolume:1}channelSetMixVolume(e,t){let i=this.channelInit(e);for(let n of this._voices)n.playingChannel===e&&-1!==n.playingPreset&&(n.mixVolume=t);i.mixVolume=t}channelSetMute(e,t){t?this._mutedChannels.set(e,!0):this._mutedChannels.delete(e)}channelSetSolo(e,t){t?this._soloChannels.set(e,!0):this._soloChannels.delete(e),this._isAnySolo=this._soloChannels.size>0}resetChannelStates(){this._mutedChannels=new Map,this._soloChannels=new Map,this._isAnySolo=!1}dispatchEvent(e){this._midiEventQueue.enqueue(e)}fillWorkingBuffer(e,t,i){const n=this._isAnySolo,s=[];while(!this._midiEventQueue.isEmpty){let e=this._midiEventQueue.dequeue();e.isMetronome&&this.metronomeVolume>0?(this.channelNoteOff(Vt.MetronomeChannel,33),this.channelNoteOn(Vt.MetronomeChannel,33,95/127)):e.event&&this.processMidiMessage(e.event),s.push(e)}for(const r of this._voices)if(-1!==r.playingPreset){const s=r.playingChannel,a=this._mutedChannels.has(s)||n&&s!=Vt.MetronomeChannel&&!this._soloChannels.has(s);e?r.render(this,e,t,i,a):r.kill()}return s}processMidiMessage(e){const t=e.command,i=e.channel,n=e.data1,s=e.data2;switch(t){case $.NoteOff:this.channelNoteOff(i,n);break;case $.NoteOn:this.channelNoteOn(i,n,s/127);break;case $.NoteAftertouch:break;case $.Controller:this.channelMidiControl(i,n,s);break;case $.ProgramChange:this.channelSetPresetNumber(i,n,9===i);break;case $.ChannelAftertouch:break;case $.PitchBend:this.channelSetPitchWheel(i,n|s<<7);break;case $.PerNotePitchBend:const t=e;let r=t.pitch;r=r*Vt.MaxPitchWheel/Vt.MaxPitchWheel20,this.channelSetPerNotePitchWheel(i,t.noteKey,r);break;case $.Meta:switch(e.data1){case z.Tempo:this.currentTempo=6e7/e.value;break;case z.TimeSignature:this.timeSignatureNumerator=e.data[0],this.timeSignatureDenominator=Math.pow(2,e.data[1]);break}break}}get metronomeVolume(){return this.channelGetMixVolume(Vt.MetronomeChannel)}set metronomeVolume(e){this.setupMetronomeChannel(e)}setupMetronomeChannel(e){this.channelSetMixVolume(Vt.MetronomeChannel,e),e>0&&(this.channelSetVolume(Vt.MetronomeChannel,1),this.channelSetPresetNumber(Vt.MetronomeChannel,0,!0))}get masterVolume(){return ai.decibelsToGain(this.globalGainDb)}set masterVolume(e){var t=ai.gainToDecibels(e);const i=t-this.globalGainDb;if(0!==i){for(const e of this._voices)-1!==e.playingPreset&&(e.noteGainDb+=i);this.globalGainDb=t}}resetSoft(){for(const e of this._voices)-1!==e.playingPreset&&(e.ampEnv.segment<K.Release||0!==e.ampEnv.parameters.release)&&e.endQuick(this.outSampleRate);if(this._channels)for(const e of this._channels.channelList)e.presetIndex=0,e.bank=0,e.pitchWheel=8192,e.midiPan=8192,e.perNotePitchWheel.clear(),e.midiVolume=16383,e.midiExpression=16383,e.midiRpn=65535,e.midiData=0,e.panOffset=0,e.gainDb=0,e.pitchRange=2,e.tuning=0}get presetCount(){var e,t;return null!==(t=null===(e=this.presets)||void 0===e?void 0:e.length)&&void 0!==t?t:0}reset(){for(let e of this._voices)-1!==e.playingPreset&&(e.ampEnv.segment<K.Release||0!==e.ampEnv.parameters.release)&&e.endQuick(this.outSampleRate);this._channels=null}setOutput(e,t,i){this.outputMode=e,this.outSampleRate=t>=1?t:44100,this.globalGainDb=i}noteOn(e,t,i){if(!this.presets)return;const n=127*i|0;if(e<0||e>=this.presets.length)return;if(i<=0)return void this.noteOff(e,t);const s=this._voicePlayIndex++;for(const r of this.presets[e].regions){if(t<r.loKey||t>r.hiKey||n<r.loVel||n>r.hiVel)continue;let a=null;if(0!==r.group)for(const t of this._voices)t.playingPreset===e&&t.region.group===r.group?t.endQuick(this.outSampleRate):-1!==t.playingPreset||a||(a=t);else for(let e of this._voices)-1===e.playingPreset&&(a=e);if(!a){for(let e=0;e<4;e++){const e=new di;e.playingPreset=-1,this._voices.push(e)}a=this._voices[this._voices.length-4]}a.region=r,a.playingPreset=e,a.playingKey=t,a.playIndex=s,a.noteGainDb=this.globalGainDb-r.attenuation-ai.gainToDecibels(1/i),this._channels?this._channels.setupVoice(this,a):(a.calcPitchRatio(0,this.outSampleRate),a.panFactorLeft=Math.sqrt(.5-r.pan),a.panFactorRight=Math.sqrt(.5+r.pan)),a.sourceSamplePosition=r.offset;const o=r.loopMode!==q.None&&r.loopStart<r.loopEnd;a.loopStart=o?r.loopStart:0,a.loopEnd=o?r.loopEnd:0,a.ampEnv.setup(r.ampEnv,t,n,!0,this.outSampleRate),a.modEnv.setup(r.modEnv,t,n,!1,this.outSampleRate);const l=r.initialFilterQ/10;a.lowPass.qInv=1/Math.pow(10,l/20),a.lowPass.z1=0,a.lowPass.z2=0,a.lowPass.active=r.initialFilterFc<=13500,a.lowPass.active&&a.lowPass.setup(ai.cents2Hertz(r.initialFilterFc)/this.outSampleRate),a.modLfo.setup(r.delayModLFO,r.freqModLFO,this.outSampleRate),a.vibLfo.setup(r.delayVibLFO,r.freqVibLFO,this.outSampleRate)}}bankNoteOn(e,t,i,n){let s=this.getPresetIndex(e,t);return-1!==s&&(this.noteOn(s,i,n),!0)}noteOff(e,t){let i=null,n=null,s=[];for(let r of this._voices)r.playingPreset!==e||r.playingKey!==t||r.ampEnv.segment>=K.Release||(!i||r.playIndex<i.playIndex?(i=r,n=r,s.push(r)):r.playIndex===i.playIndex&&(n=r,s.push(r)));if(i)for(const r of s)r!==i&&r!==n&&(r.playIndex!==i.playIndex||r.playingPreset!==e||r.playingKey!==t||r.ampEnv.segment>=K.Release)||r.end(this.outSampleRate)}bankNoteOff(e,t,i){const n=this.getPresetIndex(e,t);return-1!==n&&(this.noteOff(n,i),!0)}noteOffAll(e){for(const t of this._voices)-1!==t.playingPreset&&t.ampEnv.segment<K.Release&&(e?t.endQuick(this.outSampleRate):t.end(this.outSampleRate))}get activeVoiceCount(){let e=0;for(const t of this._voices)-1!==t.playingPreset&&e++;return e}channelInit(e){if(this._channels&&e<this._channels.channelList.length)return this._channels.channelList[e];this._channels||(this._channels=new si);for(let t=this._channels.channelList.length;t<=e;t++){let e=new ni;e.presetIndex=0,e.bank=0,e.pitchWheel=8192,e.midiPan=8192,e.midiVolume=16383,e.midiExpression=16383,e.midiRpn=65535,e.midiData=0,e.panOffset=0,e.gainDb=0,e.pitchRange=2,e.tuning=0,e.mixVolume=1,this._channels.channelList.push(e)}return this._channels.channelList[e]}getPresetIndex(e,t){if(!this.presets)return-1;for(let i=this.presets.length-1;i>=0;i--){let n=this.presets[i];if(n.presetNumber===t&&n.bank===e)return i}return-1}getPresetName(e){return this.presets?e<0||e>=this.presets.length?null:this.presets[e].name:null}bankGetPresetName(e,t){return this.getPresetName(this.getPresetIndex(e,t))}channelNoteOn(e,t,i){!this._channels||e>this._channels.channelList.length||(this._channels.activeChannel=e,this.noteOn(this._channels.channelList[e].presetIndex,t,i))}channelNoteOff(e,t){const i=[];let n=null,s=null;for(const a of this._voices)-1===a.playingPreset||a.playingChannel!==e||a.playingKey!==t||a.ampEnv.segment>=K.Release||(!n||a.playIndex<n.playIndex?(n=a,s=a,i.push(a)):a.playIndex===n.playIndex&&(s=a,i.push(a)));let r=this.channelInit(e);if(r.perNotePitchWheel.delete(t),n)for(const a of i)a!==n&&a!==s&&(a.playIndex!==n.playIndex||-1===a.playingPreset||a.playingChannel!==e||a.playingKey!==t||a.ampEnv.segment>=K.Release)||a.end(this.outSampleRate)}channelNoteOffAll(e){let t=this.channelInit(e);t.perNotePitchWheel.clear();for(const i of this._voices)-1!==i.playingPreset&&i.playingChannel===e&&i.ampEnv.segment<K.Release&&i.end(this.outSampleRate)}channelSoundsOffAll(e){let t=this.channelInit(e);t.perNotePitchWheel.clear();for(let i of this._voices)-1!==i.playingPreset&&i.playingChannel===e&&(i.ampEnv.segment<K.Release||0===i.ampEnv.parameters.release)&&i.endQuick(this.outSampleRate)}channelSetPresetIndex(e,t){this.channelInit(e).presetIndex=Je.int32ToUint16(t)}channelSetPresetNumber(e,t,i=!1){const n=this.channelInit(e);let s=0;return i?(s=this.getPresetIndex(128|32767&n.bank,t),-1===s&&(s=this.getPresetIndex(128,t)),-1===s&&(s=this.getPresetIndex(128,0)),-1===s&&(s=this.getPresetIndex(2047&n.bank,t))):s=this.getPresetIndex(2047&n.bank,t),n.presetIndex=s,-1!==s}channelSetBank(e,t){this.channelInit(e).bank=Je.int32ToUint16(t)}channelSetBankPreset(e,t,i){const n=this.channelInit(e),s=this.getPresetIndex(t,i);return-1!==s&&(n.presetIndex=Je.int32ToUint16(s),n.bank=Je.int32ToUint16(t),!0)}channelSetPan(e,t){for(const i of this._voices)if(i.playingChannel===e&&-1!==i.playingPreset){let e=i.region.pan+t-.5;e<=-.5?(i.panFactorLeft=1,i.panFactorRight=0):e>=.5?(i.panFactorLeft=0,i.panFactorRight=1):(i.panFactorLeft=Math.sqrt(.5-e),i.panFactorRight=Math.sqrt(.5+e))}this.channelInit(e).panOffset=t-.5}channelSetVolume(e,t){const i=this.channelInit(e),n=ai.gainToDecibels(t),s=n-i.gainDb;if(0!==s){for(const t of this._voices)t.playingChannel===e&&-1!==t.playingPreset&&(t.noteGainDb+=s);i.gainDb=n}}channelSetPitchWheel(e,t){const i=this.channelInit(e);i.pitchWheel!==t&&(i.pitchWheel=Je.int32ToUint16(t),this.channelApplyPitch(e,i))}channelSetPerNotePitchWheel(e,t,i){const n=this.channelInit(e);n.perNotePitchWheel.has(t)&&n.perNotePitchWheel.get(t)===i||(n.perNotePitchWheel.set(t,i),this.channelApplyPitch(e,n,t))}channelApplyPitch(e,t,i=-1){for(const n of this._voices)n.playingChannel!==e||-1===n.playingPreset||-1!=i&&n.playingKey!==i||n.updatePitchRatio(t,this.outSampleRate)}channelSetPitchRange(e,t){const i=this.channelInit(e);i.pitchRange!==t&&(i.pitchRange=t,8192!==i.pitchWheel&&this.channelApplyPitch(e,i))}channelSetTuning(e,t){const i=this.channelInit(e);i.tuning!==t&&(i.tuning=t,this.channelApplyPitch(e,i))}channelMidiControl(e,t,i){let n=this.channelInit(e);switch(t){case 5:case 96:case 97:case 64:case 65:case 66:case 122:case 124:case 125:case 126:case 127:return;case 38:return n.midiData=Je.int32ToUint16(16256&n.midiData|i),void(0===n.midiRpn?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(127&n.midiData)):1===n.midiRpn?this.channelSetTuning(e,(0|n.tuning)+(n.midiData-8192)/8192):2===n.midiRpn&&this.channelSetTuning(e,i-64+(n.tuning-(0|n.tuning))));case 7:return n.midiVolume=Je.int32ToUint16(127&n.midiVolume|i<<7),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 39:return n.midiVolume=Je.int32ToUint16(16256&n.midiVolume|i),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 11:return n.midiExpression=Je.int32ToUint16(127&n.midiExpression|i<<7),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 43:return n.midiExpression=Je.int32ToUint16(16256&n.midiExpression|i),void this.channelSetVolume(e,Math.pow(n.midiVolume/16383*(n.midiExpression/16383),3));case 10:return n.midiPan=Je.int32ToUint16(127&n.midiPan|i<<7),void this.channelSetPan(e,n.midiPan/16383);case 42:return n.midiPan=Je.int32ToUint16(16256&n.midiPan|i),void this.channelSetPan(e,n.midiPan/16383);case 6:return n.midiData=Je.int32ToUint16(127&n.midiData|i<<7),void(0===n.midiRpn?this.channelSetPitchRange(e,(n.midiData>>7)+.01*(127&n.midiData)):1===n.midiRpn?this.channelSetTuning(e,(0|n.tuning)+(n.midiData-8192)/8192):2===n.midiRpn&&6===t&&this.channelSetTuning(e,i-64+(n.tuning-(0|n.tuning))));case 0:return void(n.bank=Je.int32ToUint16(32768|i));case 32:return void(n.bank=Je.int32ToUint16((0!==(32768&n.bank)?(127&n.bank)<<7:0)|i));case 101:return void(n.midiRpn=Je.int32ToUint16(127&(65535===n.midiRpn?0:n.midiRpn)|i<<7));case 100:return void(n.midiRpn=Je.int32ToUint16(16256&(65535===n.midiRpn?0:n.midiRpn)|i));case 98:return void(n.midiRpn=65535);case 99:return void(n.midiRpn=65535);case 120:return void this.channelSoundsOffAll(e);case 123:return void this.channelNoteOffAll(e);case 121:return n.midiVolume=16383,n.midiExpression=16383,n.midiPan=8192,n.bank=0,this.channelSetVolume(e,1),this.channelSetPan(e,.5),void this.channelSetPitchRange(e,2)}}channelGetPresetIndex(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].presetIndex:0}channelGetPresetBank(e){return this._channels&&e<this._channels.channelList.length?32767&this._channels.channelList[e].bank:0}channelGetPan(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].panOffset-.5:.5}channelGetVolume(e){return this._channels&&e<this._channels.channelList.length?ai.decibelsToGain(this._channels.channelList[e].gainDb):1}channelGetPitchWheel(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchWheel:8192}channelGetPitchRange(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].pitchRange:2}channelGetTuning(e){return this._channels&&e<this._channels.channelList.length?this._channels.channelList[e].tuning:0}resetPresets(){this.presets=[]}loadPresets(e,t){const i=[];for(let n=0;n<e.phdrs.length-1;n++){const t=e.phdrs[n];let s=0;const r=new ri;i.push(r),r.name=t.presetName,r.bank=t.bank,r.presetNumber=t.preset,r.fontSamples=e.fontSamples;let a=0;for(let i=t.presetBagNdx;i<e.phdrs[n+1].presetBagNdx;i++){const t=e.pbags[i];let n=0,s=127,r=0,o=127;for(let l=t.genNdx;l<e.pbags[i+1].genNdx;l++){let t=e.pgens[l];if(t.genOper===Kt.GenKeyRange){n=t.genAmount.lowByteAmount,s=t.genAmount.highByteAmount;continue}if(t.genOper===Kt.GenVelRange){r=t.genAmount.lowByteAmount,o=t.genAmount.highByteAmount;continue}if(t.genOper!==Kt.GenInstrument)continue;if(t.genAmount.wordAmount>=e.insts.length)continue;let i=e.insts[t.genAmount.wordAmount];for(let l=i.instBagNdx;l<e.insts[t.genAmount.wordAmount+1].instBagNdx;l++){let t=e.ibags[l],i=0,h=127,c=0,u=127;for(let d=t.instGenNdx;d<e.ibags[l+1].instGenNdx;d++){let t=e.igens[d];t.genOper!==Kt.GenKeyRange?t.genOper!==Kt.GenVelRange?53===t.genOper&&h>=n&&i<=s&&u>=r&&c<=o&&a++:(c=t.genAmount.lowByteAmount,u=t.genAmount.highByteAmount):(i=t.genAmount.lowByteAmount,h=t.genAmount.highByteAmount)}}}}r.regions=new Array(a);let o=new li;o.clear(!0);for(let i=t.presetBagNdx;i<e.phdrs[n+1].presetBagNdx;i++){const n=e.pbags[i],a=new li(o);let l=!1;for(let t=n.genNdx;t<e.pbags[i+1].genNdx;t++){const i=e.pgens[t];if(i.genOper===Kt.GenInstrument){let t=i.genAmount.wordAmount;if(t>=e.insts.length)continue;let n=new li;n.clear(!1);let o=e.insts[t];for(let i=o.instBagNdx;i<e.insts[t+1].instBagNdx;i++){let t=e.ibags[i],l=new li(n),h=!1;for(let n=t.instGenNdx;n<e.ibags[i+1].instGenNdx;n++){let t=e.igens[n];if(t.genOper===Kt.GenSampleId){if(l.hiKey<a.loKey||l.loKey>a.hiKey)continue;if(l.hiVel<a.loVel||l.loVel>a.hiVel)continue;a.loKey>l.loKey&&(l.loKey=a.loKey),a.hiKey<l.hiKey&&(l.hiKey=a.hiKey),a.loVel>l.loVel&&(l.loVel=a.loVel),a.hiVel<l.hiVel&&(l.hiVel=a.hiVel),l.offset+=a.offset,l.end+=a.end,l.loopStart+=a.loopStart,l.loopEnd+=a.loopEnd,l.transpose+=a.transpose,l.tune+=a.tune,l.pitchKeyTrack+=a.pitchKeyTrack,l.attenuation+=a.attenuation,l.pan+=a.pan,l.ampEnv.delay+=a.ampEnv.delay,l.ampEnv.attack+=a.ampEnv.attack,l.ampEnv.hold+=a.ampEnv.hold,l.ampEnv.decay+=a.ampEnv.decay,l.ampEnv.sustain+=a.ampEnv.sustain,l.ampEnv.release+=a.ampEnv.release,l.modEnv.delay+=a.modEnv.delay,l.modEnv.attack+=a.modEnv.attack,l.modEnv.hold+=a.modEnv.hold,l.modEnv.decay+=a.modEnv.decay,l.modEnv.sustain+=a.modEnv.sustain,l.modEnv.release+=a.modEnv.release,l.initialFilterQ+=a.initialFilterQ,l.initialFilterFc+=a.initialFilterFc,l.modEnvToPitch+=a.modEnvToPitch,l.modEnvToFilterFc+=a.modEnvToFilterFc,l.delayModLFO+=a.delayModLFO,l.freqModLFO+=a.freqModLFO,l.modLfoToPitch+=a.modLfoToPitch,l.modLfoToFilterFc+=a.modLfoToFilterFc,l.modLfoToVolume+=a.modLfoToVolume,l.delayVibLFO+=a.delayVibLFO,l.freqVibLFO+=a.freqVibLFO,l.vibLfoToPitch+=a.vibLfoToPitch,l.ampEnv.envToSecs(!0),l.modEnv.envToSecs(!1),l.delayModLFO=l.delayModLFO<-11950?0:ai.timecents2Secs(l.delayModLFO),l.delayVibLFO=l.delayVibLFO<-11950?0:ai.timecents2Secs(l.delayVibLFO),l.pan<-.5?l.pan=-.5:l.pan>.5&&(l.pan=.5),(l.initialFilterQ<1500||l.initialFilterQ>13500)&&(l.initialFilterQ=0);let i=e.sHdrs[t.genAmount.wordAmount];l.offset+=i.start,l.end+=i.end,l.loopStart+=i.startLoop,l.loopEnd+=i.endLoop,i.endLoop>0&&(l.loopEnd-=1),-1===l.pitchKeyCenter&&(l.pitchKeyCenter=i.originalPitch),l.tune+=i.pitchCorrection,l.sampleRate=i.sampleRate,0!==l.end&&l.end<r.fontSamples.length?l.end++:l.end=r.fontSamples.length,r.regions[s]=new li(l),s++,h=!0}else l.operator(t.genOper,t.genAmount)}t!==e.ibags[o.instBagNdx]||h||(n=new li(l))}l=!0}else a.operator(i.genOper,i.genAmount)}n!==e.pbags[t.presetBagNdx]||l||(o=a)}}if(t&&this.presets)for(const n of i)this.presets.push(n);else this.presets=i}}class gi{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter(t=>t!==e)}trigger(){for(const e of this._listeners)e()}}class mi{constructor(){this._listeners=[]}on(e){this._listeners.push(e)}off(e){this._listeners=this._listeners.filter(t=>t!==e)}trigger(e){for(const t of this._listeners)t(e)}}class bi{constructor(e){this.events=e}}class yi{constructor(e){this._isSoundFontLoaded=!1,this._isMidiLoaded=!1,this._tickPosition=0,this._timePosition=0,this._metronomeVolume=0,this._countInVolume=0,this._playedEventsQueue=new pi,this._midiEventsPlayedFilter=new Set,this.isReady=!1,this.state=Y.Paused,this.ready=new gi,this.readyForPlayback=new gi,this.finished=new gi,this.soundFontLoaded=new gi,this.soundFontLoadFailed=new mi,this.midiLoaded=new mi,this.midiLoadFailed=new mi,this.stateChanged=new mi,this.positionChanged=new mi,this.midiEventsPlayed=new mi,Ne.debug("AlphaSynth","Initializing player"),this.state=Y.Paused,Ne.debug("AlphaSynth","Creating output"),this.output=e,Ne.debug("AlphaSynth","Creating synthesizer"),this._synthesizer=new fi(this.output.sampleRate),this._sequencer=new Wt(this._synthesizer),Ne.debug("AlphaSynth","Opening output"),this.output.ready.on(()=>{this.isReady=!0,this.ready.trigger(),this.checkReadyForPlayback()}),this.output.sampleRequest.on(()=>{let e=new Float32Array(Vt.MicroBufferSize*Vt.MicroBufferCount*Vt.AudioChannels),t=0;for(let i=0;i<Vt.MicroBufferCount;i++){this._sequencer.fillMidiEventQueue();const i=this._synthesizer.synthesize(e,t,Vt.MicroBufferSize);t+=Vt.MicroBufferSize*Vt.AudioChannels;for(const e of i)this._midiEventsPlayedFilter.has(e.event.command)&&this._playedEventsQueue.enqueue(e);if(this._sequencer.isFinished)break}t<e.length&&(e=e.subarray(0,t)),this.output.addSamples(e)}),this.output.samplesPlayed.on(this.onSamplesPlayed.bind(this)),this.output.open()}get isReadyForPlayback(){return this.isReady&&this._isSoundFontLoaded&&this._isMidiLoaded}get logLevel(){return Ne.logLevel}set logLevel(e){Ne.logLevel=e}get masterVolume(){return this._synthesizer.masterVolume}set masterVolume(e){e=Math.max(e,Vt.MinVolume),this._synthesizer.masterVolume=e}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,Vt.MinVolume),this._metronomeVolume=e,this._synthesizer.metronomeVolume=e}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,Vt.MinVolume),this._countInVolume=e}get midiEventsPlayedFilter(){return Array.from(this._midiEventsPlayedFilter)}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=new Set(e)}get playbackSpeed(){return this._sequencer.playbackSpeed}set playbackSpeed(e){e=ai.clamp(e,Vt.MinPlaybackSpeed,Vt.MaxPlaybackSpeed);let t=this._sequencer.playbackSpeed;this._sequencer.playbackSpeed=e,this.updateTimePosition(this._timePosition*(t/e),!0)}get tickPosition(){return this._tickPosition}set tickPosition(e){this.timePosition=this._sequencer.tickPositionToTimePosition(e)}get timePosition(){return this._timePosition}set timePosition(e){Ne.debug("AlphaSynth",`Seeking to position ${e}ms`),this._sequencer.seek(e),this.updateTimePosition(e,!0),this.output.resetSamples()}get playbackRange(){return this._sequencer.playbackRange}set playbackRange(e){this._sequencer.playbackRange=e,e&&(this.tickPosition=e.startTick)}get isLooping(){return this._sequencer.isLooping}set isLooping(e){this._sequencer.isLooping=e}destroy(){Ne.debug("AlphaSynth","Destroying player"),this.stop(),this.output.destroy()}play(){return!(this.state!==Y.Paused||!this._isMidiLoaded)&&(this.output.activate(),this.playInternal(),this._countInVolume>0&&(Ne.debug("AlphaSynth","Starting countin"),this._sequencer.startCountIn(),this._synthesizer.setupMetronomeChannel(this._countInVolume),this.tickPosition=0),this.output.play(),!0)}playInternal(){Ne.debug("AlphaSynth","Starting playback"),this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.state=Y.Playing,this.stateChanged.trigger(new jt(this.state,!1))}pause(){this.state!==Y.Paused&&this._isMidiLoaded&&(Ne.debug("AlphaSynth","Pausing playback"),this.state=Y.Paused,this.stateChanged.trigger(new jt(this.state,!1)),this.output.pause(),this._synthesizer.noteOffAll(!1))}playPause(){this.state===Y.Paused&&this._isMidiLoaded?this.play():this.pause()}stop(){this._isMidiLoaded&&(Ne.debug("AlphaSynth","Stopping playback"),this.state=Y.Paused,this.output.pause(),this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.tickPosition=this._sequencer.playbackRange?this._sequencer.playbackRange.startTick:0,this.stateChanged.trigger(new jt(this.state,!0)))}playOneTimeMidiFile(e){this.pause(),this._sequencer.loadOneTimeMidi(e),this._sequencer.stop(),this._synthesizer.noteOffAll(!0),this.tickPosition=0,this.output.play()}resetSoundFonts(){this.stop(),this._synthesizer.resetPresets(),this._isSoundFontLoaded=!1,this.soundFontLoaded.trigger()}loadSoundFont(e,t){this.pause();let i=Ke.fromBuffer(e);try{Ne.debug("AlphaSynth","Loading soundfont from bytes");let e=new Ut;e.load(i),this._synthesizer.loadPresets(e,t),this._isSoundFontLoaded=!0,this.soundFontLoaded.trigger(),Ne.debug("AlphaSynth","soundFont successfully loaded"),this.checkReadyForPlayback()}catch(n){Ne.error("AlphaSynth","Could not load soundfont from bytes "+n),this.soundFontLoadFailed.trigger(n)}}checkReadyForPlayback(){this.isReadyForPlayback&&(this._synthesizer.setupMetronomeChannel(this.metronomeVolume),this.readyForPlayback.trigger())}loadMidiFile(e){this.stop();try{Ne.debug("AlphaSynth","Loading midi from model"),this._sequencer.loadMidi(e),this._isMidiLoaded=!0,this.midiLoaded.trigger(new $t(0,this._sequencer.endTime,0,this._sequencer.endTick,!1)),Ne.debug("AlphaSynth","Midi successfully loaded"),this.checkReadyForPlayback(),this.tickPosition=0}catch(t){Ne.error("AlphaSynth","Could not load midi from model "+t),this.midiLoadFailed.trigger(t)}}setChannelMute(e,t){this._synthesizer.channelSetMute(e,t)}resetChannelStates(){this._synthesizer.resetChannelStates()}setChannelSolo(e,t){this._synthesizer.channelSetSolo(e,t)}setChannelVolume(e,t){t=Math.max(t,Vt.MinVolume),this._synthesizer.channelSetMixVolume(e,t)}onSamplesPlayed(e){let t=e/this._synthesizer.outSampleRate*1e3;this.updateTimePosition(this._timePosition+t,!1),this.checkForFinish()}checkForFinish(){let e=0,t=0;this.playbackRange?(e=this.playbackRange.startTick,t=this.playbackRange.endTick):t=this._sequencer.endTick,this._tickPosition>=t&&(Ne.debug("AlphaSynth","Finished playback"),this._sequencer.isPlayingCountIn?(this._sequencer.resetCountIn(),this.timePosition=this._sequencer.currentTime,this.playInternal()):this._sequencer.isPlayingOneTimeMidi?(this._sequencer.resetOneTimeMidi(),this.state=Y.Paused,this.output.pause(),this._synthesizer.noteOffAll(!1)):(this.finished.trigger(),this.isLooping?this.tickPosition=e:this.stop()))}updateTimePosition(e,t){const i=e;this._timePosition=i;const n=this._sequencer.timePositionToTickPosition(i);this._tickPosition=n;const s=this._sequencer.endTime,r=this._sequencer.endTick;if(this._sequencer.isPlayingOneTimeMidi||this._sequencer.isPlayingCountIn||(Ne.debug("AlphaSynth",`Position changed: (time: ${i}/${s}, tick: ${n}/${r}, Active Voices: ${this._synthesizer.activeVoiceCount}`),this.positionChanged.trigger(new $t(i,s,n,r,t))),t)this._playedEventsQueue.clear();else{const e=new pi;while(!this._playedEventsQueue.isEmpty&&this._playedEventsQueue.peek().time<i){const t=this._playedEventsQueue.dequeue();e.enqueue(t.event)}e.isEmpty||this.midiEventsPlayed.trigger(new bi(e.toArray()))}}}class vi{constructor(){this.division=ke.QuarterTime,this.events=[]}addEvent(e){if(0===this.events.length)this.events.push(e);else{let t=this.events.length;while(t>0){const i=this.events[t-1];if(!(i.tick>e.tick))break;t--}this.events.splice(t,0,e)}}toBinary(){let e=Ke.empty();return this.writeTo(e),e.toArray()}writeTo(e){let t=new Uint8Array([77,84,104,100]);e.write(t,0,t.length),t=new Uint8Array([0,0,0,6]),e.write(t,0,t.length),t=new Uint8Array([0,0]),e.write(t,0,t.length);let i=1;t=new Uint8Array([i>>8&255,255&i]),e.write(t,0,t.length),i=this.division,t=new Uint8Array([i>>8&255,255&i]),e.write(t,0,t.length);let n=Ke.empty(),s=0;for(let o of this.events){let e=o.tick-s;vi.writeVariableInt(n,e),o.writeTo(n),s=o.tick}t=new Uint8Array([77,84,114,107]),e.write(t,0,t.length);let r=n.toArray(),a=r.length;t=new Uint8Array([a>>24&255,a>>16&255,a>>8&255,255&a]),e.write(t,0,t.length),e.write(r,0,r.length)}static writeVariableInt(e,t){let i=new Uint8Array(4),n=0;do{i[n++]=127&t,t>>=7}while(t>0);while(n>0)n--,n>0?e.writeByte(128|i[n]):e.writeByte(i[n])}}class wi extends At{constructor(e,t,i,n,s){super(e,t,i,n,0),this.data=s}writeTo(e){e.writeByte(255),e.writeByte(this.metaStatus);let t=this.data.length;vi.writeVariableInt(e,t),e.write(this.data,0,this.data.length)}}class Si extends At{constructor(e,t,i,n,s){super(e,t,i,n,0),this.value=s}writeTo(e){e.writeByte(255),e.writeByte(this.metaStatus),vi.writeVariableInt(e,3);let t=new Uint8Array([this.value>>16&255,this.value>>8&255,255&this.value]);e.write(t,0,t.length)}}class _i{constructor(){this.encoding="utf-8",this.mergePartGroupsInMusicXml=!1,this.beatTextAsLyrics=!1}}t.ScrollMode=void 0,function(e){e[e["Off"]=0]="Off",e[e["Continuous"]=1]="Continuous",e[e["OffScreen"]=2]="OffScreen"}(t.ScrollMode||(t.ScrollMode={}));class ki{constructor(){this.noteWideLength=480,this.noteWideAmplitude=2,this.noteSlightLength=480,this.noteSlightAmplitude=2,this.beatWideLength=240,this.beatWideAmplitude=3,this.beatSlightLength=240,this.beatSlightAmplitude=3}}class Ti{constructor(){this.simpleSlidePitchOffset=6,this.simpleSlideDurationRatio=.25,this.shiftSlideDurationRatio=.5}}class Bi{constructor(){this.soundFont=null,this.scrollElement="html,body",this.enablePlayer=!1,this.enableCursor=!0,this.enableAnimatedBeatCursor=!0,this.enableElementHighlighting=!0,this.enableUserInteraction=!0,this.scrollOffsetX=0,this.scrollOffsetY=0,this.scrollMode=t.ScrollMode.Continuous,this.scrollSpeed=300,this.nativeBrowserSmoothScroll=!0,this.songBookBendDuration=75,this.songBookDipDuration=150,this.vibrato=new ki,this.slide=new Ti,this.playTripletFeel=!0}}class xi{constructor(){this.core=new io,this.display=new ye,this.notation=new he,this.importer=new _i,this.player=new Bi}setSongBookModeSettings(){this.notation.notationMode=t.NotationMode.SongBook,this.notation.smallGraceTabNotes=!1,this.notation.fingeringMode=t.FingeringMode.SingleNoteEffectBand,this.notation.extendBendArrowsOnTiedNotes=!1,this.notation.elements.set(o.ParenthesisOnTiedBends,!1),this.notation.elements.set(o.TabNotesOnTiedBends,!1),this.notation.elements.set(o.ZerosOnDiveWhammys,!0)}static get songBook(){let e=new xi;return e.setSongBookModeSettings(),e}}class Ni extends Mt{constructor(e,t,i,n,s){super(e,t,i,0,0),this.noteKey=n,this.pitch=s}writeTo(e){let t=new Uint8Array([64,255&this.message,255&this.noteKey,0,this.pitch>>24&255,this.pitch>>16&255,this.pitch>>8&255,255&this.pitch]);e.write(t,0,t.length)}}class Ci{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("marker",e.marker),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"marker":return e.marker=i,!0;case"text":return e.text=i,!0}return!1}}class Ei{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("isLinear",e.isLinear),t.set("type",e.type),t.set("value",e.value),t.set("ratioPosition",e.ratioPosition),t.set("text",e.text),t}static setProperty(e,t,i){switch(t){case"islinear":return e.isLinear=i,!0;case"type":return e.type=pe.parseEnum(i,u),!0;case"value":return e.value=i,!0;case"ratioposition":return e.ratioPosition=i,!0;case"text":return e.text=i,!0}return!1}}class Pi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("type",e.type),t.set("length",e.length),t}static setProperty(e,t,i){switch(t){case"type":return e.type=pe.parseEnum(i,V),!0;case"length":return e.length=i,!0}return!1}}class Li{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;t.set("alternateEndings",e.alternateEndings),t.set("keySignature",e.keySignature),t.set("keySignatureType",e.keySignatureType),t.set("isDoubleBar",e.isDoubleBar),t.set("isRepeatStart",e.isRepeatStart),t.set("repeatCount",e.repeatCount),t.set("timeSignatureNumerator",e.timeSignatureNumerator),t.set("timeSignatureDenominator",e.timeSignatureDenominator),t.set("timeSignatureCommon",e.timeSignatureCommon),t.set("tripletFeel",e.tripletFeel),t.set("section",Ci.toJson(e.section)),t.set("tempoAutomation",Ei.toJson(e.tempoAutomation));{const i=new Map;t.set("fermata",i);for(const[t,n]of e.fermata)i.set(t.toString(),Pi.toJson(n))}return t.set("start",e.start),t.set("isAnacrusis",e.isAnacrusis),t}static setProperty(e,t,i){switch(t){case"alternateendings":return e.alternateEndings=i,!0;case"keysignature":return e.keySignature=pe.parseEnum(i,M),!0;case"keysignaturetype":return e.keySignatureType=pe.parseEnum(i,A),!0;case"isdoublebar":return e.isDoubleBar=i,!0;case"isrepeatstart":return e.isRepeatStart=i,!0;case"repeatcount":return e.repeatCount=i,!0;case"timesignaturenumerator":return e.timeSignatureNumerator=i,!0;case"timesignaturedenominator":return e.timeSignatureDenominator=i,!0;case"timesignaturecommon":return e.timeSignatureCommon=i,!0;case"tripletfeel":return e.tripletFeel=pe.parseEnum(i,I),!0;case"fermata":return e.fermata=new Map,pe.forEach(i,(t,i)=>{const n=new at;Pi.fromJson(n,t),e.fermata.set(parseInt(i),n)}),!0;case"start":return e.start=i,!0;case"isanacrusis":return e.isAnacrusis=i,!0}return["section"].indexOf(t)>=0?(i?(e.section=new $e,Ci.fromJson(e.section,i)):e.section=null,!0):["tempoautomation"].indexOf(t)>=0&&(i?(e.tempoAutomation=new Se,Ei.fromJson(e.tempoAutomation,i)):e.tempoAutomation=null,!0)}}class Oi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("offset",e.offset),t.set("value",e.value),t}static setProperty(e,t,i){switch(t){case"offset":return e.offset=i,!0;case"value":return e.value=i,!0}return!1}}class Fi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("accentuated",e.accentuated),t.set("bendType",e.bendType),t.set("bendStyle",e.bendStyle),t.set("isContinuedBend",e.isContinuedBend),t.set("bendPoints",e.bendPoints.map(e=>Oi.toJson(e))),t.set("fret",e.fret),t.set("string",e.string),t.set("octave",e.octave),t.set("tone",e.tone),t.set("percussionArticulation",e.percussionArticulation),t.set("isVisible",e.isVisible),t.set("isLeftHandTapped",e.isLeftHandTapped),t.set("isHammerPullOrigin",e.isHammerPullOrigin),t.set("hammerPullOriginNoteId",e.hammerPullOriginNoteId),t.set("hammerPullDestinationNoteId",e.hammerPullDestinationNoteId),t.set("isSlurDestination",e.isSlurDestination),t.set("slurOriginNoteId",e.slurOriginNoteId),t.set("slurDestinationNoteId",e.slurDestinationNoteId),t.set("harmonicType",e.harmonicType),t.set("harmonicValue",e.harmonicValue),t.set("isGhost",e.isGhost),t.set("isLetRing",e.isLetRing),t.set("isPalmMute",e.isPalmMute),t.set("isDead",e.isDead),t.set("isStaccato",e.isStaccato),t.set("slideInType",e.slideInType),t.set("slideOutType",e.slideOutType),t.set("vibrato",e.vibrato),t.set("tieOriginNoteId",e.tieOriginNoteId),t.set("tieDestinationNoteId",e.tieDestinationNoteId),t.set("isTieDestination",e.isTieDestination),t.set("leftHandFinger",e.leftHandFinger),t.set("rightHandFinger",e.rightHandFinger),t.set("isFingering",e.isFingering),t.set("trillValue",e.trillValue),t.set("trillSpeed",e.trillSpeed),t.set("durationPercent",e.durationPercent),t.set("accidentalMode",e.accidentalMode),t.set("dynamics",e.dynamics),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"accentuated":return e.accentuated=pe.parseEnum(i,c),!0;case"bendtype":return e.bendType=pe.parseEnum(i,m),!0;case"bendstyle":return e.bendStyle=pe.parseEnum(i,g),!0;case"iscontinuedbend":return e.isContinuedBend=i,!0;case"bendpoints":e.bendPoints=[];for(const t of i){const i=new Te;Oi.fromJson(i,t),e.addBendPoint(i)}return!0;case"fret":return e.fret=i,!0;case"string":return e.string=i,!0;case"octave":return e.octave=i,!0;case"tone":return e.tone=i,!0;case"percussionarticulation":return e.percussionArticulation=i,!0;case"isvisible":return e.isVisible=i,!0;case"islefthandtapped":return e.isLeftHandTapped=i,!0;case"ishammerpullorigin":return e.isHammerPullOrigin=i,!0;case"hammerpulloriginnoteid":return e.hammerPullOriginNoteId=i,!0;case"hammerpulldestinationnoteid":return e.hammerPullDestinationNoteId=i,!0;case"isslurdestination":return e.isSlurDestination=i,!0;case"sluroriginnoteid":return e.slurOriginNoteId=i,!0;case"slurdestinationnoteid":return e.slurDestinationNoteId=i,!0;case"harmonictype":return e.harmonicType=pe.parseEnum(i,_),!0;case"harmonicvalue":return e.harmonicValue=i,!0;case"isghost":return e.isGhost=i,!0;case"isletring":return e.isLetRing=i,!0;case"ispalmmute":return e.isPalmMute=i,!0;case"isdead":return e.isDead=i,!0;case"isstaccato":return e.isStaccato=i,!0;case"slideintype":return e.slideInType=pe.parseEnum(i,T),!0;case"slideouttype":return e.slideOutType=pe.parseEnum(i,B),!0;case"vibrato":return e.vibrato=pe.parseEnum(i,x),!0;case"tieoriginnoteid":return e.tieOriginNoteId=i,!0;case"tiedestinationnoteid":return e.tieDestinationNoteId=i,!0;case"istiedestination":return e.isTieDestination=i,!0;case"lefthandfinger":return e.leftHandFinger=pe.parseEnum(i,a),!0;case"righthandfinger":return e.rightHandFinger=pe.parseEnum(i,a),!0;case"isfingering":return e.isFingering=i,!0;case"trillvalue":return e.trillValue=i,!0;case"trillspeed":return e.trillSpeed=pe.parseEnum(i,v),!0;case"durationpercent":return e.durationPercent=i,!0;case"accidentalmode":return e.accidentalMode=pe.parseEnum(i,k),!0;case"dynamics":return e.dynamics=pe.parseEnum(i,w),!0}return!1}}class Mi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("notes",e.notes.map(e=>Fi.toJson(e))),t.set("isEmpty",e.isEmpty),t.set("whammyStyle",e.whammyStyle),t.set("ottava",e.ottava),t.set("isLegatoOrigin",e.isLegatoOrigin),t.set("duration",e.duration),t.set("automations",e.automations.map(e=>Ei.toJson(e))),t.set("dots",e.dots),t.set("fadeIn",e.fadeIn),t.set("lyrics",e.lyrics),t.set("hasRasgueado",e.hasRasgueado),t.set("pop",e.pop),t.set("slap",e.slap),t.set("tap",e.tap),t.set("text",e.text),t.set("brushType",e.brushType),t.set("brushDuration",e.brushDuration),t.set("tupletDenominator",e.tupletDenominator),t.set("tupletNumerator",e.tupletNumerator),t.set("isContinuedWhammy",e.isContinuedWhammy),t.set("whammyBarType",e.whammyBarType),t.set("whammyBarPoints",e.whammyBarPoints.map(e=>Oi.toJson(e))),t.set("vibrato",e.vibrato),t.set("chordId",e.chordId),t.set("graceType",e.graceType),t.set("pickStroke",e.pickStroke),t.set("tremoloSpeed",e.tremoloSpeed),t.set("crescendo",e.crescendo),t.set("displayStart",e.displayStart),t.set("playbackStart",e.playbackStart),t.set("displayDuration",e.displayDuration),t.set("playbackDuration",e.playbackDuration),t.set("dynamics",e.dynamics),t.set("invertBeamDirection",e.invertBeamDirection),t.set("preferredBeamDirection",e.preferredBeamDirection),t.set("beamingMode",e.beamingMode),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"notes":e.notes=[];for(const t of i){const i=new Pe;Fi.fromJson(i,t),e.addNote(i)}return!0;case"isempty":return e.isEmpty=i,!0;case"whammystyle":return e.whammyStyle=pe.parseEnum(i,g),!0;case"ottava":return e.ottava=pe.parseEnum(i,p),!0;case"islegatoorigin":return e.isLegatoOrigin=i,!0;case"duration":return e.duration=pe.parseEnum(i,v),!0;case"automations":e.automations=[];for(const t of i){const i=new Se;Ei.fromJson(i,t),e.automations.push(i)}return!0;case"dots":return e.dots=i,!0;case"fadein":return e.fadeIn=i,!0;case"lyrics":return e.lyrics=i,!0;case"hasrasgueado":return e.hasRasgueado=i,!0;case"pop":return e.pop=i,!0;case"slap":return e.slap=i,!0;case"tap":return e.tap=i,!0;case"text":return e.text=i,!0;case"brushtype":return e.brushType=pe.parseEnum(i,b),!0;case"brushduration":return e.brushDuration=i,!0;case"tupletdenominator":return e.tupletDenominator=i,!0;case"tupletnumerator":return e.tupletNumerator=i,!0;case"iscontinuedwhammy":return e.isContinuedWhammy=i,!0;case"whammybartype":return e.whammyBarType=pe.parseEnum(i,L),!0;case"whammybarpoints":e.whammyBarPoints=[];for(const t of i){const i=new Te;Oi.fromJson(i,t),e.addWhammyBarPoint(i)}return!0;case"vibrato":return e.vibrato=pe.parseEnum(i,x),!0;case"chordid":return e.chordId=i,!0;case"gracetype":return e.graceType=pe.parseEnum(i,S),!0;case"pickstroke":return e.pickStroke=pe.parseEnum(i,N),!0;case"tremolospeed":return e.tremoloSpeed=pe.parseEnum(i,v),!0;case"crescendo":return e.crescendo=pe.parseEnum(i,y),!0;case"displaystart":return e.displayStart=i,!0;case"playbackstart":return e.playbackStart=i,!0;case"displayduration":return e.displayDuration=i,!0;case"playbackduration":return e.playbackDuration=i,!0;case"dynamics":return e.dynamics=pe.parseEnum(i,w),!0;case"invertbeamdirection":return e.invertBeamDirection=i,!0;case"preferredbeamdirection":return e.preferredBeamDirection=pe.parseEnum(i,W),!0;case"beamingmode":return e.beamingMode=pe.parseEnum(i,O),!0}return!1}}class Ai{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("beats",e.beats.map(e=>Mi.toJson(e))),t.set("isEmpty",e.isEmpty),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"beats":e.beats=[];for(const t of i){const i=new De;Mi.fromJson(i,t),e.addBeat(i)}return!0;case"isempty":return e.isEmpty=i,!0}return!1}}class Ii{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("id",e.id),t.set("clef",e.clef),t.set("clefOttava",e.clefOttava),t.set("voices",e.voices.map(e=>Ai.toJson(e))),t.set("simileMark",e.simileMark),t}static setProperty(e,t,i){switch(t){case"id":return e.id=i,!0;case"clef":return e.clef=pe.parseEnum(i,d),!0;case"clefottava":return e.clefOttava=pe.parseEnum(i,p),!0;case"voices":e.voices=[];for(const t of i){const i=new qe;Ai.fromJson(i,t),e.addVoice(i)}return!0;case"similemark":return e.simileMark=pe.parseEnum(i,f),!0}return!1}}class Di{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("name",e.name),t.set("firstFret",e.firstFret),t.set("strings",e.strings),t.set("barreFrets",e.barreFrets),t.set("showName",e.showName),t.set("showDiagram",e.showDiagram),t.set("showFingering",e.showFingering),t}static setProperty(e,t,i){switch(t){case"name":return e.name=i,!0;case"firstfret":return e.firstFret=i,!0;case"strings":return e.strings=i,!0;case"barrefrets":return e.barreFrets=i,!0;case"showname":return e.showName=i,!0;case"showdiagram":return e.showDiagram=i,!0;case"showfingering":return e.showFingering=i,!0}return!1}}class Ri{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("isStandard",e.isStandard),t.set("name",e.name),t.set("tunings",e.tunings),t}static setProperty(e,t,i){switch(t){case"isstandard":return e.isStandard=i,!0;case"name":return e.name=i,!0;case"tunings":return e.tunings=i,!0}return!1}}class Vi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;t.set("bars",e.bars.map(e=>Ii.toJson(e)));{const i=new Map;t.set("chords",i);for(const[t,n]of e.chords)i.set(t.toString(),Di.toJson(n))}return t.set("capo",e.capo),t.set("transpositionPitch",e.transpositionPitch),t.set("displayTranspositionPitch",e.displayTranspositionPitch),t.set("stringTuning",Ri.toJson(e.stringTuning)),t.set("showTablature",e.showTablature),t.set("showStandardNotation",e.showStandardNotation),t.set("isPercussion",e.isPercussion),t.set("standardNotationLineCount",e.standardNotationLineCount),t}static setProperty(e,t,i){switch(t){case"bars":e.bars=[];for(const t of i){const i=new _e;Ii.fromJson(i,t),e.addBar(i)}return!0;case"chords":return e.chords=new Map,pe.forEach(i,(t,i)=>{const n=new Re;Di.fromJson(n,t),e.addChord(i,n)}),!0;case"capo":return e.capo=i,!0;case"transpositionpitch":return e.transpositionPitch=i,!0;case"displaytranspositionpitch":return e.displayTranspositionPitch=i,!0;case"showtablature":return e.showTablature=i,!0;case"showstandardnotation":return e.showStandardNotation=i,!0;case"ispercussion":return e.isPercussion=i,!0;case"standardnotationlinecount":return e.standardNotationLineCount=i,!0}return["stringtuning"].indexOf(t)>=0&&(Ri.fromJson(e.stringTuning,i),!0)}}class Hi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("volume",e.volume),t.set("balance",e.balance),t.set("port",e.port),t.set("program",e.program),t.set("primaryChannel",e.primaryChannel),t.set("secondaryChannel",e.secondaryChannel),t.set("isMute",e.isMute),t.set("isSolo",e.isSolo),t}static setProperty(e,t,i){switch(t){case"volume":return e.volume=i,!0;case"balance":return e.balance=i,!0;case"port":return e.port=i,!0;case"program":return e.program=i,!0;case"primarychannel":return e.primaryChannel=i,!0;case"secondarychannel":return e.secondaryChannel=i,!0;case"ismute":return e.isMute=i,!0;case"issolo":return e.isSolo=i,!0}return!1}}class Gi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("elementType",e.elementType),t.set("staffLine",e.staffLine),t.set("noteHeadDefault",e.noteHeadDefault),t.set("noteHeadHalf",e.noteHeadHalf),t.set("noteHeadWhole",e.noteHeadWhole),t.set("techniqueSymbol",e.techniqueSymbol),t.set("techniqueSymbolPlacement",e.techniqueSymbolPlacement),t.set("outputMidiNumber",e.outputMidiNumber),t}static setProperty(e,t,i){switch(t){case"elementtype":return e.elementType=i,!0;case"staffline":return e.staffLine=i,!0;case"noteheaddefault":return e.noteHeadDefault=pe.parseEnum(i,C),!0;case"noteheadhalf":return e.noteHeadHalf=pe.parseEnum(i,C),!0;case"noteheadwhole":return e.noteHeadWhole=pe.parseEnum(i,C),!0;case"techniquesymbol":return e.techniqueSymbol=pe.parseEnum(i,C),!0;case"techniquesymbolplacement":return e.techniqueSymbolPlacement=pe.parseEnum(i,P),!0;case"outputmidinumber":return e.outputMidiNumber=i,!0}return!1}}class Wi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("staves",e.staves.map(e=>Vi.toJson(e))),t.set("playbackInfo",Hi.toJson(e.playbackInfo)),t.set("color",de.toJson(e.color)),t.set("name",e.name),t.set("shortName",e.shortName),t.set("percussionArticulations",e.percussionArticulations.map(e=>Gi.toJson(e))),t}static setProperty(e,t,i){switch(t){case"staves":e.staves=[];for(const t of i){const i=new Xe;Vi.fromJson(i,t),e.addStaff(i)}return!0;case"color":return e.color=de.fromJson(i),!0;case"name":return e.name=i,!0;case"shortname":return e.shortName=i,!0;case"percussionarticulations":e.percussionArticulations=[];for(const t of i){const i=new Ce;Gi.fromJson(i,t),e.percussionArticulations.push(i)}return!0}return["playbackinfo"].indexOf(t)>=0&&(Hi.fromJson(e.playbackInfo,i),!0)}}class ji{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("hideDynamics",e.hideDynamics),t}static setProperty(e,t,i){switch(t){case"hidedynamics":return e.hideDynamics=i,!0}return!1}}class $i{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("album",e.album),t.set("artist",e.artist),t.set("copyright",e.copyright),t.set("instructions",e.instructions),t.set("music",e.music),t.set("notices",e.notices),t.set("subTitle",e.subTitle),t.set("title",e.title),t.set("words",e.words),t.set("tab",e.tab),t.set("tempo",e.tempo),t.set("tempoLabel",e.tempoLabel),t.set("masterBars",e.masterBars.map(e=>Li.toJson(e))),t.set("tracks",e.tracks.map(e=>Wi.toJson(e))),t.set("stylesheet",ji.toJson(e.stylesheet)),t}static setProperty(e,t,i){switch(t){case"album":return e.album=i,!0;case"artist":return e.artist=i,!0;case"copyright":return e.copyright=i,!0;case"instructions":return e.instructions=i,!0;case"music":return e.music=i,!0;case"notices":return e.notices=i,!0;case"subtitle":return e.subTitle=i,!0;case"title":return e.title=i,!0;case"words":return e.words=i,!0;case"tab":return e.tab=i,!0;case"tempo":return e.tempo=i,!0;case"tempolabel":return e.tempoLabel=i,!0;case"masterbars":e.masterBars=[];for(const t of i){const i=new He;Li.fromJson(i,t),e.addMasterBar(i)}return!0;case"tracks":e.tracks=[];for(const t of i){const i=new Ye;Wi.fromJson(i,t),e.addTrack(i)}return!0}return["stylesheet"].indexOf(t)>=0&&(ji.fromJson(e.stylesheet,i),!0)}}class zi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scriptFile",e.scriptFile),t.set("fontDirectory",e.fontDirectory),t.set("file",e.file),t.set("tex",e.tex),t.set("tracks",e.tracks),t.set("enableLazyLoading",e.enableLazyLoading),t.set("engine",e.engine),t.set("logLevel",e.logLevel),t.set("useWorkers",e.useWorkers),t.set("includeNoteBounds",e.includeNoteBounds),t}static setProperty(e,i,n){switch(i){case"scriptfile":return e.scriptFile=n,!0;case"fontdirectory":return e.fontDirectory=n,!0;case"file":return e.file=n,!0;case"tex":return e.tex=n,!0;case"tracks":return e.tracks=n,!0;case"enablelazyloading":return e.enableLazyLoading=n,!0;case"engine":return e.engine=n,!0;case"loglevel":return e.logLevel=pe.parseEnum(n,t.LogLevel),!0;case"useworkers":return e.useWorkers=n,!0;case"includenotebounds":return e.includeNoteBounds=n,!0}return!1}}class Ui{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("copyrightFont",me.toJson(e.copyrightFont)),t.set("titleFont",me.toJson(e.titleFont)),t.set("subTitleFont",me.toJson(e.subTitleFont)),t.set("wordsFont",me.toJson(e.wordsFont)),t.set("effectFont",me.toJson(e.effectFont)),t.set("fretboardNumberFont",me.toJson(e.fretboardNumberFont)),t.set("tablatureFont",me.toJson(e.tablatureFont)),t.set("graceFont",me.toJson(e.graceFont)),t.set("staffLineColor",de.toJson(e.staffLineColor)),t.set("barSeparatorColor",de.toJson(e.barSeparatorColor)),t.set("barNumberFont",me.toJson(e.barNumberFont)),t.set("barNumberColor",de.toJson(e.barNumberColor)),t.set("fingeringFont",me.toJson(e.fingeringFont)),t.set("markerFont",me.toJson(e.markerFont)),t.set("mainGlyphColor",de.toJson(e.mainGlyphColor)),t.set("secondaryGlyphColor",de.toJson(e.secondaryGlyphColor)),t.set("scoreInfoColor",de.toJson(e.scoreInfoColor)),t}static setProperty(e,t,i){switch(t){case"copyrightfont":return e.copyrightFont=me.fromJson(i),!0;case"titlefont":return e.titleFont=me.fromJson(i),!0;case"subtitlefont":return e.subTitleFont=me.fromJson(i),!0;case"wordsfont":return e.wordsFont=me.fromJson(i),!0;case"effectfont":return e.effectFont=me.fromJson(i),!0;case"fretboardnumberfont":return e.fretboardNumberFont=me.fromJson(i),!0;case"tablaturefont":return e.tablatureFont=me.fromJson(i),!0;case"gracefont":return e.graceFont=me.fromJson(i),!0;case"stafflinecolor":return e.staffLineColor=de.fromJson(i),!0;case"barseparatorcolor":return e.barSeparatorColor=de.fromJson(i),!0;case"barnumberfont":return e.barNumberFont=me.fromJson(i),!0;case"barnumbercolor":return e.barNumberColor=de.fromJson(i),!0;case"fingeringfont":return e.fingeringFont=me.fromJson(i),!0;case"markerfont":return e.markerFont=me.fromJson(i),!0;case"mainglyphcolor":return e.mainGlyphColor=de.fromJson(i),!0;case"secondaryglyphcolor":return e.secondaryGlyphColor=de.fromJson(i),!0;case"scoreinfocolor":return e.scoreInfoColor=de.fromJson(i),!0}return!1}}class Xi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("scale",e.scale),t.set("stretchForce",e.stretchForce),t.set("layoutMode",e.layoutMode),t.set("staveProfile",e.staveProfile),t.set("barsPerRow",e.barsPerRow),t.set("startBar",e.startBar),t.set("barCount",e.barCount),t.set("barCountPerPartial",e.barCountPerPartial),t.set("resources",Ui.toJson(e.resources)),t.set("padding",e.padding),t}static setProperty(e,i,n){switch(i){case"scale":return e.scale=n,!0;case"stretchforce":return e.stretchForce=n,!0;case"layoutmode":return e.layoutMode=pe.parseEnum(n,t.LayoutMode),!0;case"staveprofile":return e.staveProfile=pe.parseEnum(n,t.StaveProfile),!0;case"barsperrow":return e.barsPerRow=n,!0;case"startbar":return e.startBar=n,!0;case"barcount":return e.barCount=n,!0;case"barcountperpartial":return e.barCountPerPartial=n,!0;case"padding":return e.padding=n,!0}if(["resources"].indexOf(i)>=0)return Ui.fromJson(e.resources,n),!0;for(const t of["resources"])if(0===i.indexOf(t)&&Ui.setProperty(e.resources,i.substring(t.length),n))return!0;return!1}}class Yi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;t.set("notationMode",e.notationMode),t.set("fingeringMode",e.fingeringMode);{const i=new Map;t.set("elements",i);for(const[t,n]of e.elements)i.set(t.toString(),n)}return t.set("rhythmMode",e.rhythmMode),t.set("rhythmHeight",e.rhythmHeight),t.set("transpositionPitches",e.transpositionPitches),t.set("displayTranspositionPitches",e.displayTranspositionPitches),t.set("smallGraceTabNotes",e.smallGraceTabNotes),t.set("extendBendArrowsOnTiedNotes",e.extendBendArrowsOnTiedNotes),t.set("extendLineEffectsToBeatEnd",e.extendLineEffectsToBeatEnd),t.set("slurHeight",e.slurHeight),t}static setProperty(e,i,n){switch(i){case"notationmode":return e.notationMode=pe.parseEnum(n,t.NotationMode),!0;case"fingeringmode":return e.fingeringMode=pe.parseEnum(n,t.FingeringMode),!0;case"elements":return e.elements=new Map,pe.forEach(n,(t,i)=>{e.elements.set(pe.parseEnum(i,o),t)}),!0;case"rhythmmode":return e.rhythmMode=pe.parseEnum(n,t.TabRhythmMode),!0;case"rhythmheight":return e.rhythmHeight=n,!0;case"transpositionpitches":return e.transpositionPitches=n,!0;case"displaytranspositionpitches":return e.displayTranspositionPitches=n,!0;case"smallgracetabnotes":return e.smallGraceTabNotes=n,!0;case"extendbendarrowsontiednotes":return e.extendBendArrowsOnTiedNotes=n,!0;case"extendlineeffectstobeatend":return e.extendLineEffectsToBeatEnd=n,!0;case"slurheight":return e.slurHeight=n,!0}return!1}}class qi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("encoding",e.encoding),t.set("mergePartGroupsInMusicXml",e.mergePartGroupsInMusicXml),t.set("beatTextAsLyrics",e.beatTextAsLyrics),t}static setProperty(e,t,i){switch(t){case"encoding":return e.encoding=i,!0;case"mergepartgroupsinmusicxml":return e.mergePartGroupsInMusicXml=i,!0;case"beattextaslyrics":return e.beatTextAsLyrics=i,!0}return!1}}class Ji{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("noteWideLength",e.noteWideLength),t.set("noteWideAmplitude",e.noteWideAmplitude),t.set("noteSlightLength",e.noteSlightLength),t.set("noteSlightAmplitude",e.noteSlightAmplitude),t.set("beatWideLength",e.beatWideLength),t.set("beatWideAmplitude",e.beatWideAmplitude),t.set("beatSlightLength",e.beatSlightLength),t.set("beatSlightAmplitude",e.beatSlightAmplitude),t}static setProperty(e,t,i){switch(t){case"notewidelength":return e.noteWideLength=i,!0;case"notewideamplitude":return e.noteWideAmplitude=i,!0;case"noteslightlength":return e.noteSlightLength=i,!0;case"noteslightamplitude":return e.noteSlightAmplitude=i,!0;case"beatwidelength":return e.beatWideLength=i,!0;case"beatwideamplitude":return e.beatWideAmplitude=i,!0;case"beatslightlength":return e.beatSlightLength=i,!0;case"beatslightamplitude":return e.beatSlightAmplitude=i,!0}return!1}}class Qi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("simpleSlidePitchOffset",e.simpleSlidePitchOffset),t.set("simpleSlideDurationRatio",e.simpleSlideDurationRatio),t.set("shiftSlideDurationRatio",e.shiftSlideDurationRatio),t}static setProperty(e,t,i){switch(t){case"simpleslidepitchoffset":return e.simpleSlidePitchOffset=i,!0;case"simpleslidedurationratio":return e.simpleSlideDurationRatio=i,!0;case"shiftslidedurationratio":return e.shiftSlideDurationRatio=i,!0}return!1}}class Ki{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("soundFont",e.soundFont),t.set("scrollElement",e.scrollElement),t.set("enablePlayer",e.enablePlayer),t.set("enableCursor",e.enableCursor),t.set("enableAnimatedBeatCursor",e.enableAnimatedBeatCursor),t.set("enableElementHighlighting",e.enableElementHighlighting),t.set("enableUserInteraction",e.enableUserInteraction),t.set("scrollOffsetX",e.scrollOffsetX),t.set("scrollOffsetY",e.scrollOffsetY),t.set("scrollMode",e.scrollMode),t.set("scrollSpeed",e.scrollSpeed),t.set("nativeBrowserSmoothScroll",e.nativeBrowserSmoothScroll),t.set("songBookBendDuration",e.songBookBendDuration),t.set("songBookDipDuration",e.songBookDipDuration),t.set("vibrato",Ji.toJson(e.vibrato)),t.set("slide",Qi.toJson(e.slide)),t.set("playTripletFeel",e.playTripletFeel),t}static setProperty(e,i,n){switch(i){case"soundfont":return e.soundFont=n,!0;case"scrollelement":return e.scrollElement=n,!0;case"enableplayer":return e.enablePlayer=n,!0;case"enablecursor":return e.enableCursor=n,!0;case"enableanimatedbeatcursor":return e.enableAnimatedBeatCursor=n,!0;case"enableelementhighlighting":return e.enableElementHighlighting=n,!0;case"enableuserinteraction":return e.enableUserInteraction=n,!0;case"scrolloffsetx":return e.scrollOffsetX=n,!0;case"scrolloffsety":return e.scrollOffsetY=n,!0;case"scrollmode":return e.scrollMode=pe.parseEnum(n,t.ScrollMode),!0;case"scrollspeed":return e.scrollSpeed=n,!0;case"nativebrowsersmoothscroll":return e.nativeBrowserSmoothScroll=n,!0;case"songbookbendduration":return e.songBookBendDuration=n,!0;case"songbookdipduration":return e.songBookDipDuration=n,!0;case"playtripletfeel":return e.playTripletFeel=n,!0}if(["vibrato"].indexOf(i)>=0)return Ji.fromJson(e.vibrato,n),!0;for(const t of["vibrato"])if(0===i.indexOf(t)&&Ji.setProperty(e.vibrato,i.substring(t.length),n))return!0;if(["slide"].indexOf(i)>=0)return Qi.fromJson(e.slide,n),!0;for(const t of["slide"])if(0===i.indexOf(t)&&Qi.setProperty(e.slide,i.substring(t.length),n))return!0;return!1}}class Zi{static fromJson(e,t){t&&pe.forEach(t,(t,i)=>this.setProperty(e,i.toLowerCase(),t))}static toJson(e){if(!e)return null;const t=new Map;return t.set("core",zi.toJson(e.core)),t.set("display",Xi.toJson(e.display)),t.set("notation",Yi.toJson(e.notation)),t.set("importer",qi.toJson(e.importer)),t.set("player",Ki.toJson(e.player)),t}static setProperty(e,t,i){if(["core",""].indexOf(t)>=0)return zi.fromJson(e.core,i),!0;for(const n of["core",""])if(0===t.indexOf(n)&&zi.setProperty(e.core,t.substring(n.length),i))return!0;if(["display",""].indexOf(t)>=0)return Xi.fromJson(e.display,i),!0;for(const n of["display",""])if(0===t.indexOf(n)&&Xi.setProperty(e.display,t.substring(n.length),i))return!0;if(["notation"].indexOf(t)>=0)return Yi.fromJson(e.notation,i),!0;for(const n of["notation"])if(0===t.indexOf(n)&&Yi.setProperty(e.notation,t.substring(n.length),i))return!0;if(["importer"].indexOf(t)>=0)return qi.fromJson(e.importer,i),!0;for(const n of["importer"])if(0===t.indexOf(n)&&qi.setProperty(e.importer,t.substring(n.length),i))return!0;if(["player"].indexOf(t)>=0)return Ki.fromJson(e.player,i),!0;for(const n of["player"])if(0===t.indexOf(n)&&Ki.setProperty(e.player,t.substring(n.length),i))return!0;return!1}}class en{static jsonReplacer(e,t){if(t instanceof Map){if("fromEntries"in Object)return Object.fromEntries(t);{const e={};for(const[i,n]of t)e[i]=n;return e}}return ArrayBuffer.isView(t)?Array.apply([],[t]):t}static scoreToJson(e){let t=en.scoreToJsObject(e);return JSON.stringify(t,en.jsonReplacer)}static jsonToScore(e,t){return en.jsObjectToScore(JSON.parse(e),t)}static scoreToJsObject(e){return $i.toJson(e)}static jsObjectToScore(e,t){let i=new je;return $i.fromJson(i,e),i.finish(null!==t&&void 0!==t?t:new xi),i}static settingsToJson(e){let t=en.settingsToJsObject(e);return JSON.stringify(t,en.jsonReplacer)}static jsonToSettings(e){return en.jsObjectToSettings(JSON.parse(e))}static settingsToJsObject(e){return Zi.toJson(e)}static jsObjectToSettings(e){let t=new xi;return Zi.fromJson(t,e),t}static jsObjectToMidiFile(e){let t=new vi;t.division=e.division;let i=e.events;for(let n of i){let e=en.jsObjectToMidiEvent(n);t.events.push(e)}return t}static jsObjectToMidiEvent(e){let t,i=e.track,n=e.tick,s=e.message;switch(e.type){case"SystemExclusiveEvent":t=new Dt(i,n,0,0,e.data),t.message=s;break;case"MetaDataEvent":t=new wi(i,n,0,0,e.data),t.message=s;break;case"MetaNumberEvent":t=new Si(i,n,0,0,e.value),t.message=s;break;case"Midi20PerNotePitchBendEvent":t=new Ni(i,n,0,e.noteKey,e.pitch),t.message=s;break;default:t=new Mt(i,n,0,0,0),t.message=s;break}return t}static midiFileToJsObject(e){let t={};t.division=e.division;let i=[];t.events=i;for(let n of e.events)i.push(en.midiEventToJsObject(n));return t}static midiEventToJsObject(e){let t={};return t.track=e.track,t.tick=e.tick,t.message=e.message,e instanceof Dt?(t.type="SystemExclusiveEvent",t.data=e.data):e instanceof wi?(t.type="MetaDataEvent",t.data=e.data):e instanceof Si?(t.type="MetaNumberEvent",t.value=e.value):e instanceof Ni&&(t.type="Midi20PerNotePitchBendEvent",t.noteKey=e.noteKey,t.pitch=e.pitch),t}}class tn{constructor(){this.ready=new gi,this.samplesPlayed=new mi,this.sampleRequest=new gi}get sampleRate(){return tn.preferredSampleRate}open(){Ne.debug("AlphaSynth","Initializing webworker worker"),this._worker=to.globalThis,this._worker.addEventListener("message",this.handleMessage.bind(this)),this.ready.trigger()}destroy(){this._worker.postMessage({cmd:"alphaSynth.output.destroy"})}handleMessage(e){let t=e.data,i=t.cmd;switch(i){case tn.CmdOutputSampleRequest:this.sampleRequest.trigger();break;case tn.CmdOutputSamplesPlayed:this.samplesPlayed.trigger(t.samples);break}}addSamples(e){this._worker.postMessage({cmd:"alphaSynth.output.addSamples",samples:e})}play(){this._worker.postMessage({cmd:"alphaSynth.output.play"})}pause(){this._worker.postMessage({cmd:"alphaSynth.output.pause"})}resetSamples(){this._worker.postMessage({cmd:"alphaSynth.output.resetSamples"})}activate(){}}tn.CmdOutputPrefix="alphaSynth.output.",tn.CmdOutputAddSamples=tn.CmdOutputPrefix+"addSamples",tn.CmdOutputPlay=tn.CmdOutputPrefix+"play",tn.CmdOutputPause=tn.CmdOutputPrefix+"pause",tn.CmdOutputResetSamples=tn.CmdOutputPrefix+"resetSamples",tn.CmdOutputSampleRequest=tn.CmdOutputPrefix+"sampleRequest",tn.CmdOutputSamplesPlayed=tn.CmdOutputPrefix+"samplesPlayed",tn.preferredSampleRate=0;class nn{constructor(e){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this)),this._player=new yi(new tn),this._player.positionChanged.on(this.onPositionChanged.bind(this)),this._player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this._player.finished.on(this.onFinished.bind(this)),this._player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.soundFontLoadFailed.on(this.onSoundFontLoadFailed.bind(this)),this._player.midiLoaded.on(this.onMidiLoaded.bind(this)),this._player.midiLoadFailed.on(this.onMidiLoadFailed.bind(this)),this._player.readyForPlayback.on(this.onReadyForPlayback.bind(this)),this._player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this._main.postMessage({cmd:"alphaSynth.ready"})}static init(){let e=to.globalThis;e.addEventListener("message",t=>{let i=t.data,n=i.cmd;switch(n){case"alphaSynth.initialize":tn.preferredSampleRate=i.sampleRate,Ne.logLevel=i.logLevel,to.globalThis.alphaSynthWebWorker=new nn(e);break}})}handleMessage(e){let t=e.data,i=t.cmd;switch(i){case"alphaSynth.setLogLevel":Ne.logLevel=t.value;break;case"alphaSynth.setMasterVolume":this._player.masterVolume=t.value;break;case"alphaSynth.setMetronomeVolume":this._player.metronomeVolume=t.value;break;case"alphaSynth.setPlaybackSpeed":this._player.playbackSpeed=t.value;break;case"alphaSynth.setTickPosition":this._player.tickPosition=t.value;break;case"alphaSynth.setTimePosition":this._player.timePosition=t.value;break;case"alphaSynth.setPlaybackRange":this._player.playbackRange=t.value;break;case"alphaSynth.setIsLooping":this._player.isLooping=t.value;break;case"alphaSynth.setCountInVolume":this._player.countInVolume=t.value;break;case"alphaSynth.setMidiEventsPlayedFilter":this._player.midiEventsPlayedFilter=t.value;break;case"alphaSynth.play":this._player.play();break;case"alphaSynth.pause":this._player.pause();break;case"alphaSynth.playPause":this._player.playPause();break;case"alphaSynth.stop":this._player.stop();break;case"alphaSynth.playOneTimeMidiFile":this._player.playOneTimeMidiFile(en.jsObjectToMidiFile(t.midi));break;case"alphaSynth.loadSoundFontBytes":this._player.loadSoundFont(t.data,t.append);break;case"alphaSynth.resetSoundFonts":this._player.resetSoundFonts();break;case"alphaSynth.loadMidi":this._player.loadMidiFile(en.jsObjectToMidiFile(t.midi));break;case"alphaSynth.setChannelMute":this._player.setChannelMute(t.channel,t.mute);break;case"alphaSynth.setChannelSolo":this._player.setChannelSolo(t.channel,t.solo);break;case"alphaSynth.setChannelVolume":this._player.setChannelVolume(t.channel,t.volume);break;case"alphaSynth.resetChannelStates":this._player.resetChannelStates();break;case"alphaSynth.destroy":this._player.destroy(),this._main.postMessage({cmd:"alphaSynth.destroyed"});break}}onPositionChanged(e){this._main.postMessage({cmd:"alphaSynth.positionChanged",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onPlayerStateChanged(e){this._main.postMessage({cmd:"alphaSynth.playerStateChanged",state:e.state,stopped:e.stopped})}onFinished(){this._main.postMessage({cmd:"alphaSynth.finished"})}onSoundFontLoaded(){this._main.postMessage({cmd:"alphaSynth.soundFontLoaded"})}onSoundFontLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.soundFontLoadFailed",error:this.serializeException(e)})}serializeException(e){let t=JSON.parse(JSON.stringify(e));return e.message&&(t.message=e.message),e.stack&&(t.stack=e.stack),e.constructor&&e.constructor.name&&(t.type=e.constructor.name),t}onMidiLoaded(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",currentTime:e.currentTime,endTime:e.endTime,currentTick:e.currentTick,endTick:e.endTick,isSeek:e.isSeek})}onMidiLoadFailed(e){this._main.postMessage({cmd:"alphaSynth.midiLoaded",error:this.serializeException(e)})}onReadyForPlayback(){this._main.postMessage({cmd:"alphaSynth.readyForPlayback"})}onMidiEventsPlayed(e){this._main.postMessage({cmd:"alphaSynth.midiEventsPlayed",events:e.events.map(en.midiEventToJsObject)})}}class sn{static generateFontLookup(e){if(!sn.FontSizeLookupTables.has(e))if(to.isRunningInWorker)sn.FontSizeLookupTables.set(e,new Uint8Array([8]));else{let t=document.createElement("canvas"),i=t.getContext("2d");i.font="11px "+e;let n=[];for(let e=32;e<255;e++){let t=String.fromCharCode(e);n.push(i.measureText(t).width)}let s=new Uint8Array(n);sn.FontSizeLookupTables.set(e,s)}}static measureString(e,t,i,n,s){let r,a=11;sn.FontSizeLookupTables.has(t)||sn.generateFontLookup(t),r=sn.FontSizeLookupTables.get(t);let o=1;n===l.Italic&&(o*=1.2),s===h.Bold&&(o*=1.2);let c=0;for(let l=0;l<e.length;l++){let t=Math.min(r.length-1,e.charCodeAt(l)-32);t>=0&&(c+=r[t]*i/a)}return c*o}}sn.Georgia=new Uint8Array([3,4,5,7,7,9,8,2,4,4,5,7,3,4,3,5,7,5,6,6,6,6,6,6,7,6,3,3,7,7,7,5,10,7,7,7,8,7,7,8,9,4,6,8,7,10,8,8,7,8,8,6,7,8,7,11,8,7,7,4,5,4,7,7,6,6,6,5,6,5,4,6,6,3,3,6,3,10,6,6,6,6,5,5,4,6,5,8,6,5,5,5,4,5,7,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,3,4,6,7,6,7,4,6,6,10,6,6,7,0,10,7,5,7,6,6,6,6,6,3,6,6,6,6,12,12,12,5,7,7,7,7,7,7,11,7,7,7,7,7,4,4,4,4,8,8,8,8,8,8,8,7,8,8,8,8,8,7,7,6,6,6,6,6,6,6,8,5,5,5,5,5,3,3,3,3,6,6,6,6,6,6,6,7,6,6,6,6,6,5,6]),sn.Arial=new Uint8Array([3,3,4,6,6,10,7,2,4,4,4,6,3,4,3,3,6,6,6,6,6,6,6,6,6,6,3,3,6,6,6,6,11,7,7,8,8,7,7,9,8,3,6,7,6,9,8,9,7,9,8,7,7,8,7,10,7,7,7,3,3,3,5,6,4,6,6,6,6,6,3,6,6,2,2,6,2,9,6,6,6,6,4,6,3,6,6,8,6,6,6,4,3,4,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,4,6,6,6,6,3,6,4,8,4,6,6,0,8,6,4,6,4,4,4,6,6,4,4,4,4,6,9,9,9,7,7,7,7,7,7,7,11,8,7,7,7,7,3,3,3,3,8,8,9,9,9,9,9,6,9,8,8,8,8,7,7,7,6,6,6,6,6,6,10,6,6,6,6,6,3,3,3,3,6,6,6,6,6,6,6,6,7,6,6,6,6,6,6]),sn.FontSizeLookupTables=new Map([["Arial",sn.Arial],["'Arial'",sn.Arial],['"Arial"',sn.Arial],["Georgia",sn.Georgia],["'Georgia'",sn.Georgia],['"Georgia"',sn.Georgia]]),sn.ControlChars=32;class rn{constructor(){this.width=0,this.height=0,this.totalWidth=0,this.totalHeight=0,this.firstMasterBarIndex=0,this.lastMasterBarIndex=0,this.renderResult=null}}class an{constructor(){this.beats=[]}addBeat(e){e.barBounds=this,this.beats.push(e),this.masterBarBounds.addBeat(e)}findBeatAtPos(e){let t=null;for(let i of this.beats)if(!t||i.realBounds.x<e)t=i;else if(i.realBounds.x>e)break;return t}}class on{constructor(){this.notes=null}addNote(e){this.notes||(this.notes=[]),e.beatBounds=this,this.notes.push(e)}findNoteAtPos(e,t){const i=this.notes;if(!i)return null;for(let n of i){let i=n.noteHeadBounds.y+n.noteHeadBounds.h,s=n.noteHeadBounds.x+n.noteHeadBounds.w;if(n.noteHeadBounds.x>=e&&n.noteHeadBounds.y>=t&&e<=s&&t<=i)return n.note}return null}}class ln{constructor(){this.index=0,this.isFirstOfLine=!1,this.bars=[],this.staveGroupBounds=null}addBar(e){e.masterBarBounds=this,this.bars.push(e)}findBeatAtPos(e,t){let i=null;for(let n of this.bars){let t=n.findBeatAtPos(e);t&&(!i||i.realBounds.x<t.realBounds.x)&&(i=t)}return i?i.beat:null}finish(){this.bars.sort((e,t)=>e.realBounds.y<t.realBounds.y?-1:e.realBounds.y>t.realBounds.y?1:e.realBounds.x<t.realBounds.x?-1:e.realBounds.x>t.realBounds.x?1:0)}addBeat(e){this.staveGroupBounds.boundsLookup.addBeat(e)}}class hn{}class cn{constructor(){this.index=0,this.bars=[]}finish(){for(let e of this.bars)e.finish()}addBar(e){this.boundsLookup.addMasterBar(e),e.staveGroupBounds=this,this.bars.push(e)}findBarAtPos(e){let t=null;for(let i of this.bars)if(!t||i.realBounds.x<e)t=i;else if(e>i.realBounds.x+i.realBounds.w)break;return t}}class un{constructor(){this._beatLookup=new Map,this._masterBarLookup=new Map,this._currentStaveGroup=null,this.staveGroups=[],this.isFinished=!1}toJson(){let e={},t=[];e.staveGroups=t;for(let i of this.staveGroups){let e={};e.visualBounds=this.boundsToJson(i.visualBounds),e.realBounds=this.boundsToJson(i.realBounds),e.bars=[];for(let t of i.bars){let i={};i.lineAlignedBounds=this.boundsToJson(t.lineAlignedBounds),i.visualBounds=this.boundsToJson(t.visualBounds),i.realBounds=this.boundsToJson(t.realBounds),i.index=t.index,i.bars=[];for(let e of t.bars){let t={};t.visualBounds=this.boundsToJson(e.visualBounds),t.realBounds=this.boundsToJson(e.realBounds),t.beats=[];for(let i of e.beats){let e={};e.visualBounds=this.boundsToJson(i.visualBounds),e.realBounds=this.boundsToJson(i.realBounds);let n=e;if(n.beatIndex=i.beat.index,n.voiceIndex=i.beat.voice.index,n.barIndex=i.beat.voice.bar.index,n.staffIndex=i.beat.voice.bar.staff.index,n.trackIndex=i.beat.voice.bar.staff.track.index,i.notes){let t=e.notes=[];for(let e of i.notes){let i={},n=i;n.index=e.note.index,i.noteHeadBounds=this.boundsToJson(e.noteHeadBounds),t.push(i)}}t.beats.push(e)}i.bars.push(t)}e.bars.push(i)}t.push(e)}return e}static fromJson(e,t){let i=new un,n=e["staveGroups"];for(let s of n){let e=new cn;e.visualBounds=s.visualBounds,e.realBounds=s.realBounds,i.addStaveGroup(e);for(let i of s.bars){let n=new ln;n.index=i.index,n.isFirstOfLine=i.isFirstOfLine,n.lineAlignedBounds=i.lineAlignedBounds,n.visualBounds=i.visualBounds,n.realBounds=i.realBounds,e.addBar(n);for(let e of i.bars){let i=new an;i.visualBounds=e.visualBounds,i.realBounds=e.realBounds,n.addBar(i);for(let n of e.beats){let e=new on;e.visualBounds=n.visualBounds,e.realBounds=n.realBounds;let s=n;if(e.beat=t.tracks[s.trackIndex].staves[s.staffIndex].bars[s.barIndex].voices[s.voiceIndex].beats[s.beatIndex],n.notes){e.notes=[];for(let t of n.notes){let i=new hn,n=t;i.note=e.beat.notes[n.index],i.noteHeadBounds=t.noteHeadBounds,e.addNote(i)}}i.addBeat(e)}}}}return i}boundsToJson(e){let t={};return t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h,t}finish(){for(let e of this.staveGroups)e.finish();this.isFinished=!0}addNote(e){let t=this.findBeat(e.note.beat);t.addNote(e)}addStaveGroup(e){e.index=this.staveGroups.length,e.boundsLookup=this,this.staveGroups.push(e),this._currentStaveGroup=e}addMasterBar(e){e.staveGroupBounds?this._masterBarLookup.set(e.index,e):(e.staveGroupBounds=this._currentStaveGroup,this._masterBarLookup.set(e.index,e),this._currentStaveGroup.addBar(e))}addBeat(e){this._beatLookup.set(e.beat.id,e)}findMasterBarByIndex(e){return this._masterBarLookup.has(e)?this._masterBarLookup.get(e):null}findMasterBar(e){let t=e.index;return this._masterBarLookup.has(t)?this._masterBarLookup.get(t):null}findBeat(e){let t=e.id;return this._beatLookup.has(t)?this._beatLookup.get(t):null}getBeatAtPos(e,t){let i=0,n=this.staveGroups.length-1,s=-1;while(i<=n){let e=(n+i)/2|0,r=this.staveGroups[e];if(t>=r.realBounds.y&&t<=r.realBounds.y+r.realBounds.h){s=e;break}t<r.realBounds.y?n=e-1:i=e+1}if(-1===s)return null;let r=this.staveGroups[s],a=r.findBarAtPos(e);return a?a.findBeatAtPos(e,t):null}getNoteAtPos(e,t,i){let n=this.findBeat(e);return n?n.findNoteAtPos(t,i):null}}class dn{constructor(e){this._currentLayoutMode=t.LayoutMode.Page,this._currentRenderEngine=null,this._renderedTracks=null,this.canvas=null,this.score=null,this.tracks=null,this.layout=null,this.boundsLookup=null,this.width=0,this.preRender=new mi,this.renderFinished=new mi,this.partialRenderFinished=new mi,this.postRenderFinished=new gi,this.error=new mi,this.settings=e,this.recreateCanvas(),this.recreateLayout()}destroy(){this.score=null,this.canvas=null,this.layout=null,this.boundsLookup=null,this.tracks=null}recreateCanvas(){return this._currentRenderEngine!==this.settings.core.engine&&(this.canvas=to.getRenderEngineFactory(this.settings).createCanvas(),this._currentRenderEngine=this.settings.core.engine,!0)}recreateLayout(){return(!this.layout||this._currentLayoutMode!==this.settings.display.layoutMode)&&(this.layout=to.getLayoutEngineFactory(this.settings).createLayout(this),this._currentLayoutMode=this.settings.display.layoutMode,!0)}renderScore(e,t){try{let i;if(this.score=e,t){i=[];for(let n of t)n>=0&&n<e.tracks.length&&i.push(e.tracks[n])}else i=e.tracks.slice(0);0===i.length&&e.tracks.length>0&&i.push(e.tracks[0]),this.tracks=i,this.render()}catch(i){this.error.trigger(i)}}renderTracks(e){0===e.length?this.score=null:this.score=e[0].score,this.tracks=e,this.render()}updateSettings(e){this.settings=e}render(){if(0!==this.width){if(this.boundsLookup=new un,this.tracks&&0!==this.tracks.length){this.recreateCanvas(),this.canvas.lineWidth=this.settings.display.scale,this.canvas.settings=this.settings,Ne.debug("Rendering","Rendering "+this.tracks.length+" tracks");for(let e=0;e<this.tracks.length;e++){let t=this.tracks[e];Ne.debug("Rendering","Track "+e+": "+t.name)}this.preRender.trigger(!1),this.recreateLayout(),this.layoutAndRender(),Ne.debug("Rendering","Rendering finished")}}else Ne.warning("Rendering","AlphaTab skipped rendering because of width=0 (element invisible)",null)}resizeRender(){this.recreateLayout()||this.recreateCanvas()||this._renderedTracks!==this.tracks||!this.tracks?(Ne.debug("Rendering","Starting full rerendering due to layout or canvas change",null),this.render()):this.layout.supportsResize?(Ne.debug("Rendering","Starting optimized rerendering for resize"),this.boundsLookup=new un,this.preRender.trigger(!0),this.canvas.settings=this.settings,this.layout.resize(),this.layout.renderAnnotation(),this.onRenderFinished(),this.postRenderFinished.trigger()):Ne.warning("Rendering","Current layout does not support dynamic resizing, nothing was done",null),Ne.debug("Rendering","Resize finished")}layoutAndRender(){Ne.debug("Rendering","Rendering at scale "+this.settings.display.scale+" with layout "+this.layout.name,null),this.layout.layoutAndRender(),this.layout.renderAnnotation(),this._renderedTracks=this.tracks,this.onRenderFinished(),this.postRenderFinished.trigger()}onRenderFinished(){const e=new rn;e.totalHeight=this.layout.height,e.totalWidth=this.layout.width,e.renderResult=this.canvas.onRenderFinished(),this.renderFinished.trigger(e)}}class pn{constructor(e){this._main=e,this._main.addEventListener("message",this.handleMessage.bind(this),!1)}static init(){to.globalThis.alphaTabWebWorker=new pn(to.globalThis)}handleMessage(e){let t=e.data,i=t?t.cmd:"";switch(i){case"alphaTab.initialize":let e=en.jsObjectToSettings(t.settings);Ne.logLevel=e.core.logLevel,this._renderer=new dn(e),this._renderer.partialRenderFinished.on(e=>{this._main.postMessage({cmd:"alphaTab.partialRenderFinished",result:e})}),this._renderer.renderFinished.on(e=>{this._main.postMessage({cmd:"alphaTab.renderFinished",result:e})}),this._renderer.postRenderFinished.on(()=>{var e,t;this._main.postMessage({cmd:"alphaTab.postRenderFinished",boundsLookup:null!==(t=null===(e=this._renderer.boundsLookup)||void 0===e?void 0:e.toJson())&&void 0!==t?t:null})}),this._renderer.preRender.on(e=>{this._main.postMessage({cmd:"alphaTab.preRender",resize:e})}),this._renderer.error.on(this.error.bind(this));break;case"alphaTab.invalidate":this._renderer.render();break;case"alphaTab.resizeRender":this._renderer.resizeRender();break;case"alphaTab.setWidth":this._renderer.width=t.width;break;case"alphaTab.renderScore":this.updateFontSizes(t.fontSizes);let i=en.jsObjectToScore(t.score,this._renderer.settings);this.renderMultiple(i,t.trackIndexes);break;case"alphaTab.updateSettings":this.updateSettings(t.settings);break}}updateFontSizes(e){if(e){sn.FontSizeLookupTables||(sn.FontSizeLookupTables=new Map);for(let t in e)sn.FontSizeLookupTables.set(t,e[t])}}updateSettings(e){Zi.fromJson(this._renderer.settings,e)}renderMultiple(e,t){try{this._renderer.renderScore(e,t)}catch(i){this.error(i)}}error(e){Ne.error("Worker","An unexpected error occurred in worker",e),this._main.postMessage({cmd:"alphaTab.error",error:e})}}class fn{constructor(){this._canvas=null,this._color=new de(0,0,0,255),this._font=new me("Arial",10,l.Plain),this._lineWidth=0;let e=document.createElement("span");e.classList.add("at"),document.body.appendChild(e);let t=window.getComputedStyle(e),i=t.fontFamily;(i.startsWith('"')||i.startsWith("'"))&&(i=i.substr(1,i.length-2)),this._musicFont=new me(i,parseFloat(t.fontSize),l.Plain),this._measureCanvas=document.createElement("canvas"),this._measureCanvas.width=10,this._measureCanvas.height=10,this._measureCanvas.style.width="10px",this._measureCanvas.style.height="10px",this._measureContext=this._measureCanvas.getContext("2d"),this._measureContext.textBaseline="hanging"}onRenderFinished(){return null}beginRender(e,t){this._canvas=document.createElement("canvas"),this._canvas.width=e*to.HighDpiFactor|0,this._canvas.height=t*to.HighDpiFactor|0,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px",this._context=this._canvas.getContext("2d"),this._context.textBaseline="hanging",this._context.scale(to.HighDpiFactor,to.HighDpiFactor),this._context.lineWidth=this._lineWidth}endRender(){let e=this._canvas;return this._canvas=null,e}get color(){return this._color}set color(e){this._color.rgba!==e.rgba&&(this._color=e,this._context.strokeStyle=e.rgba,this._context.fillStyle=e.rgba)}get lineWidth(){return this._lineWidth}set lineWidth(e){this._lineWidth=e,this._context&&(this._context.lineWidth=e)}fillRect(e,t,i,n){i>0&&this._context.fillRect(0|e,0|t,i,n)}strokeRect(e,t,i,n){this._context.strokeRect(0|e,0|t,i,n)}beginPath(){this._context.beginPath()}closePath(){this._context.closePath()}moveTo(e,t){this._context.moveTo(e,t)}lineTo(e,t){this._context.lineTo(e,t)}quadraticCurveTo(e,t,i,n){this._context.quadraticCurveTo(e,t,i,n)}bezierCurveTo(e,t,i,n,s,r){this._context.bezierCurveTo(e,t,i,n,s,r)}fillCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,2*Math.PI,!0),this.fill()}strokeCircle(e,t,i){this._context.beginPath(),this._context.arc(e,t,i,0,2*Math.PI,!0),this.stroke()}fill(){this._context.fill(),this._context.beginPath()}stroke(){this._context.stroke(),this._context.beginPath()}get font(){return this._font}set font(e){this._font=e,this._context&&(this._context.font=e.toCssString(this.settings.display.scale)),this._measureContext.font=e.toCssString(this.settings.display.scale)}get textAlign(){switch(this._context.textAlign){case"left":return E.Left;case"center":return E.Center;case"right":return E.Right;default:return E.Left}}set textAlign(e){switch(e){case E.Left:this._context.textAlign="left";break;case E.Center:this._context.textAlign="center";break;case E.Right:this._context.textAlign="right";break}}get textBaseline(){switch(this._context.textBaseline){case"hanging":return P.Top;case"middle":return P.Middle;case"bottom":return P.Bottom;default:return P.Top}}set textBaseline(e){switch(e){case P.Top:this._context.textBaseline="hanging";break;case P.Middle:this._context.textBaseline="middle";break;case P.Bottom:this._context.textBaseline="bottom";break}}beginGroup(e){}endGroup(){}fillText(e,t,i){this._context.fillText(e,t,i)}measureText(e){return this._measureContext.measureText(e).width}fillMusicFontSymbol(e,t,i,n,s=!1){n!==C.None&&this.fillMusicFontSymbolText(e,t,i,String.fromCharCode(n),s)}fillMusicFontSymbols(e,t,i,n,s=!1){let r="";for(let a of n)a!==C.None&&(r+=String.fromCharCode(a));this.fillMusicFontSymbolText(e,t,i,r,s)}fillMusicFontSymbolText(e,t,i,n,s=!1){let r=this._context.textAlign,a=this._context.textBaseline,o=this._context.font;this._context.font=this._musicFont.toCssString(i),this._context.textBaseline="middle",this._context.textAlign=s?"center":"left",this._context.fillText(n,e,t),this._context.textBaseline=a,this._context.font=o,this._context.textAlign=r}beginRotate(e,t,i){this._context.save(),this._context.translate(e,t),this._context.rotate(i*Math.PI/180)}endRotate(){this._context.restore()}}class gn{constructor(e){this._midiFile=e}addTimeSignature(e,t,i){let n=0;while(1){if(i>>=1,!(i>0))break;n++}const s=new wi(0,e,255,z.TimeSignature,new Uint8Array([255&t,255&n,48,8]));this._midiFile.addEvent(s)}addRest(e,t,i){const n=new Dt(e,t,U.SystemExclusive,Dt.AlphaTabManufacturerId,new Uint8Array([X.Rest]));this._midiFile.addEvent(n)}addNote(e,t,i,n,s,r){const a=ke.dynamicToVelocity(s),o=new Mt(e,t,this.makeCommand($.NoteOn,r),gn.fixValue(n),gn.fixValue(a));this._midiFile.addEvent(o);const l=new Mt(e,t+i,this.makeCommand($.NoteOff,r),gn.fixValue(n),gn.fixValue(a));this._midiFile.addEvent(l)}makeCommand(e,t){return 240&e|15&t}static fixValue(e){return e>127?127:e<0?0:e}addControlChange(e,t,i,n,s){const r=new Mt(e,t,this.makeCommand($.Controller,i),gn.fixValue(n),gn.fixValue(s));this._midiFile.addEvent(r)}addProgramChange(e,t,i,n){const s=new Mt(e,t,this.makeCommand($.ProgramChange,i),gn.fixValue(n),0);this._midiFile.addEvent(s)}addTempo(e,t){const i=6e7/t|0,n=new Si(0,e,255,z.Tempo,i);this._midiFile.addEvent(n)}addBend(e,t,i,n){n=n>=Vt.MaxPitchWheel?Vt.MaxPitchWheel:Math.floor(n);const s=new Mt(e,t,this.makeCommand($.PitchBend,i),127&n,n>>7&127);this._midiFile.addEvent(s)}addNoteBend(e,t,i,n,s){s=s>=Vt.MaxPitchWheel?Vt.MaxPitchWheel:Math.floor(s),s=s*Vt.MaxPitchWheel20/Vt.MaxPitchWheel;const r=new Ni(e,t,this.makeCommand($.PerNotePitchBend,i),n,s);this._midiFile.addEvent(r)}finishTrack(e,t){const i=new wi(e,t,255,z.EndOfTrack,new Uint8Array(0));this._midiFile.addEvent(i)}}class mn{constructor(){this._highlightedBeats=new Map,this.index=0,this.start=0,this.end=0,this.isEmptyBar=!1,this.beatsToHighlight=[]}highlightBeat(e){this._highlightedBeats.has(e.id)||(this._highlightedBeats.set(e.id,!0),this.beatsToHighlight.push(e))}}(function(e){e[e["BankSelectCoarse"]=0]="BankSelectCoarse",e[e["ModulationCoarse"]=1]="ModulationCoarse",e[e["DataEntryCoarse"]=6]="DataEntryCoarse",e[e["VolumeCoarse"]=7]="VolumeCoarse",e[e["PanCoarse"]=10]="PanCoarse",e[e["ExpressionControllerCoarse"]=11]="ExpressionControllerCoarse",e[e["ModulationFine"]=33]="ModulationFine",e[e["DataEntryFine"]=38]="DataEntryFine",e[e["VolumeFine"]=39]="VolumeFine",e[e["PanFine"]=42]="PanFine",e[e["ExpressionControllerFine"]=43]="ExpressionControllerFine",e[e["HoldPedal"]=64]="HoldPedal",e[e["LegatoPedal"]=68]="LegatoPedal",e[e["NonRegisteredParameterFine"]=98]="NonRegisteredParameterFine",e[e["NonRegisteredParameterCourse"]=99]="NonRegisteredParameterCourse",e[e["RegisteredParameterFine"]=100]="RegisteredParameterFine",e[e["RegisteredParameterCourse"]=101]="RegisteredParameterCourse",e[e["ResetControllers"]=121]="ResetControllers",e[e["AllNotesOff"]=123]="AllNotesOff"})(Z||(Z={}));class bn{constructor(e){this._repeatStartIndex=0,this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!0,this.index=0,this.currentTick=0,this._score=e}get finished(){return this.index>=this._score.masterBars.length}processCurrent(){const e=this._score.masterBars[this.index],t=e.alternateEndings;e.repeatGroup.isClosed||e.repeatGroup.openings[e.repeatGroup.openings.length-1]!==e||(this._repeatNumber=0,this._repeatOpen=!1),!e.isRepeatStart&&0!==e.index||0!==this._repeatNumber?e.isRepeatStart&&(this.shouldPlay=!0):(this._repeatStartIndex=this.index,this._repeatOpen=!0),this._repeatOpen&&t>0&&(0===(t&1<<this._repeatNumber)?this.shouldPlay=!1:this.shouldPlay=!0),this.shouldPlay&&(this.currentTick+=e.calculateDuration())}moveNext(){const e=this._score.masterBars[this.index],t=e.repeatCount-1;this._repeatOpen&&t>0?this._repeatNumber<t?(this.index=this._repeatStartIndex,this._repeatNumber++):(this._repeatNumber=0,this._repeatOpen=!1,this.shouldPlay=!0,this.index++):this.index++}}class yn{constructor(){this.start=0,this.end=0,this.tempo=0,this.beats=[],this.nextMasterBar=null}finish(){this.beats.sort((e,t)=>e.start-t.start)}addBeat(e){e.masterBar=this,e.index=this.beats.length,this.beats.push(e)}}class vn{constructor(){this.duration=0,this.nextBeatLookup=null}get currentBeat(){return this.currentBeatLookup.beat}get nextBeat(){var e,t;return null!==(t=null===(e=this.nextBeatLookup)||void 0===e?void 0:e.beat)&&void 0!==t?t:null}}class wn{constructor(){this._currentMasterBar=null,this.masterBarLookup=new Map,this.masterBars=[]}finish(){let e=null,t=[];for(let i of this.masterBars){i.finish(),e&&(e.nextMasterBar=i);for(const e of i.beats){const i=[];for(let n of t)n.end>e.start&&(i.push(n),e.highlightBeat(n.beat),e.start<=n.start&&n.highlightBeat(e.beat));i.push(e),t=i}e=i}}findBeat(e,t,i=null){const n=new Map;for(const r of e)n.set(r.index,!0);let s=null;return i&&(s=this.findBeatFast(n,i,t)),s||(s=this.findBeatSlow(n,t)),s}findBeatFast(e,t,i){return i>=t.currentBeatLookup.start&&i<t.currentBeatLookup.end?t:t.nextBeatLookup&&i>=t.nextBeatLookup.start&&i<t.nextBeatLookup.end?this.createResult(t.nextBeatLookup,e):null}findBeatSlow(e,t){const i=this.findMasterBar(t);if(!i)return null;let n=null,s=i.beats;for(let r=0;r<s.length;r++){let i=s[r];if(e.has(i.beat.voice.bar.staff.track.index))if(i.start<=t&&t<i.end)(!n||n.start<i.start)&&(n=s[r]);else if(i.end>t)break}return n?this.createResult(n,e):null}createResult(e,t){const i=this.findNextBeat(e,t),n=new vn;return n.currentBeatLookup=e,n.nextBeatLookup=i,n.duration=i?ke.ticksToMillis(i.start-e.start,e.masterBar.tempo):ke.ticksToMillis(e.end-e.start,e.masterBar.tempo),n.beatsToHighlight=e.beatsToHighlight,n}findNextBeat(e,t){const i=e.masterBar;let n=i.beats,s=null;for(let r=e.index+1;r<n.length;r++){const i=n[r];if(i.start>e.start&&t.has(i.beat.voice.bar.staff.track.index)){s=i;break}}if(!s&&i.nextMasterBar){n=i.nextMasterBar.beats;for(let e=0;e<n.length;e++){const i=n[e];if(t.has(i.beat.voice.bar.staff.track.index)){s=i;break}}}return s}findMasterBar(e){const t=this.masterBars;let i=0,n=t.length-1;while(i<=n){const s=(n+i)/2|0,r=t[s];if(e>=r.start&&e<r.end)return r;e<r.start?n=s-1:i=s+1}return null}getMasterBar(e){if(!this.masterBarLookup.has(e.index)){const t=new yn;return t.masterBar=e,t}return this.masterBarLookup.get(e.index)}getMasterBarStart(e){return this.masterBarLookup.has(e.index)?this.masterBarLookup.get(e.index).start:0}addMasterBar(e){this.masterBars.push(e),this._currentMasterBar=e,this.masterBarLookup.has(e.masterBar.index)||this.masterBarLookup.set(e.masterBar.index,e)}addBeat(e){var t;null===(t=this._currentMasterBar)||void 0===t||t.addBeat(e)}}class Sn{constructor(){this.noteOnly=0,this.untilTieOrSlideEnd=0,this.letRingEnd=0}}class _n{constructor(){this.firstBeatDuration=0,this.secondBeatStartOffset=0,this.secondBeatDuration=0}}class kn{constructor(e,t,i){this._currentTempo=0,this._currentBarRepeatLookup=null,this._programsPerChannel=new Map,this.tickLookup=new wn,this._currentTripletFeel=null,this._score=e,this._settings=t||new xi,this._currentTempo=this._score.tempo,this._handler=i}generate(){for(const i of this._score.tracks)this.generateTrack(i);Ne.debug("Midi","Begin midi generation");const e=new bn(this._score);let t=null;while(!e.finished){const i=e.index,n=this._score.masterBars[i],s=e.currentTick;if(e.processCurrent(),e.shouldPlay){this.generateMasterBar(n,t,s);for(const e of this._score.tracks)for(const t of e.staves)i<t.bars.length&&this.generateBar(t.bars[i],s)}e.moveNext(),t=n}for(const i of this._score.tracks)this._handler.finishTrack(i.index,e.currentTick);this.tickLookup.finish(),Ne.debug("Midi","Midi generation done")}generateTrack(e){this.generateChannel(e,e.playbackInfo.primaryChannel,e.playbackInfo),e.playbackInfo.primaryChannel!==e.playbackInfo.secondaryChannel&&this.generateChannel(e,e.playbackInfo.secondaryChannel,e.playbackInfo)}addProgramChange(e,t,i,n){this._programsPerChannel.has(i)&&this._programsPerChannel.get(i)===n||(this._handler.addProgramChange(e.index,t,i,n),this._programsPerChannel.set(i,n))}generateChannel(e,t,i){let n=kn.toChannelShort(i.volume),s=kn.toChannelShort(i.balance);this._handler.addControlChange(e.index,0,t,Z.VolumeCoarse,n),this._handler.addControlChange(e.index,0,t,Z.PanCoarse,s),this._handler.addControlChange(e.index,0,t,Z.ExpressionControllerCoarse,127),this._handler.addControlChange(e.index,0,t,Z.RegisteredParameterFine,0),this._handler.addControlChange(e.index,0,t,Z.RegisteredParameterCourse,0),this._handler.addControlChange(e.index,0,t,Z.DataEntryFine,0),this._handler.addControlChange(e.index,0,t,Z.DataEntryCoarse,kn.PitchBendRangeInSemitones),this.addProgramChange(e,0,t,i.program)}static toChannelShort(e){const t=Math.max(-32768,Math.min(32767,8*e-1));return Math.max(t,-1)+1}generateMasterBar(e,t,i){t&&t.timeSignatureDenominator===e.timeSignatureDenominator&&t.timeSignatureNumerator===e.timeSignatureNumerator||this._handler.addTimeSignature(i,e.timeSignatureNumerator,e.timeSignatureDenominator),t?e.tempoAutomation&&(this._handler.addTempo(i,e.tempoAutomation.value),this._currentTempo=e.tempoAutomation.value):(this._handler.addTempo(i,e.score.tempo),this._currentTempo=e.score.tempo);const n=new yn;n.masterBar=e,n.start=i,n.tempo=this._currentTempo,n.end=n.start+e.calculateDuration(),this.tickLookup.addMasterBar(n)}generateBar(e,t){let i=this.getPlaybackBar(e);this._currentBarRepeatLookup=null;for(const n of i.voices)this.generateVoice(n,t,e)}getPlaybackBar(e){switch(e.simileMark){case f.Simple:e.previousBar&&(e=this.getPlaybackBar(e.previousBar));break;case f.FirstOfDouble:e.previousBar&&e.previousBar.previousBar&&(e=this.getPlaybackBar(e.previousBar.previousBar));break;case f.SecondOfDouble:e.previousBar&&e.previousBar.previousBar&&(e=this.getPlaybackBar(e.previousBar.previousBar));break}return e}generateVoice(e,t,i){if(!e.isEmpty||e.bar.isEmpty&&0===e.index)for(const n of e.beats)this.generateBeat(n,t,i)}generateBeat(e,t,i){let n=e.playbackStart,s=e.playbackDuration;e.voice.bar.isEmpty?s=e.voice.bar.masterBar.calculateDuration():e.voice.bar.masterBar.tripletFeel!==I.NoTripletFeel&&this._settings.player.playTripletFeel&&(this._currentTripletFeel?(n-=this._currentTripletFeel.secondBeatStartOffset,s=this._currentTripletFeel.secondBeatDuration,this._currentTripletFeel=null):(this._currentTripletFeel=kn.calculateTripletFeelInfo(n,s,e),this._currentTripletFeel&&(s=this._currentTripletFeel.firstBeatDuration)));const r=new mn;r.start=t+n;const a=e.nextBeat?e.nextBeat.absolutePlaybackStart-e.absolutePlaybackStart:s;r.end=t+n,r.highlightBeat(e),r.end+=a>s?a:s,i===e.voice.bar?(r.beat=e,this.tickLookup.addBeat(r)):(r.isEmptyBar=!0,r.beat=i.voices[0].beats[0],this._currentBarRepeatLookup?this._currentBarRepeatLookup.end=r.end:(this._currentBarRepeatLookup=r,this.tickLookup.addBeat(this._currentBarRepeatLookup)));const o=e.voice.bar.staff.track;for(const l of e.automations)this.generateAutomation(e,l,t);if(e.isRest)this._handler.addRest(o.index,t+n,o.playbackInfo.primaryChannel);else{let i=this.getBrushInfo(e);for(const r of e.notes)this.generateNote(r,t+n,s,i)}if(e.vibrato!==x.None){let i=240,s=3;switch(e.vibrato){case x.Slight:i=this._settings.player.vibrato.beatSlightLength,s=this._settings.player.vibrato.beatSlightAmplitude;break;case x.Wide:i=this._settings.player.vibrato.beatWideLength,s=this._settings.player.vibrato.beatWideAmplitude;break}this.generateVibratorWithParams(t+n,e.playbackDuration,i,s,(t,i)=>{this._handler.addBend(e.voice.bar.staff.track.index,t,o.playbackInfo.secondaryChannel,i)})}}static calculateTripletFeelInfo(e,t,i){let n;switch(i.voice.bar.masterBar.tripletFeel){case I.Triplet8th:case I.Dotted8th:case I.Scottish8th:n=v.Eighth;break;case I.Triplet16th:case I.Dotted16th:case I.Scottish16th:n=v.Sixteenth;break;default:return null}const s=ke.toTicks(n);if(t!==s)return null;if(e%s!==0)return null;if(!i.nextBeat||i.nextBeat.voice!==i.voice||i.playbackDuration!==s)return null;const r=new _n;switch(i.voice.bar.masterBar.tripletFeel){case I.Triplet8th:r.firstBeatDuration=ke.applyTuplet(ke.toTicks(v.Quarter),3,2),r.secondBeatDuration=ke.applyTuplet(ke.toTicks(v.Eighth),3,2);break;case I.Dotted8th:r.firstBeatDuration=ke.applyDot(ke.toTicks(v.Eighth),!1),r.secondBeatDuration=ke.toTicks(v.Sixteenth);break;case I.Scottish8th:r.firstBeatDuration=ke.toTicks(v.Sixteenth),r.secondBeatDuration=ke.applyDot(ke.toTicks(v.Eighth),!1);break;case I.Triplet16th:r.firstBeatDuration=ke.applyTuplet(ke.toTicks(v.Eighth),3,2),r.secondBeatDuration=ke.applyTuplet(ke.toTicks(v.Sixteenth),3,2);break;case I.Dotted16th:r.firstBeatDuration=ke.applyDot(ke.toTicks(v.Sixteenth),!1),r.secondBeatDuration=ke.toTicks(v.ThirtySecond);break;case I.Scottish16th:r.firstBeatDuration=ke.toTicks(v.ThirtySecond),r.secondBeatDuration=ke.applyDot(ke.toTicks(v.Sixteenth),!1);break}return r.secondBeatStartOffset=t-r.firstBeatDuration,r}generateNote(e,t,i,n){const s=e.beat.voice.bar.staff.track,r=e.beat.voice.bar.staff;let a=e.realValue;if(e.isPercussion){const t=Ee.getArticulation(e);t&&(a=t.outputMidiNumber)}const o=e.isStringed&&e.string<=n.length?n[e.string-1]:0,l=t+o,h=this.getNoteDuration(e,i);h.untilTieOrSlideEnd-=o,h.noteOnly-=o,h.letRingEnd-=o;const c=kn.getDynamicValue(e),u=e.hasBend||e.beat.hasWhammyBar||e.beat.vibrato!==x.None?s.playbackInfo.secondaryChannel:s.playbackInfo.primaryChannel;let d=0;if(d=e.hasBend?kn.getPitchWheel(e.bendPoints[0].value):e.beat.hasWhammyBar?kn.getPitchWheel(e.beat.whammyBarPoints[0].value):e.isTieDestination||e.slideOrigin&&e.slideOrigin.slideOutType===B.Legato?-1:kn.getPitchWheel(0),d>=0&&this._handler.addNoteBend(s.index,l,u,a,d),e.beat.fadeIn&&this.generateFadeIn(e,l,h),!e.isTrill||r.isPercussion){if(e.beat.isTremolo)this.generateTremoloPicking(e,l,h,a,c,u);else if(e.hasBend?this.generateBend(e,l,h,a,u):e.beat.hasWhammyBar&&0===e.index?this.generateWhammy(e.beat,l,h,u):e.slideInType!==T.None||e.slideOutType!==B.None?this.generateSlide(e,l,h,a,c,u):e.vibrato!==x.None&&this.generateVibrato(e,l,h,a,u),!e.isTieDestination&&(!e.slideOrigin||e.slideOrigin.slideOutType!==B.Legato)){let e=Math.max(h.untilTieOrSlideEnd,h.letRingEnd);this._handler.addNote(s.index,l,e,a,c,u)}}else this.generateTrill(e,l,h,a,c,u)}getNoteDuration(e,i){const n=new Sn;if(n.noteOnly=i,n.untilTieOrSlideEnd=i,n.letRingEnd=i,e.isDead)return n.noteOnly=this.applyStaticDuration(kn.DefaultDurationDead,i),n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(e.isPalmMute)return n.noteOnly=this.applyStaticDuration(kn.DefaultDurationPalmMute,i),n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(e.isStaccato)return n.noteOnly=i/2|0,n.untilTieOrSlideEnd=n.noteOnly,n.letRingEnd=n.noteOnly,n;if(e.isTieOrigin){const t=e.tieDestination;if(t)if(e.isTieDestination){const e=this.getNoteDuration(t,t.beat.playbackDuration);n.untilTieOrSlideEnd=i+e.untilTieOrSlideEnd}else{const i=e.beat.absolutePlaybackStart,s=this.getNoteDuration(t,t.beat.playbackDuration),r=t.beat.absolutePlaybackStart+s.untilTieOrSlideEnd;n.untilTieOrSlideEnd=r-i}}else if(e.slideOutType===B.Legato){const t=e.slideTarget;if(t){const i=e.beat.absolutePlaybackStart,s=this.getNoteDuration(t,t.beat.playbackDuration),r=t.beat.absolutePlaybackStart+s.untilTieOrSlideEnd;n.untilTieOrSlideEnd=r-i}}if(e.isLetRing&&this._settings.notation.notationMode===t.NotationMode.GuitarPro){let t=e.beat,s=0;const r=e.beat.voice.bar.masterBar.calculateDuration();while(t.nextBeat){let i=t.nextBeat;if(i.isRest)break;if(e.isStringed&&i.hasNoteOnString(e.string))break;if(t=t.nextBeat,s=t.absolutePlaybackStart-e.beat.absolutePlaybackStart+t.playbackDuration,s>r){s=r;break}}t===e.beat?n.letRingEnd=i:n.letRingEnd=s}else n.letRingEnd=n.untilTieOrSlideEnd;return n}applyStaticDuration(e,t){const i=this._currentTempo*e/Te.MaxPosition|0;return Math.min(i,t)}static getDynamicValue(e){let t=e.dynamics;switch(!e.beat.voice.bar.staff.isPercussion&&e.hammerPullOrigin&&t--,e.isGhost&&t--,e.accentuated){case c.Normal:t++;break;case c.Heavy:t+=2;break}return t<0&&(t=0),t}generateFadeIn(e,t,i){const n=e.beat.voice.bar.staff.track,s=kn.toChannelShort(n.playbackInfo.volume),r=s/i.noteOnly,a=120,o=i.noteOnly/a|0,l=t+i.noteOnly;for(let h=o-1;h>=0;h--){const e=l-h*a,i=(e-t)*r;h===o-1&&(this._handler.addControlChange(n.index,t,n.playbackInfo.primaryChannel,Z.VolumeCoarse,i),this._handler.addControlChange(n.index,t,n.playbackInfo.secondaryChannel,Z.VolumeCoarse,i)),this._handler.addControlChange(n.index,e,n.playbackInfo.primaryChannel,Z.VolumeCoarse,i),this._handler.addControlChange(n.index,e,n.playbackInfo.secondaryChannel,Z.VolumeCoarse,i)}}generateVibrato(e,t,i,n,s){let r=0,a=0;switch(e.vibrato){case x.Slight:r=this._settings.player.vibrato.noteSlightLength,a=this._settings.player.vibrato.noteSlightAmplitude;break;case x.Wide:r=this._settings.player.vibrato.noteWideLength,a=this._settings.player.vibrato.noteWideAmplitude;break;default:return}const o=e.beat.voice.bar.staff.track;this.generateVibratorWithParams(t,i.noteOnly,r,a,(e,t)=>{this._handler.addNoteBend(o.index,e,s,n,t)})}generateVibratorWithParams(e,t,i,n,s){const r=16,a=i/2|0;e+=i;const o=e+t;while(e<o){let t=0;const l=e+i<o?i:o-e;while(t<l){let i=n*Math.sin(t*Math.PI/a);s(e+t|0,kn.getPitchWheel(i)),t+=r}e+=i}}static getPitchWheel(e){return Vt.DefaultPitchWheel+e/2*kn.PitchValuePerSemitone}generateSlide(e,t,i,n,s,r){let a=e.slideOutType===B.Legato?i.noteOnly:i.untilTieOrSlideEnd,o=[],l=e.beat.voice.bar.staff.track;const h=this._settings.player.slide.simpleSlidePitchOffset,c=Math.floor(Te.MaxPosition*this._settings.player.slide.simpleSlideDurationRatio),u=Math.floor(Te.MaxPosition*this._settings.player.slide.shiftSlideDurationRatio);switch(e.slideInType){case T.IntoFromAbove:o.push(new Te(0,h)),o.push(new Te(c,0));break;case T.IntoFromBelow:o.push(new Te(0,-h)),o.push(new Te(c,0));break}switch(e.slideOutType){case B.Legato:case B.Shift:o.push(new Te(u,0));const t=2*(e.slideTarget.realValue-e.realValue);o.push(new Te(Te.MaxPosition,t));break;case B.OutDown:o.push(new Te(Te.MaxPosition-c,0)),o.push(new Te(Te.MaxPosition,-h));break;case B.OutUp:o.push(new Te(Te.MaxPosition-c,0)),o.push(new Te(Te.MaxPosition,h));break}this.generateWhammyOrBend(t,a,o,(e,t)=>{this._handler.addNoteBend(l.index,e,r,n,t)})}generateBend(e,t,i,n,s){let r=e.bendPoints,a=e.beat.voice.bar.staff.track;const o=(e,t)=>{this._handler.addNoteBend(a.index,e,s,n,t)};let l,h=null;if(e.isTieOrigin&&this._settings.notation.extendBendArrowsOnTiedNotes){let t=e;while(t.isTieOrigin&&!t.tieDestination.hasBend)t=t.tieDestination;l=t.beat.absolutePlaybackStart-e.beat.absolutePlaybackStart+this.getNoteDuration(t,t.beat.playbackDuration).noteOnly}else if(e.isTieOrigin&&e.beat.graceType!==S.None){switch(e.tieDestination.bendType){case m.Bend:case m.BendRelease:case m.PrebendBend:h=e.tieDestination.bendPoints[1].value;break;case m.Prebend:case m.PrebendRelease:h=e.tieDestination.bendPoints[0].value;break}l=Math.max(i.noteOnly,ke.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo))}else l=i.noteOnly;r[0].value>0&&!e.isContinuedBend&&t>0&&t--;const c=Math.min(l,ke.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));let u=[];switch(e.bendType){case m.Custom:u=r;break;case m.Bend:case m.Release:switch(e.bendStyle){case g.Default:u=r;break;case g.Gradual:u.push(new Te(0,e.bendPoints[0].value)),(!h||h<e.bendPoints[1].value)&&(h=e.bendPoints[1].value),u.push(new Te(Te.MaxPosition,h));break;case g.Fast:return(!h||h<e.bendPoints[1].value)&&(h=e.bendPoints[1].value),void(e.beat.graceType===S.BendGrace?this.generateSongBookWhammyOrBend(t,l,!0,[e.bendPoints[0].value,h],c,o):this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,h],c,o))}break;case m.BendRelease:switch(e.bendStyle){case g.Default:u=r;break;case g.Gradual:u.push(new Te(0,e.bendPoints[0].value)),u.push(new Te(Te.MaxPosition/2|0,e.bendPoints[1].value)),u.push(new Te(Te.MaxPosition,e.bendPoints[2].value));break;case g.Fast:return void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,e.bendPoints[1].value,e.bendPoints[2].value],c,o)}break;case m.Hold:u=r;break;case m.Prebend:u=r;break;case m.PrebendBend:switch(e.bendStyle){case g.Default:u=r;break;case g.Gradual:u.push(new Te(0,e.bendPoints[0].value)),u.push(new Te(Te.MaxPosition,e.bendPoints[1].value));break;case g.Fast:const i=kn.getPitchWheel(e.bendPoints[0].value);return o(t,0|i),(!h||h<e.bendPoints[1].value)&&(h=e.bendPoints[1].value),void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,h],c,o)}break;case m.PrebendRelease:switch(e.bendStyle){case g.Default:u=r;break;case g.Gradual:u.push(new Te(0,e.bendPoints[0].value)),u.push(new Te(Te.MaxPosition,e.bendPoints[1].value));break;case g.Fast:const i=kn.getPitchWheel(e.bendPoints[0].value);return o(t,0|i),void this.generateSongBookWhammyOrBend(t,l,!1,[e.bendPoints[0].value,e.bendPoints[1].value],c,o)}break}this.generateWhammyOrBend(t,l,u,o)}generateSongBookWhammyOrBend(e,t,i,n,s,r){const a=i?e:e+t-s,o=s/(n.length-1);for(let l=0;l<n.length-1;l++){const e=kn.getPitchWheel(n[l]),t=kn.getPitchWheel(n[l+1]),i=a+o*l;this.generateBendValues(i,o,e,t,r)}}generateWhammy(e,t,i,n){const s=e.whammyBarPoints,r=e.voice.bar.staff.track,a=i.noteOnly;s[0].value>0&&!e.isContinuedWhammy&&t--;const o=(e,t)=>{this._handler.addBend(r.index,e,n,t)};let l=[];switch(e.whammyBarType){case L.Custom:l=s;break;case L.Dive:switch(e.whammyStyle){case g.Default:l=s;break;case g.Gradual:l.push(new Te(0,s[0].value)),l.push(new Te(Te.MaxPosition,s[1].value));break;case g.Fast:const e=Math.min(a,ke.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,a,!1,[s[0].value,s[1].value],e,o)}break;case L.Dip:switch(e.whammyStyle){case g.Default:l=s;break;case g.Gradual:l.push(new Te(0,s[0].value)),l.push(new Te(Te.MaxPosition/2|0,s[1].value)),l.push(new Te(Te.MaxPosition,s[2].value));break;case g.Fast:const e=Math.min(a,ke.millisToTicks(this._settings.player.songBookDipDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,a,!0,[s[0].value,s[1].value,s[2].value],e,o)}break;case L.Hold:l=s;break;case L.Predive:l=s;break;case L.PrediveDive:switch(e.whammyStyle){case g.Default:l=s;break;case g.Gradual:l.push(new Te(0,s[0].value)),l.push(new Te(Te.MaxPosition/2|0,s[0].value)),l.push(new Te(Te.MaxPosition,s[1].value));break;case g.Fast:const e=kn.getPitchWheel(s[0].value);this._handler.addBend(r.index,t,n,0|e);const i=Math.min(a,ke.millisToTicks(this._settings.player.songBookBendDuration,this._currentTempo));return void this.generateSongBookWhammyOrBend(t,a,!1,[s[0].value,s[1].value],i,o)}break}this.generateWhammyOrBend(t,a,l,o)}generateWhammyOrBend(e,t,i,n){const s=t/Te.MaxPosition;for(let r=0;r<i.length-1;r++){const t=i[r],a=i[r+1],o=kn.getPitchWheel(t.value),l=kn.getPitchWheel(a.value),h=s*(a.offset-t.offset),c=e+s*t.offset;this.generateBendValues(c,h,o,l,n)}}generateBendValues(e,t,i,n,s){const r=ke.ticksToMillis(t,this._currentTempo),a=Math.abs(n-i)/kn.PitchValuePerSemitone,o=Math.max(kn.MinBreakpointsPerSemitone*a,r/kn.MillisecondsPerBreakpoint),l=t/o,h=(n-i)/o;for(let c=0;c<o;c++)s(0|e,Math.round(i)),i+=h,e+=l;i<n&&s(0|e,n)}generateTrill(e,t,i,n,s,r){const a=e.beat.voice.bar.staff.track,o=e.stringTuning+e.trillFret;let l=ke.toTicks(e.trillSpeed),h=!0,c=t,u=t+i.untilTieOrSlideEnd;while(c+10<u)c+l>=u&&(l=u-c),this._handler.addNote(a.index,c,l,h?o:n,s,r),h=!h,c+=l}generateTremoloPicking(e,t,i,n,s,r){const a=e.beat.voice.bar.staff.track;let o=ke.toTicks(e.beat.tremoloSpeed),l=t;const h=t+i.untilTieOrSlideEnd;while(l+10<h)l+o>=h&&(o=h-l),this._handler.addNote(a.index,l,o,n,s,r),l+=o}getBrushInfo(e){const t=new Int32Array(e.voice.bar.staff.tuning.length);if(e.brushType!==b.None){let i=0,n=0;for(const t of e.notes)t.isTieDestination||(i|=1<<t.string-1,n++);if(e.notes.length>0){let s=0;const r=e.brushDuration/(n-1)|0;for(let n=0;n<e.voice.bar.staff.tuning.length;n++){let a=e.brushType===b.ArpeggioDown||e.brushType===b.BrushDown?n:t.length-1-n;0!==(i&1<<a)&&(t[a]=s,s+=r)}}}return t}generateAutomation(e,t,i){switch(t.type){case u.Instrument:this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,255&(0|t.value)),this.addProgramChange(e.voice.bar.staff.track,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,255&(0|t.value));break;case u.Balance:let n=kn.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,Z.PanCoarse,n),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,Z.PanCoarse,n);break;case u.Volume:let s=kn.toChannelShort(t.value);this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.primaryChannel,Z.VolumeCoarse,s),this._handler.addControlChange(e.voice.bar.staff.track.index,e.playbackStart+i,e.voice.bar.staff.track.playbackInfo.secondaryChannel,Z.VolumeCoarse,s);break}}prepareSingleBeat(e){let t=-1,i=-1,n=e;while(n&&(-1===t||-1===i)){for(const n of e.automations)switch(n.type){case u.Instrument:i=n.value;break;case u.Tempo:t=n.value;break}n=n.previousBeat}const s=e.voice.bar.staff.track,r=e.voice.bar.masterBar;-1===t&&(t=r.score.tempo),-1===i&&(i=s.playbackInfo.program);const a=s.playbackInfo.volume;this.generateTrack(s),this._handler.addTimeSignature(0,r.timeSignatureNumerator,r.timeSignatureDenominator),this._handler.addTempo(0,t);let o=kn.toChannelShort(a);this._handler.addControlChange(0,0,s.playbackInfo.primaryChannel,Z.VolumeCoarse,o),this._handler.addControlChange(0,0,s.playbackInfo.secondaryChannel,Z.VolumeCoarse,o)}generateSingleBeat(e){this.prepareSingleBeat(e),this.generateBeat(e,-e.playbackStart,e.voice.bar)}generateSingleNote(e){this.prepareSingleBeat(e.beat),this.generateNote(e,-e.beat.playbackStart,e.beat.playbackDuration,new Int32Array(e.beat.voice.bar.staff.tuning.length))}}kn.DefaultDurationDead=30,kn.DefaultDurationPalmMute=80,kn.PitchBendRangeInSemitones=16,kn.PitchValuePerSemitone=Vt.DefaultPitchWheel/kn.PitchBendRangeInSemitones,kn.MinBreakpointsPerSemitone=6,kn.MillisecondsPerBreakpoint=150;class Tn{constructor(){this.startTick=0,this.endTick=0}}class Bn{constructor(e,t){this.width=0,this.height=0,this.x=e,this.y=t}get scale(){return this.renderer.scale}doLayout(){}paint(e,t,i){}}class xn extends Bn{constructor(e=0,t=0){super(e,t),this.beat=null,this.nextGlyph=null,this.previousGlyph=null}}class Nn extends xn{constructor(e,t,i,n){super(e,t),this.glyphScale=0,this.glyphScale=i,this.symbol=n}paint(e,t,i){i.fillMusicFontSymbol(e+this.x,t+this.y,this.glyphScale*this.scale,this.symbol,!1)}}class Cn extends Nn{constructor(e,t,i,n){super(e,t,n?Cn.GraceScale:1,Cn.getSymbol(i)),this._isGrace=n,this._duration=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1)}doLayout(){let e=(this._isGrace?Cn.GraceScale:1)*this.scale;switch(this._duration){case v.QuadrupleWhole:this.width=14*e;break;case v.DoubleWhole:this.width=14*(this._isGrace?Cn.GraceScale:1)*this.scale;break;case v.Whole:this.width=14*(this._isGrace?Cn.GraceScale:1)*this.scale;break;default:this.width=Cn.QuarterNoteHeadWidth*(this._isGrace?Cn.GraceScale:1)*this.scale;break}this.height=Cn.NoteHeadHeight*e}static getSymbol(e){switch(e){case v.QuadrupleWhole:return C.NoteheadDoubleWholeSquare;case v.DoubleWhole:return C.NoteheadDoubleWhole;case v.Whole:return C.NoteheadWhole;case v.Half:return C.NoteheadHalf;default:return C.NoteheadBlack}}}Cn.GraceScale=.75,Cn.NoteHeadHeight=8,Cn.QuarterNoteHeadWidth=9;class En extends Nn{constructor(e,t,i,n,s){super(e,t,s?Cn.GraceScale:1,En.getSymbol(i,n,s))}doLayout(){this.width=0}static getSymbol(e,t,i){if(i&&(e=v.Eighth),t===W.Up)switch(e){case v.Eighth:return C.FlagEighthUp;case v.Sixteenth:return C.FlagSixteenthUp;case v.ThirtySecond:return C.FlagThirtySecondUp;case v.SixtyFourth:return C.FlagSixtyFourthUp;case v.OneHundredTwentyEighth:return C.FlagOneHundredTwentyEighthUp;case v.TwoHundredFiftySixth:return C.FlagTwoHundredFiftySixthUp;default:return C.FlagEighthUp}switch(e){case v.Eighth:return C.FlagEighthDown;case v.Sixteenth:return C.FlagSixteenthDown;case v.ThirtySecond:return C.FlagThirtySecondDown;case v.SixtyFourth:return C.FlagSixtyFourthDown;case v.OneHundredTwentyEighth:return C.FlagOneHundredTwentyEighthDown;case v.TwoHundredFiftySixth:return C.FlagOneHundredTwentyEighthDown;default:return C.FlagEighthDown}}}En.FlagWidth=11;class Pn extends Bn{constructor(e,t){super(0,0),this.ties=[],this.minWidth=0,this.beat=e,this.ties=[],this.voiceContainer=t}get onTimeX(){return this.onNotes.x+this.onNotes.centerX}registerLayoutingInfo(e){let t=this.preNotes.computedWidth+this.onNotes.centerX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=Pn.GraceBeatPadding*this.renderer.scale);let i=this.onNotes.computedWidth-this.onNotes.centerX;const n=this.renderer.helpers.getBeamingHelperForBeat(this.beat);(n&&n.hasFlag||this.beat.graceType!==S.None)&&(i+=En.FlagWidth*this.scale*(this.beat.graceType!==S.None?Cn.GraceScale:1));for(const s of this.ties)i+=s.width;this.beat.graceType!==S.None&&(i+=Pn.GraceBeatPadding*this.renderer.scale),e.addBeatSpring(this.beat,t,i),e.setPreBeatSize(this.beat,this.preNotes.computedWidth),e.setOnBeatSize(this.beat,this.onNotes.computedWidth),e.setBeatCenterX(this.beat,this.onNotes.centerX)}applyLayoutingInfo(e){let t=e.getBeatCenterX(this.beat)-this.onNotes.centerX;this.beat.graceGroup&&!this.beat.graceGroup.isComplete&&(t+=Pn.GraceBeatPadding*this.renderer.scale),this.preNotes.x=t,this.preNotes.width=e.getPreBeatSize(this.beat),this.onNotes.width=e.getOnBeatSize(this.beat),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.updateBeamingHelper(),this.updateWidth()}doLayout(){this.preNotes.x=0,this.preNotes.renderer=this.renderer,this.preNotes.container=this,this.preNotes.doLayout(),this.onNotes.x=this.preNotes.x+this.preNotes.width,this.onNotes.renderer=this.renderer,this.onNotes.container=this,this.onNotes.doLayout();let e=this.beat.notes.length-1;while(e>=0)this.createTies(this.beat.notes[e--]);this.updateWidth()}updateWidth(){if(this.minWidth=this.preNotes.width+this.onNotes.width,!this.beat.isRest)if(1===this.onNotes.beamingHelper.beats.length)this.beat.duration>=v.Eighth&&(this.minWidth+=20*this.scale);else switch(this.beat.duration){case v.OneHundredTwentyEighth:case v.TwoHundredFiftySixth:this.minWidth+=10*this.scale;break}let e=0;for(let t of this.ties)t.width>e&&(e=t.width);this.minWidth+=e,this.width=this.minWidth}scaleToWidth(e){for(let t of this.ties)t.doLayout();this.onNotes.updateBeamingHelper(),this.width=e}createTies(e){}static getGroupId(e){return"b"+e.id}paint(e,t,i){if(this.beat.voice.isEmpty)return;let n=this.preNotes.isEmpty&&this.onNotes.isEmpty&&0===this.ties.length;if(n)return;i.beginGroup(Pn.getGroupId(this.beat)),this.preNotes.paint(e+this.x,t+this.y,i),this.onNotes.paint(e+this.x,t+this.y,i);let s=e-this.voiceContainer.x-this.renderer.x,r=t-this.voiceContainer.y-this.renderer.y;for(let a=0,o=this.ties.length;a<o;a++){let e=this.ties[a];e.renderer=this.renderer,e.paint(s,r,i)}i.endGroup()}buildBoundingsLookup(e,t,i,n){let s=new on;s.beat=this.beat,s.visualBounds=new st,s.visualBounds.x=t+this.x+this.onNotes.x,s.visualBounds.y=e.visualBounds.y,s.visualBounds.w=this.onNotes.width,s.visualBounds.h=e.visualBounds.h,s.realBounds=new st,s.realBounds.x=t+this.x,s.realBounds.y=e.realBounds.y,s.realBounds.w=this.width,s.realBounds.h=e.realBounds.h,n&&(s.visualBounds.x=t+this.x,s.realBounds.x=s.visualBounds.x),e.addBeat(s),this.renderer.settings.core.includeNoteBounds&&this.onNotes.buildBoundingsLookup(s,t+this.x,i+this.y)}}Pn.GraceBeatPadding=3;class Ln{constructor(){this.oldWidth=0,this.newWidth=0,this.settings=null}core(){return this.settings&&this.causeIssue()?this.settings.core:new io}causeIssue(){return this.settings=null,!0}}class On{constructor(e){this.bounds=null,this.beat=e}}class Fn{constructor(e,t){this._startTime=0,this._trackIndexes=null,this._isDestroyed=!1,this.score=null,this.tracks=[],this._tickCache=null,this.player=null,this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=Y.Paused,this._currentBeat=null,this._previousStateForCursor=Y.Paused,this._previousCursorCache=null,this._lastScroll=0,this.playedBeatChanged=new mi,this._beatMouseDown=!1,this._selectionStart=null,this._selectionEnd=null,this.beatMouseDown=new mi,this.beatMouseMove=new mi,this.beatMouseUp=new mi,this.scoreLoaded=new mi,this.resize=new mi,this.renderStarted=new mi,this.renderFinished=new mi,this.postRenderFinished=new gi,this.error=new mi,this.playerReady=new gi,this.playerFinished=new gi,this.soundFontLoaded=new gi,this.midiLoad=new mi,this.midiLoaded=new mi,this.playerStateChanged=new mi,this.playerPositionChanged=new mi,this.midiEventsPlayed=new mi,this.uiFacade=e,this.container=e.rootContainer,e.initialize(this,t),Ne.logLevel=this.settings.core.logLevel,this.canvasElement=e.createCanvasElement(),this.container.appendChild(this.canvasElement),this.settings.core.useWorkers&&this.uiFacade.areWorkersSupported&&to.getRenderEngineFactory(this.settings).supportsWorkers?this.renderer=this.uiFacade.createWorkerRenderer():this.renderer=new dn(this.settings),this.container.resize.on(to.throttle(()=>{this._isDestroyed||this.container.width!==this.renderer.width&&this.triggerResize()},e.resizeThrottle));let i=new Ln;i.oldWidth=this.renderer.width,i.newWidth=0|this.container.width,i.settings=this.settings,this.onResize(i),this.renderer.preRender.on(this.onRenderStarted.bind(this)),this.renderer.renderFinished.on(e=>{this.onRenderFinished(e)}),this.renderer.postRenderFinished.on(()=>{let e=Date.now()-this._startTime;Ne.debug("rendering","Rendering completed in "+e+"ms"),this.onPostRenderFinished()}),this.renderer.preRender.on(e=>{this._startTime=Date.now()}),this.renderer.partialRenderFinished.on(this.appendRenderResult.bind(this)),this.renderer.renderFinished.on(e=>{this.appendRenderResult(e),this.appendRenderResult(null)}),this.renderer.error.on(this.onError.bind(this)),this.settings.player.enablePlayer&&this.setupPlayer(),this.setupClickHandling(),this.uiFacade.beginInvoke(()=>{this.uiFacade.initialRender()})}destroy(){this._isDestroyed=!0,this.player&&this.player.destroy(),this.uiFacade.destroy(),this.renderer.destroy()}updateSettings(){this.renderer.updateSettings(this.settings),this.settings.player.enablePlayer?this.setupPlayer():this.destroyPlayer()}load(e,t){try{return this.uiFacade.load(e,e=>{this.renderScore(e,t)},e=>{this.onError(e)})}catch(i){return this.onError(i),!1}}renderScore(e,t){let i=[];if(t)if(0===t.length)e.tracks.length>0&&i.push(e.tracks[0]);else if(1===t.length&&-1===t[0])for(let n of e.tracks)i.push(n);else for(let n of t)n>=0&&n<=e.tracks.length&&i.push(e.tracks[n]);else e.tracks.length>0&&i.push(e.tracks[0]);this.internalRenderTracks(e,i)}renderTracks(e){if(e.length>0){let i=e[0].score;for(let s of e)if(s.score!==i)return void this.onError(new n(t.AlphaTabErrorType.General,"All rendered tracks must belong to the same score."));this.internalRenderTracks(i,e)}}internalRenderTracks(e,t){if(e!==this.score){ue.applyPitchOffsets(this.settings,e),this.score=e,this.tracks=t,this._trackIndexes=[];for(let e of t)this._trackIndexes.push(e.index);this.onScoreLoaded(e),this.loadMidiForScore(),this.render()}else{this.tracks=t,this._trackIndexes=[];for(let e of t)this._trackIndexes.push(e.index);this.render()}}triggerResize(){if(this.container.isVisible){let e=new Ln;e.oldWidth=this.renderer.width,e.newWidth=this.container.width,e.settings=this.settings,this.onResize(e),this.renderer.updateSettings(this.settings),this.renderer.width=this.container.width,this.renderer.resizeRender()}else Ne.warning("Rendering","AlphaTab container was invisible while autosizing, waiting for element to become visible",null),this.uiFacade.rootContainerBecameVisible.on(()=>{Ne.debug("Rendering","AlphaTab container became visible, doing autosizing",null),this.triggerResize()})}appendRenderResult(e){e&&(this.canvasElement.width=e.totalWidth,this.canvasElement.height=e.totalHeight,this._cursorWrapper&&(this._cursorWrapper.width=e.totalWidth,this._cursorWrapper.height=e.totalHeight)),e&&!e.renderResult||this.uiFacade.beginAppendRenderResults(e)}tex(e,t){try{let i=new et;i.logErrors=!0,i.initFromString(e,this.settings);let n=i.readScore();this.renderScore(n,t)}catch(i){this.onError(i)}}loadSoundFont(e,t=!1){return!!this.player&&this.uiFacade.loadSoundFont(e,t)}resetSoundFonts(){this.player&&this.player.resetSoundFonts()}render(){this.renderer&&(this.uiFacade.canRender?(this.renderer.width=this.container.width,this.renderer.renderScore(this.score,this._trackIndexes)):this.uiFacade.canRenderChanged.on(()=>this.render()))}get isReadyForPlayback(){return!!this.player&&this.player.isReadyForPlayback}get playerState(){return this.player?this.player.state:Y.Paused}get masterVolume(){return this.player?this.player.masterVolume:0}set masterVolume(e){this.player&&(this.player.masterVolume=e)}get metronomeVolume(){return this.player?this.player.metronomeVolume:0}set metronomeVolume(e){this.player&&(this.player.metronomeVolume=e)}get countInVolume(){return this.player?this.player.countInVolume:0}set countInVolume(e){this.player&&(this.player.countInVolume=e)}get midiEventsPlayedFilter(){return this.player?this.player.midiEventsPlayedFilter:[]}set midiEventsPlayedFilter(e){this.player&&(this.player.midiEventsPlayedFilter=e)}get tickPosition(){return this.player?this.player.tickPosition:0}set tickPosition(e){this.player&&(this.player.tickPosition=e)}get timePosition(){return this.player?this.player.timePosition:0}set timePosition(e){this.player&&(this.player.timePosition=e)}get playbackRange(){return this.player?this.player.playbackRange:null}set playbackRange(e){this.player&&(this.player.playbackRange=e,this.settings.player.enableCursor&&this.updateSelectionCursor(e))}get playbackSpeed(){return this.player?this.player.playbackSpeed:0}set playbackSpeed(e){this.player&&(this.player.playbackSpeed=e)}get isLooping(){return!!this.player&&this.player.isLooping}set isLooping(e){this.player&&(this.player.isLooping=e)}destroyPlayer(){this.player&&(this.player.destroy(),this.player=null,this.destroyCursors())}setupPlayer(){this.player||(this.player=this.uiFacade.createWorkerPlayer(),this.player&&(this.player.ready.on(()=>{this.loadMidiForScore()}),this.player.readyForPlayback.on(()=>{if(this.onPlayerReady(),this.tracks)for(let e of this.tracks){let t=e.playbackInfo.volume/16;this.player.setChannelVolume(e.playbackInfo.primaryChannel,t),this.player.setChannelVolume(e.playbackInfo.secondaryChannel,t)}}),this.player.soundFontLoaded.on(this.onSoundFontLoaded.bind(this)),this.player.soundFontLoadFailed.on(e=>{this.onError(e)}),this.player.midiLoaded.on(this.onMidiLoaded.bind(this)),this.player.midiLoadFailed.on(e=>{this.onError(e)}),this.player.stateChanged.on(this.onPlayerStateChanged.bind(this)),this.player.positionChanged.on(this.onPlayerPositionChanged.bind(this)),this.player.midiEventsPlayed.on(this.onMidiEventsPlayed.bind(this)),this.player.finished.on(this.onPlayerFinished.bind(this)),this.settings.player.enableCursor?this.setupCursors():this.destroyCursors()))}loadMidiForScore(){if(!this.player||!this.score||!this.player.isReady)return;Ne.debug("AlphaTab","Generating Midi");let e=new vi,t=new gn(e),i=new kn(this.score,this.settings,t);i.generate(),this._tickCache=i.tickLookup,this.onMidiLoad(e),this.player.loadMidiFile(e)}changeTrackVolume(e,t){if(this.player)for(let i of e)this.player.setChannelVolume(i.playbackInfo.primaryChannel,t),this.player.setChannelVolume(i.playbackInfo.secondaryChannel,t)}changeTrackSolo(e,t){if(this.player)for(let i of e)this.player.setChannelSolo(i.playbackInfo.primaryChannel,t),this.player.setChannelSolo(i.playbackInfo.secondaryChannel,t)}changeTrackMute(e,t){if(this.player)for(let i of e)this.player.setChannelMute(i.playbackInfo.primaryChannel,t),this.player.setChannelMute(i.playbackInfo.secondaryChannel,t)}play(){return!!this.player&&this.player.play()}pause(){this.player&&this.player.pause()}playPause(){this.player&&this.player.playPause()}stop(){this.player&&this.player.stop()}playBeat(e){if(!this.player)return;let t=new vi,i=new gn(t),n=new kn(e.voice.bar.staff.track.score,this.settings,i);n.generateSingleBeat(e),this.player.playOneTimeMidiFile(t)}playNote(e){if(!this.player)return;let t=new vi,i=new gn(t),n=new kn(e.beat.voice.bar.staff.track.score,this.settings,i);n.generateSingleNote(e),this.player.playOneTimeMidiFile(t)}destroyCursors(){this._cursorWrapper&&(this.uiFacade.destroyCursors(),this._cursorWrapper=null,this._barCursor=null,this._beatCursor=null,this._selectionWrapper=null,this._previousTick=0,this._playerState=Y.Paused)}setupCursors(){let e=this.uiFacade.createCursors();e&&(this._cursorWrapper=e.cursorWrapper,this._barCursor=e.barCursor,this._beatCursor=e.beatCursor,this._selectionWrapper=e.selectionWrapper,this._previousTick=0,this._playerState=Y.Paused,this.renderer.postRenderFinished.on(()=>{this.cursorUpdateTick(this._previousTick,!1)}),this.player&&(this.player.positionChanged.on(e=>{this._previousTick=e.currentTick,this.uiFacade.beginInvoke(()=>{this.cursorUpdateTick(e.currentTick,!1)})}),this.player.stateChanged.on(e=>{if(this._playerState=e.state,!e.stopped&&e.state===Y.Paused){let e=this._currentBeat,t=this._tickCache;e&&t&&(this.player.tickPosition=t.getMasterBarStart(e.currentBeat.voice.bar.masterBar)+e.currentBeat.playbackStart)}})))}cursorUpdateTick(e,t){let i=this._tickCache;if(i){let n=this.tracks;if(n.length>0){let s=i.findBeat(n,e,this._currentBeat);s&&this.cursorUpdateBeat(s,t)}}}cursorUpdateBeat(e,t){const i=e.currentBeat,n=e.nextBeat,s=e.duration,r=e.beatsToHighlight;if(!i)return;let a=this.renderer.boundsLookup;if(!a)return;let o=this._currentBeat,l=this._previousCursorCache,h=this._previousStateForCursor;if(this._currentBeat=e,this._previousCursorCache=a,this._previousStateForCursor=this._playerState,i===(null===o||void 0===o?void 0:o.currentBeat)&&a===l&&h===this._playerState)return;let c=a.findBeat(i);c&&this.uiFacade.beginInvoke(()=>{this.internalCursorUpdateBeat(i,n,s,t,r,a,c)})}internalCursorUpdateBeat(e,i,n,s,r,a,o){let l=this._barCursor,h=this._beatCursor,c=o.barBounds.masterBarBounds,u=c.visualBounds;if(l.setBounds(u.x,u.y,u.w,u.h),this.settings.player.enableAnimatedBeatCursor&&h.stopAnimation(),h.setBounds(o.visualBounds.x,u.y,1,u.h),this.settings.player.enableElementHighlighting&&this.uiFacade.removeHighlights(),this._playerState===Y.Playing||s){if(n/=this.playbackSpeed,!s){if(this.settings.player.enableElementHighlighting&&r)for(let t of r){let i=Pn.getGroupId(t);this.uiFacade.highlightElements(i,e.voice.bar.index)}if(this.settings.player.enableAnimatedBeatCursor){let t=c.visualBounds.x+c.visualBounds.w;if(i&&(i.voice.bar.index===e.voice.bar.index&&i.index>e.index||i.voice.bar.index===e.voice.bar.index+1)){let e=a.findBeat(i);e&&e.barBounds.masterBarBounds.staveGroupBounds===c.staveGroupBounds&&(t=e.visualBounds.x)}this.uiFacade.beginInvoke(()=>{h.transitionToX(n,t)})}}if(!this._beatMouseDown&&this.settings.player.scrollMode!==t.ScrollMode.Off){let e=this.uiFacade.getScrollContainer(),i=to.getLayoutEngineFactory(this.settings).vertical,n=this.settings.player.scrollMode;if(i){let i=c.realBounds.y+this.settings.player.scrollOffsetY;if(i!==this._lastScroll)switch(this._lastScroll=i,n){case t.ScrollMode.Continuous:let n=this.uiFacade.getOffset(e,this.container);this.uiFacade.scrollToY(e,n.y+i,this.settings.player.scrollSpeed);break;case t.ScrollMode.OffScreen:let s=e.scrollTop+this.uiFacade.getOffset(null,e).h;if(c.visualBounds.y+c.visualBounds.h>=s||c.visualBounds.y<e.scrollTop){let t=c.realBounds.y+this.settings.player.scrollOffsetY;this.uiFacade.scrollToY(e,t,this.settings.player.scrollSpeed)}break}}else{let i=c.visualBounds.x;if(i!==this._lastScroll)switch(this._lastScroll=i,n){case t.ScrollMode.Continuous:let i=c.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=c.visualBounds.x,this.uiFacade.scrollToX(e,i,this.settings.player.scrollSpeed);break;case t.ScrollMode.OffScreen:let n=e.scrollLeft+this.uiFacade.getOffset(null,e).w;if(c.visualBounds.x+c.visualBounds.w>=n||c.visualBounds.x<e.scrollLeft){let t=c.realBounds.x+this.settings.player.scrollOffsetX;this._lastScroll=c.visualBounds.x,this.uiFacade.scrollToX(e,t,this.settings.player.scrollSpeed)}break}}}this.onPlayedBeatChanged(e)}}onPlayedBeatChanged(e){this._isDestroyed||(this.playedBeatChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playedBeatChanged",e))}onBeatMouseDown(e,t){this._isDestroyed||(this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction&&(this._selectionStart=new On(t),this._selectionEnd=null),this._beatMouseDown=!0,this.beatMouseDown.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseDown",t,e))}onBeatMouseMove(e,t){this._isDestroyed||(this.settings.player.enableUserInteraction&&(this._selectionEnd&&this._selectionEnd.beat===t||(this._selectionEnd=new On(t),this.cursorSelectRange(this._selectionStart,this._selectionEnd))),this.beatMouseMove.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseMove",t,e))}onBeatMouseUp(e,t){if(!this._isDestroyed){if(this.settings.player.enableUserInteraction){if(this._selectionEnd){let e=this._selectionStart.beat.absolutePlaybackStart,t=this._selectionStart.beat.absolutePlaybackStart;if(t<e){let e=this._selectionStart;this._selectionStart=this._selectionEnd,this._selectionEnd=e}}if(this._selectionStart&&this._tickCache){let e=this._tickCache,t=e.getMasterBarStart(this._selectionStart.beat.voice.bar.masterBar);if(this._currentBeat=null,this._playerState===Y.Paused&&this.cursorUpdateTick(this._selectionStart.beat.absolutePlaybackStart,!1),this.tickPosition=t+this._selectionStart.beat.playbackStart,this._selectionEnd&&this._selectionStart.beat!==this._selectionEnd.beat){let i=e.getMasterBarStart(this._selectionEnd.beat.voice.bar.masterBar),n=new Tn;n.startTick=t+this._selectionStart.beat.playbackStart,n.endTick=i+this._selectionEnd.beat.playbackStart+this._selectionEnd.beat.playbackDuration-50,this.playbackRange=n}else this._selectionStart=null,this.playbackRange=null,this.cursorSelectRange(this._selectionStart,this._selectionEnd)}}this.beatMouseUp.trigger(t),this.uiFacade.triggerEvent(this.container,"beatMouseUp",t,e),this._beatMouseDown=!1}}updateSelectionCursor(e){if(this._tickCache)if(e){const t=this._tickCache.findBeat(this.tracks,e.startTick),i=this._tickCache.findBeat(this.tracks,e.endTick);if(t&&i){const e=new On(t.currentBeat),n=new On(i.currentBeat);this.cursorSelectRange(e,n)}}else this.cursorSelectRange(null,null)}setupClickHandling(){this.canvasElement.mouseDown.on(e=>{var t,i;if(!e.isLeftMouseButton)return;this.settings.player.enableUserInteraction&&e.preventDefault();let n=e.getX(this.canvasElement),s=e.getY(this.canvasElement),r=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,s))&&void 0!==i?i:null;r&&this.onBeatMouseDown(e,r)}),this.canvasElement.mouseMove.on(e=>{var t,i;if(!this._beatMouseDown)return;let n=e.getX(this.canvasElement),s=e.getY(this.canvasElement),r=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,s))&&void 0!==i?i:null;r&&this.onBeatMouseMove(e,r)}),this.canvasElement.mouseUp.on(e=>{var t,i;if(!this._beatMouseDown)return;this.settings.player.enableUserInteraction&&e.preventDefault();let n=e.getX(this.canvasElement),s=e.getY(this.canvasElement),r=null!==(i=null===(t=this.renderer.boundsLookup)||void 0===t?void 0:t.getBeatAtPos(n,s))&&void 0!==i?i:null;this.onBeatMouseUp(e,r)}),this.renderer.postRenderFinished.on(()=>{this._selectionStart&&this.settings.player.enablePlayer&&this.settings.player.enableCursor&&this.settings.player.enableUserInteraction&&this.cursorSelectRange(this._selectionStart,this._selectionEnd)})}cursorSelectRange(e,t){let i=this.renderer.boundsLookup;if(!i)return;let n=this._selectionWrapper;if(!n)return;if(n.clear(),!e||!t||e.beat===t.beat)return;e.bounds||(e.bounds=i.findBeat(e.beat)),t.bounds||(t.bounds=i.findBeat(t.beat));let s=e.beat.absolutePlaybackStart,r=t.beat.absolutePlaybackStart;if(r<s){let i=e;e=t,t=i}let a=e.bounds.realBounds.x,o=t.bounds.realBounds.x+t.bounds.realBounds.w;if(t.beat.index===t.beat.voice.beats.length-1&&(o=t.bounds.barBounds.masterBarBounds.realBounds.x+t.bounds.barBounds.masterBarBounds.realBounds.w),e.bounds.barBounds.masterBarBounds.staveGroupBounds!==t.bounds.barBounds.masterBarBounds.staveGroupBounds){let s=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x,r=e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.x+e.bounds.barBounds.masterBarBounds.staveGroupBounds.visualBounds.w,l=this.uiFacade.createSelectionElement();l.setBounds(a,e.bounds.barBounds.masterBarBounds.visualBounds.y,r-a,e.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(l);let h=e.bounds.barBounds.masterBarBounds.staveGroupBounds.index+1,c=t.bounds.barBounds.masterBarBounds.staveGroupBounds.index;for(let e=h;e<c;e++){let t=i.staveGroups[e],a=this.uiFacade.createSelectionElement();a.setBounds(s,t.visualBounds.y,r-s,t.visualBounds.h),n.appendChild(a)}let u=this.uiFacade.createSelectionElement();u.setBounds(s,t.bounds.barBounds.masterBarBounds.visualBounds.y,o-s,t.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(u)}else{let t=this.uiFacade.createSelectionElement();t.setBounds(a,e.bounds.barBounds.masterBarBounds.visualBounds.y,o-a,e.bounds.barBounds.masterBarBounds.visualBounds.h),n.appendChild(t)}}onScoreLoaded(e){this._isDestroyed||(this.scoreLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"scoreLoaded",e))}onResize(e){this._isDestroyed||(this.resize.trigger(e),this.uiFacade.triggerEvent(this.container,"resize",e))}onRenderStarted(e){this._isDestroyed||(this.renderStarted.trigger(e),this.uiFacade.triggerEvent(this.container,"renderStarted",e))}onRenderFinished(e){this._isDestroyed||(this.renderFinished.trigger(e),this.uiFacade.triggerEvent(this.container,"renderFinished",e))}onPostRenderFinished(){this._isDestroyed||(this.postRenderFinished.trigger(),this.uiFacade.triggerEvent(this.container,"postRenderFinished",null))}onError(e){this._isDestroyed||(Ne.error("API","An unexpected error occurred",e),this.error.trigger(e),this.uiFacade.triggerEvent(this.container,"error",e))}onPlayerReady(){this._isDestroyed||(this.playerReady.trigger(),this.uiFacade.triggerEvent(this.container,"playerReady",null))}onPlayerFinished(){this._isDestroyed||(this.playerFinished.trigger(),this.uiFacade.triggerEvent(this.container,"playerFinished",null))}onSoundFontLoaded(){this._isDestroyed||(this.soundFontLoaded.trigger(),this.uiFacade.triggerEvent(this.container,"soundFontLoaded",null))}onMidiLoad(e){this._isDestroyed||(this.midiLoad.trigger(e),this.uiFacade.triggerEvent(this.container,"midiLoad",e))}onMidiLoaded(e){this._isDestroyed||(this.midiLoaded.trigger(e),this.uiFacade.triggerEvent(this.container,"midiFileLoaded",e))}onPlayerStateChanged(e){this._isDestroyed||(this.playerStateChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerStateChanged",e))}onPlayerPositionChanged(e){this._isDestroyed||(this.playerPositionChanged.trigger(e),this.uiFacade.triggerEvent(this.container,"playerPositionChanged",e))}onMidiEventsPlayed(e){this._isDestroyed||(this.midiEventsPlayed.trigger(e),this.uiFacade.triggerEvent(this.container,"midiEventsPlayed",e))}}class Mn extends n{constructor(e,i){super(t.AlphaTabErrorType.General,e),this.xhr=i,Object.setPrototypeOf(this,Mn.prototype)}}class An{static loadScoreAsync(e,t,i,n){let s=new XMLHttpRequest;s.open("GET",e,!0,null,null),s.responseType="arraybuffer",s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){let r=s.response;if(200===s.status||0===s.status&&r)try{let e=s.response,i=new Uint8Array(e),r=An.loadScoreFromBytes(i,n);t(r)}catch(e){i(e)}else 0===s.status?i(new Mn("You are offline!!\n Please Check Your Network.",s)):404===s.status?i(new Mn("Requested URL not found.",s)):500===s.status?i(new Mn("Internel Server Error.",s)):"parsererror"===s.statusText?i(new Mn("Error.\nParsing JSON Request failed.",s)):"timeout"===s.statusText?i(new Mn("Request Time out.",s)):i(new Mn("Unknow Error: "+s.responseText,s))}},s.send()}static loadScoreFromBytes(e,t){t||(t=new xi);let i=to.buildImporters();Ne.debug("ScoreLoader","Loading score from "+e.length+" bytes using "+i.length+" importers",null);let n=null,s=Ke.fromBuffer(e);for(let a of i){s.reset();try{Ne.debug("ScoreLoader","Importing using importer "+a.name),a.init(s,t),n=a.readScore(),Ne.debug("ScoreLoader","Score imported using "+a.name);break}catch(r){if(!(r instanceof we))throw Ne.error("ScoreLoader","Score import failed due to unexpected error: ",r),r;Ne.debug("ScoreLoader",a.name+" does not support the file")}}if(n)return n;throw Ne.error("ScoreLoader","No compatible importer found for file"),new we("No compatible importer found for file")}}class In{constructor(e){this.mouseEvent=e}get isLeftMouseButton(){return 0===this.mouseEvent.button}getX(e){let t=e.element,i=t.getBoundingClientRect(),n=i.left+t.ownerDocument.defaultView.pageXOffset;return this.mouseEvent.pageX-n}getY(e){let t=e.element,i=t.getBoundingClientRect(),n=i.top+t.ownerDocument.defaultView.pageYOffset;return this.mouseEvent.pageY-n}preventDefault(){this.mouseEvent.preventDefault()}}class Dn{constructor(e){this._resizeListeners=0,this._lastBounds=new st,this.element=e,this.mouseDown={on:e=>{this.element.addEventListener("mousedown",t=>{e(new In(t))},!0)},off:e=>{}},this.mouseUp={on:e=>{this.element.addEventListener("mouseup",t=>{e(new In(t))},!0)},off:e=>{}},this.mouseMove={on:e=>{this.element.addEventListener("mousemove",t=>{e(new In(t))},!0)},off:e=>{}},this.resize={on:e=>{0===this._resizeListeners&&Dn.resizeObserver.value.observe(this.element),this.element.addEventListener("resize",e,!0),this._resizeListeners++},off:e=>{this.element.removeEventListener("resize",e,!0),this._resizeListeners--,this._resizeListeners<=0&&(this._resizeListeners=0,Dn.resizeObserver.value.unobserve(this.element))}}}get width(){return this.element.offsetWidth}set width(e){this.element.style.width=e+"px"}get scrollLeft(){return this.element.scrollLeft}set scrollLeft(e){this.element.scrollTop=e}get scrollTop(){return this.element.scrollLeft}set scrollTop(e){this.element.scrollTop=e}get height(){return this.element.offsetHeight}set height(e){this.element.style.height=e>=0?e+"px":"100%"}get isVisible(){return!!this.element.offsetWidth||!!this.element.offsetHeight||!!this.element.getClientRects().length}stopAnimation(){this.element.style.transition="none"}transitionToX(e,t){this.element.style.transition=`transform ${e}ms linear`,this.setBounds(t,NaN,NaN,NaN)}setBounds(e,t,i,n){isNaN(e)&&(e=this._lastBounds.x),isNaN(t)&&(t=this._lastBounds.y),isNaN(i)&&(i=this._lastBounds.w),isNaN(n)&&(n=this._lastBounds.h),this.element.style.transform=`translate(${e}px, ${t}px) scale(${i}, ${n})`,this.element.style.transformOrigin="top left",this._lastBounds.x=e,this._lastBounds.y=t,this._lastBounds.w=i,this._lastBounds.h=n}appendChild(e){this.element.appendChild(e.element)}clear(){this.element.innerHTML=""}}Dn.resizeObserver=new Be(()=>new ResizeObserver(e=>{for(const t of e){let e=new CustomEvent("resize",{detail:t});t.target.dispatchEvent(e)}}));class Rn{constructor(e){this._isStarted=!1,this.isFontLoaded=!1,this.fontLoaded=new mi,this._family=e}checkForFontAvailability(){if(to.isRunningInWorker)return void(this.isFontLoaded=!1);if(this._isStarted)return;this._isStarted=!0;let e=0,t=window.setInterval(()=>{e++,Ne.warning("Rendering",`Could not load font '${this._family}' within ${5*e} seconds`,null)},5e3);Ne.debug("Font","Start checking for font availablility: "+this._family),Ne.debug("Font",`[${this._family}] Font API available`);let i=()=>{document.fonts.load("1em "+this._family).then(()=>(Ne.debug("Font",`[${this._family}] Font API signaled loaded`),document.fonts.check("1em "+this._family)?(Ne.debug("Rendering",`[${this._family}] Font API signaled available`),this.isFontLoaded=!0,window.clearInterval(t),this.fontLoaded.trigger(this._family)):(Ne.debug("Font",`[${this._family}] Font API loaded reported, but font not available, checking later again`,null),window.setTimeout(()=>{i()},250)),!0))};i()}}class Vn{constructor(e){this._writePosition=0,this._readPosition=0,this.count=0,this._buffer=new Float32Array(e)}clear(){this._readPosition=0,this._writePosition=0,this.count=0,this._buffer=new Float32Array(this._buffer.length)}write(e,t,i){let n=0;i>this._buffer.length-this.count&&(i=this._buffer.length-this.count);const s=Math.min(this._buffer.length-this._writePosition,i);return this._buffer.set(e.subarray(t,t+s),this._writePosition),this._writePosition+=s,this._writePosition%=this._buffer.length,n+=s,n<i&&(this._buffer.set(e.subarray(t+n,t+n+i-n),this._writePosition),this._writePosition+=i-n,n=i),this.count+=n,n}read(e,t,i){i>this.count&&(i=this.count);let n=0;const s=Math.min(this._buffer.length-this._readPosition,i);return e.set(this._buffer.subarray(this._readPosition,this._readPosition+s),t),n+=s,this._readPosition+=s,this._readPosition%=this._buffer.length,n<i&&(e.set(this._buffer.subarray(this._readPosition,this._readPosition+i-n),t+n),this._readPosition+=i-n,n=i),this.count-=n,n}}class Hn{constructor(){this._context=null,this._buffer=null,this._source=null,this.ready=new gi,this.samplesPlayed=new mi,this.sampleRequest=new gi}get sampleRate(){return this._context?this._context.sampleRate:Hn.PreferredSampleRate}activate(){this._context||(this._context=this.createAudioContext()),"suspended"!==this._context.state&&"interrupted"!==this._context.state||(Ne.debug("WebAudio","Audio Context is suspended, trying resume"),this._context.resume().then(()=>{var e,t;Ne.debug("WebAudio",`Audio Context resume success: state=${null===(e=this._context)||void 0===e?void 0:e.state}, sampleRate:${null===(t=this._context)||void 0===t?void 0:t.sampleRate}`)},e=>{var t,i;Ne.debug("WebAudio",`Audio Context resume failed: state=${null===(t=this._context)||void 0===t?void 0:t.state}, sampleRate:${null===(i=this._context)||void 0===i?void 0:i.sampleRate}, reason=${e}`)}))}patchIosSampleRate(){let e=navigator.userAgent;if(-1!==e.indexOf("iPhone")||0!==e.indexOf("iPad")){let e=this.createAudioContext(),t=e.createBuffer(1,1,Hn.PreferredSampleRate),i=e.createBufferSource();i.buffer=t,i.connect(e.destination),i.start(0),i.disconnect(0),e.close()}}createAudioContext(){if("AudioContext"in to.globalThis)return new AudioContext;if("webkitAudioContext"in to.globalThis)return new webkitAudioContext;throw new n(t.AlphaTabErrorType.General,"AudioContext not found")}open(){this.patchIosSampleRate(),this._context=this.createAudioContext();let e=this._context;if("suspended"===e.state){let t=()=>{e.resume(),to.globalThis.setTimeout(()=>{"running"===e.state&&(document.body.removeEventListener("touchend",t,!1),document.body.removeEventListener("click",t,!1))},0)};document.body.addEventListener("touchend",t,!1),document.body.addEventListener("click",t,!1)}}play(){let e=this._context;this.activate(),this._buffer=e.createBuffer(2,Hn.BufferSize,e.sampleRate),this._source=e.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0}pause(){this._source&&(this._source.stop(0),this._source.disconnect()),this._source=null}destroy(){var e;this.pause(),null===(e=this._context)||void 0===e||e.close()}onSamplesPlayed(e){this.samplesPlayed.trigger(e)}onSampleRequest(){this.sampleRequest.trigger()}onReady(){this.ready.trigger()}}Hn.BufferSize=4096,Hn.PreferredSampleRate=44100,Hn.TotalBufferTimeInMilliseconds=5e3;class Gn extends Hn{constructor(){super(...arguments),this._audioNode=null,this._bufferCount=0,this._requestedBufferCount=0,this._outputBuffer=new Float32Array(0)}open(){super.open(),this._bufferCount=Math.floor(Hn.TotalBufferTimeInMilliseconds*this.sampleRate/1e3/Hn.BufferSize),this._circularBuffer=new Vn(Hn.BufferSize*this._bufferCount),this.onReady()}play(){super.play();let e=this._context;this._audioNode=e.createScriptProcessor(4096,0,2),this._audioNode.onaudioprocess=this.generateSound.bind(this),this._circularBuffer.clear(),this.requestBuffers(),this._source=e.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.connect(this._audioNode,0,0),this._source.start(0),this._audioNode.connect(e.destination,0,0)}pause(){super.pause(),this._audioNode&&this._audioNode.disconnect(0),this._audioNode=null}addSamples(e){this._circularBuffer.write(e,0,e.length),this._requestedBufferCount--}resetSamples(){this._circularBuffer.clear()}requestBuffers(){const e=this._bufferCount/2|0;let t=e*Hn.BufferSize,i=this._circularBuffer.count+this._requestedBufferCount*Hn.BufferSize;if(i<t){for(let t=0;t<e;t++)this.onSampleRequest();this._requestedBufferCount+=e}}generateSound(e){let t=e.outputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(1),n=t.length+i.length,s=this._outputBuffer;s.length!==n&&(s=new Float32Array(n),this._outputBuffer=s),this._circularBuffer.read(s,0,Math.min(s.length,this._circularBuffer.count));let r=0;for(let a=0;a<t.length;a++)t[a]=s[r++],i[a]=s[r++];this.onSamplesPlayed(t.length),this.requestBuffers()}}class Wn{constructor(e,t,i){this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=Y.Paused,this._masterVolume=0,this._metronomeVolume=0,this._countInVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._midiEventsPlayedFilter=[],this.ready=new gi,this.readyForPlayback=new gi,this.finished=new gi,this.soundFontLoaded=new gi,this.soundFontLoadFailed=new mi,this.midiLoaded=new mi,this.midiLoadFailed=new mi,this.stateChanged=new mi,this.positionChanged=new mi,this.midiEventsPlayed=new mi,this._workerIsReadyForPlayback=!1,this._workerIsReady=!1,this._outputIsReady=!1,this._state=Y.Paused,this._masterVolume=0,this._metronomeVolume=0,this._playbackSpeed=0,this._tickPosition=0,this._timePosition=0,this._isLooping=!1,this._playbackRange=null,this._output=e,this._output.ready.on(this.onOutputReady.bind(this)),this._output.samplesPlayed.on(this.onOutputSamplesPlayed.bind(this)),this._output.sampleRequest.on(this.onOutputSampleRequest.bind(this)),this._output.open();try{let e="importScripts('"+t+"')",i=new Blob([e]);this._synth=new Worker(URL.createObjectURL(i))}catch(n){try{this._synth=new Worker(t)}catch(s){return void Ne.error("AlphaSynth","Failed to create WebWorker: "+s)}}this._synth.addEventListener("message",this.handleWorkerMessage.bind(this),!1),this._synth.postMessage({cmd:"alphaSynth.initialize",sampleRate:this._output.sampleRate,logLevel:i}),this.masterVolume=1,this.playbackSpeed=1,this.metronomeVolume=0}get isReady(){return this._workerIsReady&&this._outputIsReady}get isReadyForPlayback(){return this._workerIsReadyForPlayback}get state(){return this._state}get logLevel(){return Ne.logLevel}set logLevel(e){Ne.logLevel=e,this._synth.postMessage({cmd:"alphaSynth.setLogLevel",value:e})}get masterVolume(){return this._masterVolume}set masterVolume(e){e=Math.max(e,Vt.MinVolume),this._masterVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMasterVolume",value:e})}get metronomeVolume(){return this._metronomeVolume}set metronomeVolume(e){e=Math.max(e,Vt.MinVolume),this._metronomeVolume=e,this._synth.postMessage({cmd:"alphaSynth.setMetronomeVolume",value:e})}get countInVolume(){return this._countInVolume}set countInVolume(e){e=Math.max(e,Vt.MinVolume),this._countInVolume=e,this._synth.postMessage({cmd:"alphaSynth.setCountInVolume",value:e})}get midiEventsPlayedFilter(){return this._midiEventsPlayedFilter}set midiEventsPlayedFilter(e){this._midiEventsPlayedFilter=e,this._synth.postMessage({cmd:"alphaSynth.setMidiEventsPlayedFilter",value:e})}get playbackSpeed(){return this._playbackSpeed}set playbackSpeed(e){e=ai.clamp(e,Vt.MinPlaybackSpeed,Vt.MaxPlaybackSpeed),this._playbackSpeed=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackSpeed",value:e})}get tickPosition(){return this._tickPosition}set tickPosition(e){e<0&&(e=0),this._tickPosition=e,this._synth.postMessage({cmd:"alphaSynth.setTickPosition",value:e})}get timePosition(){return this._timePosition}set timePosition(e){e<0&&(e=0),this._timePosition=e,this._synth.postMessage({cmd:"alphaSynth.setTimePosition",value:e})}get isLooping(){return this._isLooping}set isLooping(e){this._isLooping=e,this._synth.postMessage({cmd:"alphaSynth.setIsLooping",value:e})}get playbackRange(){return this._playbackRange}set playbackRange(e){e&&(e.startTick<0&&(e.startTick=0),e.endTick<0&&(e.endTick=0)),this._playbackRange=e,this._synth.postMessage({cmd:"alphaSynth.setPlaybackRange",value:e})}destroy(){this._synth.postMessage({cmd:"alphaSynth.destroy"})}play(){return this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.play"}),!0}pause(){this._synth.postMessage({cmd:"alphaSynth.pause"})}playPause(){this._output.activate(),this._synth.postMessage({cmd:"alphaSynth.playPause"})}stop(){this._synth.postMessage({cmd:"alphaSynth.stop"})}playOneTimeMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.playOneTimeMidiFile",midi:en.midiFileToJsObject(e)})}loadSoundFont(e,t){this._synth.postMessage({cmd:"alphaSynth.loadSoundFontBytes",data:e,append:t})}loadSoundFontFromUrl(e,t,i){Ne.debug("AlphaSynth","Start loading Soundfont from url "+e);let n=new XMLHttpRequest;n.open("GET",e,!0,null,null),n.responseType="arraybuffer",n.onload=e=>{let i=new Uint8Array(n.response);this.loadSoundFont(i,t)},n.onerror=e=>{Ne.error("AlphaSynth","Loading failed: "+e.message),this.soundFontLoadFailed.trigger(new Mn(e.message,n))},n.onprogress=e=>{Ne.debug("AlphaSynth",`Soundfont downloading: ${e.loaded}/${e.total} bytes`),i(new no(e.loaded,e.total))},n.send()}resetSoundFonts(){this._synth.postMessage({cmd:"alphaSynth.resetSoundFonts"})}loadMidiFile(e){this._synth.postMessage({cmd:"alphaSynth.loadMidi",midi:en.midiFileToJsObject(e)})}setChannelMute(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelMute",channel:e,mute:t})}resetChannelStates(){this._synth.postMessage({cmd:"alphaSynth.resetChannelStates"})}setChannelSolo(e,t){this._synth.postMessage({cmd:"alphaSynth.setChannelSolo",channel:e,solo:t})}setChannelVolume(e,t){t=Math.max(t,Vt.MinVolume),this._synth.postMessage({cmd:"alphaSynth.setChannelVolume",channel:e,volume:t})}handleWorkerMessage(e){let t=e.data,i=t.cmd;switch(i){case"alphaSynth.ready":this._workerIsReady=!0,this.checkReady();break;case"alphaSynth.destroyed":this._synth.terminate();break;case"alphaSynth.readyForPlayback":this._workerIsReadyForPlayback=!0,this.checkReadyForPlayback();break;case"alphaSynth.positionChanged":this._timePosition=t.currentTime,this._tickPosition=t.currentTick,this.positionChanged.trigger(new $t(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiEventsPlayed":this.midiEventsPlayed.trigger(new bi(t.events.map(en.jsObjectToMidiEvent)));break;case"alphaSynth.playerStateChanged":this._state=t.state,this.stateChanged.trigger(new jt(t.state,t.stopped));break;case"alphaSynth.finished":this.finished.trigger();break;case"alphaSynth.soundFontLoaded":this.soundFontLoaded.trigger();break;case"alphaSynth.soundFontLoadFailed":this.soundFontLoadFailed.trigger(t.error);break;case"alphaSynth.midiLoaded":this.checkReadyForPlayback(),this.midiLoaded.trigger(new $t(t.currentTime,t.endTime,t.currentTick,t.endTick,t.isSeek));break;case"alphaSynth.midiLoadFailed":this.checkReadyForPlayback(),this.midiLoadFailed.trigger(t.error);break;case"alphaSynth.output.addSamples":this._output.addSamples(t.samples);break;case"alphaSynth.output.play":this._output.play();break;case"alphaSynth.output.pause":this._output.pause();break;case"alphaSynth.output.destroy":this._output.destroy();break;case"alphaSynth.output.resetSamples":this._output.resetSamples();break}}checkReady(){this.isReady&&this.ready.trigger()}checkReadyForPlayback(){this.isReadyForPlayback&&this.readyForPlayback.trigger()}onOutputSampleRequest(){this._synth.postMessage({cmd:"alphaSynth.output.sampleRequest"})}onOutputSamplesPlayed(e){this._synth.postMessage({cmd:"alphaSynth.output.samplesPlayed",samples:e})}onOutputReady(){this._outputIsReady=!0,this.checkReady()}}class jn{constructor(e,t){if(this._width=0,this.boundsLookup=null,this.preRender=new mi,this.partialRenderFinished=new mi,this.renderFinished=new mi,this.postRenderFinished=new gi,this.error=new mi,this._api=e,t.core.scriptFile){try{let e=`importScripts('${t.core.scriptFile}')`,i=new Blob([e]);this._worker=new Worker(URL.createObjectURL(i))}catch(i){try{this._worker=new Worker(t.core.scriptFile)}catch(n){return void Ne.error("Rendering","Failed to create WebWorker: "+i)}}this._worker.postMessage({cmd:"alphaTab.initialize",settings:this.serializeSettingsForWorker(t)}),this._worker.addEventListener("message",this.handleWorkerMessage.bind(this))}else Ne.error("Rendering","Could not detect alphaTab script file, cannot initialize renderer")}destroy(){this._worker.terminate()}updateSettings(e){this._worker.postMessage({cmd:"alphaTab.updateSettings",settings:this.serializeSettingsForWorker(e)})}serializeSettingsForWorker(e){const t=en.settingsToJsObject(e);return t.delete("player"),t}render(){this._worker.postMessage({cmd:"alphaTab.render"})}resizeRender(){this._worker.postMessage({cmd:"alphaTab.resizeRender"})}get width(){return this._width}set width(e){this._width=e,this._worker.postMessage({cmd:"alphaTab.setWidth",width:e})}handleWorkerMessage(e){let t=e.data,i=t.cmd;switch(i){case"alphaTab.preRender":this.preRender.trigger(t.resize);break;case"alphaTab.partialRenderFinished":this.partialRenderFinished.trigger(t.result);break;case"alphaTab.renderFinished":this.renderFinished.trigger(t.result);break;case"alphaTab.postRenderFinished":this.boundsLookup=un.fromJson(t.boundsLookup,this._api.score),this.postRenderFinished.trigger();break;case"alphaTab.error":this.error.trigger(t.error);break}}renderScore(e,t){let i=en.scoreToJsObject(e);this._worker.postMessage({cmd:"alphaTab.renderScore",score:i,trackIndexes:t,fontSizes:sn.FontSizeLookupTables})}}class $n{constructor(e,t,i,n){this.cursorWrapper=e,this.barCursor=t,this.beatCursor=i,this.selectionWrapper=n}}(function(e){e[e["Browser"]=0]="Browser",e[e["NodeJs"]=1]="NodeJs"})(ee||(ee={}));class zn{static init(){var e;zn._isRegistered||(zn._isRegistered=!0,registerProcessor("alphatab",(e=class e extends AudioWorkletProcessor{constructor(...t){super(...t),this._outputBuffer=new Float32Array(0),this._bufferCount=0,this._requestedBufferCount=0,Ne.info("WebAudio","creating processor"),this._bufferCount=Math.floor(e.TotalBufferTimeInMilliseconds*sampleRate/1e3/e.BufferSize),this._circularBuffer=new Vn(e.BufferSize*this._bufferCount),this.port.onmessage=this.handleMessage.bind(this)}handleMessage(e){let t=e.data,i=t.cmd;switch(i){case tn.CmdOutputAddSamples:const e=t.samples;this._circularBuffer.write(e,0,e.length),this._requestedBufferCount--;break;case tn.CmdOutputResetSamples:this._circularBuffer.clear();break}}process(e,t,i){if(1!==t.length&&2!==t[0].length)return!1;let n=t[0][0],s=t[0][1];if(!n||!s)return!0;let r=n.length+s.length,a=this._outputBuffer;a.length!==r&&(a=new Float32Array(r),this._outputBuffer=a),this._circularBuffer.read(a,0,Math.min(a.length,this._circularBuffer.count));let o=0;for(let l=0;l<n.length;l++)n[l]=a[o++],s[l]=a[o++];return this.port.postMessage({cmd:tn.CmdOutputSamplesPlayed,samples:n.length}),this.requestBuffers(),!0}requestBuffers(){const t=this._bufferCount/2|0;let i=t*e.BufferSize,n=this._circularBuffer.count+this._requestedBufferCount*e.BufferSize;if(n<i){for(let e=0;e<t;e++)this.port.postMessage({cmd:tn.CmdOutputSampleRequest});this._requestedBufferCount+=t}}},e.BufferSize=4096,e.TotalBufferTimeInMilliseconds=5e3,e)))}}zn._isRegistered=!1;class Un extends Hn{constructor(){super(...arguments),this._worklet=null}open(){super.open(),this.onReady()}play(){super.play();let e=this._context;e.audioWorklet.addModule(to.scriptFile).then(()=>{this._worklet=new AudioWorkletNode(e,"alphatab",{numberOfOutputs:1,outputChannelCount:[2]}),this._worklet.port.onmessage=this.handleMessage.bind(this),this._source.connect(this._worklet),this._source.start(0),this._worklet.connect(e.destination)},e=>{Ne.error("WebAudio","Audio Worklet creation failed: reason="+e)})}handleMessage(e){let t=e.data,i=t.cmd;switch(i){case tn.CmdOutputSamplesPlayed:this.onSamplesPlayed(t.samples);break;case tn.CmdOutputSampleRequest:this.onSampleRequest();break}}pause(){super.pause(),this._worklet&&(this._worklet.port.onmessage=null,this._worklet.disconnect()),this._worklet=null}addSamples(e){var t;null===(t=this._worklet)||void 0===t||t.port.postMessage({cmd:tn.CmdOutputAddSamples,samples:e})}resetSamples(){var e;null===(e=this._worklet)||void 0===e||e.port.postMessage({cmd:tn.CmdOutputResetSamples})}}class Xn{constructor(e){if(this._fontCheckers=new Map,this._contents=null,this._file=null,this._totalResultCount=0,this._initialTrackIndexes=null,this._barToElementLookup=new Map,this.rootContainerBecameVisible=new gi,this.canRenderChanged=new gi,this._highlightedElements=[],this._scrollContainer=null,to.webPlatform!==ee.Browser)throw new n(t.AlphaTabErrorType.General,"Usage of AlphaTabApi is only possible in browser environments. For usage in node use the Low Level APIs");e.classList.add("alphaTab"),this.rootContainer=new Dn(e),this.areWorkersSupported="Worker"in window,to.bravuraFontChecker.fontLoaded.on(this.onFontLoaded.bind(this)),this._intersectionObserver=new IntersectionObserver(this.onElementVisibilityChanged.bind(this),{threshold:[0,.01,1]}),this._intersectionObserver.observe(e)}get resizeThrottle(){return 10}get canRender(){return this.areAllFontsLoaded()}areAllFontsLoaded(){if(to.bravuraFontChecker.checkForFontAvailability(),!to.bravuraFontChecker.isFontLoaded)return!1;let e=!1;for(const t of this._fontCheckers.values())t.isFontLoaded||(e=!0);return!e&&(Ne.debug("Font","All fonts loaded: "+this._fontCheckers.size),!0)}onFontLoaded(e){sn.generateFontLookup(e),this.areAllFontsLoaded()&&this.canRenderChanged.trigger()}onElementVisibilityChanged(e){for(const t of e)if(t.isIntersecting){const e=t.target;e===this.rootContainer.element?(this.rootContainerBecameVisible.trigger(),this._intersectionObserver.unobserve(this.rootContainer.element)):"svg"in e.dataset&&(this.replacePlaceholder(e,e.dataset["svg"]),this._intersectionObserver.unobserve(e))}}createWorkerRenderer(){return new jn(this._api,this._api.settings)}initialize(e,i){let n;this._api=e,n=i instanceof xi?i:en.jsObjectToSettings(i);let s=this.getDataAttributes();Zi.fromJson(n,s),n.notation.notationMode===t.NotationMode.SongBook&&n.setSongBookModeSettings(),e.settings=n,this.setupFontCheckers(n),this._initialTrackIndexes=this.parseTracks(n.core.tracks),this._contents="";let r=e.container;n.core.tex&&(this._contents=r.element.innerHTML,r.element.innerHTML=""),this.createStyleElement(n),this._file=n.core.file}setupFontCheckers(e){this.registerFontChecker(e.display.resources.copyrightFont),this.registerFontChecker(e.display.resources.effectFont),this.registerFontChecker(e.display.resources.fingeringFont),this.registerFontChecker(e.display.resources.graceFont),this.registerFontChecker(e.display.resources.markerFont),this.registerFontChecker(e.display.resources.tablatureFont),this.registerFontChecker(e.display.resources.titleFont),this.registerFontChecker(e.display.resources.wordsFont),this.registerFontChecker(e.display.resources.barNumberFont),this.registerFontChecker(e.display.resources.fretboardNumberFont),this.registerFontChecker(e.display.resources.subTitleFont)}registerFontChecker(e){if(!this._fontCheckers.has(e.family)){let t=new Rn(e.family);this._fontCheckers.set(e.family,t),t.fontLoaded.on(this.onFontLoaded.bind(this)),t.checkForFontAvailability()}}destroy(){this.rootContainer.element.innerHTML=""}createCanvasElement(){let e=document.createElement("div");return e.className="at-surface",e.style.fontSize="0",e.style.overflow="hidden",e.style.lineHeight="0",new Dn(e)}triggerEvent(e,t,i=null,n){let s=e.element;t="alphaTab."+t;let r=document.createEvent("CustomEvent"),a=n?n.mouseEvent:null;if(r.initCustomEvent(t,!1,!1,i),a&&(r.originalEvent=a),s.dispatchEvent(r),window&&"jQuery"in window){let e=window["jQuery"],n=[];n.push(i),a&&n.push(a),e(s).trigger(t,n)}}load(e,t,i){if(e instanceof je)return t(e),!0;if(e instanceof ArrayBuffer){let i=new Uint8Array(e);return t(An.loadScoreFromBytes(i,this._api.settings)),!0}return e instanceof Uint8Array?(t(An.loadScoreFromBytes(e,this._api.settings)),!0):"string"===typeof e&&(An.loadScoreAsync(e,t,i,this._api.settings),!0)}loadSoundFont(e,t){return!!this._api.player&&(e instanceof ArrayBuffer?(this._api.player.loadSoundFont(new Uint8Array(e),t),!0):e instanceof Uint8Array?(this._api.player.loadSoundFont(e,t),!0):"string"===typeof e&&(this._api.loadSoundFontFromUrl(e,t),!0))}initialRender(){this._api.renderer.preRender.on(e=>{this._totalResultCount=0,this._barToElementLookup.clear()});const e=()=>{var e;this._api.renderer.width=0|this.rootContainer.width,this._api.renderer.updateSettings(this._api.settings),this._contents?(this._api.tex(this._contents,null!==(e=this._initialTrackIndexes)&&void 0!==e?e:void 0),this._initialTrackIndexes=null):this._file&&An.loadScoreAsync(this._file,e=>{var t;this._api.renderScore(e,null!==(t=this._initialTrackIndexes)&&void 0!==t?t:void 0),this._initialTrackIndexes=null},e=>{this._api.onError(e)},this._api.settings)};this.rootContainer.isVisible?e():this.rootContainerBecameVisible.on(e)}createStyleElement(e){let t=this._api.container.element.ownerDocument;to.createStyleElement(t,e.core.fontDirectory)}parseTracks(e){if(!e)return[];let t=[];if("string"===typeof e)try{if("all"===e)return[-1];e=JSON.parse(e)}catch(i){e=[0]}if("number"===typeof e)t.push(e);else if("length"in e){let i=e.length,n=e;for(let e=0;e<i;e++){let i=n[e],s=0;s="number"===typeof i?i:"index"in i?i.index:parseInt(i.toString()),(s>=0||-1===s)&&t.push(s)}}else"index"in e&&t.push(e.index);return t}getDataAttributes(){let e=new Map,t=this._api.container.element;if(t.dataset)for(let n of Object.keys(t.dataset)){let s=t.dataset[n];try{let e=s;s=JSON.parse(e)}catch(i){""===s&&(s=null)}e.set(n,s)}else for(let n=0;n<t.attributes.length;n++){let s=t.attributes.item(n),r=s.nodeName;if(r.startsWith("data-")){let t=r.substr(5).split("-"),n=t[0];for(let e=1;e<t.length;e++)n+=t[e].substr(0,1).toUpperCase()+t[e].substr(1);let a=s.nodeValue;try{a=JSON.parse(a)}catch(i){""===a&&(a=null)}e.set(n,a)}}return e}beginAppendRenderResults(e){let t=this._api.canvasElement.element;if(e){let i=e.renderResult;if("string"===typeof i){let n;this._totalResultCount<t.childElementCount?n=t.childNodes.item(this._totalResultCount):(n=document.createElement("div"),t.appendChild(n)),n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.display="inline-block",this._api.settings.core.enableLazyLoading?(n.dataset["svg"]=i,this._intersectionObserver.observe(n)):this.replacePlaceholder(n,i);for(let t=e.firstMasterBarIndex;t<=e.lastMasterBarIndex;t++)this._barToElementLookup.set(t,n)}else this._totalResultCount<t.childElementCount?t.replaceChild(e.renderResult,t.childNodes.item(this._totalResultCount)):t.appendChild(e.renderResult);this._totalResultCount++}else while(t.childElementCount>this._totalResultCount)t.removeChild(t.lastChild)}replacePlaceholder(e,t){e.innerHTML=t,delete e.dataset["svg"]}createWorkerPlayer(){let e=to.scriptFile;if(!e)return Ne.error("Player","alphaTab script file could not be detected, player cannot initialize"),null;let t=null,i="ScriptProcessorNode"in window,n=window.isSecureContext&&"AudioWorkletNode"in window;return n?(Ne.debug("Player","Will use webworkers for synthesizing and web audio api with worklets for playback"),t=new Wn(new Un,e,this._api.settings.core.logLevel)):i&&(Ne.debug("Player","Will use webworkers for synthesizing and web audio api for playback"),t=new Wn(new Gn,e,this._api.settings.core.logLevel)),t?t.ready.on(()=>{this._api.settings.player.soundFont&&this._api.loadSoundFontFromUrl(this._api.settings.player.soundFont,!1)}):Ne.error("Player","Player requires webworkers and web audio api, browser unsupported",null),t}beginInvoke(e){window.requestAnimationFrame(()=>{e()})}highlightElements(e,t){const i=this._barToElementLookup.get(t);if(i){let t=i.getElementsByClassName(e);for(let e=0;e<t.length;e++)t.item(e).classList.add("at-highlight"),this._highlightedElements.push(t.item(e))}}removeHighlights(){const e=this._highlightedElements;if(e){for(const t of e)t.classList.remove("at-highlight");this._highlightedElements=[]}}destroyCursors(){let e=this._api.container.element,t=e.querySelector(".at-cursors");e.removeChild(t)}createCursors(){let e=this._api.container.element,t=document.createElement("div");t.classList.add("at-cursors");let i=document.createElement("div");i.classList.add("at-selection");let n=document.createElement("div");n.classList.add("at-cursor-bar");let s=document.createElement("div");return s.classList.add("at-cursor-beat"),e.style.position="relative",e.style.textAlign="left",t.style.position="absolute",t.style.zIndex="1000",t.style.display="inline",t.style.pointerEvents="none",i.style.position="absolute",n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.willChange="transform",n.style.width="1px",n.style.height="1px",s.style.position="absolute",s.style.transition="all 0s linear",s.style.left="0",s.style.top="0",s.style.willChange="transform",s.style.width="3px",s.style.height="1px",e.insertBefore(t,e.firstChild),t.appendChild(i),t.appendChild(n),t.appendChild(s),new $n(new Dn(t),new Dn(n),new Dn(s),new Dn(i))}getOffset(e,t){let i=t.element,n=i.getBoundingClientRect(),s=n.top+i.ownerDocument.defaultView.pageYOffset,r=n.left+i.ownerDocument.defaultView.pageXOffset;if(e){let t=e.element,i=t.nodeName.toLowerCase();if("html"!==i&&"body"!==i){let i=this.getOffset(null,e);s=s+t.scrollTop-i.y,r=r+t.scrollLeft-i.x}}let a=new st;return a.x=r,a.y=s,a.w=n.width,a.h=n.height,a}getScrollContainer(){if(this._scrollContainer)return this._scrollContainer;let e="string"===typeof this._api.settings.player.scrollElement?document.querySelector(this._api.settings.player.scrollElement):this._api.settings.player.scrollElement,t=e.nodeName.toLowerCase();if("html"===t||"body"===t)if("scrollingElement"in document)e=document.scrollingElement;else{const t=navigator.userAgent;e=-1!==t.indexOf("WebKit")?document.body:document.documentElement}return this._scrollContainer=new Dn(e),this._scrollContainer}createSelectionElement(){let e=document.createElement("div");return e.style.position="absolute",e.style.width="1px",e.style.height="1px",new Dn(e)}scrollToY(e,t,i){this.internalScrollToY(e.element,t,i)}scrollToX(e,t,i){this.internalScrollToX(e.element,t,i)}internalScrollToY(e,t,i){if(this._api.settings.player.nativeBrowserSmoothScroll)e.scrollTo({top:t,behavior:"smooth"});else{let n=e.scrollTop,s=t-n,r=0,a=t=>{0===r&&(r=t);let o=t-r,l=Math.min(o/i,1);e.scrollTop=n+s*l|0,o<i&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}}internalScrollToX(e,t,i){if(this._api.settings.player.nativeBrowserSmoothScroll)e.scrollTo({left:t,behavior:"smooth"});else{let n=e.scrollLeft,s=t-n,r=0,a=t=>{0===r&&(r=t);let o=t-r,l=Math.min(o/i,1);e.scrollLeft=n+s*l|0,o<i&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}}}class Yn extends Fn{constructor(e,t){super(new Xn(e),t),this.soundFontLoad=new mi}tex(e,t){let i=this.uiFacade;super.tex(e,i.parseTracks(t))}print(e,i=null){let n=window.open("","","width=0,height=0"),s=n.document.createElement("div");e?s.style.width=e:this.settings.display.layoutMode===t.LayoutMode.Horizontal?s.style.width="297mm":s.style.width="210mm",n.document.write("<!DOCTYPE html><html></head><body></body></html>"),n.document.body.appendChild(s);let r="undefined"!==typeof window["screenLeft"]?window["screenLeft"]:window["left"],a="undefined"!==typeof window["screenTop"]?window["screenTop"]:window["top"],o="innerWidth"in window?window.innerWidth:"clientWidth"in document.documentElement?document.documentElement.clientWidth:window.screen.width,l="innerHeight"in window?window.innerHeight:"clientHeight"in document.documentElement?document.documentElement.clientHeight:window.screen.height,h=s.offsetWidth+50,c=window.innerHeight,u=(o/2|0)-(h/2|0)+r,d=(l/2|0)-(c/2|0)+a;n.resizeTo(h,c),n.moveTo(u,d),n.focus();let p=en.jsObjectToSettings(en.settingsToJsObject(this.settings));p.core.enableLazyLoading=!1,p.core.useWorkers=!1,p.display.scale=.8,p.display.stretchForce=.8,Zi.fromJson(p,i);let f=new Yn(s,p);f.renderer.postRenderFinished.on(()=>{f.canvasElement.height=-1,n.print()}),f.renderTracks(this.tracks)}downloadMidi(){if(!this.score)return;let e=new vi,t=new gn(e),i=new kn(this.score,this.settings,t);i.generate();let n=e.toBinary(),s=this.score.title?this.score.title+".mid":"File.mid",r=document.createElement("a");r.download=s;let a=new Blob([n],{type:"audio/midi"}),o=URL.createObjectURL(a);r.href=o,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}changeTrackMute(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackMute(i,t)}changeTrackSolo(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackSolo(i,t)}changeTrackVolume(e,t){let i=this.trackIndexesToTracks(this.uiFacade.parseTracks(e));super.changeTrackVolume(i,t)}trackIndexesToTracks(e){if(!this.score)return[];let t=[];if(1===e.length&&-1===e[0])for(let i of this.score.tracks)t.push(i);else for(let i of e)i>=0&&i<this.score.tracks.length&&t.push(this.score.tracks[i]);return t}loadSoundFontFromUrl(e,t){this.player&&this.player.loadSoundFontFromUrl(e,t,e=>{this.soundFontLoad.trigger(e),this.uiFacade.triggerEvent(this.container,"soundFontLoad",e)})}}class qn{constructor(){this._initListeners=[]}exec(e,t,i){if("string"!==typeof t&&(i=[t],t="init"),95===t.charCodeAt(0)||"exec"===t)return null;let n=new jQuery(e),s=n.data("alphaTab");if("destroy"===t&&!s)return null;if("init"!==t&&!s)throw new Error("alphaTab not initialized");let r=this[t];if(r){let e=[n,s].concat(i);return r.apply(this,e)}return Ne.error("Api","Method '"+t+"' does not exist on jQuery.alphaTab"),null}init(e,t,i){if(!t){t=new Yn(e[0],i),e.data("alphaTab",t);for(let n of this._initListeners)n(e,t,i)}}destroy(e,t){e.removeData("alphaTab"),t.destroy()}print(e,t,i,n){t.print(i,n)}load(e,t,i,n){return t.load(i,n)}render(e,t){t.render()}renderScore(e,t,i,n){t.renderScore(i,n)}renderTracks(e,t,i){t.renderTracks(i)}invalidate(e,t){t.render()}tex(e,t,i,n){t.tex(i,n)}muteTrack(e,t,i,n){t.changeTrackMute(i,n)}soloTrack(e,t,i,n){t.changeTrackSolo(i,n)}trackVolume(e,t,i,n){t.changeTrackVolume(i,n)}loadSoundFont(e,t,i,n){t.loadSoundFont(i,n)}resetSoundFonts(e,t){t.resetSoundFonts()}pause(e,t){t.pause()}play(e,t){return t.play()}playPause(e,t){t.playPause()}stop(e,t){t.stop()}api(e,t){return t}player(e,t){return t.player}isReadyForPlayback(e,t){return t.isReadyForPlayback}playerState(e,t){return t.playerState}masterVolume(e,t,i){return"number"===typeof i&&(t.masterVolume=i),t.masterVolume}metronomeVolume(e,t,i){return"number"===typeof i&&(t.metronomeVolume=i),t.metronomeVolume}countInVolume(e,t,i){return"number"===typeof i&&(t.countInVolume=i),t.countInVolume}midiEventsPlayedFilter(e,t,i){return Array.isArray(i)&&(t.midiEventsPlayedFilter=i),t.midiEventsPlayedFilter}playbackSpeed(e,t,i){return"number"===typeof i&&(t.playbackSpeed=i),t.playbackSpeed}tickPosition(e,t,i){return"number"===typeof i&&(t.tickPosition=i),t.tickPosition}timePosition(e,t,i){return"number"===typeof i&&(t.timePosition=i),t.timePosition}loop(e,t,i){return"boolean"===typeof i&&(t.isLooping=i),t.isLooping}renderer(e,t){return t.renderer}score(e,t){return t.score}settings(e,t){return t.settings}tracks(e,t){return t.tracks}_oninit(e){this._initListeners.push(e)}static restore(e){new jQuery(e).empty().removeData("alphaTab")}}class Jn{constructor(){this.buffer="",this._currentPath="",this._currentPathIsEmpty=!0,this.color=new de(255,255,255,255),this.lineWidth=1,this.font=new me("Arial",10,l.Plain),this.textAlign=E.Left,this.textBaseline=P.Top}beginRender(e,t){this.buffer=`<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="${0|e}px" height="${0|t}px" class="at-surface-svg">\n`,this._currentPath="",this._currentPathIsEmpty=!0,this.textBaseline=P.Top}beginGroup(e){this.buffer+=`<g class="${e}">`}endGroup(){this.buffer+="</g>"}endRender(){return this.buffer+="</svg>",this.buffer}fillRect(e,t,i,n){i>0&&(this.buffer+=`<rect x="${0|e}" y="${0|t}" width="${i}" height="${n}" fill="${this.color.rgba}" />\n`)}strokeRect(e,t,i,n){this.buffer+=`<rect x="${0|e}" y="${0|t}" width="${i}" height="${n}" stroke="${this.color.rgba}"`,1!==this.lineWidth&&(this.buffer+=` stroke-width="${this.lineWidth}"`),this.buffer+=' fill="transparent" />\n'}beginPath(){}closePath(){this._currentPath+=" z"}moveTo(e,t){this._currentPath+=` M${e},${t}`}lineTo(e,t){this._currentPathIsEmpty=!1,this._currentPath+=` L${e},${t}`}quadraticCurveTo(e,t,i,n){this._currentPathIsEmpty=!1,this._currentPath+=` Q${e},${t},${i},${n}`}bezierCurveTo(e,t,i,n,s,r){this._currentPathIsEmpty=!1,this._currentPath+=` C${e},${t},${i},${n},${s},${r}`}fillCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.fill()}strokeCircle(e,t,i){this._currentPathIsEmpty=!1,this._currentPath+=` M${e-i},${t} A1,1 0 0,0 ${e+i},${t} A1,1 0 0,0 ${e-i},${t} z`,this.stroke()}fill(){this._currentPathIsEmpty||(this.buffer+=`<path d="${this._currentPath}"`,"#000000"!==this.color.rgba&&(this.buffer+=` fill="${this.color.rgba}"`),this.buffer+=' style="stroke: none"/>'),this._currentPath="",this._currentPathIsEmpty=!0}stroke(){if(!this._currentPathIsEmpty){let e=`<path d="${this._currentPath}" stroke="${this.color.rgba}"`;1!==this.lineWidth&&(e+=` stroke-width="${this.lineWidth}"`),e+=' style="fill: none" />',this.buffer+=e}this._currentPath="",this._currentPathIsEmpty=!0}fillText(e,t,i){if(""===e)return;let n=`<text x="${0|t}" y="${0|i}" style="stroke: none; font:${this.font.toCssString(this.settings.display.scale)}" ${this.getSvgBaseLine()}`;"#000000"!==this.color.rgba&&(n+=` fill="${this.color.rgba}"`),this.textAlign!==E.Left&&(n+=` text-anchor="${this.getSvgTextAlignment(this.textAlign)}"`),n+=`>${Jn.escapeText(e)}</text>`,this.buffer+=n}static escapeText(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}getSvgTextAlignment(e){switch(e){case E.Left:return"start";case E.Center:return"middle";case E.Right:return"end"}return""}getSvgBaseLine(){switch(this.textBaseline){case P.Top:return'dominant-baseline="hanging"';case P.Bottom:return'dominant-baseline="bottom"';default:return""}}measureText(e){return e?sn.measureString(e,this.font.family,this.font.size,this.font.style,this.font.weight):0}onRenderFinished(){return null}beginRotate(e,t,i){this.buffer+='<g transform="translate('+e+" ,"+t+") rotate( "+i+')">'}endRotate(){this.buffer+="</g>"}}class Qn extends Jn{constructor(){super()}fillMusicFontSymbol(e,t,i,n,s){n!==C.None&&this.fillMusicFontSymbolText(e,t,i,`&#${n};`,s)}fillMusicFontSymbols(e,t,i,n,s){let r="";for(let a of n)a!==C.None&&(r+=`&#${a};`);this.fillMusicFontSymbolText(e,t,i,r,s)}fillMusicFontSymbolText(e,t,i,n,s){this.buffer+=`<g transform="translate(${e} ${t})" class="at" ><text`,this.buffer+=1!==i?` style="font-size: ${100*i}%; stroke:none"`:' style="stroke:none"',"#000000"!==this.color.rgba&&(this.buffer+=` fill="${this.color.rgba}"`),s&&(this.buffer+=' text-anchor="'+this.getSvgTextAlignment(E.Center)+'"'),this.buffer+=`>${n}</text></g>`}}class Kn{constructor(){this.isInAccolade=!0,this.isRelevantForBoundsLookup=!0,this.hideOnMultiTrack=!1,this.hideOnPercussionTrack=!1}canCreate(e,t){return!this.hideOnPercussionTrack||!t.isPercussion}}(function(e){e[e["PreNotes"]=0]="PreNotes",e[e["OnNotes"]=1]="OnNotes",e[e["MiddleNotes"]=2]="MiddleNotes",e[e["Stem"]=3]="Stem",e[e["PostNotes"]=4]="PostNotes",e[e["EndBeat"]=5]="EndBeat"})(te||(te={}));class Zn extends Bn{constructor(e,t){super(e,t),this.glyphs=null}get isEmpty(){return!this.glyphs||0===this.glyphs.length}doLayout(){if(!this.glyphs||0===this.glyphs.length)return void(this.width=0);let e=0;for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.renderer=this.renderer,i.doLayout(),e=Math.max(e,i.width)}this.width=e}addGlyph(e){this.glyphs||(this.glyphs=[]),this.renderer&&(e.renderer=this.renderer),this.glyphs.push(e)}paint(e,t,i){let n=this.glyphs;if(n&&0!==n.length)for(let s of n)s.paint(e+this.x,t+this.y,i)}}class es extends Zn{constructor(){super(0,0),this.glyphs=[]}addGlyph(e){e.x=0===this.glyphs.length?0:this.glyphs[this.glyphs.length-1].x+this.glyphs[this.glyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.width=e.x+e.width,super.addGlyph(e)}}class ts extends Zn{constructor(e,t,i){super(e,t),this.voice=i,this.beatGlyphs=[],this.tupletGroups=[]}scaleToWidth(e){const t=this.renderer.scale;let i=this.renderer.layoutingInfo.spaceToForce(e/t);this.scaleToForce(i)}scaleToForce(e){const t=this.renderer.scale;this.width=this.renderer.layoutingInfo.calculateVoiceWidth(e)*t;let i=this.renderer.layoutingInfo.buildOnTimePositions(e),n=this.beatGlyphs;for(let s=0,r=n.length;s<r;s++){let e=n[s];switch(e.beat.graceType){case S.None:e.x=i.get(e.beat.absoluteDisplayStart)*t-e.onTimeX;break;default:const r=e.beat.graceGroup.beats[0].absoluteDisplayStart,a=e.beat.graceGroup.id;if(e.beat.graceGroup.isComplete&&i.has(r)){e.x=i.get(r)*t-e.onTimeX;let n=this.renderer.layoutingInfo.allGraceRods.get(a),s=this.renderer.layoutingInfo.springs.get(r).preBeatWidth;e.x-=s,e.x-=n[e.beat.graceIndex].postSpringWidth,e.x+=n[e.beat.graceIndex].graceBeatWidth;const o=n[e.beat.graceGroup.beats.length-1];e.x-=o.graceBeatWidth}else{let t=this.renderer.layoutingInfo.incompleteGraceRods.get(a);const i=t[e.beat.graceIndex].postSpringWidth-t[e.beat.graceIndex].preSpringWidth;s>0?0===e.beat.graceIndex?e.x=n[s-1].x+n[s-1].width:e.x=n[s-1].x+t[e.beat.graceIndex-1].postSpringWidth-t[e.beat.graceIndex-1].preSpringWidth-i:e.x=-i}break}if(s>0){let t=e.x-n[s-1].x;n[s-1].scaleToWidth(t)}if(s===r-1){let t=this.width-n[n.length-1].x;e.scaleToWidth(t)}}}registerLayoutingInfo(e){e.updateVoiceSize(this.width);let t=this.beatGlyphs;for(let i of t)i.registerLayoutingInfo(e)}applyLayoutingInfo(e){let t=this.beatGlyphs;for(let i of t)i.applyLayoutingInfo(e);this.scaleToForce(Math.max(this.renderer.settings.display.stretchForce,e.minStretchForce))}addGlyph(e){let t=e;e.x=0===this.beatGlyphs.length?0:this.beatGlyphs[this.beatGlyphs.length-1].x+this.beatGlyphs[this.beatGlyphs.length-1].width,e.renderer=this.renderer,e.doLayout(),this.beatGlyphs.push(t),this.width=e.x+e.width,t.beat.hasTuplet&&t.beat.tupletGroup.beats[0].id===t.beat.id&&this.tupletGroups.push(t.beat.tupletGroup)}doLayout(){}paint(e,t,i){i.color=0===this.voice.index?this.renderer.resources.mainGlyphColor:this.renderer.resources.secondaryGlyphColor;for(let n=0,s=this.beatGlyphs.length;n<s;n++)this.beatGlyphs[n].paint(e+this.x,t+this.y,i)}}ts.KeySizeBeat="Beat",function(e){e[e["None"]=0]="None",e[e["Natural"]=1]="Natural",e[e["Sharp"]=2]="Sharp",e[e["Flat"]=3]="Flat",e[e["NaturalQuarterNoteUp"]=4]="NaturalQuarterNoteUp",e[e["SharpQuarterNoteUp"]=5]="SharpQuarterNoteUp",e[e["FlatQuarterNoteUp"]=6]="FlatQuarterNoteUp",e[e["DoubleSharp"]=7]="DoubleSharp",e[e["DoubleFlat"]=8]="DoubleFlat"}(ie||(ie={}));class is{constructor(){this.maxLine=-1e3,this.minLine=-1e3}}class ns{constructor(e){this._registeredAccidentals=new Map,this._appliedScoreLines=new Map,this._appliedScoreLinesByValue=new Map,this._notesByValue=new Map,this._beatLines=new Map,this.maxLineBeat=null,this.minLineBeat=null,this.maxLine=-1e3,this.minLine=-1e3,this._barRenderer=e,this._bar=e.bar}static getPercussionLine(e,t){var i,n;return t<e.staff.track.percussionArticulations.length?e.staff.track.percussionArticulations[t].staffLine:null!==(n=null===(i=Ee.getArticulationByValue(t))||void 0===i?void 0:i.staffLine)&&void 0!==n?n:0}static getNoteValue(e){if(e.isPercussion)return e.percussionArticulation;let t=e.displayValue;switch(e.accidentalMode){case k.ForceDoubleFlat:t+=2;break;case k.ForceDoubleSharp:t-=2;break;case k.ForceFlat:t+=1;break;case k.ForceSharp:t-=1;break}return t}applyAccidental(e){const t=ns.getNoteValue(e);let i=e.hasQuarterToneOffset;return this.getAccidental(t,i,e.beat,!1,e)}applyAccidentalForValue(e,t,i,n){return this.getAccidental(t,i,e,n,null)}static computeLineWithoutAccidentals(e,t){let i=0;const n=ns.getNoteValue(t);if(e.staff.isPercussion)i=ns.getPercussionLine(e,n);else{const s=t?t.accidentalMode:k.Default;i=ns.calculateNoteLine(e,n,s)}return i}getAccidental(e,t,i,n,s=null){let r=ie.None,a=0;if(this._bar.staff.isPercussion)a=ns.getPercussionLine(this._bar,e);else{const i=s?s.accidentalMode:k.Default;a=ns.calculateNoteLine(this._bar,e,i);let n=this._bar.masterBar.keySignature,o=n+7,l=e%12,h=o<7?ie.Flat:ie.Sharp,c=ns.KeySignatureLookup[o][l],u=ns.AccidentalNotes[l];if(t)switch(r=u?h:ie.Natural,r){case ie.Natural:r=ie.NaturalQuarterNoteUp;break;case ie.Sharp:r=ie.SharpQuarterNoteUp;break;case ie.Flat:r=ie.FlatQuarterNoteUp;break}else{switch(i){case k.ForceSharp:r=ie.Sharp;break;case k.ForceDoubleSharp:r=ie.DoubleSharp;break;case k.ForceFlat:r=ie.Flat;break;case k.ForceDoubleFlat:r=ie.DoubleFlat;break;default:u?r=h:c&&(r=ie.Natural);break}let e=!1;if(s&&s.isTieDestination&&0===s.beat.index){const t=this._barRenderer.previousRenderer;if(t){const i=t.accidentalHelper.getNoteLine(s.tieOrigin);i===a&&(e=!0)}}e?r=ie.None:r!==ie.None?(this._registeredAccidentals.has(a)?this._registeredAccidentals.get(a)===r&&(r=ie.None):c&&r===h&&(r=ie.None),r!==ie.None&&this._registeredAccidentals.set(a,r)):this._registeredAccidentals.has(a)?this._registeredAccidentals.get(a)===ie.Natural?r=ie.None:(r=ie.Natural,this._registeredAccidentals.set(a,r)):this._registeredAccidentals.delete(a)}}return s?(this._appliedScoreLines.set(s.id,a),this._notesByValue.set(e,s)):this._appliedScoreLinesByValue.set(e,a),(-1e3===this.minLine||this.minLine<a)&&(this.minLine=a,this.minLineBeat=i),(-1e3===this.maxLine||this.maxLine>a)&&(this.maxLine=a,this.maxLineBeat=i),n||this.registerLine(i,a),r}registerLine(e,t){let i;this._beatLines.has(e.id)?i=this._beatLines.get(e.id):(i=new is,this._beatLines.set(e.id,i)),(-1e3===i.minLine||t<i.minLine)&&(i.minLine=t),(-1e3===i.minLine||t>i.maxLine)&&(i.maxLine=t)}getMaxLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).maxLine:0}getMinLine(e){return this._beatLines.has(e.id)?this._beatLines.get(e.id).minLine:0}static calculateNoteLine(e,t,i){let n=t,s=e.masterBar.keySignature,r=e.clef,a=n%12,o=(n/12|0)-1,l=ns.OctaveSteps[r];l-=o*ns.StepsPerOctave;let h=ue.keySignatureIsSharp(s)||ue.keySignatureIsNatural(s)?ns.SharpNoteSteps:ns.FlatNoteSteps;return l-=h[a],l}getNoteLine(e){return this._appliedScoreLines.get(e.id)}getNoteLineForValue(e,t=!1){return this._appliedScoreLinesByValue.has(e)?this._appliedScoreLinesByValue.get(e):t&&this._notesByValue.has(e)?this.getNoteLine(this._notesByValue.get(e)):0}}ns.KeySignatureLookup=[[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0],[!1,!0,!0,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!0,!0,!0,!0],[!1,!1,!1,!0,!0,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!0,!0],[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!1,!1,!1,!1,!1],[!0,!0,!1,!1,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!1,!1,!1],[!0,!0,!0,!0,!1,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!1],[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0]],ns.AccidentalNotes=[!1,!0,!1,!0,!1,!1,!0,!1,!0,!1,!0,!1],ns.StepsPerOctave=7,ns.OctaveSteps=[38,32,30,26,38],ns.SharpNoteSteps=[0,0,1,1,2,3,3,4,4,5,5,6],ns.FlatNoteSteps=[0,1,1,2,2,3,4,4,5,5,6,6];class ss{constructor(){this.staffId="",this.up=0,this.down=0}}class rs{constructor(){this.startBeat=null,this.startX=0,this.startY=0,this.endBeat=null,this.endX=0,this.endY=0}calcY(e){return this.startX===this.endX?this.startY:(this.endY-this.startY)/(this.endX-this.startX)*(e-this.startX)+this.startY}}class as{constructor(e,t){this._beatLineXPositions=new Map,this._firstNonRestBeat=null,this._lastNonRestBeat=null,this.voice=null,this.beats=[],this.shortestDuration=v.QuadrupleWhole,this.fingeringCount=0,this.hasTuplet=!1,this._firstBeatLowestNoteCompareValue=-1,this._firstBeatHighestNoteCompareValue=-1,this._lastBeatLowestNoteCompareValue=-1,this._lastBeatHighestNoteCompareValue=-1,this.lowestNoteInHelper=null,this._lowestNoteCompareValueInHelper=-1,this.highestNoteInHelper=null,this._highestNoteCompareValueInHelper=-1,this.invertBeamDirection=!1,this.preferredBeamDirection=null,this.isGrace=!1,this.minRestLine=null,this.beatOfMinRestLine=null,this.maxRestLine=null,this.beatOfMaxRestLine=null,this.direction=W.Up,this.drawingInfos=new Map,this._staff=e,this._renderer=t,this.beats=[]}get isRestBeamHelper(){return 1===this.beats.length&&this.beats[0].isRest}get hasLine(){return 1===this.beats.length&&this.beats[0].duration>v.Whole}get hasFlag(){return 1===this.beats.length&&!this.beats[0].isRest&&(this.beats[0].duration>v.Quarter||this.beats[0].graceType!==S.None)}getBeatLineX(e){return this.hasBeatLineX(e)?this.direction===W.Up?this._beatLineXPositions.get(e.index).up:this._beatLineXPositions.get(e.index).down:0}hasBeatLineX(e){return this._beatLineXPositions.has(e.index)}registerBeatLineX(e,t,i,n){let s=this.getOrCreateBeatPositions(t);s.staffId=e,s.up=i,s.down=n;for(const r of this.drawingInfos.values())r.startBeat==t?r.startX=this.getBeatLineX(t):r.endBeat==t&&(r.endX=this.getBeatLineX(t))}getOrCreateBeatPositions(e){return this._beatLineXPositions.has(e.index)||this._beatLineXPositions.set(e.index,new ss),this._beatLineXPositions.get(e.index)}finish(){this.direction=this.calculateDirection()}calculateDirection(){let e=null;if(this.voice?null!==this.preferredBeamDirection?e=this.preferredBeamDirection:this.voice.index>0?e=this.invert(W.Down):(this.voice.bar.isMultiVoice||this.beats[0].graceType!==S.None)&&(e=this.invert(W.Up)):e=W.Up,this.highestNoteInHelper&&this.lowestNoteInHelper){let t=this._renderer.getNoteY(this.highestNoteInHelper,ne.Center),i=this._renderer.getNoteY(this.lowestNoteInHelper,ne.Center);if(null===e){const n=(t+i)/2;e=this.invert(this._renderer.middleYPosition<n?W.Up:W.Down)}this._renderer.completeBeamingHelper(this)}else e=this.invert(W.Up),this._renderer.completeBeamingHelper(this);return e}static computeLineHeightsForRest(e){switch(e){case v.QuadrupleWhole:return[2,2];case v.DoubleWhole:return[2,2];case v.Whole:return[0,1];case v.Half:return[1,0];case v.Quarter:return[3,3];case v.Eighth:return[2,2];case v.Sixteenth:return[2,4];case v.ThirtySecond:return[4,4];case v.SixtyFourth:return[4,6];case v.OneHundredTwentyEighth:return[6,6];case v.TwoHundredFiftySixth:return[6,8]}return[0,0]}applyRest(e,t){if(this._lastNonRestBeat&&e.index>=this._lastNonRestBeat.index||this._firstNonRestBeat&&e.index<=this._firstNonRestBeat.index)return;let i=t,n=t;const s=as.computeLineHeightsForRest(e.duration);i-=s[0],n+=s[1];const r=this.minRestLine,a=this.maxRestLine;(null===r||r>i)&&(this.minRestLine=i,this.beatOfMinRestLine=e),(null===a||a<n)&&(this.maxRestLine=n,this.beatOfMaxRestLine=e)}invert(e){if(!this.invertBeamDirection)return e;switch(e){case W.Down:return W.Up;default:return W.Down}}checkBeat(e){e.invertBeamDirection&&(this.invertBeamDirection=!0),this.voice||(this.voice=e.voice);let t=!1;if(0===this.beats.length)t=!0;else switch(this.beats[this.beats.length-1].beamingMode){case O.Auto:t=as.canJoin(this.beats[this.beats.length-1],e);break;case O.ForceSplitToNext:t=!1;break;case O.ForceMergeWithNext:t=!0;break}if(t){if(null!==e.preferredBeamDirection&&(this.preferredBeamDirection=e.preferredBeamDirection),e.isRest)0===this.beats.length&&this.beats.push(e);else{this.isRestBeamHelper&&(this.beats=[]),this.beats.push(e),e.graceType!==S.None&&(this.isGrace=!0),e.hasTuplet&&(this.hasTuplet=!0);let t=0;for(let i=0;i<e.notes.length;i++){let n=e.notes[i];n.leftHandFinger===a.Unknown&&n.rightHandFinger===a.Unknown||t++}t>this.fingeringCount&&(this.fingeringCount=t),this.checkNote(e.minNote),this.checkNote(e.maxNote),this.shortestDuration<e.duration&&(this.shortestDuration=e.duration),this._firstNonRestBeat||(this._firstNonRestBeat=e),this._lastNonRestBeat=e}e.hasTuplet&&(this.hasTuplet=!0)}return t}checkNote(e){if(!e)return;let t,i;this.voice&&e.isPercussion?(t=-ns.getPercussionLine(this.voice.bar,ns.getNoteValue(e)),i=t):(t=ns.getNoteValue(e),i=t,e.harmonicType!==_.None&&e.harmonicType!==_.Natural&&(i=e.realValue-this._staff.displayTranspositionPitch)),1===this.beats.length&&this.beats[0]===e.beat&&((-1===this._firstBeatLowestNoteCompareValue||t<this._firstBeatLowestNoteCompareValue)&&(this._firstBeatLowestNoteCompareValue=t),(-1===this._firstBeatHighestNoteCompareValue||i>this._firstBeatHighestNoteCompareValue)&&(this._firstBeatHighestNoteCompareValue=i)),(-1===this._lastBeatLowestNoteCompareValue||t<this._lastBeatLowestNoteCompareValue)&&(this._lastBeatLowestNoteCompareValue=t),(-1===this._lastBeatHighestNoteCompareValue||i>this._lastBeatHighestNoteCompareValue)&&(this._lastBeatHighestNoteCompareValue=i),(!this.lowestNoteInHelper||t<this._lowestNoteCompareValueInHelper)&&(this.lowestNoteInHelper=e,this._lowestNoteCompareValueInHelper=t),(!this.highestNoteInHelper||i>this._highestNoteCompareValueInHelper)&&(this.highestNoteInHelper=e,this._highestNoteCompareValueInHelper=i)}static canJoin(e,t){if(!e||!t||e.graceType!==t.graceType||e.graceType===S.BendGrace||t.graceType===S.BendGrace)return!1;if(e.graceType!==S.None&&t.graceType!==S.None)return!0;let i=e.voice.bar,n=t.voice.bar;if(i!==n)return!1;let s=e.playbackStart,r=t.playbackStart;if(!as.canJoinDuration(e.duration)||!as.canJoinDuration(t.duration))return s===r;if(e.tupletGroup!==t.tupletGroup)return!1;if(e.hasTuplet&&t.hasTuplet&&e.tupletGroup===t.tupletGroup&&e.tupletGroup.isFull)return!0;let a=ke.QuarterTime;switch(i.masterBar.timeSignatureDenominator){case 8:i.masterBar.timeSignatureNumerator%3===0&&(a+=ke.QuarterTime/2|0);break}let o=0|(a+s)/a,l=0|(a+r)/a;return o===l}static canJoinDuration(e){switch(e){case v.Whole:case v.Half:case v.Quarter:return!1;default:return!0}}static isFullBarJoin(e,t,i){return ue.getIndex(e.duration)-2-i>0&&ue.getIndex(t.duration)-2-i>0}get beatOfLowestNote(){return this.lowestNoteInHelper.beat}get beatOfHighestNote(){return this.highestNoteInHelper.beat}isPositionFrom(e,t){return!this._beatLineXPositions.has(t.index)||(this._beatLineXPositions.get(t.index).staffId===e||!this._beatLineXPositions.get(t.index).staffId)}}class os{constructor(e,t){this.topY=0,this.bottomY=0,this.topY=e,this.bottomY=t}}class ls{constructor(e){this.topY=-1e3,this.bottomY=-1e3,this.slots=[],this.beat=e}addSlot(e,t){if(this.slots.push(new os(e,t)),-1e3===this.topY)this.topY=e,this.bottomY=t;else{const i=Math.min(e,t),n=Math.max(e,t);i<this.topY&&(this.topY=i),n>this.bottomY&&(this.bottomY=n)}}}class hs{constructor(){this.reservedLayoutAreasByDisplayTime=new Map,this.restDurationsByDisplayTime=new Map}getBeatMinMaxY(){let e=-1e3,t=-1e3;for(const i of this.reservedLayoutAreasByDisplayTime.values())-1e3===e?(e=i.topY,t=i.bottomY):(e>i.topY&&(e=i.topY),t<i.bottomY&&(t=i.bottomY));return-1e3===e?[0,0]:[e,t]}reserveBeatSlot(e,t,i){t!=i&&(this.reservedLayoutAreasByDisplayTime.has(e.displayStart)||this.reservedLayoutAreasByDisplayTime.set(e.displayStart,new ls(e)),this.reservedLayoutAreasByDisplayTime.get(e.displayStart).addSlot(t,i),e.isRest&&this.registerRest(e))}registerRest(e){this.restDurationsByDisplayTime.has(e.displayStart)||this.restDurationsByDisplayTime.set(e.displayStart,new Map),this.restDurationsByDisplayTime.get(e.displayStart).has(e.playbackDuration)||this.restDurationsByDisplayTime.get(e.displayStart).set(e.playbackDuration,e.id)}applyRestCollisionOffset(e,t,i){if(e.voice.index>0&&this.reservedLayoutAreasByDisplayTime.has(e.playbackStart)){const n=as.computeLineHeightsForRest(e.duration).map(e=>e*i);let s=t-n[0],r=t+n[1],a=s;const o=this.reservedLayoutAreasByDisplayTime.get(e.playbackStart);let l=!1;for(const e of o.slots)if(s>=e.topY&&s<=e.bottomY||r>=e.topY&&r<=e.bottomY){l=!0;break}if(l){a=1==e.voice.index?o.topY-n[1]-n[0]:o.bottomY;let t=a+n[0]+n[1];const r=2*i;let l=Math.ceil(Math.abs(a-s)/r);return o.addSlot(a,t),a<s?l*-r:l*r}}return 0}}class cs{constructor(e){this.beamHelpers=[],this.beamHelperLookup=[],this._renderer=e,this.collisionHelper=new hs}initialize(){var e=this._renderer,t=this._renderer.bar;let i=null,n=null;for(let s=0,r=t.voices.length;s<r;s++){let r=t.voices[s];this.beamHelpers.push([]),this.beamHelperLookup.push(new Map);for(let s=0,a=r.beats.length;s<a;s++){let a,o=r.beats[s];o.graceType!==S.None?a=n:(a=i,n=null),a&&a.checkBeat(o)||(a&&a.finish(),a=new as(t.staff,e),a.checkBeat(o),o.graceType!==S.None?n=a:i=a,this.beamHelpers[r.index].push(a)),this.beamHelperLookup[r.index].set(o.index,a)}i&&i.finish(),n&&n.finish(),i=null,n=null}}getBeamingHelperForBeat(e){return this.beamHelperLookup[e.voice.index].get(e.index)}}(function(e){e[e["TopWithStem"]=0]="TopWithStem",e[e["Top"]=1]="Top",e[e["Center"]=2]="Center",e[e["Bottom"]=3]="Bottom",e[e["BottomWithStem"]=4]="BottomWithStem"})(ne||(ne={})),function(e){e[e["Left"]=0]="Left",e[e["Center"]=1]="Center",e[e["Right"]=2]="Right"}(se||(se={}));class us{constructor(e,t){this._preBeatGlyphs=new es,this._voiceContainers=new Map,this._postBeatGlyphs=new es,this.x=0,this.y=0,this.width=0,this.height=0,this.index=0,this.topOverflow=0,this.bottomOverflow=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this._wasFirstOfLine=!1,this._appliedLayoutingInfo=0,this.isFinalized=!1,this.topPadding=0,this.bottomPadding=0,this.scoreRenderer=e,this.bar=t,t&&(this.helpers=new cs(this))}get nextRenderer(){return this.bar&&this.bar.nextBar?this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.nextBar):null}get previousRenderer(){return this.bar&&this.bar.previousBar?this.scoreRenderer.layout.getRendererForBar(this.staff.staveId,this.bar.previousBar):null}get middleYPosition(){return 0}registerOverflowTop(e){e>this.topOverflow&&(this.topOverflow=e)}registerOverflowBottom(e){e>this.bottomOverflow&&(this.bottomOverflow=e)}scaleToWidth(e){let t=e-this._preBeatGlyphs.width-this._postBeatGlyphs.width;for(const i of this._voiceContainers.values())i.scaleToWidth(t);this._postBeatGlyphs.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width+t,this.width=e}get resources(){return this.settings.display.resources}get settings(){return this.scoreRenderer.settings}get scale(){return this.settings.display.scale}get isFirstOfLine(){return 0===this.index}get isLast(){return!this.bar||this.bar.index===this.scoreRenderer.layout.lastBarIndex}registerLayoutingInfo(){let e=this.layoutingInfo,t=this._preBeatGlyphs.width;e.preBeatSize<t&&(e.preBeatSize=t);for(const n of this._voiceContainers.values())n.registerLayoutingInfo(e);let i=this._postBeatGlyphs.width;e.postBeatSize<i&&(e.postBeatSize=i)}applyLayoutingInfo(){if(this._appliedLayoutingInfo>=this.layoutingInfo.version)return!1;this._appliedLayoutingInfo=this.layoutingInfo.version,this._preBeatGlyphs.width=this.layoutingInfo.preBeatSize;let e=this._preBeatGlyphs.x+this._preBeatGlyphs.width;for(const t of this._voiceContainers.values()){t.x=this._preBeatGlyphs.x+this._preBeatGlyphs.width,t.applyLayoutingInfo(this.layoutingInfo);let i=t.x+t.width;e<i&&(e=i)}return this._postBeatGlyphs.x=Math.floor(e),this._postBeatGlyphs.width=this.layoutingInfo.postBeatSize,this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),!0}finalizeRenderer(){this.isFinalized=!0}doLayout(){if(this.bar){this.helpers.initialize(),this._preBeatGlyphs=new es,this._preBeatGlyphs.renderer=this,this._voiceContainers.clear(),this._postBeatGlyphs=new es,this._postBeatGlyphs.renderer=this;for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];if(this.hasVoiceContainer(t)){let i=new ts(0,0,t);i.renderer=this,this._voiceContainers.set(this.bar.voices[e].index,i)}}this.bar.simileMark===f.SecondOfDouble&&(this.canWrap=!1),this.createPreBeatGlyphs(),this.createBeatGlyphs(),this.createPostBeatGlyphs(),this.updateSizes();for(const e of this.helpers.beamHelpers)for(const t of e)t.finish()}}hasVoiceContainer(e){return!e.isEmpty||0===e.index}updateSizes(){this.staff.registerStaffTop(this.topPadding),this.staff.registerStaffBottom(this.height-this.bottomPadding);let e=this._voiceContainers,t=this.beatGlyphsStart,i=t;for(const n of e.values()){n.x=t,n.doLayout();let e=n.x+n.width;i<e&&(i=e)}this._postBeatGlyphs.x=Math.floor(i),this.width=Math.ceil(this._postBeatGlyphs.x+this._postBeatGlyphs.width),this.height+=this.layoutingInfo.height*this.scale}addPreBeatGlyph(e){e.renderer=this,this._preBeatGlyphs.addGlyph(e)}addBeatGlyph(e){e.renderer=this,e.preNotes.renderer=this,e.onNotes.renderer=this,e.onNotes.beamingHelper=this.helpers.beamHelperLookup[e.beat.voice.index].get(e.beat.index),this.getVoiceContainer(e.beat.voice).addGlyph(e)}getVoiceContainer(e){return this._voiceContainers.get(e.index)}getBeatContainer(e){var t,i;return null===(i=null===(t=this.getVoiceContainer(e.voice))||void 0===t?void 0:t.beatGlyphs)||void 0===i?void 0:i[e.index]}getPreNotesGlyphForBeat(e){var t;return null===(t=this.getBeatContainer(e))||void 0===t?void 0:t.preNotes}getOnNotesGlyphForBeat(e){var t;return null===(t=this.getBeatContainer(e))||void 0===t?void 0:t.onNotes}paint(e,t,i){this.paintBackground(e,t,i),i.color=this.resources.mainGlyphColor,this._preBeatGlyphs.paint(e+this.x,t+this.y,i);for(const n of this._voiceContainers.values())i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.paint(e+this.x,t+this.y,i);i.color=this.resources.mainGlyphColor,this._postBeatGlyphs.paint(e+this.x,t+this.y,i)}paintBackground(e,t,i){this.layoutingInfo.paint(e+this.x+this._preBeatGlyphs.x+this._preBeatGlyphs.width,t+this.y+this.height,i)}buildBoundingsLookup(e,t,i){let n=new an;n.bar=this.bar,n.visualBounds=new st,n.visualBounds.x=t+this.x,n.visualBounds.y=i+this.y+this.topPadding,n.visualBounds.w=this.width,n.visualBounds.h=this.height-this.topPadding-this.bottomPadding,n.realBounds=new st,n.realBounds.x=t+this.x,n.realBounds.y=i+this.y,n.realBounds.w=this.width,n.realBounds.h=this.height,e.addBar(n);for(const[s,r]of this._voiceContainers){let e=this.bar.isEmpty&&0===s;if(!r.voice.isEmpty||e)for(let s=0,a=r.beatGlyphs.length;s<a;s++){let a=r.beatGlyphs[s];a.buildBoundingsLookup(n,t+this.x+r.x,i+this.y+r.y,e)}}}addPostBeatGlyph(e){this._postBeatGlyphs.addGlyph(e)}createPreBeatGlyphs(){this._wasFirstOfLine=this.isFirstOfLine}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(this.bar.voices[e])}}createVoiceGlyphs(e){}createPostBeatGlyphs(){}get beatGlyphsStart(){return this._preBeatGlyphs.x+this._preBeatGlyphs.width}get postBeatGlyphsStart(){return this._postBeatGlyphs.x}getBeatX(e,t=te.PreNotes){let i=this.getBeatContainer(e);if(i)switch(t){case te.PreNotes:return i.voiceContainer.x+i.x;case te.OnNotes:return i.voiceContainer.x+i.x+i.onNotes.x;case te.MiddleNotes:return i.voiceContainer.x+i.x+i.onTimeX;case te.Stem:const t=i.onNotes.beamingHelper?i.onNotes.beamingHelper.getBeatLineX(e):i.onNotes.x+i.onNotes.width/2;return i.voiceContainer.x+t;case te.PostNotes:return i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.width;case te.EndBeat:return i.voiceContainer.x+i.x+i.width}return 0}getNoteX(e,t){let i=this.getBeatContainer(e.beat);return i?i.voiceContainer.x+i.x+i.onNotes.x+i.onNotes.getNoteX(e,t):0}getNoteY(e,t){let i=this.getOnNotesGlyphForBeat(e.beat);return i?i.getNoteY(e,t):NaN}reLayout(){(this._wasFirstOfLine&&!this.isFirstOfLine||!this._wasFirstOfLine&&this.isFirstOfLine)&&(this._preBeatGlyphs=new es,this._preBeatGlyphs.renderer=this,this.createPreBeatGlyphs()),this.updateSizes(),this.registerLayoutingInfo()}paintSimileMark(e,t,i){switch(this.bar.simileMark){case f.Simple:i.fillMusicFontSymbol(e+this.x+(this.width-20*this.scale)/2,t+this.y+this.height/2,1,C.Repeat1Bar,!1);break;case f.SecondOfDouble:i.fillMusicFontSymbol(e+this.x-28*this.scale/2,t+this.y+this.height/2,1,C.Repeat2Bars,!1);break}}completeBeamingHelper(e){}}us.LineSpacing=8,us.StemWidth=.12*us.LineSpacing,us.StaffLineThickness=.13*us.LineSpacing,us.BeamThickness=.5*us.LineSpacing,us.BeamSpacing=.25*us.LineSpacing,function(e){e[e["SinglePreBeat"]=0]="SinglePreBeat",e[e["SingleOnBeat"]=1]="SingleOnBeat",e[e["SingleOnBeatToEnd"]=2]="SingleOnBeatToEnd",e[e["GroupedOnBeat"]=3]="GroupedOnBeat",e[e["GroupedOnBeatToEnd"]=4]="GroupedOnBeatToEnd",e[e["FullBar"]=5]="FullBar"}(re||(re={}));class ds extends Bn{constructor(e,t){super(0,0),this._uniqueEffectGlyphs=[],this._effectGlyphs=[],this.isEmpty=!0,this.previousBand=null,this.isLinkedToPrevious=!1,this.firstBeat=null,this.lastBeat=null,this.height=0,this.slot=null,this.voice=e,this.info=t}doLayout(){super.doLayout();for(let e=0;e<this.renderer.bar.voices.length;e++)this._effectGlyphs.push(new Map),this._uniqueEffectGlyphs.push([])}createGlyph(e){if(e.voice===this.voice&&this.info.shouldCreateGlyph(this.renderer.settings,e)&&(!this.info.hideOnMultiTrack||0===this.renderer.staff.trackIndex)){if(this.isEmpty=!1,this.firstBeat&&!e.isBefore(this.firstBeat)||(this.firstBeat=e),!this.lastBeat||e.isAfter(this.lastBeat))switch(this.lastBeat=e,this.info.sizingMode){case re.SingleOnBeatToEnd:case re.GroupedOnBeatToEnd:this.lastBeat.nextBeat&&(this.lastBeat=this.lastBeat.nextBeat);break}let t=this.createOrResizeGlyph(this.info.sizingMode,e);t.height>this.height&&(this.height=t.height)}}createOrResizeGlyph(e,t){let i;switch(e){case re.FullBar:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case re.SinglePreBeat:case re.SingleOnBeat:case re.SingleOnBeatToEnd:return i=this.info.createNewGlyph(this.renderer,t),i.renderer=this.renderer,i.beat=t,i.doLayout(),this._effectGlyphs[t.voice.index].set(t.index,i),this._uniqueEffectGlyphs[t.voice.index].push(i),i;case re.GroupedOnBeat:case re.GroupedOnBeatToEnd:let n=e===re.GroupedOnBeat?re.SingleOnBeat:re.SingleOnBeatToEnd;if(t.index>0||this.renderer.index>0){let e=t.previousBeat;if(this.info.shouldCreateGlyph(this.renderer.settings,e)){let i=null;if(t.index>0&&this._effectGlyphs[t.voice.index].has(e.index))i=this._effectGlyphs[t.voice.index].get(e.index);else if(this.renderer.index>0){let n=this.renderer.previousRenderer,s=n.getBand(this.voice,this.info.effectId),r=s._effectGlyphs[t.voice.index];r.has(e.index)&&(i=r.get(e.index))}let s=this.createOrResizeGlyph(n,t);return i&&this.info.canExpand(e,t)&&(i.nextGlyph=s,s.previousGlyph=i,this.isLinkedToPrevious=!0),s}return this.createOrResizeGlyph(n,t)}return this.createOrResizeGlyph(n,t);default:return this.createOrResizeGlyph(re.SingleOnBeat,t)}}paint(e,t,i){super.paint(e,t,i);for(let n=0,s=this._uniqueEffectGlyphs.length;n<s;n++){let s=this._uniqueEffectGlyphs[n];for(let n=0,r=s.length;n<r;n++){let r=s[n];r.paint(e+this.x,t+this.y,i)}}}alignGlyphs(){for(let e=0;e<this._effectGlyphs.length;e++)for(const t of this._effectGlyphs[e].keys())this.alignGlyph(this.info.sizingMode,this.renderer.bar.voices[e].beats[t])}alignGlyph(e,t){let i,n=this._effectGlyphs[t.voice.index].get(t.index),s=this.renderer.getBeatContainer(t);switch(e){case re.SinglePreBeat:i=s.preNotes,n.x=this.renderer.beatGlyphsStart+i.x+s.x,n.width=i.width;break;case re.SingleOnBeat:case re.GroupedOnBeat:i=s.onNotes,n.x=this.renderer.beatGlyphsStart+i.x+s.x,n.width=i.width;break;case re.SingleOnBeatToEnd:case re.GroupedOnBeatToEnd:i=s.onNotes,n.x=this.renderer.beatGlyphsStart+i.x+s.x,s.beat.isLastOfVoice?n.width=this.renderer.width-n.x:n.width=s.width-s.preNotes.width-s.preNotes.x;break;case re.FullBar:n.width=this.renderer.width;break}}}class ps{constructor(){this.uniqueEffectId=null,this.y=0,this.height=0,this.firstBeat=null,this.lastBeat=null}}class fs{constructor(){this.bands=[],this.shared=new ps}update(e){e.info.canShareBand||(this.shared.uniqueEffectId=e.info.effectId),e.slot=this,this.bands.push(e),e.height>this.shared.height&&(this.shared.height=e.height),this.shared.firstBeat&&!e.firstBeat.isBefore(this.shared.firstBeat)||(this.shared.firstBeat=e.firstBeat),this.shared.lastBeat&&!e.lastBeat.isAfter(this.shared.lastBeat)||(this.shared.lastBeat=e.lastBeat)}canBeUsed(e){return(!this.shared.uniqueEffectId&&e.info.canShareBand||e.info.effectId===this.shared.uniqueEffectId)&&(!this.shared.firstBeat||this.shared.lastBeat.isBefore(e.firstBeat)||this.shared.lastBeat.isBefore(this.shared.firstBeat))}}class gs{constructor(){this.slots=[],this._effectSlot=new Map}getOrCreateSlot(e){if(this._effectSlot.has(e.info.effectId)){let t=this._effectSlot.get(e.info.effectId);if(t.canBeUsed(e))return t}for(let i of this.slots)if(i.canBeUsed(e))return i;let t=new fs;return this.slots.push(t),t}register(e){let t=this.getOrCreateSlot(e);t.update(e),this._effectSlot.set(e.info.effectId,t)}}class ms extends Zn{constructor(){super(0,0),this.computedWidth=0}doLayout(){let e=0;if(this.glyphs)for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.x=e,i.renderer=this.renderer,i.doLayout(),e+=i.width}this.width=e,this.computedWidth=e}noteLoop(e){for(let t=this.container.beat.notes.length-1;t>=0;t--)e(this.container.beat.notes[t])}}class bs extends ms{constructor(){super(...arguments),this.centerX=0}updateBeamingHelper(){}buildBoundingsLookup(e,t,i){}getNoteX(e,t){return 0}getNoteY(e,t){return 0}}class ys extends us{constructor(e,t,i){super(e,t),this._bands=[],this._bandLookup=new Map,this.sizingInfo=null,this._infos=i}updateSizes(){this.topOverflow=0,this.bottomOverflow=0,this.topPadding=0,this.bottomPadding=0,this.updateHeight(),super.updateSizes()}finalizeRenderer(){super.finalizeRenderer(),this.updateHeight()}updateHeight(){if(!this.sizingInfo)return;let e=0;for(let t of this.sizingInfo.slots){t.shared.y=e;for(let i of t.bands)i.y=e,i.height=t.shared.height;e+=t.shared.height}this.height=e}applyLayoutingInfo(){if(!super.applyLayoutingInfo())return!1;if(this.index>0){let e=this.previousRenderer;this.sizingInfo=e.sizingInfo}else this.sizingInfo=new gs;for(let e of this._bands)e.alignGlyphs(),e.isEmpty||this.sizingInfo.register(e);return this.updateHeight(),!0}scaleToWidth(e){super.scaleToWidth(e);for(let t of this._bands)t.alignGlyphs()}createBeatGlyphs(){this._bands=[],this._bandLookup=new Map;for(let e of this.bar.voices)if(this.hasVoiceContainer(e))for(let t of this._infos){let i=new ds(e,t);i.renderer=this,i.doLayout(),this._bands.push(i),this._bandLookup.set(e.index+"."+t.effectId,i)}for(let e of this.bar.voices)this.hasVoiceContainer(e)&&this.createVoiceGlyphs(e);for(let e of this._bands)e.isLinkedToPrevious&&(this.isLinkedToPrevious=!0)}createVoiceGlyphs(e){for(let t of e.beats){let i=new Pn(t,this.getVoiceContainer(e));i.preNotes=new ms,i.onNotes=new bs,this.addBeatGlyph(i);for(let e of this._bands)e.createGlyph(t)}}paint(e,t,i){this.paintBackground(e,t,i);for(let n of this._bands)i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isEmpty||n.paint(e+this.x,t+this.y,i)}getBand(e,t){let i=e.index+"."+t;return this._bandLookup.has(i)?this._bandLookup.get(i):null}}class vs extends Kn{constructor(e,t){super(),this._infos=t,this._staffId=e,this.isInAccolade=!1,this.isRelevantForBoundsLookup=!1}get staffId(){return this._staffId}create(e,t){return new ys(e,t,this._infos.filter(t=>e.settings.notation.isNotationElementVisible(t.notationElement)))}}class ws extends xn{constructor(e,t,i){super(e,t),this._endingsString="",this._endings=[];for(let n=0;n<He.MaxAlternateEndings;n++)0!==(i&1<<n)&&this._endings.push(n)}doLayout(){super.doLayout(),this.height=this.renderer.resources.wordsFont.size+(ws.Padding*this.scale+2);let e="";for(let t=0,i=this._endings.length;t<i;t++)e+=this._endings[t]+1,e+=". ";this._endingsString=e}paint(e,t,i){super.paint(e,t,i);let n=i.textBaseline;if(i.textBaseline=P.Top,this._endings.length>0){let n=this.renderer.resources;i.font=n.wordsFont,i.moveTo(e+this.x,t+this.y+this.height),i.lineTo(e+this.x,t+this.y),i.lineTo(e+this.x+this.width,t+this.y),i.stroke(),i.fillText(this._endingsString,e+this.x+ws.Padding*this.scale,t+this.y*this.scale)}i.textBaseline=n}}ws.Padding=3;class Ss{get effectId(){return this.notationElement.toString()}}class _s extends Ss{get notationElement(){return o.EffectAlternateEndings}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return re.FullBar}shouldCreateGlyph(e,t){return 0===t.voice.index&&0===t.index&&0!==t.voice.bar.masterBar.alternateEndings}createNewGlyph(e,t){return new ws(0,0,t.voice.bar.masterBar.alternateEndings)}canExpand(e,t){return!0}}class ks extends xn{constructor(e,t,i,n,s=E.Left){super(e,t),this._lines=i.split("\n"),this.font=n,this.textAlign=s}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){let n=i.color;i.color=n,i.font=this.font;let s=i.textAlign;i.textAlign=this.textAlign;let r=t+this.y;for(let a of this._lines)i.fillText(a,e+this.x,r),r+=this.font.size;i.textAlign=s}}class Ts extends Ss{get notationElement(){return o.EffectCapo}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return 0===t.index&&0===t.voice.bar.index&&0!==t.voice.bar.staff.capo}createNewGlyph(e,t){return new ks(0,0,"Capo. fret "+t.voice.bar.staff.capo,e.resources.effectFont,E.Left)}canExpand(e,t){return!1}}class Bs extends Ss{get notationElement(){return o.EffectChordNames}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return t.hasChord}createNewGlyph(e,t){return new ks(0,0,t.chord.name,e.resources.effectFont,E.Center)}canExpand(e,t){return!1}}class xs extends xn{constructor(e){super(),this.forceGroupedRendering=!1,this.endOnBarLine=!1,this.endPosition=e}get isLinkedWithPrevious(){return!!this.previousGlyph&&this.previousGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}get isLinkedWithNext(){return!!this.nextGlyph&&this.nextGlyph.renderer.isFinalized&&this.nextGlyph.renderer.staff.staveGroup===this.renderer.staff.staveGroup}paint(e,t,i){if(this.isLinkedWithPrevious)return;if(!this.isLinkedWithNext&&!this.forceGroupedRendering)return void this.paintNonGrouped(e,t,i);let n;if(!this.isLinkedWithNext&&this.forceGroupedRendering)n=this;else{n=this.nextGlyph;while(n.isLinkedWithNext)n=n.nextGlyph}let s=n.renderer,r=n.beat,a=this.endPosition,o=e-this.renderer.x,l=this.calculateEndX(s,r,o,a);this.paintGrouped(e,t,l,i)}calculateEndX(e,t,i,n){return t?i+e.x+e.getBeatX(t,n):i+e.x+this.x+this.width}paintNonGrouped(e,t,i){let n=e-this.renderer.x,s=this.calculateEndX(this.renderer,this.beat,n,this.endPosition);this.paintGrouped(e,t,s,i)}}class Ns extends xs{constructor(e,t,i){super(te.EndBeat),this._crescendo=y.None,this._crescendo=i,this.x=e,this.y=t}doLayout(){super.doLayout(),this.height=17*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,r=this.height*this.scale;n.beginPath(),this._crescendo===y.Crescendo?(i-=Ns.Padding*this.scale,n.moveTo(i,t+this.y),n.lineTo(s,t+this.y+r/2),n.lineTo(i,t+this.y+r)):(i-=Ns.Padding*this.scale,n.moveTo(s,t+this.y),n.lineTo(i,t+this.y+r/2),n.lineTo(s,t+this.y+r)),n.stroke()}}Ns.Padding=Cn.QuarterNoteHeadWidth/2|0;class Cs extends Ss{get notationElement(){return o.EffectCrescendo}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.crescendo!==y.None}createNewGlyph(e,t){return new Ns(0,0,t.crescendo)}canExpand(e,t){return e.crescendo===t.crescendo}}class Es extends Nn{constructor(e,t,i){super(e,t,.6,Es.getSymbol(i))}doLayout(){super.doLayout(),this.height=17*this.scale,this.y+=this.height/2}static getSymbol(e){switch(e){case w.PPP:return C.DynamicPPP;case w.PP:return C.DynamicPP;case w.P:return C.DynamicPiano;case w.MP:return C.DynamicMP;case w.MF:return C.DynamicMF;case w.F:return C.DynamicForte;case w.FF:return C.DynamicFF;case w.FFF:return C.DynamicFFF;default:return C.None}}}class Ps extends Ss{get notationElement(){return o.EffectDynamics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return this.internalShouldCreateGlyph(t)}internalShouldCreateGlyph(e){if(e.voice.bar.staff.track.score.stylesheet.hideDynamics||e.isEmpty||e.voice.isEmpty||e.isRest||e.graceType!==S.None)return!1;let t=this.getPreviousDynamicsBeat(e),i=0===e.voice.index&&!t||e.dynamics!==(null===t||void 0===t?void 0:t.dynamics);if(i&&e.voice.index>0)for(let n of e.voice.bar.voices)if(n.index<e.voice.index){let t=n.getBeatAtPlaybackStart(e.playbackStart);t&&e.dynamics===t.dynamics&&this.internalShouldCreateGlyph(t)&&(i=!1)}return i}getPreviousDynamicsBeat(e){let t=e.previousBeat;while(null!=t){if(!t.isRest&&t.graceType===S.None)return t;t=t.previousBeat}return null}createNewGlyph(e,t){return new Es(0,0,t.dynamics)}canExpand(e,t){return!0}}class Ls extends xn{doLayout(){super.doLayout(),this.height=17*this.scale}paint(e,t,i){let n=6*this.scale,s=Math.max(this.width,14*this.scale),r=this.height/2;i.beginPath(),i.moveTo(e+this.x,t+this.y+r),i.quadraticCurveTo(e+this.x+s/2,t+this.y+r,e+this.x+s,t+this.y+r-n),i.moveTo(e+this.x,t+this.y+r),i.quadraticCurveTo(e+this.x+s/2,t+this.y+r,e+this.x+s,t+this.y+r+n),i.stroke()}}class Os extends Ss{get notationElement(){return o.EffectFadeIn}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return t.fadeIn}createNewGlyph(e,t){return new Ls}canExpand(e,t){return!0}}class Fs extends Nn{constructor(e,t,i){super(e,t,1,Fs.getSymbol(i))}static getSymbol(e){switch(e){case V.Short:return C.FermataShortAbove;case V.Medium:return C.FermataAbove;case V.Long:return C.FermataLongAbove;default:return C.None}}doLayout(){this.width=23*this.scale,this.height=12*this.scale}paint(e,t,i){super.paint(e-this.width/2,t+this.height,i)}}class Ms extends Ss{get notationElement(){return o.EffectFermata}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return 0===t.voice.index&&!!t.fermata}createNewGlyph(e,t){return new Fs(0,0,t.fermata.type)}canExpand(e,t){return!0}}class As extends Ss{get notationElement(){return o.EffectFingering}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,i){return!(0!==i.voice.index||i.isRest||e.notation.fingeringMode!==t.FingeringMode.SingleNoteEffectBand&&e.notation.fingeringMode!==t.FingeringMode.SingleNoteEffectBandForcePiano)&&(1===i.notes.length&&i.notes[0].isFingering)}createNewGlyph(e,t){var i;let n=a.Unknown,s=!1,r=t.notes[0];r.leftHandFinger!==a.Unknown?(n=r.leftHandFinger,s=!0):r.rightHandFinger!==a.Unknown&&(n=r.rightHandFinger);let o=null!==(i=ue.fingerToString(e.settings,t,n,s))&&void 0!==i?i:"";return new ks(0,0,o,e.resources.fingeringFont,E.Left)}canExpand(e,t){return!0}}class Is extends Ss{constructor(){super(...arguments),this.lastCreateInfo=null}shouldCreateGlyph(e,t){this.lastCreateInfo=[];for(let i=0,n=t.notes.length;i<n;i++){let e=t.notes[i];this.shouldCreateGlyphForNote(e)&&this.lastCreateInfo.push(e)}return this.lastCreateInfo.length>0}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}canExpand(e,t){return!0}}class Ds extends xs{constructor(e){super(te.OnNotes),this._label=e}doLayout(){this.renderer.settings.notation.extendLineEffectsToBeatEnd&&(this.endPosition=te.EndBeat,this.forceGroupedRendering=!0),super.doLayout(),this.height=this.renderer.resources.effectFont.size}paintNonGrouped(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let s=i.textAlign;i.textAlign=E.Center,i.fillText(this._label,e+this.x,t+this.y),i.textAlign=s}paintGrouped(e,t,i,n){this.paintNonGrouped(e,t,n);let s=3*this.scale,r=n.measureText(this._label),a=e+this.x+r/2+s,o=t+this.y+4*this.scale,l=8*this.scale;if(i>a){let e=a;while(e<i)n.beginPath(),n.moveTo(e,0|o),n.lineTo(Math.min(e+l,i),0|o),e+=l+s,n.stroke();n.beginPath(),n.moveTo(i,o-5*this.scale|0),n.lineTo(i,o+5*this.scale|0),n.stroke()}}}Ds.LineSpacing=3,Ds.LineTopPadding=4,Ds.LineTopOffset=5,Ds.LineSize=8;class Rs extends Is{constructor(e){switch(super(),this._beat=null,this._harmonicType=e,e){case _.None:this._effectId="harmonics-none";break;case _.Natural:this._effectId="harmonics-natural";break;case _.Artificial:this._effectId="harmonics-artificial";break;case _.Pinch:this._effectId="harmonics-pinch";break;case _.Tap:this._effectId="harmonics-tap";break;case _.Semi:this._effectId="harmonics-semi";break;case _.Feedback:this._effectId="harmonics-feedback";break;default:this._effectId="";break}}get effectId(){return this._effectId}get notationElement(){return o.EffectHarmonics}shouldCreateGlyphForNote(e){return!(!e.isHarmonic||e.harmonicType!==this._harmonicType)&&(e.beat!==this._beat&&(this._beat=e.beat),!0)}get sizingMode(){return re.GroupedOnBeat}createNewGlyph(e,t){return new Ds(Rs.harmonicToString(this._harmonicType))}static harmonicToString(e){switch(e){case _.Natural:return"N.H.";case _.Artificial:return"A.H.";case _.Pinch:return"P.H.";case _.Tap:return"T.H.";case _.Semi:return"S.H.";case _.Feedback:return"Fdbk."}return""}}class Vs extends Ss{get notationElement(){return o.EffectLetRing}get canShareBand(){return!1}get hideOnMultiTrack(){return!1}shouldCreateGlyph(e,t){return t.isLetRing}get sizingMode(){return re.GroupedOnBeat}createNewGlyph(e,t){return new Ds("LetRing")}canExpand(e,t){return!0}}class Hs extends xn{constructor(e,t,i,n,s=E.Center){super(e,t),this._lines=i,this.font=n,this.textAlign=s}doLayout(){super.doLayout(),this.height=this.font.size*this._lines.length}paint(e,t,i){i.font=this.font;let n=i.textAlign;i.textAlign=this.textAlign;for(let s=0;s<this._lines.length;s++)this._lines[s]&&i.fillText(this._lines[s],e+this.x,t+this.y+s*this.font.size);i.textAlign=n}}class Gs extends Ss{get notationElement(){return o.EffectLyrics}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.lyrics}createNewGlyph(e,t){return new Hs(0,0,t.lyrics,e.resources.effectFont,E.Center)}canExpand(e,t){return!0}}class Ws extends Ss{get notationElement(){return o.EffectMarker}get hideOnMultiTrack(){return!0}get canShareBand(){return!0}get sizingMode(){return re.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.voice.bar.staff.index&&0===t.voice.index&&0===t.index&&t.voice.bar.masterBar.isSectionStart}createNewGlyph(e,t){return new ks(0,0,t.voice.bar.masterBar.section.marker?"["+t.voice.bar.masterBar.section.marker+"] "+t.voice.bar.masterBar.section.text:t.voice.bar.masterBar.section.text,e.resources.markerFont,E.Left)}canExpand(e,t){return!0}}class js extends xs{constructor(e,t){super(te.PostNotes),this._ottava=e,this._aboveStaff=t}doLayout(){super.doLayout(),this.height=13*this.scale}paintNonGrouped(e,t,i){this.paintOttava(e,t,i)}paintOttava(e,t,i){let n=0;switch(this._ottava){case p._15ma:n=37*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.QuindicesimaAlta,!1);break;case p._8va:n=26*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.OttavaAlta,!1);break;case p._8vb:n=23*this.scale,i.fillMusicFontSymbol(e+this.x-n/2,t+this.y+this.height,.8,C.OttavaBassaVb,!1);break;case p._15mb:n=36*this.scale,i.fillMusicFontSymbols(e+this.x-n/2,t+this.y+this.height,.8,[C.Quindicesima,C.OctaveBaselineM,C.OctaveBaselineB],!1);break}return n/2}paintGrouped(e,t,i,n){let s=this.paintOttava(e,t,n),r=3*this.scale,a=e+this.x+s+r,o=t+this.y;o+=this._aboveStaff?2*this.scale:this.height-2*this.scale;let l=8*this.scale;if(i>a){let e=a;while(e<i)n.beginPath(),n.moveTo(e,0|o),n.lineTo(Math.min(e+l,i),0|o),e+=l+r,n.stroke();n.beginPath(),this._aboveStaff?(n.moveTo(i,o),n.lineTo(i,t+this.y+this.height)):(n.moveTo(i,o),n.lineTo(i,t+this.y)),n.stroke()}}}class $s extends Ss{constructor(e){super(),this._aboveStaff=e}get effectId(){return"ottavia-"+(this._aboveStaff?"above":"below")}get notationElement(){return o.EffectOttavia}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.GroupedOnBeat}shouldCreateGlyph(e,t){switch(t.ottava){case p._15ma:return this._aboveStaff;case p._8va:return this._aboveStaff;case p._8vb:return!this._aboveStaff;case p._15mb:return!this._aboveStaff}return!1}createNewGlyph(e,t){return new js(t.ottava,this._aboveStaff)}canExpand(e,t){return e.ottava===t.ottava}}class zs extends Is{get notationElement(){return o.EffectPalmMute}shouldCreateGlyphForNote(e){return e.isPalmMute}get sizingMode(){return re.GroupedOnBeat}createNewGlyph(e,t){return new Ds("P.M.")}constructor(){super()}}class Us extends Is{get notationElement(){return o.EffectPickSlide}shouldCreateGlyphForNote(e){return e.slideOutType===B.PickSlideDown||e.slideOutType===B.PickSlideUp}get sizingMode(){return re.GroupedOnBeat}createNewGlyph(e,t){return new Ds("P.S.")}constructor(){super()}}class Xs extends Nn{constructor(e,t,i){super(e,t,Cn.GraceScale,Xs.getSymbol(i))}doLayout(){this.width=9*this.scale,this.height=13*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}static getSymbol(e){switch(e){case N.Up:return C.StringsUpBow;case N.Down:return C.StringsDownBow;default:return C.None}}}class Ys extends Ss{get notationElement(){return o.EffectPickStroke}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return t.pickStroke!==N.None}createNewGlyph(e,t){return new Xs(0,0,t.pickStroke)}canExpand(e,t){return!0}}class qs extends xs{constructor(e){super(te.EndBeat),this._stepSize=0,this._type=e}doLayout(){switch(super.doLayout(),this._type){case x.Slight:this._stepSize=12*this.scale;break;case x.Wide:this._stepSize=23*this.scale;break}this.height=18*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,r=i-s,a=Math.max(1,r/this._stepSize);n.beginPath(),n.moveTo(s,t+this.y);for(let o=0;o<a;o++)n.lineTo(s+this._stepSize/2,t+this.y+this.height),n.lineTo(s+this._stepSize,t+this.y),s+=this._stepSize;n.stroke()}}class Js extends Ss{get notationElement(){return o.EffectSlightBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===x.Slight}createNewGlyph(e,t){return new qs(x.Slight)}canExpand(e,t){return!0}}class Qs extends xs{constructor(e,t,i,n=1.2,s=!1){super(te.EndBeat),this._scale=0,this._symbol=C.None,this._symbolSize=0,this._type=i,this._scale=n,this.x=e,this.y=t,this._partialWaves=s}doLayout(){super.doLayout();let e=0;switch(this._type){case x.Slight:this._symbol=C.WiggleTrill,this._symbolSize=9*this._scale,e=6*this._scale;break;case x.Wide:this._symbol=C.WiggleVibratoMediumFast,this._symbolSize=10*this._scale,e=10*this._scale;break}this.height=e*this.scale}paintGrouped(e,t,i,n){let s=e+this.x,r=i-s,a=this._symbolSize*this.scale,o=r/a;this._partialWaves||(o=Math.floor(o)),o<1&&(o=1);let l=0;for(let h=0;h<o;h++)n.fillMusicFontSymbol(e+this.x+l,t+this.y+2*this.height,this._scale*this.scale,this._symbol,!1),l+=a}}class Ks extends Is{get notationElement(){return o.EffectSlightNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===x.Slight||e.isTieDestination&&e.tieOrigin.vibrato===x.Slight}get sizingMode(){return re.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Qs(0,0,x.Slight,1.2)}constructor(){super()}}class Zs extends Ss{get notationElement(){return o.EffectTap}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return t.slap||t.pop||t.tap}createNewGlyph(e,t){let i=e.resources;return t.slap?new ks(0,0,"S",i.effectFont,E.Left):t.pop?new ks(0,0,"P",i.effectFont,E.Left):new ks(0,0,"T",i.effectFont,E.Left)}canExpand(e,t){return!0}}class er extends xn{constructor(e,t,i){super(e,t),this._tempo=0,this._tempo=i}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont,i.fillMusicFontSymbol(e+this.x,t+this.y+.8*this.height,this.scale*Cn.GraceScale,C.NoteQuarterUp,!1),i.fillText("= "+this._tempo.toString(),e+this.x+this.height/2,t+this.y+i.font.size/2)}}class tr extends Ss{get notationElement(){return o.EffectTempo}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return re.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.voice.bar.staff.index&&0===t.voice.index&&0===t.index&&(!!t.voice.bar.masterBar.tempoAutomation||0===t.voice.bar.index)}createNewGlyph(e,t){let i=0;return i=t.voice.bar.masterBar.tempoAutomation?t.voice.bar.masterBar.tempoAutomation.value:t.voice.bar.staff.track.score.tempo,new er(0,0,i)}canExpand(e,t){return!0}}class ir extends Ss{get notationElement(){return o.EffectText}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyph(e,t){return!!t.text}createNewGlyph(e,t){return new ks(0,0,t.text,e.resources.effectFont,E.Left)}canExpand(e,t){return!0}}class nr extends xn{constructor(e,t){super(e,t)}doLayout(){super.doLayout(),this.height=20*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.markerFont;let s=i.measureText("tr");i.fillText("tr",e+this.x,t+this.y+i.font.size/2);let r=s+3*this.scale,a=this.width-r,o=1.2,l=11*this.scale*o,h=Math.max(1,(a-r)/l),c=r,u=t+this.y+this.height;for(let d=0;d<h;d++)i.fillMusicFontSymbol(e+this.x+c,u,o,C.WiggleTrill,!1),c+=l}}class sr extends Is{get notationElement(){return o.EffectTrill}shouldCreateGlyphForNote(e){return e.isTrill}get sizingMode(){return re.SingleOnBeat}createNewGlyph(e,t){return new nr(0,0)}}(function(e){e[e["Full"]=0]="Full",e[e["PartialLeft"]=1]="PartialLeft",e[e["PartialRight"]=2]="PartialRight"})(ae||(ae={}));class rr extends xn{constructor(e){super(0,0),this._tripletFeel=e}doLayout(){super.doLayout(),this.height=25*this.scale}paint(e,t,i){e+=this.x,t+=this.y;let n=t+this.height*Cn.GraceScale;i.font=this.renderer.resources.effectFont,i.fillText("(",e,t+.3*this.height);let s=e+10*this.scale,r=e+40*this.scale;switch(this._tripletFeel){case I.NoTripletFeel:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full]);break;case I.Triplet8th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full]),i.fillMusicFontSymbol(r,n,rr.NoteScale,C.NoteQuarterUp,!1),i.fillMusicFontSymbol(r+rr.NoteSeparation*this.scale,n,rr.NoteScale,C.NoteEighthUp,!1),this.renderTriplet(r,t,i);break;case I.Triplet16th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full,ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full,ae.PartialRight]),this.renderTriplet(r,t,i);break;case I.Dotted8th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full,ae.PartialRight]),i.fillCircle(r+9*this.scale,n,this.scale);break;case I.Dotted16th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full,ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full,ae.Full,ae.PartialRight]),i.fillCircle(r+9*this.scale,n,this.scale);break;case I.Scottish8th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full,ae.PartialLeft]),i.fillCircle(r+rr.NoteSeparation*this.scale+8*this.scale,n,this.scale);break;case I.Scottish16th:this.renderBarNote(s,n,rr.NoteScale,i,[ae.Full,ae.Full]),this.renderBarNote(r,n,rr.NoteScale,i,[ae.Full,ae.Full,ae.PartialLeft]),i.fillCircle(r+rr.NoteSeparation*this.scale+8*this.scale,n,this.scale);break}i.fillText("=",e+30*this.scale,t+5*this.scale),i.fillText(")",e+65*this.scale,t+.3*this.height)}renderBarNote(e,t,i,n,s){n.fillMusicFontSymbol(e,t,i,C.NoteQuarterUp,!1);let r=rr.NoteSeparation/2*this.scale;for(let a=0;a<s.length;a++)switch(s[a]){case ae.Full:n.fillRect(e+4*this.scale,t-rr.NoteHeight*this.scale+rr.BarSeparation*this.scale*a,rr.NoteSeparation*this.scale,rr.BarHeight*this.scale);break;case ae.PartialLeft:n.fillRect(e+4*this.scale,t-rr.NoteHeight*this.scale+rr.BarSeparation*this.scale*a,r,rr.BarHeight*this.scale);break;case ae.PartialRight:n.fillRect(e+4*this.scale+r,t-rr.NoteHeight*this.scale+rr.BarSeparation*this.scale*a,r,rr.BarHeight*this.scale);break}n.fillMusicFontSymbol(e+rr.NoteSeparation*this.scale,t,i,C.NoteQuarterUp,!1)}renderTriplet(e,t,i){t+=2*this.scale;let n=this.renderer.resources.effectFont;i.font=new me(n.family,.8*n.size,n.style);let s=e+rr.NoteSeparation*this.scale+3*this.scale;i.beginPath(),i.moveTo(e,t+3*this.scale),i.lineTo(e,t),i.lineTo(e+5*this.scale,t),i.moveTo(s+5*this.scale,t+3*this.scale),i.lineTo(s+5*this.scale,t),i.lineTo(s,t),i.stroke(),i.fillText("3",e+7*this.scale,t-10*this.scale),i.font=n}}rr.NoteScale=.4,rr.NoteHeight=12,rr.NoteSeparation=12,rr.BarHeight=2,rr.BarSeparation=3;class ar extends Ss{get notationElement(){return o.EffectTripletFeel}get hideOnMultiTrack(){return!0}get canShareBand(){return!1}get sizingMode(){return re.SinglePreBeat}shouldCreateGlyph(e,t){return 0===t.index&&(0===t.voice.bar.masterBar.index&&t.voice.bar.masterBar.tripletFeel!==I.NoTripletFeel||t.voice.bar.masterBar.index>0&&t.voice.bar.masterBar.tripletFeel!==t.voice.bar.masterBar.previousMasterBar.tripletFeel)}createNewGlyph(e,t){return new rr(t.voice.bar.masterBar.tripletFeel)}canExpand(e,t){return!0}}class or extends Ss{get notationElement(){return o.EffectWhammyBar}get hideOnMultiTrack(){return!1}get canShareBand(){return!1}get sizingMode(){return re.GroupedOnBeat}shouldCreateGlyph(e,t){return t.hasWhammyBar}createNewGlyph(e,t){return new Ds("w/bar")}canExpand(e,t){return!0}}class lr extends Ss{get notationElement(){return o.EffectWideBeatVibrato}get hideOnMultiTrack(){return!1}get canShareBand(){return!0}get sizingMode(){return re.GroupedOnBeatToEnd}shouldCreateGlyph(e,t){return t.vibrato===x.Wide}createNewGlyph(e,t){return new qs(x.Wide)}canExpand(e,t){return!0}}class hr extends Is{get notationElement(){return o.EffectWideNoteVibrato}shouldCreateGlyphForNote(e){return e.vibrato===x.Wide||e.isTieDestination&&e.tieOrigin.vibrato===x.Wide}get sizingMode(){return re.GroupedOnBeatToEnd}createNewGlyph(e,t){return new Qs(0,0,x.Wide,1.2)}}class cr extends xn{constructor(e,t,i){super(e,t),this._textRow=0,this._fretRow=0,this._firstFretSpacing=0,this._chord=i}doLayout(){super.doLayout();const e=this.scale;let t=this.renderer.resources;this._textRow=1.5*t.effectFont.size*e,this._fretRow=1.5*t.effectFont.size*e,this._chord.firstFret>1?this._firstFretSpacing=cr.FretSpacing*e:this._firstFretSpacing=0,this.height=this._textRow+this._fretRow+(cr.Frets-1)*cr.FretSpacing*e+2*cr.Padding*e,this.width=this._firstFretSpacing+(this._chord.staff.tuning.length-1)*cr.StringSpacing*e+2*cr.Padding*e}paint(e,t,i){e+=this.x+cr.Padding*this.scale+this._firstFretSpacing,t+=this.y;let n=this.width-2*cr.Padding*this.scale+this.scale-this._firstFretSpacing,s=cr.StringSpacing*this.scale,r=cr.FretSpacing*this.scale,a=this.renderer.resources,o=cr.CircleRadius*this.scale,l=i.textAlign,h=i.textBaseline;i.font=a.effectFont,i.textAlign=E.Center,i.textBaseline=P.Top,this._chord.showName&&i.fillText(this._chord.name,e+this.width/2,t+a.effectFont.size/2),t+=this._textRow,e+=s/2,i.font=a.fretboardNumberFont,i.textBaseline=P.Middle;for(let u=0;u<this._chord.staff.tuning.length;u++){let n=e+u*s,r=t+this._fretRow/2,a=this._chord.strings[this._chord.staff.tuning.length-u-1];a<0?i.fillMusicFontSymbol(n,r,this.scale,C.FretboardX,!0):0===a?i.fillMusicFontSymbol(n,r,this.scale,C.FretboardO,!0):(a-=this._chord.firstFret-1,i.fillText(a.toString(),n,r))}t+=this._fretRow;for(let u=0;u<this._chord.staff.tuning.length;u++){let n=e+u*s;i.fillRect(n,t,1,r*cr.Frets+this.scale)}this._chord.firstFret>1&&(i.textAlign=E.Left,i.fillText(this._chord.firstFret.toString(),e-this._firstFretSpacing,t+r/2)),i.fillRect(e,t-this.scale,n,2*this.scale);for(let u=0;u<=cr.Frets;u++){let s=t+u*r;i.fillRect(e,s,n,this.scale)}let c=new Map;for(let u of this._chord.barreFrets){let e=[-1,-1];c.set(u-this._chord.firstFret,e)}for(let u=0;u<this._chord.strings.length;u++){let n=this._chord.strings[u];if(n>0){if(n-=this._chord.firstFret,c.has(n)){let e=c.get(n);(-1===e[0]||u<e[0])&&(e[0]=u),(-1===e[1]||u>e[1])&&(e[1]=u)}let a=t+n*r+r/2+.5*this.scale,l=e+(this._chord.strings.length-u-1)*s;i.fillCircle(l,a,o)}}for(const[u,d]of c){let n=t+u*r+r/2+.5*this.scale,a=e+(this._chord.strings.length-d[1]-1)*s,l=e+(this._chord.strings.length-d[0]-1)*s;i.fillRect(a,n-o,l-a,2*o)}i.textAlign=l,i.textBaseline=h}}cr.Padding=5,cr.Frets=5,cr.CircleRadius=2.5,cr.StringSpacing=10,cr.FretSpacing=12;class ur extends Zn{constructor(e,t,i=E.Center){super(e,t),this._glyphWidth=0,this.glyphs=[],this._align=i}doLayout(){let e=0;switch(this._align){case E.Left:e=0;break;case E.Center:e=(this.width-this._glyphWidth)/2;break;case E.Right:e=this.width-this._glyphWidth;break}for(let t of this.glyphs)t.x=e,e+=t.width}addGlyphToRow(e){this.glyphs.push(e),this._glyphWidth+=e.width,e.height>this.height&&(this.height=e.height)}}class dr extends Zn{constructor(e,t,i=E.Center){super(e,t),this._rows=[],this.height=0,this.glyphs=[],this._align=i}doLayout(){let e=0,t=0,i=2*dr.Padding*this.scale;this._rows=[];let n=new ur(e,t,this._align);n.width=this.width;for(let s of this.glyphs)e+s.width<this.width?(n.addGlyphToRow(s),e+=s.width):(n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),e=0,n=new ur(e,t,this._align),n.width=this.width,n.addGlyphToRow(s),e+=s.width);n.isEmpty||(n.doLayout(),this._rows.push(n),t+=n.height+i),this.height=t+i}paint(e,t,i){for(let n of this._rows)n.paint(e+this.x,t+this.y+dr.Padding*this.scale,i)}}dr.Padding=3;class pr extends dr{constructor(e,t){super(e,t)}addChord(e){if(e.strings.length>0){let t=new cr(0,0,e);t.renderer=this.renderer,t.doLayout(),this.glyphs.push(t)}}}class fr{constructor(e,t,i){this._sharedLayoutData=new Map,this.barRenderers=[],this.x=0,this.y=0,this.height=0,this.index=0,this.staffIndex=0,this.trackIndex=0,this.staveTop=0,this.topSpacing=20,this.bottomSpacing=5,this.staveBottom=0,this.isFirstInAccolade=!1,this.isLastInAccolade=!1,this._factory=i,this.trackIndex=e,this.modelStaff=t}get staveId(){return this._factory.staffId}getSharedLayoutData(e,t){return this._sharedLayoutData.has(e)?this._sharedLayoutData.get(e):t}setSharedLayoutData(e,t){this._sharedLayoutData.set(e,t)}get isInAccolade(){return this._factory.isInAccolade}get isRelevantForBoundsLookup(){return this._factory.isRelevantForBoundsLookup}registerStaffTop(e){this.staveTop=e}registerStaffBottom(e){this.staveBottom=e}addBarRenderer(e){e.staff=this,e.index=this.barRenderers.length,e.reLayout(),this.barRenderers.push(e),this.staveGroup.layout.registerBarRenderer(this.staveId,e)}addBar(e,t){let i;i=e?this._factory.create(this.staveGroup.layout.renderer,e):new us(this.staveGroup.layout.renderer,e),i.staff=this,i.index=this.barRenderers.length,i.layoutingInfo=t,i.doLayout(),i.registerLayoutingInfo(),this.barRenderers.push(i),e&&this.staveGroup.layout.registerBarRenderer(this.staveId,i)}revertLastBar(){let e=this.barRenderers[this.barRenderers.length-1];return this.barRenderers.splice(this.barRenderers.length-1,1),this.staveGroup.layout.unregisterBarRenderer(this.staveId,e),e}scaleToWidth(e){this._sharedLayoutData=new Map;let t=e-this.staveGroup.width,i=t/this.barRenderers.length;for(let n=0,s=this.barRenderers.length;n<s;n++)this.barRenderers[n].scaleToWidth(this.barRenderers[n].width+i)}get topOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let i=this.barRenderers[t];i.topOverflow>e&&(e=i.topOverflow)}return e}get bottomOverflow(){let e=0;for(let t=0,i=this.barRenderers.length;t<i;t++){let i=this.barRenderers[t];i.bottomOverflow>e&&(e=i.bottomOverflow)}return e}finalizeStaff(){let e=0;this.height=0;let t=this.topOverflow,i=this.bottomOverflow;for(let n=0;n<this.barRenderers.length;n++)this.barRenderers[n].x=e,this.barRenderers[n].y=this.topSpacing+t,this.height=Math.max(this.height,this.barRenderers[n].height),this.barRenderers[n].finalizeRenderer(),e+=this.barRenderers[n].width;this.height>0&&(this.height+=this.topSpacing+t+i+this.bottomSpacing)}paint(e,t,i,n,s){if(0!==this.height&&0!==s)for(let r=n,a=Math.min(n+s,this.barRenderers.length);r<a;r++)this.barRenderers[r].paint(e+this.x,t+this.y,i)}}class gr{constructor(){this.timePosition=0,this.longestDuration=0,this.smallestDuration=0,this.force=0,this.springConstant=0,this.preBeatWidth=0,this.graceBeatWidth=0,this.postSpringWidth=0,this.allDurations=new Set}get springWidth(){return this.preSpringWidth+this.postSpringWidth}get preSpringWidth(){return this.preBeatWidth+this.graceBeatWidth}}class mr{constructor(){this._timeSortedSprings=[],this._xMin=0,this._minTime=-1,this._onTimePositionsForce=0,this._onTimePositions=new Map,this._incompleteGraceRodsWidth=0,this.version=0,this.preBeatSizes=new Map,this.onBeatSizes=new Map,this.onBeatCenterX=new Map,this.preBeatSize=0,this.postBeatSize=0,this.voiceSize=0,this.minStretchForce=0,this.totalSpringConstant=0,this.incompleteGraceRods=new Map,this.allGraceRods=new Map,this.springs=new Map,this.height=0}updateVoiceSize(e){e>this.voiceSize&&(this.voiceSize=e,this.version++)}setPreBeatSize(e,t){(!this.preBeatSizes.has(e.index)||this.preBeatSizes.get(e.index)<t)&&(this.preBeatSizes.set(e.index,t),this.version++)}getPreBeatSize(e){return this.preBeatSizes.has(e.index)?this.preBeatSizes.get(e.index):0}setOnBeatSize(e,t){(!this.onBeatSizes.has(e.index)||this.onBeatSizes.get(e.index)<t)&&(this.onBeatSizes.set(e.index,t),this.version++)}getOnBeatSize(e){return this.onBeatSizes.has(e.index)?this.onBeatSizes.get(e.index):0}getBeatCenterX(e){return this.onBeatCenterX.has(e.index)?this.onBeatCenterX.get(e.index):0}setBeatCenterX(e,t){(!this.onBeatCenterX.has(e.index)||this.onBeatCenterX.get(e.index)<t)&&(this.onBeatCenterX.set(e.index,t),this.version++)}updateMinStretchForce(e){this.minStretchForce<e&&(this.minStretchForce=e)}addSpring(e,t,i,n,s){let r;if(this.version++,this.springs.has(e))r=this.springs.get(e),r.postSpringWidth<s&&(r.postSpringWidth=s),r.graceBeatWidth<i&&(r.graceBeatWidth=i),r.preBeatWidth<n&&(r.preBeatWidth=n),t<r.smallestDuration&&(r.smallestDuration=t),t>r.longestDuration&&(r.longestDuration=t),r.allDurations.add(t);else{if(r=new gr,r.timePosition=e,r.allDurations.add(t),this._timeSortedSprings.length>0){let e=this._timeSortedSprings[this._timeSortedSprings.length-1];for(const t of e.allDurations)e.timePosition}r.longestDuration=t,r.postSpringWidth=s,r.graceBeatWidth=i,r.preBeatWidth=n,this.springs.set(e,r);let a=this._timeSortedSprings,o=a.length-1;while(o>0&&a[o].timePosition>e)o--;this._timeSortedSprings.splice(o+1,0,r)}return(-1===this._minTime||this._minTime>e)&&(this._minTime=e),r}addBeatSpring(e,t,i){let n=e.absoluteDisplayStart;if(e.graceType!==S.None){const s=e.graceGroup.id;this.allGraceRods.has(s)||this.allGraceRods.set(s,new Array(e.graceGroup.beats.length)),e.graceGroup.isComplete||this.incompleteGraceRods.has(s)||this.incompleteGraceRods.set(s,new Array(e.graceGroup.beats.length));let r=this.allGraceRods.get(s)[e.graceIndex];if(r)r.postSpringWidth<i&&(r.postSpringWidth=i),r.preBeatWidth<t&&(r.preBeatWidth=t);else{const r=new gr;r.timePosition=n,r.postSpringWidth=i,r.preBeatWidth=t,e.graceGroup.isComplete||(this.incompleteGraceRods.get(s)[e.graceIndex]=r),this.allGraceRods.get(s)[e.graceIndex]=r}}else{let s=0;if(e.graceGroup&&this.allGraceRods.has(e.graceGroup.id))for(const t of this.allGraceRods.get(e.graceGroup.id))s+=t.springWidth;this.addSpring(n,e.displayDuration,s,t,i)}}finish(){for(const[e,t]of this.allGraceRods){let i=0;if(this.incompleteGraceRods.has(e))for(const e of t)i+=e.preBeatWidth,e.graceBeatWidth=i,i+=e.postSpringWidth;else for(let e=t.length-1;e>=0;e--)t[e].graceBeatWidth=i,i-=t[e].preBeatWidth+t[e].postSpringWidth}this._incompleteGraceRodsWidth=0;for(const e of this.incompleteGraceRods.values())for(const t of e)this._incompleteGraceRodsWidth+=t.preBeatWidth+t.postSpringWidth;this.calculateSpringConstants(),this.version++}calculateSpringConstants(){this._xMin=0;let e=this.springs;for(const n of e.values())n.springWidth<this._xMin&&(this._xMin=n.springWidth);let t=0,i=this._timeSortedSprings;if(0===i.length)return this.totalSpringConstant=-1,void(this.minStretchForce=-1);for(let n=0;n<i.length;n++){let e=i[n],s=0;if(n===i.length-1)s=e.longestDuration;else{let t=i[n+1];s=Math.abs(t.timePosition-e.timePosition)}e.springConstant=this.calculateSpringConstant(e,s),t+=1/e.springConstant}this.totalSpringConstant=1/t,this.minStretchForce=0;for(let n=0;n<i.length;n++){let e=i[n],t=0;if(n===i.length-1)t=e.postSpringWidth;else{let s=i[n+1];t=e.postSpringWidth+s.preSpringWidth}0===n&&(t+=e.preSpringWidth);let s=t*e.springConstant;this.updateMinStretchForce(s)}}paint(e,t,i){}calculateSpringConstant(e,t){t<=0&&(t=ke.toTicks(v.SixtyFourth)),0===e.smallestDuration&&(e.smallestDuration=t);let i=e.smallestDuration,n=1+.85*Math.log2(t/mr.MinDuration);return i/t*(1/(n*mr.MinDurationWidth))}spaceToForce(e){return-1!==this.totalSpringConstant?(this._timeSortedSprings.length>0&&(e-=this._timeSortedSprings[0].preSpringWidth),e-=this._incompleteGraceRodsWidth,Math.max(e,0)*this.totalSpringConstant):-1}calculateVoiceWidth(e){let t=0;return-1!==this.totalSpringConstant&&(t=this.calculateWidth(e,this.totalSpringConstant)),this._timeSortedSprings.length>0&&(t+=this._timeSortedSprings[0].preSpringWidth),t+=this._incompleteGraceRodsWidth,t}calculateWidth(e,t){return e/t}buildOnTimePositions(e){if(-1===this.totalSpringConstant)return new Map;if(ue.isAlmostEqualTo(this._onTimePositionsForce,e)&&this._onTimePositions)return this._onTimePositions;this._onTimePositionsForce=e;let t=new Map;this._onTimePositions=t;let i=this._timeSortedSprings;if(0===i.length)return t;let n=i[0].preSpringWidth;for(let s=0;s<i.length;s++)t.set(i[s].timePosition,n),n+=this.calculateWidth(e,i[s].springConstant);return t}}mr.MinDuration=30,mr.MinDurationWidth=7;class br{constructor(){this.width=0,this.isLinkedToPrevious=!1,this.canWrap=!0,this.renderers=[]}}class yr{constructor(e,t){this.staves=[],this.stavesRelevantForBoundsLookup=[],this.firstStaffInAccolade=null,this.lastStaffInAccolade=null,this.staveGroup=e,this.track=t}addStaff(e){this.staves.push(e),e.isRelevantForBoundsLookup&&this.stavesRelevantForBoundsLookup.push(e)}}class vr{constructor(){this._allStaves=[],this._firstStaffInAccolade=null,this._lastStaffInAccolade=null,this._accoladeSpacingCalculated=!1,this.x=0,this.y=0,this.index=0,this.accoladeSpacing=0,this.isFull=!1,this.width=0,this.isLast=!1,this.masterBarsRenderers=[],this.staves=[]}get firstBarIndex(){return this.masterBarsRenderers[0].masterBar.index}get lastBarIndex(){return this.masterBarsRenderers[this.masterBarsRenderers.length-1].masterBar.index}addMasterBarRenderers(e,t){if(0===e.length)return null;this.masterBarsRenderers.push(t),this.calculateAccoladeSpacing(e),t.layoutingInfo.preBeatSize=0;let i=0;for(let n=0,s=this.staves.length;n<s;n++){let e=this.staves[n];for(let n=0,s=e.staves.length;n<s;n++){let s=e.staves[n],r=t.renderers[i++];s.addBarRenderer(r)}}return this.updateWidth(),t}addBars(e,t){if(0===e.length)return null;let i=new br;i.layoutingInfo=new mr,i.masterBar=e[0].score.masterBars[t],this.masterBarsRenderers.push(i),this.calculateAccoladeSpacing(e);let n=i.layoutingInfo;for(let s of this.staves)for(let e of s.staves){let r=s.track.staves[e.modelStaff.index].bars[t];e.addBar(r,n);let a=e.barRenderers[e.barRenderers.length-1];i.renderers.push(a),a.isLinkedToPrevious&&(i.isLinkedToPrevious=!0),a.canWrap||(i.canWrap=!1)}return n.finish(),i.width=this.updateWidth(),i}revertLastBar(){if(this.masterBarsRenderers.length>1){let e=this.masterBarsRenderers[this.masterBarsRenderers.length-1];this.masterBarsRenderers.splice(this.masterBarsRenderers.length-1,1);let t=0;for(let i=0,n=this._allStaves.length;i<n;i++){let e=this._allStaves[i],n=e.revertLastBar();t=Math.max(t,n.width)}return this.width-=t,e}return null}updateWidth(){let e=0;for(let t=0,i=this._allStaves.length;t<i;t++){let i=this._allStaves[t];i.barRenderers[i.barRenderers.length-1].applyLayoutingInfo(),i.barRenderers[i.barRenderers.length-1].width>e&&(e=i.barRenderers[i.barRenderers.length-1].width)}return this.width+=e,e}calculateAccoladeSpacing(e){if(!this._accoladeSpacingCalculated&&0===this.index)if(this._accoladeSpacingCalculated=!0,this.layout.renderer.settings.notation.isNotationElementVisible(o.TrackNames)){let t=this.layout.renderer.canvas,i=this.layout.renderer.settings.display.resources.effectFont;t.font=i;for(let n of e)this.accoladeSpacing=Math.ceil(Math.max(this.accoladeSpacing,t.measureText(n.shortName)));this.accoladeSpacing*=this.layout.scale,this.accoladeSpacing+=2*vr.AccoladeLabelSpacing*this.layout.scale,this.width+=this.accoladeSpacing}else this.accoladeSpacing=0}getStaveTrackGroup(e){for(let t=0,i=this.staves.length;t<i;t++){let i=this.staves[t];if(i.track===e)return i}return null}addStaff(e,t){let i=this.getStaveTrackGroup(e);i||(i=new yr(this,e),this.staves.push(i)),t.staveTrackGroup=i,t.staveGroup=this,t.index=this._allStaves.length,this._allStaves.push(t),i.addStaff(t),t.isInAccolade&&(this._firstStaffInAccolade||(this._firstStaffInAccolade=t,t.isFirstInAccolade=!0),i.firstStaffInAccolade||(i.firstStaffInAccolade=t),this._lastStaffInAccolade||(this._lastStaffInAccolade=t,t.isLastInAccolade=!0),this._lastStaffInAccolade&&(this._lastStaffInAccolade.isLastInAccolade=!1),this._lastStaffInAccolade=t,this._lastStaffInAccolade.isLastInAccolade=!0,i.lastStaffInAccolade=t)}get height(){return this._allStaves[this._allStaves.length-1].y+this._allStaves[this._allStaves.length-1].height}scaleToWidth(e){for(let t=0,i=this._allStaves.length;t<i;t++)this._allStaves[t].scaleToWidth(e);this.width=e}paint(e,t,i){this.paintPartial(e+this.x,t+this.y,i,0,this.masterBarsRenderers.length)}paintPartial(e,t,i,n,s){this.buildBoundingsLookup(e,t);for(let a=0,o=this._allStaves.length;a<o;a++)this._allStaves[a].paint(e,t,i,n,s);let r=this.layout.renderer.settings.display.resources;if(this.staves.length>0&&0===n){if(i.color=r.barSeparatorColor,this._firstStaffInAccolade&&this._lastStaffInAccolade){let n=t+this._firstStaffInAccolade.y+this._firstStaffInAccolade.staveTop+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow,s=t+this._lastStaffInAccolade.y+this._lastStaffInAccolade.topSpacing+this._lastStaffInAccolade.topOverflow+this._lastStaffInAccolade.staveBottom,r=e+this._firstStaffInAccolade.x;i.beginPath(),i.moveTo(r,n),i.lineTo(r,s),i.stroke()}i.font=r.effectFont;for(let n=0,s=this.staves.length;n<s;n++){let s=this.staves[n];if(s.firstStaffInAccolade&&s.lastStaffInAccolade){let n=t+s.firstStaffInAccolade.y+s.firstStaffInAccolade.staveTop+s.firstStaffInAccolade.topSpacing+s.firstStaffInAccolade.topOverflow,r=t+s.lastStaffInAccolade.y+s.lastStaffInAccolade.topSpacing+s.lastStaffInAccolade.topOverflow+s.lastStaffInAccolade.staveBottom,a=e+s.firstStaffInAccolade.x,l=3*this.layout.renderer.settings.display.scale,h=l,c=n-4*l,u=r+4*l;0===this.index&&this.layout.renderer.settings.notation.isNotationElementVisible(o.TrackNames)&&i.fillText(s.track.shortName,e+vr.AccoladeLabelSpacing*this.layout.scale,n),i.fillRect(a-h-l,c,l,u-c);let d=a-h-l,p=a+2*l;i.beginPath(),i.moveTo(d,c),i.bezierCurveTo(d,c,d,c,p,c-l),i.bezierCurveTo(a,c+l,d,c+l,d,c+l),i.closePath(),i.fill(),i.beginPath(),i.moveTo(d,u),i.bezierCurveTo(d,u,a,u,p,u+l),i.bezierCurveTo(a,u-l,d,u-l,d,u-l),i.closePath(),i.fill()}}}}finalizeGroup(){let e=0;for(let t of this._allStaves)t.x=this.accoladeSpacing,t.y=e,t.finalizeStaff(),e+=t.height}buildBoundingsLookup(e,t){if(this.layout.renderer.boundsLookup.isFinished)return;if(!this._firstStaffInAccolade||!this._lastStaffInAccolade)return;let i=this._allStaves[this._allStaves.length-1],n=t+this.y+this._firstStaffInAccolade.y,s=t+this.y+this._lastStaffInAccolade.y+this._lastStaffInAccolade.height,r=t+this.y+this._allStaves[0].y,a=t+this.y+i.y+i.height,o=t+this.y+this._firstStaffInAccolade.y+this._firstStaffInAccolade.topSpacing+this._firstStaffInAccolade.topOverflow+(this._firstStaffInAccolade.barRenderers.length>0?this._firstStaffInAccolade.barRenderers[0].topPadding:0),l=t+this.y+i.y+i.height-i.bottomSpacing-i.bottomOverflow-(i.barRenderers.length>0?i.barRenderers[0].bottomPadding:0),h=s-n,c=l-o,u=a-r,d=this.x+this._firstStaffInAccolade.x,p=new cn;p.visualBounds=new st,p.visualBounds.x=e,p.visualBounds.y=t+this.y,p.visualBounds.w=this.width,p.visualBounds.h=this.height,p.realBounds=new st,p.realBounds.x=e,p.realBounds.y=t+this.y,p.realBounds.w=this.width,p.realBounds.h=this.height,this.layout.renderer.boundsLookup.addStaveGroup(p);let f=new Map;for(let g=0;g<this.staves.length;g++)for(let e of this.staves[g].stavesRelevantForBoundsLookup)for(let i of e.barRenderers){let s;f.has(i.bar.masterBar.index)?s=f.get(i.bar.masterBar.index):(s=new ln,s.index=i.bar.masterBar.index,s.isFirstOfLine=i.isFirstOfLine,s.realBounds=new st,s.realBounds.x=d+i.x,s.realBounds.y=r,s.realBounds.w=i.width,s.realBounds.h=u,s.visualBounds=new st,s.visualBounds.x=d+i.x,s.visualBounds.y=n,s.visualBounds.w=i.width,s.visualBounds.h=h,s.lineAlignedBounds=new st,s.lineAlignedBounds.x=d+i.x,s.lineAlignedBounds.y=o,s.lineAlignedBounds.w=i.width,s.lineAlignedBounds.h=c,this.layout.renderer.boundsLookup.addMasterBar(s),f.set(s.index,s)),i.buildBoundingsLookup(s,d,t+this.y+e.y)}}getBarX(e){if(!this._firstStaffInAccolade||0===this.layout.renderer.tracks.length)return 0;let t=this.layout.renderer.tracks[0].staves[0].bars[e],i=this.layout.getRendererForBar(this._firstStaffInAccolade.staveId,t);return i.x}}vr.AccoladeLabelSpacing=10;class wr extends Zn{constructor(e,t,i,n){super(e,t),this._tuning=i,this._trackLabel=n,this.glyphs=[]}doLayout(){if(!(this.glyphs.length>0)){this.createGlyphs(this._tuning);for(const e of this.glyphs)e.renderer=this.renderer,e.doLayout()}}createGlyphs(e){const t=this.renderer.scale,i=this.renderer.resources;this.height=0;const n=15*t;this._trackLabel.length>0&&(this.addGlyph(new ks(0,this.height,this._trackLabel,i.effectFont,E.Left)),this.height+=n),this.addGlyph(new ks(0,this.height,e.name,i.effectFont,E.Left));const s=64*t;if(this.renderer.scoreRenderer.canvas.font=i.effectFont,this.width=Math.max(this.renderer.scoreRenderer.canvas.measureText(this._trackLabel)*t,Math.max(this.renderer.scoreRenderer.canvas.measureText(e.name)*t,2*s)),this.height+=n,!e.isStandard){const r=.7,a=wr.CircleNumberHeight*r*t;let o=0|Math.ceil(e.tunings.length/2),l=0,h=this.height;for(let c=0,u=e.tunings.length;c<u;c++){const u=C.GuitarString0+(c+1);this.addGlyph(new Nn(l,h+a/1.2,r,u));const d="= "+Ue.getTextForTuning(e.tunings[c],!1);this.addGlyph(new ks(l+a+1*t,h,d,i.effectFont,E.Left)),h+=n,c===o-1&&(h=this.height,l+=s)}this.height+=o*n}this.width+=15*t}}wr.CircleNumberHeight=20;class Sr extends dr{constructor(e,t){super(e,t,E.Left)}addTuning(e,t){if(e.tunings.length>0){let i=new wr(0,0,e,t);i.renderer=this.renderer,i.doLayout(),this.glyphs.push(i)}}}class _r{constructor(e){this._barRendererLookup=new Map,this.width=0,this.height=0,this.scoreInfoGlyphs=new Map,this.chordDiagrams=null,this.tuningGlyph=null,this.firstBarIndex=0,this.lastBarIndex=0,this.renderer=e}layoutAndRender(){let e=this.renderer.score,t=this.renderer.settings.display.startBar;t--,t=Math.min(e.masterBars.length-1,Math.max(0,t)),this.firstBarIndex=t;let i=this.renderer.settings.display.barCount;i<0&&(i=e.masterBars.length),i=t+i-1,i=Math.min(e.masterBars.length-1,Math.max(0,i)),this.lastBarIndex=i,this.createScoreInfoGlyphs(),this.doLayoutAndRender()}createScoreInfoGlyphs(){Ne.debug("ScoreLayout","Creating score info glyphs");let e=this.renderer.settings.notation,t=this.renderer.score,i=this.renderer.settings.display.resources;this.scoreInfoGlyphs=new Map,t.title&&e.isNotationElementVisible(o.ScoreTitle)&&this.scoreInfoGlyphs.set(o.ScoreTitle,new ks(0,0,t.title,i.titleFont,E.Center)),t.subTitle&&e.isNotationElementVisible(o.ScoreSubTitle)&&this.scoreInfoGlyphs.set(o.ScoreSubTitle,new ks(0,0,t.subTitle,i.subTitleFont,E.Center)),t.artist&&e.isNotationElementVisible(o.ScoreArtist)&&this.scoreInfoGlyphs.set(o.ScoreArtist,new ks(0,0,t.artist,i.subTitleFont,E.Center)),t.album&&e.isNotationElementVisible(o.ScoreAlbum)&&this.scoreInfoGlyphs.set(o.ScoreAlbum,new ks(0,0,t.album,i.subTitleFont,E.Center)),t.music&&t.music===t.words&&e.isNotationElementVisible(o.ScoreWordsAndMusic)?this.scoreInfoGlyphs.set(o.ScoreWordsAndMusic,new ks(0,0,"Music and Words by "+t.words,i.wordsFont,E.Center)):(t.music&&e.isNotationElementVisible(o.ScoreMusic)&&this.scoreInfoGlyphs.set(o.ScoreMusic,new ks(0,0,"Music by "+t.music,i.wordsFont,E.Right)),t.words&&e.isNotationElementVisible(o.ScoreWords)&&this.scoreInfoGlyphs.set(o.ScoreWords,new ks(0,0,"Words by "+t.words,i.wordsFont,E.Left)));const n=new us(this.renderer,this.renderer.tracks[0].staves[0].bars[0]);if(e.isNotationElementVisible(o.GuitarTuning)){let e=[];for(let t of this.renderer.tracks)for(let i of t.staves)if(!i.isPercussion&&i.isStringed&&i.tuning.length>0&&i.showTablature){e.push(i);break}if(e.length>0){this.tuningGlyph=new Sr(0,0),this.tuningGlyph.renderer=n;for(const t of e)this.tuningGlyph.addTuning(t.stringTuning,e.length>1?t.track.name:"")}}if(e.isNotationElementVisible(o.ChordDiagrams)){this.chordDiagrams=new pr(0,0),this.chordDiagrams.renderer=n;let e=new Map;for(let t of this.renderer.tracks)for(let i of t.staves)for(const[t,n]of i.chords)e.has(t)||n.showDiagram&&(e.set(t,n),this.chordDiagrams.addChord(n))}}get scale(){return this.renderer.settings.display.scale}createEmptyStaveGroup(){let e=new vr;e.layout=this;for(let i=0;i<this.renderer.tracks.length;i++){let n=this.renderer.tracks[i],s=!1;for(let e of n.staves)if(e.showStandardNotation){s=!0;break}for(let r=0;r<n.staves.length;r++){let a,o=n.staves[r];if(o.isPercussion)a=t.StaveProfile.Score;else if(this.renderer.settings.display.staveProfile!==t.StaveProfile.Default)a=this.renderer.settings.display.staveProfile;else if(o.showTablature&&o.showStandardNotation)a=t.StaveProfile.ScoreTab;else if(o.showTablature)a=s?t.StaveProfile.TabMixed:t.StaveProfile.Tab;else{if(!o.showStandardNotation)continue;a=t.StaveProfile.Score}let l=to.staveProfiles.get(a);for(let t of l)t.canCreate(n,o)&&e.addStaff(n,new fr(i,o,t))}}return e}registerBarRenderer(e,t){this._barRendererLookup.has(e)||this._barRendererLookup.set(e,new Map),this._barRendererLookup.get(e).set(t.bar.id,t)}unregisterBarRenderer(e,t){if(this._barRendererLookup.has(e)){let i=this._barRendererLookup.get(e);i.delete(t.bar.id)}}getRendererForBar(e,t){let i=t.id;return this._barRendererLookup.has(e)&&this._barRendererLookup.get(e).has(i)?this._barRendererLookup.get(e).get(i):null}renderAnnotation(){let e="rendered by alphaTab",t=this.renderer.canvas,i=this.renderer.settings.display.resources,n=12*this.renderer.settings.display.scale,s=2*n;this.height+=s;let r=this.width/2;t.beginRender(this.width,s),t.color=i.mainGlyphColor,t.font=new me(i.copyrightFont.family,n,l.Plain,h.Bold),t.textAlign=E.Center,t.fillText(e,r,n);let a=t.endRender(),o=new rn;o.width=this.width,o.height=s,o.renderResult=a,o.totalWidth=this.width,o.totalHeight=this.height,o.firstMasterBarIndex=-1,o.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(o)}}class kr{constructor(){this.width=0,this.masterBars=[]}}class Tr extends _r{constructor(e){super(e),this._group=null,this._pagePadding=null}get name(){return"HorizontalScreen"}get supportsResize(){return!1}resize(){}doLayoutAndRender(){this._pagePadding=this.renderer.settings.display.padding,this._pagePadding||(this._pagePadding=Tr.PagePadding),1===this._pagePadding.length?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:2===this._pagePadding.length&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=this.renderer.score,t=this.renderer.canvas,i=this.renderer.settings.display.startBar;i--,i=Math.min(e.masterBars.length-1,Math.max(0,i));let n=i,s=this.renderer.settings.display.barCount;s<=0&&(s=e.masterBars.length),s=i+s-1,s=Math.min(e.masterBars.length-1,Math.max(0,s)),this._group=this.createEmptyStaveGroup(),this._group.isLast=!0,this._group.x=this._pagePadding[0],this._group.y=this._pagePadding[1];let r=this.renderer.settings.display.barCountPerPartial,a=[],o=new kr;while(n<=s){let t=this._group.addBars(this.renderer.tracks,n);if(t)if(0===o.masterBars.length&&t.isLinkedToPrevious&&a.length>0){let i=a[a.length-1];i.masterBars.push(e.masterBars[n]),i.width+=t.width}else o.masterBars.push(e.masterBars[n]),o.width+=t.width,o.masterBars.length>=r&&(0===a.length&&(o.width+=this._group.x+this._group.accoladeSpacing),a.push(o),Ne.debug(this.name,"Finished partial from bar "+o.masterBars[0].index+" to "+o.masterBars[o.masterBars.length-1].index,null),o=new kr);n++}o.masterBars.length>0&&(0===a.length&&(o.width+=this._group.x+this._group.accoladeSpacing),a.push(o),Ne.debug(this.name,"Finished partial from bar "+o.masterBars[0].index+" to "+o.masterBars[o.masterBars.length-1].index,null)),this._group.finalizeGroup(),this.height=this._group.y+this._group.height+this._pagePadding[3],this.width=this._group.x+this._group.width+this._pagePadding[2],n=0;for(let l=0;l<a.length;l++){let e=a[l];t.beginRender(e.width,this.height),t.color=this.renderer.settings.display.resources.mainGlyphColor,t.textAlign=E.Left;let i=this._group.getBarX(e.masterBars[0].index)+this._group.accoladeSpacing;0===l&&(i-=this._group.x+this._group.accoladeSpacing),Ne.debug(this.name,"Rendering partial from bar "+e.masterBars[0].index+" to "+e.masterBars[e.masterBars.length-1].index,null),this._group.paintPartial(-i,this._group.y,this.renderer.canvas,n,e.masterBars.length);let s=t.endRender(),r=new rn;r.totalWidth=this.width,r.totalHeight=this.height,r.width=e.width,r.height=this.height,r.renderResult=s,r.firstMasterBarIndex=e.masterBars[0].index,r.lastMasterBarIndex=e.masterBars[e.masterBars.length-1].index,this.renderer.partialRenderFinished.trigger(r),n+=e.masterBars.length}}}Tr.PagePadding=[20,20,20,20],Tr.GroupSpacing=20;class Br extends _r{constructor(e){super(e),this._groups=[],this._allMasterBarRenderers=[],this._barsFromPreviousGroup=[],this._pagePadding=null}get name(){return"PageView"}doLayoutAndRender(){this._pagePadding=this.renderer.settings.display.padding,this._pagePadding||(this._pagePadding=Br.PagePadding),1===this._pagePadding.length?this._pagePadding=[this._pagePadding[0],this._pagePadding[0],this._pagePadding[0],this._pagePadding[0]]:2===this._pagePadding.length&&(this._pagePadding=[this._pagePadding[0],this._pagePadding[1],this._pagePadding[0],this._pagePadding[1]]);let e=this._pagePadding[0],t=this._pagePadding[1];this.width=this.renderer.width,this._allMasterBarRenderers=[],t=this.layoutAndRenderScoreInfo(e,t,-1),t=this.layoutAndRenderTunings(t,-1),t=this.layoutAndRenderChordDiagrams(t,-1),t=this.layoutAndRenderScore(e,t),this.height=t+this._pagePadding[3]}get supportsResize(){return!0}resize(){let e=this._pagePadding[0],t=this._pagePadding[1];this.width=this.renderer.width;let i=this.height;t=this.layoutAndRenderScoreInfo(e,t,i),t=this.layoutAndRenderTunings(t,i),t=this.layoutAndRenderChordDiagrams(t,i),t=this.resizeAndRenderScore(e,t,i),this.height=t+this._pagePadding[3]}layoutAndRenderTunings(e,t=-1){if(!this.tuningGlyph)return e;let i=this.renderer.settings.display.resources;this.tuningGlyph.width=this.width,this.tuningGlyph.doLayout();let n=this.tuningGlyph.height+11*this.scale;e+=n;let s=this.renderer.canvas;s.beginRender(this.width,n),s.color=i.scoreInfoColor,s.textAlign=E.Center,this.tuningGlyph.paint(this._pagePadding[0],0,s);let r=s.endRender(),a=new rn;return a.width=this.width,a.height=n,a.renderResult=r,a.totalWidth=this.width,a.totalHeight=t<0?e:t,a.firstMasterBarIndex=-1,a.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(a),e}layoutAndRenderChordDiagrams(e,t=-1){if(!this.chordDiagrams)return e;let i=this.renderer.settings.display.resources;this.chordDiagrams.width=this.width,this.chordDiagrams.doLayout();let n=this.renderer.canvas;n.beginRender(this.width,this.chordDiagrams.height),n.color=i.scoreInfoColor,n.textAlign=E.Center,this.chordDiagrams.paint(0,0,n);let s=n.endRender();e+=this.chordDiagrams.height;let r=new rn;return r.width=this.width,r.height=this.chordDiagrams.height,r.renderResult=s,r.totalWidth=this.width,r.totalHeight=t<0?e:t,r.firstMasterBarIndex=-1,r.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(r),e}layoutAndRenderScoreInfo(e,t,i=-1){Ne.debug(this.name,"Layouting score info");let n=this.scale,s=this.renderer.settings.display.resources,r=[o.ScoreTitle,o.ScoreSubTitle,o.ScoreArtist,o.ScoreAlbum,o.ScoreWordsAndMusic];for(let o=0;o<r.length;o++)if(this.scoreInfoGlyphs.has(r[o])){let e=this.scoreInfoGlyphs.get(r[o]);e.x=this.width/2,e.y=t,e.textAlign=E.Center,t+=e.font.size*n}let a=!1,l=0;if(this.scoreInfoGlyphs.has(o.ScoreMusic)){let e=this.scoreInfoGlyphs.get(o.ScoreMusic);e.x=this.width-this._pagePadding[2],e.y=t,e.textAlign=E.Right,a=!0,l=e.font.size*n}if(this.scoreInfoGlyphs.has(o.ScoreWords)){let i=this.scoreInfoGlyphs.get(o.ScoreWords);i.x=e,i.y=t,i.textAlign=E.Left,a=!0,l=i.font.size*n}a&&(t+=l),t+=17*this.scale;let h=this.renderer.canvas;h.beginRender(this.width,t),h.color=s.scoreInfoColor,h.textAlign=E.Center;for(const o of this.scoreInfoGlyphs.values())o.paint(0,0,h);let c=h.endRender(),u=new rn;return u.width=this.width,u.height=t,u.renderResult=c,u.totalWidth=this.width,u.totalHeight=i<0?t:i,u.firstMasterBarIndex=-1,u.lastMasterBarIndex=-1,this.renderer.partialRenderFinished.trigger(u),t}resizeAndRenderScore(e,t,i){let n=this.renderer.canvas;if(-1!==this.renderer.settings.display.barsPerRow)for(let s=0;s<this._groups.length;s++){let e=this._groups[s];this.fitGroup(e),e.finalizeGroup(),t+=this.paintGroup(e,i,n)}else{this._groups=[];let s=0,r=this.maxWidth,a=this.createEmptyStaveGroup();a.index=this._groups.length,a.x=e,a.y=t;while(s<this._allMasterBarRenderers.length){let o=this._allMasterBarRenderers[s];if(a.width+o.width<=r||0===a.masterBarsRenderers.length)a.addMasterBarRenderers(this.renderer.tracks,o),s++;else{while(o&&!o.canWrap&&a.masterBarsRenderers.length>1)o=a.revertLastBar(),s--;a.isFull=!0,a.isLast=this.lastBarIndex===a.lastBarIndex,this._groups.push(a),this.fitGroup(a),a.finalizeGroup(),t+=this.paintGroup(a,i,n),a=this.createEmptyStaveGroup(),a.index=this._groups.length,a.x=e,a.y=t}}a.isLast=this.lastBarIndex===a.lastBarIndex,this.fitGroup(a),a.finalizeGroup(),t+=this.paintGroup(a,i,n)}return t}layoutAndRenderScore(e,t){let i=this.renderer.canvas,n=this.firstBarIndex,s=n,r=this.lastBarIndex;this._groups=[];while(s<=r){let n=this.createStaveGroup(s,r);this._groups.push(n),n.x=e,n.y=t,s=n.lastBarIndex+1,this.fitGroup(n),n.finalizeGroup(),Ne.debug(this.name,"Rendering partial from bar "+n.firstBarIndex+" to "+n.lastBarIndex,null),t+=this.paintGroup(n,t,i)}return t}paintGroup(e,t,i){let n=e.height+20*this.scale;i.beginRender(this.width,n),this.renderer.canvas.color=this.renderer.settings.display.resources.mainGlyphColor,this.renderer.canvas.textAlign=E.Left,e.paint(0,-e.y,i),t+=n;let s=i.endRender(),r=new rn;return r.totalWidth=this.width,r.totalHeight=t,r.width=this.width,r.height=n,r.renderResult=s,r.firstMasterBarIndex=e.firstBarIndex,r.lastMasterBarIndex=e.lastBarIndex,this.renderer.partialRenderFinished.trigger(r),n}fitGroup(e){(e.isFull||e.width>this.maxWidth)&&e.scaleToWidth(this.maxWidth),this.width=Math.max(this.width,e.width)}createStaveGroup(e,t){let i=this.createEmptyStaveGroup();i.index=this._groups.length;let n=this.renderer.settings.display.barsPerRow,s=this.maxWidth,r=t+1,a=e;while(a<r){if(this._barsFromPreviousGroup.length>0)for(let t of this._barsFromPreviousGroup)i.addMasterBarRenderers(this.renderer.tracks,t),a=t.masterBar.index;else{let e=i.addBars(this.renderer.tracks,a);e&&this._allMasterBarRenderers.push(e)}this._barsFromPreviousGroup=[];let e=!1;if((-1===n&&i.width>=s&&0!==i.masterBarsRenderers.length||i.masterBarsRenderers.length===n+1)&&(e=!0),e){let e=i.revertLastBar();if(e){this._barsFromPreviousGroup.push(e);while(e&&!e.canWrap&&i.masterBarsRenderers.length>1)e=i.revertLastBar(),e&&this._barsFromPreviousGroup.push(e)}return i.isFull=!0,i.isLast=!1,this._barsFromPreviousGroup.reverse(),i}i.x=0,a++}return i.isLast=t===i.lastBarIndex,i}get maxWidth(){return this.renderer.width-this._pagePadding[0]-this._pagePadding[2]}}Br.PagePadding=[40,40,40,40],Br.GroupSpacing=20;class xr extends Nn{constructor(e,t,i,n=!1){super(e,t,n?Cn.GraceScale:1,xr.getMusicSymbol(i)),this._isGrace=n,this._accidentalType=i}static getMusicSymbol(e){switch(e){case ie.Natural:return C.AccidentalNatural;case ie.Sharp:return C.AccidentalSharp;case ie.Flat:return C.AccidentalFlat;case ie.NaturalQuarterNoteUp:return C.AccidentalQuarterToneNaturalArrowUp;case ie.SharpQuarterNoteUp:return C.AccidentalQuarterToneSharpArrowUp;case ie.FlatQuarterNoteUp:return C.AccidentalQuarterToneFlatArrowUp;case ie.DoubleSharp:return C.AccidentalDoubleSharp;case ie.DoubleFlat:return C.AccidentalDoubleFlat}return C.None}doLayout(){switch(this._accidentalType){case ie.DoubleFlat:this.width=18;break;default:this.width=8;break}this.width=this.width*(this._isGrace?Cn.GraceScale:1)*this.scale}}class Nr extends Bn{constructor(e,t,i){super(e,t),this._number=0,this._number=i}doLayout(){this.renderer.scoreRenderer.canvas.font=this.renderer.resources.barNumberFont,this.width=this.renderer.scoreRenderer.canvas.measureText(this._number.toString())+5*this.scale}paint(e,t,i){if(!this.renderer.staff.isFirstInAccolade)return;let n=this.renderer.resources,s=i.color;i.color=n.barNumberColor,i.font=n.barNumberFont,i.fillText(this._number.toString(),e+this.x,t+this.y),i.color=s}}class Cr extends Bn{constructor(e,t){super(e,t)}doLayout(){this.renderer.isLast?this.width=15*this.scale:this.renderer.nextRenderer&&this.renderer.nextRenderer.staff===this.renderer.staff&&this.renderer.nextRenderer.bar.masterBar.isRepeatStart?this.width=2*this.scale:(this.width=2*this.scale,this.renderer.bar.masterBar.isDoubleBar&&(this.width+=2*this.scale))}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,r=t+this.y+this.renderer.height-this.renderer.bottomPadding,a=e+this.x,o=r-s;this.renderer.isLast?(i.fillRect(a+this.width-n-n,s,this.scale,o),i.fillRect(a+this.width-n,s,n,o)):this.renderer.nextRenderer&&this.renderer.nextRenderer.staff===this.renderer.staff&&this.renderer.nextRenderer.bar.masterBar.isRepeatStart||(i.fillRect(a+this.width-this.scale,s,this.scale,o),this.renderer.bar.masterBar.isDoubleBar&&i.fillRect(a+this.width-5*this.scale,s,this.scale,o))}}class Er extends Nn{constructor(e,t,i,n){super(e,t,1,Er.getSymbol(i)),this._clef=i,this._clefOttava=n}doLayout(){switch(this._clef){case d.Neutral:this.width=15*this.scale;break;case d.C3:case d.C4:case d.F4:case d.G2:this.width=28*this.scale;break}}static getSymbol(e){switch(e){case d.Neutral:return C.UnpitchedPercussionClef1;case d.C3:return C.CClef;case d.C4:return C.CClef;case d.F4:return C.FClef;case d.G2:return C.GClef;default:return C.None}}paint(e,t,i){let n;super.paint(e,t,i);let s=!1;switch(this._clefOttava){case p._15ma:n=new Nn(-4*this.scale,0,.5,C.Quindicesima),s=!0;break;case p._8va:n=new Nn(-2*this.scale,0,.5,C.Ottava),s=!0;break;case p._8vb:n=new Nn(-6*this.scale,0,.5,C.Ottava);break;case p._15mb:n=new Nn(-8*this.scale,0,.5,C.Quindicesima);break;default:return}let r=0,a=0;switch(this._clef){case d.Neutral:r=s?-12:15,a=0;break;case d.C3:r=s?-19:27,a=0;break;case d.C4:r=s?-19:27,a=0;break;case d.F4:r=s?-9:27,a=-4;break;case d.G2:r=s?-37:30,a=0;break;default:return}n.renderer=this.renderer,n.doLayout();let o=this.width/2;n.paint(e+this.x+o+a*this.scale,t+this.y+r*this.scale,i)}}class Pr extends Bn{constructor(e,t){super(e,t)}doLayout(){this.width=11*this.scale}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,r=t+this.y+this.renderer.height-this.renderer.bottomPadding,a=e+this.x,o=r-s,l=1.5*this.scale,h=(s+r)/2,c=3;i.fillCircle(a,h-l*c,l),i.fillCircle(a,h+l*c,l),a+=4*this.scale,i.beginPath(),i.moveTo(a,s),i.lineTo(a,r),i.stroke(),a+=3*this.scale+.5,i.fillRect(a,s,n,o)}}class Lr extends Bn{constructor(e,t,i){super(e,t),this._count=0,this._count=0,this._count=i}doLayout(){this.width=0}paint(e,t,i){let n=this.renderer.resources,s=i.textAlign;i.font=n.barNumberFont,i.textAlign=E.Right;let r="x"+this._count,a=i.measureText(r)/1.5;i.fillText(r,e+this.x-a,t+this.y),i.textAlign=s}}class Or extends Bn{constructor(e,t,i,n){super(e,t),this._dotOffset=0,this._circleSize=0,this._dotOffset=0,this._circleSize=0,this._dotOffset=n,this._circleSize=i}doLayout(){this.width=13*this.scale}paint(e,t,i){let n=4*this.scale,s=t+this.y+this.renderer.topPadding,r=t+this.y+this.renderer.height-this.renderer.bottomPadding,a=e+this.x+.5,o=r-s;i.fillRect(a,s,n,o),a+=2*n-.5,i.beginPath(),i.moveTo(a,s),i.lineTo(a,r),i.stroke(),a+=3*this.scale;let l=this._circleSize*this.scale,h=(s+r)/2;i.fillCircle(a,h-l*this._dotOffset,l),i.fillCircle(a,h+l*this._dotOffset,l)}}class Fr extends Nn{constructor(e,t,i){super(e,t,1,Fr.getSymbol(i))}static getSymbol(e){switch(e){case c.None:return C.None;case c.Normal:return C.ArticAccentAbove;case c.Heavy:return C.ArticMarcatoAbove;default:return C.None}}doLayout(){this.width=9*this.scale,this.height=9*this.scale}paint(e,t,i){super.paint(e-2*this.scale,t+this.height,i)}}class Mr extends Bn{constructor(e,t,i){super(e,t),this._size=0,this._size=i}doLayout(){this.width=this._size+3*this.scale}paint(e,t,i){i.fillCircle(e+this.x,t+this.y,this._size)}}class Ar extends Nn{constructor(e,t,i){super(e,t,i?Cn.GraceScale:1,C.NoteheadXOrnate),this._isGrace=i}doLayout(){this.width=9*(this._isGrace?Cn.GraceScale:1)*this.scale,this.height=Cn.NoteHeadHeight*this.scale}}class Ir extends Nn{constructor(e,t,i,n){super(e,t,n?Cn.GraceScale:1,Ir.getSymbol(i)),this._isGrace=n}static getSymbol(e){switch(e){case v.QuadrupleWhole:case v.DoubleWhole:case v.Whole:case v.Half:return C.NoteheadDiamondWhiteWide;default:return C.NoteheadDiamondBlackWide}}doLayout(){this.width=9*(this._isGrace?Cn.GraceScale:1)*this.scale,this.height=Cn.NoteHeadHeight*this.scale}}class Dr extends Bn{constructor(e,t,i){super(0,0),this.yOffset=0,this.startNoteRenderer=null,this.endNoteRenderer=null,this.tieDirection=W.Up,this.startBeat=e,this.endBeat=t,this.forEnd=i}doLayout(){this.width=0}paint(e,t,i){if(!this.endBeat)return;let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar);this.startNoteRenderer=n;let s=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.endBeat.voice.bar);this.endNoteRenderer=s;let r=0,a=0,o=0,l=0,h=!1;this.tieDirection=n?this.getBeamDirection(this.startBeat,n):this.getBeamDirection(this.endBeat,s),!this.forEnd&&n?(n!==s?(r=e+n.x+this.getStartX(),o=t+n.y+this.getStartY()+this.yOffset,s&&n.staff===s.staff?(a=e+s.x+this.getEndX(),l=t+s.y+this.getEndY()+this.yOffset):(a=e+n.x+n.width,l=o)):(r=e+n.x+this.getStartX(),a=e+s.x+this.getEndX(),o=t+n.y+this.getStartY()+this.yOffset,l=t+s.y+this.getEndY()+this.yOffset),h=!0):n&&n.staff===s.staff||(r=e+s.x,a=e+s.x+this.getEndX(),o=t+s.y+this.getEndY()+this.yOffset,l=o,h=!0),h&&(this.shouldDrawBendSlur()?Dr.drawBendSlur(i,r,o,a,l,this.tieDirection===W.Down,this.scale):Dr.paintTie(i,this.scale,r,o,a,l,this.tieDirection===W.Down,this.getTieHeight(r,o,a,l),4))}shouldDrawBendSlur(){return!1}getTieHeight(e,t,i,n){return 22}getBeamDirection(e,t){return W.Down}getStartY(){return 0}getEndY(){return 0}getStartX(){return 0}getEndX(){return 0}static paintTie(e,t,i,n,s,r,a=!1,o=22,l=4){if(i===s&&n===r)return;if(s<i){let e=i;i=s,s=e,e=n,n=r,r=e}o*=t,l*=t;let h=r-n,c=s-i,u=Math.sqrt(h*h+c*c);a?h*=-1:c*=-1,h/=u,c/=u;let d=(s+i)/2,p=(r+n)/2,f=d+o*h,g=p+o*c,m=d+(o-l)*h,b=p+(o-l)*c;e.beginPath(),e.moveTo(i,n),e.quadraticCurveTo(f,g,s,r),e.quadraticCurveTo(m,b,i,n),e.closePath(),e.fill()}static drawBendSlur(e,t,i,n,s,r,a,o){let l=s-i,h=n-t,c=Math.sqrt(l*l+h*h);r?l*=-1:h*=-1,l/=c,h/=c;let u=(n+t)/2,d=(s+i)/2,p=Dr.BendSlurHeight*a;n-t<20&&(p/=2);let f=u+p*l,g=d+p*h;if(e.beginPath(),e.moveTo(t,i),e.lineTo(f,g),e.lineTo(n,s),e.stroke(),o){let t=e.measureText(o),i=r?0:-e.font.size;e.fillText(o,f-t/2,g+i)}}}Dr.BendSlurHeight=11;class Rr extends Bn{constructor(e){super(0,0),this._isOpen=e}doLayout(){super.doLayout(),this.width=Rr.Size*this.scale}paint(e,t,i){this._isOpen?Dr.paintTie(i,this.scale,e+this.x+this.width,t+this.y+this.height,e+this.x+this.width,t+this.y,!1,6,3):Dr.paintTie(i,this.scale,e+this.x,t+this.y,e+this.x,t+this.y+this.height,!1,6,3)}}Rr.Size=6;class Vr{constructor(e,t){this.line=0,this.line=e,this.isGhost=t}}class Hr extends Bn{constructor(e){super(0,0),this._infos=[],this._glyphs=[],this.isEmpty=!0,this._isOpen=e}addParenthesis(e){let t=this.renderer,i=t.getNoteLine(e),n=e.isGhost||this.isTiedBend(e)&&t.settings.notation.isNotationElementVisible(o.ParenthesisOnTiedBends);this.addParenthesisOnLine(i,n)}addParenthesisOnLine(e,t){let i=new Vr(e,t);this._infos.push(i),t&&(this.isEmpty=!1)}isTiedBend(e){return!!e.isTieDestination&&(!!e.tieOrigin.hasBend||this.isTiedBend(e.tieOrigin))}doLayout(){let e=this.renderer;this._infos.sort((e,t)=>e.line-t.line);let t=null,i=e.getScoreHeight(1);for(let n=0,s=this._infos.length;n<s;n++){let s;if(this._infos[n].isGhost)if(t){let s=e.getScoreY(this._infos[n].line)+i;t.height=s-t.y}else s=new Rr(this._isOpen),s.renderer=this.renderer,s.y=e.getScoreY(this._infos[n].line)-i,s.height=2*i,s.doLayout(),this._glyphs.push(s),t=s;else t=null}this.width=this._glyphs.length>0?this._glyphs[0].width:0}paint(e,t,i){super.paint(e,t,i);for(let n of this._glyphs)n.paint(e+this.x,t+this.y,i)}}class Gr{constructor(e,t){this.line=0,this.glyph=e,this.line=t}}class Wr extends Bn{constructor(){super(0,0),this._infos=[],this._noteHeadPadding=0,this.minNote=null,this.maxNote=null,this.spacingChanged=new gi,this.upLineX=0,this.downLineX=0,this.displacedX=0,this.noteStartX=0}add(e,t){let i=new Gr(e,t);this._infos.push(i),(!this.minNote||this.minNote.line>i.line)&&(this.minNote=i),(!this.maxNote||this.maxNote.line<i.line)&&(this.maxNote=i)}get hasTopOverflow(){return!!this.minNote&&this.minNote.line<=0}get hasBottomOverflow(){return!!this.maxNote&&this.maxNote.line>8}doLayout(){this._infos.sort((e,t)=>t.line-e.line);let e=0,t=!1,i=0,n=!1,s=this.direction,r=0;for(let a=0,o=this._infos.length;a<o;a++){let o=this._infos[a].glyph;o.renderer=this.renderer,o.doLayout();let l=!1;0===a?e=o.width:Math.abs(i-this._infos[a].line)<=1?t?t=!1:(l=!0,o.x=e,n=!0,t=!0):t=!1,s===W.Down?o.x=l?0:e:o.x=l?e:0,o.x+=this.noteStartX,i=this._infos[a].line,r=Math.max(r,o.x+o.width)}n?(this._noteHeadPadding=0,this.upLineX=e,this.downLineX=e):(this._noteHeadPadding=s===W.Down?-e:0,r+=this._noteHeadPadding,this.upLineX=r,this.downLineX=0),this.displacedX=e,this.width=r}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer,s=3*this.scale,r=this.width-this.noteStartX+2*s;if(this.hasTopOverflow){let a=i.color;i.color=n.resources.staffLineColor;let o=-2;while(o>=this.minNote.line){let a=t+n.getScoreY(o);i.fillRect(e-s+this.noteStartX,a,r,this.scale),o-=2}i.color=a}if(this.hasBottomOverflow){let a=i.color;i.color=n.resources.staffLineColor;let o=10;while(o<=this.maxNote.line){let a=t+n.getScoreY(o);i.fillRect(e-s+this.noteStartX,a,r,this.scale),o+=2}i.color=a}let a=this._infos,o=e+this._noteHeadPadding;for(let l of a)l.glyph.renderer=this.renderer,l.glyph.paint(o,t,i)}}class jr extends Nn{constructor(e,t,i){super(e,t,1,jr.getSymbol(i))}doLayout(){this.width=12*this.scale}static getSymbol(e){switch(e){case v.ThirtySecond:return C.Tremolo3;case v.Sixteenth:return C.Tremolo2;case v.Eighth:return C.Tremolo1;default:return C.None}}}class $r extends Wr{constructor(){super(),this._noteGlyphLookup=new Map,this._notes=[],this._tremoloPicking=null,this.aboveBeatEffects=new Map,this.belowBeatEffects=new Map}get direction(){return this.beamingHelper.direction}getNoteX(e,t){if(this._noteGlyphLookup.has(e.id)){let i=this._noteGlyphLookup.get(e.id),n=this.x+i.x+this._noteHeadPadding;switch(t){case se.Left:break;case se.Center:n+=i.width/2;break;case se.Right:n+=i.width;break}return n}return 0}getNoteY(e,t){if(this._noteGlyphLookup.has(e.id)){const i=this._noteGlyphLookup.get(e.id);let n=this.y+i.y;switch(t){case ne.TopWithStem:n-=this.renderer.getStemSize(this.beamingHelper);break;case ne.Top:n-=i.height/2;break;case ne.Center:break;case ne.Bottom:n+=i.height/2;break;case ne.BottomWithStem:n+=this.renderer.getStemSize(this.beamingHelper);break}return n}return 0}addNoteGlyph(e,t,i){super.add(e,i),this._noteGlyphLookup.set(t.id,e),this._notes.push(t)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.upLineX,e+this.x+this.downLineX)}doLayout(){super.doLayout();let e=this.direction;for(const t of this.aboveBeatEffects.values())t.renderer=this.renderer,t.doLayout();for(const t of this.belowBeatEffects.values())t.renderer=this.renderer,t.doLayout();if(this.beat.isTremolo){let t=0,i=e===W.Up?this.minNote:this.maxNote,n=e===W.Up?this.displacedX:0,s=this.beat.tremoloSpeed;switch(s){case v.ThirtySecond:t=e===W.Up?-15:15;break;case v.Sixteenth:t=e===W.Up?-12:15;break;case v.Eighth:t=e===W.Up?-10:10;break;default:t=e===W.Up?-10:15;break}this._tremoloPicking=new jr(n,i.glyph.y+t*this.scale,s),this._tremoloPicking.renderer=this.renderer,this._tremoloPicking.doLayout()}}buildBoundingsLookup(e,t,i){for(let n of this._notes)if(this._noteGlyphLookup.has(n.id)){let s=this._noteGlyphLookup.get(n.id),r=new hn;r.note=n,r.noteHeadBounds=new st,r.noteHeadBounds.x=t+this.x+this._noteHeadPadding+s.x,r.noteHeadBounds.y=i+this.y+s.y-s.height/2,r.noteHeadBounds.w=s.width,r.noteHeadBounds.h=s.height,e.addNote(r)}}paint(e,t,i){let n=this.renderer,s=0,r=0,a=1,o=-a;this.beamingHelper.direction===W.Up?(r=n.getScoreY(this.minNote.line),s=n.getScoreY(this.maxNote.line-2)):(r=n.getScoreY(this.maxNote.line-1),s=n.getScoreY(this.minNote.line+1),o*=-1,a*=-1);for(const l of this.aboveBeatEffects.values())s+=o*l.height,l.paint(e+this.x+2*this.scale,t+this.y+s,i);for(const l of this.belowBeatEffects.values())r+=a*l.height,l.paint(e+this.x+2*this.scale,t+this.y+r,i);super.paint(e,t,i),this._tremoloPicking&&this._tremoloPicking.paint(e,t,i)}}class zr extends Nn{constructor(e,t,i){super(e,t,1,zr.getSymbol(i)),this._duration=i}static getSymbol(e){switch(e){case v.QuadrupleWhole:return C.RestLonga;case v.DoubleWhole:return C.RestDoubleWhole;case v.Whole:return C.RestWhole;case v.Half:return C.RestHalf;case v.Quarter:return C.RestQuarter;case v.Eighth:return C.RestEighth;case v.Sixteenth:return C.RestSixteenth;case v.ThirtySecond:return C.RestThirtySecond;case v.SixtyFourth:return C.RestSixtyFourth;case v.OneHundredTwentyEighth:return C.RestOneHundredTwentyEighth;case v.TwoHundredFiftySixth:return C.RestTwoHundredFiftySixth;default:return C.None}}static getSize(e){switch(e){case v.QuadrupleWhole:case v.DoubleWhole:case v.Whole:case v.Half:case v.Quarter:case v.Eighth:case v.Sixteenth:return 9;case v.ThirtySecond:return 12;case v.SixtyFourth:return 14;case v.OneHundredTwentyEighth:case v.TwoHundredFiftySixth:return 20}return 10}doLayout(){this.width=zr.getSize(this._duration)*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.registerBeatLineX("score",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class Ur{constructor(){this.x=0,this.y=-3e3,this.width=0}}class Xr extends Zn{constructor(){super(0,0)}doLayout(){if(!this.glyphs||0===this.glyphs.length)return void(this.width=0);this.glyphs.sort((e,t)=>e.y<t.y?-1:e.y>t.y?1:0);let e=[];e.push(new Ur);let t=21*this.scale;for(let i=0,n=this.glyphs.length;i<n;i++){let n=this.glyphs[i];n.renderer=this.renderer,n.doLayout();let s=0;while(e[s].y>n.y)s++,s===e.length&&e.push(new Ur);n.x=s,e[s].y=n.y+t,e[s].width<n.width&&(e[s].width=n.width)}this.width=0;for(const i of e)this.width+=i.width,i.x=this.width;for(let i=0,n=this.glyphs.length;i<n;i++){let t=this.glyphs[i];const n=e[t.x];t.x=this.width-n.x}}}class Yr extends Wr{constructor(e,t=!1){super(),this._showParenthesis=!1,this._noteValueLookup=new Map,this._accidentals=new Xr,this._preNoteParenthesis=null,this._postNoteParenthesis=null,this.isEmpty=!0,this.noteHeadOffset=0,this._beat=e,this._showParenthesis=t,t&&(this._preNoteParenthesis=new Hr(!0),this._postNoteParenthesis=new Hr(!1))}get direction(){return W.Up}containsNoteValue(e){return this._noteValueLookup.has(e)}getNoteValueY(e){return this._noteValueLookup.has(e)?this.y+this._noteValueLookup.get(e).y:0}addGlyph(e,t=!1){let i=this.renderer,n=new Cn(0,0,v.Quarter,!0),s=i.accidentalHelper.applyAccidentalForValue(this._beat,e,t,!0),r=i.accidentalHelper.getNoteLineForValue(e,!1);if(n.y=i.getScoreY(r),this._showParenthesis&&(this._preNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.addParenthesisOnLine(r,!0),this._postNoteParenthesis.addParenthesisOnLine(r,!0)),s!==ie.None){let e=new xr(0,n.y,s,!0);e.renderer=this.renderer,this._accidentals.renderer=this.renderer,this._accidentals.addGlyph(e)}this._noteValueLookup.set(e,n),this.add(n,r),this.isEmpty=!1}doLayout(){let e=0;this._showParenthesis&&(this._preNoteParenthesis.x=e,this._preNoteParenthesis.renderer=this.renderer,this._preNoteParenthesis.doLayout(),e+=this._preNoteParenthesis.width+Yr.ElementPadding*this.scale),this._accidentals.isEmpty||(e+=this._accidentals.width+Yr.ElementPadding*this.scale,this._accidentals.x=e,this._accidentals.renderer=this.renderer,this._accidentals.doLayout(),e+=this._accidentals.width+Yr.ElementPadding*this.scale),this.noteStartX=e,super.doLayout(),this.noteHeadOffset=this.noteStartX+(this.width-this.noteStartX)/2,this._showParenthesis&&(this._postNoteParenthesis.x=this.width+Yr.ElementPadding*this.scale,this._postNoteParenthesis.renderer=this.renderer,this._postNoteParenthesis.doLayout(),this.width+=this._postNoteParenthesis.width+Yr.ElementPadding*this.scale)}paint(e,t,i){this._accidentals.isEmpty||this._accidentals.paint(e+this.x,t+this.y,i),this._showParenthesis&&(this._preNoteParenthesis.paint(e+this.x,t+this.y,i),this._postNoteParenthesis.paint(e+this.x,t+this.y,i)),super.paint(e,t,i)}}Yr.ElementPadding=2;class qr extends Bn{constructor(){super(...arguments),this.BendNoteHeads=[]}drawBendSlur(e,t,i,n,s,r,a,o){Dr.drawBendSlur(e,t,i,n,s,r,a,o)}doLayout(){super.doLayout(),this.width=0;for(let e of this.BendNoteHeads)e.doLayout(),this.width+=e.width+10*this.scale}getTieDirection(e,t){switch(t.getBeatDirection(e)){case W.Up:return W.Down;default:return W.Up}}}qr.EndPadding=8;class Jr extends Te{constructor(e=0,t=0){super(e,t),this.lineValue=0,this.lineValue=t}}class Qr extends Bn{constructor(){super(0,0),this._notes=[],this._renderPoints=new Map,this._preBendMinValue=-1,this._bendMiddleMinValue=-1,this._bendEndMinValue=-1,this._bendEndContinuedMinValue=-1,this._releaseMinValue=-1,this._releaseContinuedMinValue=-1,this._maxBendValue=-1}addBends(e){this._notes.push(e);let t=this.createRenderingPoints(e);this._renderPoints.set(e.id,t),(-1===this._maxBendValue||this._maxBendValue<e.maxBendPoint.value)&&(this._maxBendValue=e.maxBendPoint.value);let i=0;switch(e.bendType){case m.Bend:i=t[1].value,e.isTieOrigin?(-1===this._bendEndContinuedMinValue||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(-1===this._bendEndMinValue||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case m.Release:i=t[1].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case m.BendRelease:i=t[1].value,(-1===this._bendMiddleMinValue||i<this._bendMiddleMinValue)&&(this._bendMiddleMinValue=i),i=t[2].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i);break;case m.Prebend:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i);break;case m.PrebendBend:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(-1===this._bendEndContinuedMinValue||i<this._bendEndContinuedMinValue)&&(this._bendEndContinuedMinValue=i):(-1===this._bendEndMinValue||i<this._bendEndMinValue)&&(this._bendEndMinValue=i);break;case m.PrebendRelease:i=t[0].value,(-1===this._preBendMinValue||i<this._preBendMinValue)&&(this._preBendMinValue=i),i=t[1].value,e.isTieOrigin?(-1===this._releaseContinuedMinValue||i<this._releaseContinuedMinValue)&&(this._releaseContinuedMinValue=i):i>0&&(-1===this._releaseMinValue||i<this._releaseMinValue)&&(this._releaseMinValue=i);break}}doLayout(){super.doLayout();let e=this._maxBendValue*Qr.BendValueHeight*this.scale;this.renderer.registerOverflowTop(e);let t=0;for(let i of this._notes){let e=this._renderPoints.get(i.id);switch(i.bendType){case m.Bend:e[1].lineValue=i.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case m.Release:t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(e[1].lineValue=t);break;case m.BendRelease:e[1].lineValue=this._bendMiddleMinValue,t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(e[2].lineValue=t);break;case m.Prebend:e[0].lineValue=this._preBendMinValue;break;case m.PrebendBend:e[0].lineValue=this._preBendMinValue,e[1].lineValue=i.isTieOrigin?this._bendEndContinuedMinValue:this._bendEndMinValue;break;case m.PrebendRelease:e[0].lineValue=this._preBendMinValue,t=i.isTieOrigin?this._releaseContinuedMinValue:this._releaseMinValue,t>=0&&(e[1].lineValue=t);break}}this.width=0,this._notes.sort((e,t)=>e.isStringed?e.string-t.string:e.realValue-t.realValue)}createRenderingPoints(e){let t=[];switch(e.bendType){case m.Custom:for(let i of e.bendPoints)t.push(new Jr(i.offset,i.value));break;case m.BendRelease:t.push(new Jr(0,e.bendPoints[0].value)),t.push(new Jr(Te.MaxPosition/2|0,e.bendPoints[1].value)),t.push(new Jr(Te.MaxPosition,e.bendPoints[3].value));break;case m.Bend:case m.Hold:case m.Prebend:case m.PrebendBend:case m.PrebendRelease:case m.Release:t.push(new Jr(0,e.bendPoints[0].value)),t.push(new Jr(Te.MaxPosition,e.bendPoints[1].value));break}return t}paint(e,t,i){let n=i.color;this._notes.length>1&&(i.color=this.renderer.resources.secondaryGlyphColor);for(let s of this._notes){let r=this._renderPoints.get(s.id),a=this.renderer,o=s,l=!1,h=null,c=!1,u=s.bendStyle===g.Gradual?"grad.":"",d=null;while(o.isTieOrigin){let e=o.tieDestination;if(h=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,e.beat.voice.bar),!h||a.staff!==h.staff)break;if(o=e,l=!0,o.hasBend||!this.renderer.settings.notation.extendBendArrowsOnTiedNotes){c=!0;break}}d=o.beat,h=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,d.voice.bar),d.isLastOfVoice&&!o.hasBend&&this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&(d=null);let p=0,f=0,b=t+a.y;p=e+a.x,r[0].value>0||s.isContinuedBend?p+=a.getBeatX(s.beat,te.MiddleNotes):p+=a.getNoteX(s,se.Right),f=!d||d.isLastOfVoice&&!c?e+h.x+h.postBeatGlyphsStart:c||!d.nextBeat?e+h.x+h.getBeatX(d,te.MiddleNotes):s.bendType===m.Hold?e+h.x+h.getBeatX(d.nextBeat,te.OnNotes):e+h.x+h.getBeatX(d.nextBeat,te.PreNotes),l||(f-=Qr.ArrowSize*this.scale);let y=f-p,v=y/Te.MaxPosition;i.beginPath();for(let e=0,t=r.length-1;e<t;e++){let t=r[e],n=r[e+1];0!==e||0===t.value||s.isTieDestination||this.paintBend(s,new Jr(0,0),t,p,b,v,u,i),s.bendType!==m.Prebend?(0===e&&(p+=2*this.scale),this.paintBend(s,t,n,p,b,v,u,i)):s.isTieOrigin&&s.tieDestination.hasBend&&(n=new Jr(Te.MaxPosition,t.value),n.lineValue=t.lineValue,this.paintBend(s,t,n,p,b,v,u,i))}i.color=n}}paintBend(e,t,i,n,s,r,a,o){let l=this.renderer,h=this.renderer.resources,c=l.lineOffset/2,u=n+r*t.offset,d=Qr.BendValueHeight*this.scale,p=s-d*t.lineValue;0===t.value?i.offset===t.offset?p+=l.getNoteY(e.beat.maxStringNote,ne.Top):p+=l.getNoteY(e,ne.Center):p+=c;let f=n+r*i.offset,g=s-d*i.lineValue;0===i.lineValue?g+=l.getNoteY(e,ne.Center):g+=c;let m=0,b=Qr.ArrowSize*this.scale;if(i.value>t.value?(g+b>p&&(g=p-b),o.beginPath(),o.moveTo(f,g),o.lineTo(f-.5*b,g+b),o.lineTo(f+.5*b,g+b),o.closePath(),o.fill(),m=b):i.value!==t.value&&(g<p&&(g=p+b),o.beginPath(),o.moveTo(f,g),o.lineTo(f-.5*b,g-b),o.lineTo(f+.5*b,g-b),o.closePath(),o.fill(),m=-b),o.stroke(),t.value===i.value){if(t.lineValue>0){let e=f,t=Qr.DashSize*this.scale,i=u+t,n=(e-u)/(2*t);if(n<1)o.moveTo(e,p),o.lineTo(u,p);else while(e>i)o.moveTo(e,p),o.lineTo(e-t,p),e-=2*t;o.stroke()}}else f>u?(o.moveTo(u,p),o.bezierCurveTo((u+f)/2,p,f,p,f,g+m),o.stroke()):(o.moveTo(u,p),o.lineTo(f,g),o.stroke());if(a&&t.offset<i.offset){o.font=h.graceFont;let e=o.measureText(a),t=0,i=0;if(p>g){let n=Math.abs(p-g);t=n>1.3*o.font.size?p-n/2:p,i=(u+f-e)/2}else t=p,i=f-e;o.fillText(a,i,t)}if(0!==i.value&&t.value!==i.value){let e=i.value,n=i.value>t.value;e=Math.abs(e);let r="";if(4===e)r="full",e-=4;else if(e>=4||e<=-4){let t=e/4|0;r+=t,e-=4*t}if(e>0&&(r+=Qr.getFractionSign(e)),""!==r){g=s-d*i.value;let e=g;n||(e=p+1*Math.abs(g-p)/3),o.font=h.tablatureFont;let t=o.measureText(r),a=e-.5*h.tablatureFont.size-2*this.scale,l=f-t/2;o.fillText(r,l,a)}}}static getFractionSign(e){switch(e){case 1:return"";case 2:return"";case 3:return"";default:return e+"/ 4"}}}Qr.ArrowSize=6,Qr.DashSize=3,Qr.BendValueHeight=6;class Kr extends Bn{constructor(e){super(0,0),this._isSimpleDip=!1,this._beat=e,this._renderPoints=this.createRenderingPoints(e)}createRenderingPoints(e){if(e.whammyBarType===L.Custom)return e.whammyBarPoints;let t=[];switch(e.whammyBarType){case L.Dive:case L.Hold:case L.PrediveDive:case L.Predive:t.push(new Te(0,e.whammyBarPoints[0].value)),t.push(new Te(Te.MaxPosition,e.whammyBarPoints[1].value));break;case L.Dip:t.push(new Te(0,e.whammyBarPoints[0].value)),t.push(new Te(Te.MaxPosition/2|0,e.whammyBarPoints[1].value)),t.push(new Te(Te.MaxPosition,e.whammyBarPoints[e.whammyBarPoints.length-1].value));break}return t}doLayout(){super.doLayout(),this._isSimpleDip=this.renderer.settings.notation.notationMode===t.NotationMode.SongBook&&this._beat.whammyBarType===L.Dip;let e=null,i=null,n=this._beat;while(n&&n.hasWhammyBar)(!e||e.value>n.minWhammyPoint.value)&&(e=n.minWhammyPoint),(!i||i.value<n.maxWhammyPoint.value)&&(i=n.maxWhammyPoint),n=n.nextBeat;let s=i.value>0?Math.abs(this.getOffset(i.value)):0;(s>0||0!==this._beat.whammyBarPoints[0].value||this.renderer.settings.notation.isNotationElementVisible(o.ZerosOnDiveWhammys))&&(s+=2*this.renderer.resources.tablatureFont.size);let r=e.value<0?Math.abs(this.getOffset(e.value)):0;this.renderer.registerOverflowTop(s+r);let a=this.renderer.staff.getSharedLayoutData(Kr.TopOffsetSharedDataKey,-1);s>a&&this.renderer.staff.setSharedLayoutData(Kr.TopOffsetSharedDataKey,s)}getOffset(e){if(0===e)return 0;let t=Kr.PerHalfSize*this.scale+Math.log2(Math.abs(e)/2)*Kr.PerHalfSize*this.scale;return e<0&&(t=-t),t}paint(e,i,n){let s=this.renderer,r=this._beat.nextBeat,a=null,o=te.PreNotes;r&&(a=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,r.voice.bar),a&&a.staff===s.staff&&(a===s||r.hasWhammyBar)?o=!r.hasWhammyBar||s.settings.notation.notationMode===t.NotationMode.SongBook&&r.whammyBarType===L.Dip?te.PreNotes:te.MiddleNotes:(r=null,a=null));let l=0,h=0;this._isSimpleDip?(l=e+s.x+s.getBeatX(this._beat,te.OnNotes)-2*this.scale,h=e+s.x+s.getBeatX(this._beat,te.PostNotes)+2*this.scale):(l=e+s.x+s.getBeatX(this._beat,te.MiddleNotes),h=a?e+a.x+a.getBeatX(r,o):e+s.x+s.width-2*this.scale);let c=n.textAlign;if(n.textAlign=E.Center,this._renderPoints.length>=2){let e=(h-l)/Te.MaxPosition;n.beginPath();let t=i+this.renderer.staff.getSharedLayoutData(Kr.TopOffsetSharedDataKey,0),s=this._beat.whammyStyle===g.Gradual?"grad.":"";for(let i=0,r=this._renderPoints.length-1;i<r;i++){let a=this._renderPoints[i],o=this._renderPoints[i+1],h=i<r-2?this._renderPoints[i+2]:null,c=0===i;0!==i||0===a.value||this._beat.isContinuedWhammy||(this.paintWhammy(!1,new Te(0,0),a,o,l,t,e,n),c=!1),this.paintWhammy(c,a,o,h,l,t,e,n,s),s=""}n.stroke()}n.textAlign=c}paintWhammy(e,t,i,n,s,r,a,l,h){let c=s+a*t.offset,u=s+a*i.offset,d=r-this.getOffset(t.value),p=r-this.getOffset(i.value);if(t.offset===i.offset){let e=Kr.DashSize*this.scale,t=Math.abs(p-d)/(2*e);if(t<1)l.moveTo(c,d),l.lineTo(u,p);else{let t=Math.max(d,p),i=Math.min(d,p);while(t>i)l.moveTo(c,i),l.lineTo(c,i+e),i+=2*e}l.stroke()}else if(t.value===i.value){let e=Kr.DashSize*this.scale,t=Math.abs(u-c)/(2*e);if(t<1)l.moveTo(c,d),l.lineTo(u,p);else{let t=Math.max(c,u),i=Math.min(c,u);while(t>i)l.moveTo(t,d),l.lineTo(t-e,d),t-=2*e}l.stroke()}else l.moveTo(c,d),l.lineTo(u,p);let f=this.renderer.resources;if(e&&!this._beat.isContinuedWhammy&&!this._isSimpleDip){let e=d;e-=f.tablatureFont.size+2*this.scale,this.renderer.settings.notation.isNotationElementVisible(o.ZerosOnDiveWhammys)&&l.fillText("0",c,e),h&&(e-=f.tablatureFont.size+2*this.scale,l.fillText(h,c,e))}let g=Math.abs(i.value);if((0!==g||this.renderer.settings.notation.isNotationElementVisible(o.ZerosOnDiveWhammys)&&!this._isSimpleDip)&&t.value!==i.value){let e="";if(i.value<0&&(e+="-"),g>=4){let t=g/4|0;e+=t,g-=4*t}else 0===g&&(e+="0");g>0&&(e+=Qr.getFractionSign(g));let s=0;this._isSimpleDip?s=Math.min(d,p)-f.tablatureFont.size-2*this.scale:(s=t.offset===i.offset?Math.min(d,p):p,s-=f.tablatureFont.size+2*this.scale,n&&n.value>i.value&&(s-=2*this.scale));let r=u;l.fillText(e,r,s)}}}Kr.TopOffsetSharedDataKey="tab.whammy.topoffset",Kr.PerHalfSize=6,Kr.DashSize=3;class Zr extends qr{constructor(e){super(0,0),this._beat=e}doLayout(){let e=this.renderer.settings.notation.notationMode;switch(this._beat.whammyBarType){case L.None:case L.Custom:case L.Hold:return;case L.Dive:case L.PrediveDive:{let e=new Yr(this._beat,!1);e.renderer=this.renderer;let t=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let i of this._beat.notes)i.isTieOrigin||e.addGlyph(this.getBendNoteValue(i,t),t.value%2!==0);e.doLayout(),this.BendNoteHeads.push(e)}break;case L.Dip:if(e===t.NotationMode.SongBook){let e=this.renderer.resources;this.renderer.simpleWhammyOverflow=1.5*e.tablatureFont.size+Zr.SimpleDipHeight*this.scale+Zr.SimpleDipPadding*this.scale}else{let e=new Yr(this._beat,!1);if(e.renderer=this.renderer,this.renderer.settings.notation.notationMode===t.NotationMode.GuitarPro){let t=this._beat.whammyBarPoints[1];for(let i of this._beat.notes)e.addGlyph(this.getBendNoteValue(i,this._beat.whammyBarPoints[1]),t.value%2!==0)}e.doLayout(),this.BendNoteHeads.push(e);let i=new Yr(this._beat,!1);if(i.renderer=this.renderer,this.renderer.settings.notation.notationMode===t.NotationMode.GuitarPro){let e=this._beat.whammyBarPoints[this._beat.whammyBarPoints.length-1];for(let t of this._beat.notes)i.addGlyph(this.getBendNoteValue(t,e),e.value%2!==0)}i.doLayout(),this.BendNoteHeads.push(i)}break;case L.Predive:break}super.doLayout()}paint(e,i,n){let s=this._beat;switch(s.whammyBarType){case L.None:case L.Custom:return}let r=this.renderer.settings.notation.notationMode,a=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,s.voice.bar),o=e+a.x+a.getBeatX(s,te.MiddleNotes),l=this.getTieDirection(s,a),h=1===this._beat.notes.length?l:W.Up,c=n.textAlign;for(let u=0;u<s.notes.length;u++){let c=s.notes[u],d=i+a.y;u>0&&u>=(this._beat.notes.length/2|0)&&(h=W.Down),h===W.Down?d+=a.getNoteY(c,ne.Bottom):d+=a.getNoteY(c,ne.Top);let p=e+a.x;s.isLastOfVoice?p+=a.width:p+=a.getBeatX(s,te.EndBeat),p-=8*this.scale;let f=s.whammyStyle===g.Gradual&&0===u?"grad.":"",m=null;c.isTieOrigin&&(m=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,c.tieDestination.beat.voice.bar),m&&m.staff===a.staff?p=e+m.x+m.getBeatX(c.tieDestination.beat,te.MiddleNotes):m=null);let b=Cn.NoteHeadHeight*this.scale*Cn.GraceScale*.5;h===W.Up&&(b=-b);let y=s.whammyBarPoints.length>0?this.getBendNoteValue(c,s.whammyBarPoints[s.whammyBarPoints.length-1]):0,v=0,w=!1;switch(this.BendNoteHeads.length>0&&this.BendNoteHeads[0].containsNoteValue(y)?(v=this.BendNoteHeads[0].getNoteValueY(y)+b,w=!0):m&&(c.isTieOrigin&&c.tieDestination.beat.hasWhammyBar||c.beat.isContinuedWhammy)?(v=i+m.y+m.getNoteY(c.tieDestination,ne.Top),w=!0,h===W.Down&&(v+=Cn.NoteHeadHeight*this.scale)):c.isTieOrigin&&(v=m?i+m.y+m.getNoteY(c.tieDestination,ne.Top):d,h===W.Down&&(v+=Cn.NoteHeadHeight*this.scale)),s.whammyBarType){case L.Hold:c.isTieOrigin&&Dr.paintTie(n,this.scale,o,d,p,v,l===W.Down,22,4);break;case L.Dive:0===u&&(this.BendNoteHeads[0].x=p-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+a.y,this.BendNoteHeads[0].paint(0,0,n),this.BendNoteHeads[0].containsNoteValue(y)&&(v+=this.BendNoteHeads[0].y)),w?this.drawBendSlur(n,o,d,p,v,h===W.Down,this.scale,f):c.isTieOrigin&&Dr.paintTie(n,this.scale,o,d,p,v,l===W.Down,22,4);break;case L.Dip:if(r===t.NotationMode.SongBook){if(0===u){let t=e+a.x+a.getBeatX(this._beat,te.OnNotes)-2*this.scale,s=e+a.x+a.getBeatX(this._beat,te.PostNotes)+2*this.scale,r=(t+s)/2,o=((this._beat.whammyBarPoints[1].value-this._beat.whammyBarPoints[0].value)/4|0).toString();n.font=this.renderer.resources.tablatureFont,n.fillText(o,r,i+this.y);let l=i+this.y+n.font.size+2*this.scale,h=l+Zr.SimpleDipHeight*this.scale;this._beat.whammyBarPoints[1].value>this._beat.whammyBarPoints[0].value?(n.moveTo(t,h),n.lineTo(r,l),n.lineTo(s,h)):(n.moveTo(t,l),n.lineTo(r,h),n.lineTo(s,l)),n.stroke()}c.isTieOrigin&&Dr.paintTie(n,this.scale,o,d,p,v,l===W.Down,22,4)}else{let e=(o+p)/2;this.BendNoteHeads[0].x=e-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+a.y,this.BendNoteHeads[0].paint(0,0,n);let t=this.getBendNoteValue(c,s.whammyBarPoints[1]),r=this.BendNoteHeads[0].getNoteValueY(t)+b;this.drawBendSlur(n,o,d,e,r,h===W.Down,this.scale,f),this.BendNoteHeads[1].x=p-this.BendNoteHeads[1].noteHeadOffset,this.BendNoteHeads[1].y=i+a.y,this.BendNoteHeads[1].paint(0,0,n),v=this.BendNoteHeads[1].getNoteValueY(y)+b,this.drawBendSlur(n,e,r,p,v,h===W.Down,this.scale,f)}break;case L.PrediveDive:case L.Predive:let g=e+a.x+a.getBeatX(c.beat,te.PreNotes);g+=a.getPreNotesGlyphForBeat(c.beat).prebendNoteHeadOffset;let m=i+a.y+a.getScoreY(a.accidentalHelper.getNoteLineForValue(c.displayValue-(c.beat.whammyBarPoints[0].value/2|0),!1))+b;this.drawBendSlur(n,g,m,o,d,h===W.Down,this.scale,f),this.BendNoteHeads.length>0&&(this.BendNoteHeads[0].x=p-this.BendNoteHeads[0].noteHeadOffset,this.BendNoteHeads[0].y=i+a.y,this.BendNoteHeads[0].paint(0,0,n),this.drawBendSlur(n,o,d,p,v,h===W.Down,this.scale,f));break}}n.textAlign=c}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}Zr.SimpleDipHeight=2*Kr.PerHalfSize,Zr.SimpleDipPadding=2;class ea extends Bn{constructor(e,t,i){super(e,t),this.width=i}}class ta extends Nn{constructor(e,t,i,n,s){super(e,t,s?Cn.GraceScale:1,i.getSymbol(n)),this._isGrace=s,this._articulation=i}paint(e,t,i){let n=this._isGrace?this.scale:0;i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this.symbol,!1),this._articulation.techniqueSymbol!==C.None&&this._articulation.techniqueSymbolPlacement===P.Middle&&i.fillMusicFontSymbol(e+this.x,t+this.y+n,this.glyphScale*this.scale,this._articulation.techniqueSymbol,!1)}doLayout(){let e=(this._isGrace?Cn.GraceScale:1)*this.scale;switch(this.symbol){case C.NoteheadWhole:this.width=14;break;case C.NoteheadCircleX:case C.NoteheadDiamondWhite:this.width=9;break;case C.NoteheadHeavyXHat:case C.NoteheadHeavyX:this.width=13;break;default:this.width=10;break}this.width=this.width*(this._isGrace?Cn.GraceScale:1)*this.scale,this.height=Cn.NoteHeadHeight*e}}class ia extends Nn{constructor(e,t){super(e,t,Cn.GraceScale,C.ArticStaccatoAbove)}doLayout(){this.width=Cn.QuarterNoteHeadWidth*this.scale,this.height=7*this.scale}paint(e,t,i){super.paint(e+3*this.scale,t+5*this.scale,i)}}class na extends Nn{constructor(e,t){super(e,t,.5,C.PictEdgeOfCymbal)}doLayout(){this.width=22*this.scale,this.height=15*this.scale}paint(e,t,i){super.paint(e-3*this.scale,t+this.height,i)}}class sa extends Nn{constructor(e,t){super(e,t,Cn.GraceScale,C.GuitarGolpe)}doLayout(){this.width=9*this.scale,this.height=10*this.scale}paint(e,t,i){super.paint(e,t+this.height,i)}}class ra extends bs{constructor(){super(...arguments),this._collisionOffset=-1e3,this._skipPaint=!1,this.noteHeads=null,this.restGlyph=null}getNoteX(e,t){return this.noteHeads?this.noteHeads.getNoteX(e,t):0}buildBoundingsLookup(e,t,i){this.noteHeads&&this.noteHeads.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteY(e,t){return this.noteHeads?this.noteHeads.getNoteY(e,t):0}updateBeamingHelper(){if(this.noteHeads)this.noteHeads.updateBeamingHelper(this.container.x+this.x);else if(this.restGlyph&&(this.restGlyph.updateBeamingHelper(this.container.x+this.x),this.renderer.bar.isMultiVoice&&-1e3===this._collisionOffset)){this._collisionOffset=this.renderer.helpers.collisionHelper.applyRestCollisionOffset(this.container.beat,this.restGlyph.y,this.renderer.getScoreHeight(1)),this.y+=this._collisionOffset;const e=this.renderer.helpers.collisionHelper.restDurationsByDisplayTime;e.has(this.container.beat.playbackStart)&&e.get(this.container.beat.playbackStart).has(this.container.beat.playbackDuration)&&e.get(this.container.beat.playbackStart).get(this.container.beat.playbackDuration)!==this.container.beat.id&&(this._skipPaint=!0)}}paint(e,t,i){this._skipPaint||super.paint(e,t,i)}doLayout(){let e=this.renderer;if(!this.container.beat.isEmpty)if(this.container.beat.isRest){let t=2*Math.ceil((this.renderer.bar.staff.standardNotationLineCount-1)/2);this.container.beat.duration===v.Whole&&1!==this.renderer.bar.staff.standardNotationLineCount&&3!==this.renderer.bar.staff.standardNotationLineCount&&(t-=2);const i=new zr(0,e.getScoreY(t),this.container.beat.duration);if(this.restGlyph=i,i.beat=this.container.beat,i.beamingHelper=this.beamingHelper,this.addGlyph(i),this.renderer.bar.isMultiVoice)if(0===this.container.beat.voice.index){const t=as.computeLineHeightsForRest(this.container.beat.duration);let n=i.y-e.getScoreHeight(t[0]),s=i.y+e.getScoreHeight(t[1]);this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,n,s)}else this.renderer.helpers.collisionHelper.registerRest(this.container.beat);if(this.beamingHelper&&this.beamingHelper.applyRest(this.container.beat,t),this.container.beat.dots>0){this.addGlyph(new ea(0,0,5*this.scale));for(let e=0;e<this.container.beat.dots;e++){let e=new Zn(0,0);e.renderer=this.renderer,this.createBeatDot(t,e),this.addGlyph(e)}}}else{const t=new $r;this.noteHeads=t,t.beat=this.container.beat,t.beamingHelper=this.beamingHelper;let i=new Hr(!1);i.renderer=this.renderer;for(let e of this.container.beat.notes)e.isVisible&&(this.createNoteGlyph(e),i.addParenthesis(e));if(this.addGlyph(t),i.isEmpty||(this.addGlyph(new ea(0,0,4*(this.container.beat.graceType!==S.None?Cn.GraceScale:1)*this.scale)),this.addGlyph(i)),this.container.beat.hasWhammyBar){let e=new Zr(this.container.beat);e.renderer=this.renderer,e.doLayout(),this.container.ties.push(e)}if(this.container.beat.dots>0){this.addGlyph(new ea(0,0,5*this.scale));for(let t=0;t<this.container.beat.dots;t++){let t=new Zn(0,0);t.renderer=this.renderer;for(let i of this.container.beat.notes)this.createBeatDot(e.getNoteLine(i),t);this.addGlyph(t)}}}super.doLayout(),this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteHeads.x+this.noteHeads.width/2}createBeatDot(e,t){let i=this.renderer;t.addGlyph(new Mr(0,i.getScoreY(e),1.5*this.scale))}createNoteHeadGlyph(e){let t=this.container.beat.graceType!==S.None;if(e.beat.voice.bar.staff.isPercussion){const i=Ee.getArticulation(e);if(i)return new ta(0,0,i,e.beat.duration,t);Ne.warning("Rendering","No articulation found for percussion instrument "+e.percussionArticulation)}return e.isDead?new Ar(0,0,t):e.beat.graceType===S.BendGrace?new Cn(0,0,v.Quarter,!0):e.harmonicType===_.Natural?new Ir(0,0,e.beat.duration,t):new Cn(0,0,e.beat.duration,t)}createNoteGlyph(e){if(e.beat.graceType===S.BendGrace&&!e.hasBend)return;let t=this.renderer,i=this.createNoteHeadGlyph(e),n=t.getNoteLine(e);if(i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n),e.harmonicType!==_.None&&e.harmonicType!==_.Natural){let s=e.displayValue+e.harmonicPitch;i=new Ir(0,0,e.beat.duration,this.container.beat.graceType!==S.None),n=t.accidentalHelper.getNoteLineForValue(s,!1),i.y=t.getScoreY(n),this.noteHeads.addNoteGlyph(i,e,n)}if(e.isStaccato&&!this.noteHeads.aboveBeatEffects.has("Staccato")&&this.noteHeads.belowBeatEffects.set("Staccato",new ia(0,0)),e.accentuated!==c.Normal||this.noteHeads.aboveBeatEffects.has("Accent")||this.noteHeads.belowBeatEffects.set("Accent",new Fr(0,0,c.Normal)),e.accentuated!==c.Heavy||this.noteHeads.aboveBeatEffects.has("HAccent")||this.noteHeads.belowBeatEffects.set("HAccent",new Fr(0,0,c.Heavy)),e.isPercussion){const t=Ee.getArticulation(e);if(t&&t.techniqueSymbolPlacement!==P.Middle){const e=t.techniqueSymbolPlacement===P.Top?this.noteHeads.aboveBeatEffects:this.noteHeads.belowBeatEffects;switch(t.techniqueSymbol){case C.PictEdgeOfCymbal:e.set("PictEdgeOfCymbal",new na(0,0));break;case C.ArticStaccatoAbove:e.set("ArticStaccatoAbove",new ia(0,0));break;case C.StringsUpBow:e.set("StringsUpBow",new Xs(0,0,N.Up));break;case C.StringsDownBow:e.set("StringsDownBow",new Xs(0,0,N.Down));break;case C.GuitarGolpe:e.set("GuitarGolpe",new sa(0,0));break}}}}}class aa extends Bn{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=10*this.scale}paint(e,t,i){let n=this.renderer,s=n.lineOffset,r=t+this.y+(n.getNoteY(this._beat.maxNote,ne.Bottom)-s),a=t+this.y+n.getNoteY(this._beat.minNote,ne.Top)+s,o=e+this.x+this.width/2,l=8*this.scale;if(this._beat.brushType!==b.None){let t=new Qs(0,0,x.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=-t.height/2;if(this._beat.brushType===b.ArpeggioUp){let s=r+l,h=a-l;t.width=Math.abs(h-s),i.beginRotate(e+this.x+5*this.scale,h,-90),t.paint(0,n,i),i.endRotate(),i.beginPath(),i.moveTo(o,a),i.lineTo(o+l/2,a-l),i.lineTo(o-l/2,a-l),i.closePath(),i.fill()}else if(this._beat.brushType===b.ArpeggioDown){let s=r+l,h=a;t.width=Math.abs(h-s),i.beginRotate(e+this.x+5*this.scale,s,90),t.paint(0,n,i),i.endRotate(),i.beginPath(),i.moveTo(o,r),i.lineTo(o+l/2,r+l),i.lineTo(o-l/2,r+l),i.closePath(),i.fill()}}}}class oa extends ms{constructor(){super(),this._prebends=null,this.accidentals=null}get prebendNoteHeadOffset(){return this._prebends?this._prebends.x+this._prebends.noteHeadOffset:0}doLayout(){if(!this.container.beat.isRest){let e=new Xr;e.renderer=this.renderer;let t=new Hr(!0);t.renderer=this.renderer;const i=new Yr(this.container.beat,!0);this._prebends=i,i.renderer=this.renderer;for(let n of this.container.beat.notes)if(n.isVisible){if(n.hasBend)switch(n.bendType){case m.PrebendBend:case m.Prebend:case m.PrebendRelease:i.addGlyph(n.displayValue-(n.bendPoints[0].value/2|0),!1);break}else if(n.beat.hasWhammyBar)switch(n.beat.whammyBarType){case L.PrediveDive:case L.Predive:this._prebends.addGlyph(n.displayValue-(n.beat.whammyBarPoints[0].value/2|0),!1);break}this.createAccidentalGlyph(n,e),t.addParenthesis(n)}i.isEmpty||(this.addGlyph(i),this.addGlyph(new ea(0,0,4*(this.container.beat.graceType!==S.None?Cn.GraceScale:1)*this.scale))),this.container.beat.brushType!==b.None&&(this.addGlyph(new aa(this.container.beat)),this.addGlyph(new ea(0,0,4*this.scale))),t.isEmpty||(this.addGlyph(t),this.addGlyph(new ea(0,0,4*(this.container.beat.graceType!==S.None?Cn.GraceScale:1)*this.scale))),e.isEmpty||(this.accidentals=e,this.addGlyph(new ea(0,0,2*(this.container.beat.graceType!==S.None?Cn.GraceScale:1)*this.scale)),this.addGlyph(e),this.addGlyph(new ea(0,0,2*(this.container.beat.graceType!==S.None?Cn.GraceScale:1)*this.scale)))}super.doLayout()}createAccidentalGlyph(e,t){let i=this.renderer,n=i.accidentalHelper.applyAccidental(e),s=i.getNoteLine(e),r=this.container.beat.graceType!==S.None;if(n!==ie.None){let e=new xr(0,i.getScoreY(s),n,r);e.renderer=this.renderer,t.addGlyph(e)}if(e.harmonicType!==_.None&&e.harmonicType!==_.Natural){let a=e.displayValue+e.harmonicPitch;n=i.accidentalHelper.applyAccidentalForValue(e.beat,a,r,!1),s=i.accidentalHelper.getNoteLineForValue(a,!1);let o=new xr(0,i.getScoreY(s),n,r);o.renderer=this.renderer,t.addGlyph(o)}}}class la extends Nn{constructor(e,t,i,n){super(e,t,n,la.getSymbol(i)),this._digit=0,this._scale=0,this._digit=i,this._scale=n}doLayout(){this.width=this.getDigitWidth(this._digit)*this.scale*this._scale}getDigitWidth(e){switch(e){case 0:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:return 14;case 1:return 10;default:return 0}}static getSymbol(e){switch(e){case 0:return C.TimeSig0;case 1:return C.TimeSig1;case 2:return C.TimeSig2;case 3:return C.TimeSig3;case 4:return C.TimeSig4;case 5:return C.TimeSig5;case 6:return C.TimeSig6;case 7:return C.TimeSig7;case 8:return C.TimeSig8;case 9:return C.TimeSig9;default:return C.None}}}class ha extends Zn{constructor(e,t,i,n=1){super(e,t),this._number=0,this._scale=0,this._number=i,this._scale=n}doLayout(){let e=this._number;while(e>0){let t=e%10,i=new la(0,0,t,this._scale);this.addGlyph(i),e=e/10|0}if(this.glyphs){this.glyphs.reverse();let e=0;for(let t=0,i=this.glyphs.length;t<i;t++){let i=this.glyphs[t];i.x=e,i.y=0,i.renderer=this.renderer,i.doLayout(),e+=i.width}this.width=e}}}ha.numberHeight=18;class ca extends Zn{constructor(e,t,i,n,s){super(e,t),this._numerator=0,this._denominator=0,this._numerator=i,this._denominator=n,this._isCommon=s}doLayout(){if(this._isCommon&&2===this._numerator&&2===this._denominator){let e=new Nn(0,0,this.commonScale,C.TimeSigCutCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else if(this._isCommon&&4===this._numerator&&4===this._denominator){let e=new Nn(0,0,this.commonScale,C.TimeSigCommon);e.width=14*this.scale,this.addGlyph(e),super.doLayout()}else{const e=ha.numberHeight*this.scale;let t=new ha(0,-e/2,this._numerator,this.numberScale),i=new ha(0,e/2,this._denominator,this.numberScale);this.addGlyph(t),this.addGlyph(i),super.doLayout();for(let n=0,s=this.glyphs.length;n<s;n++){let e=this.glyphs[n];e.x=(this.width-e.width)/2}}}}class ua extends ca{get commonScale(){return 1}get numberScale(){return 1}}class da extends qr{constructor(e){super(0,0),this._notes=[],this._endNoteGlyph=null,this._middleNoteGlyph=null,this._beat=e}addBends(e){if(this._notes.push(e),!e.isTieOrigin)switch(e.bendType){case m.Bend:case m.PrebendRelease:case m.PrebendBend:{let t=this._endNoteGlyph;t||(t=new Yr(e.beat,!1),t.renderer=this.renderer,this._endNoteGlyph=t,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!==0)}break;case m.Release:if(!e.isTieOrigin){let t=this._endNoteGlyph;t||(t=new Yr(e.beat,!1),t.renderer=this.renderer,this._endNoteGlyph=t,this.BendNoteHeads.push(t));let i=e.bendPoints[e.bendPoints.length-1];t.addGlyph(this.getBendNoteValue(e,i),i.value%2!==0)}break;case m.BendRelease:{let t=this._middleNoteGlyph;t||(t=new Yr(e.beat,!1),this._middleNoteGlyph=t,t.renderer=this.renderer,this.BendNoteHeads.push(t));let i=e.bendPoints[1];t.addGlyph(this.getBendNoteValue(e,e.bendPoints[1]),i.value%2!==0);let n=this._endNoteGlyph;n||(n=new Yr(e.beat,!1),n.renderer=this.renderer,this._endNoteGlyph=n,this.BendNoteHeads.push(n));let s=e.bendPoints[e.bendPoints.length-1];n.addGlyph(this.getBendNoteValue(e,s),s.value%2!==0)}break}}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._beat.voice.bar),s=e+n.x+n.getBeatX(this._beat,te.MiddleNotes),r=e+n.x;this._beat.isLastOfVoice?r+=n.postBeatGlyphsStart:r+=n.getBeatX(this._beat.nextBeat,te.PreNotes),r-=8*this.scale;let a=(s+r)/2;this._middleNoteGlyph&&(this._middleNoteGlyph.x=a-this._middleNoteGlyph.noteHeadOffset,this._middleNoteGlyph.y=t+n.y,this._middleNoteGlyph.paint(0,0,i)),this._endNoteGlyph&&(this._endNoteGlyph.x=r-this._endNoteGlyph.noteHeadOffset,this._endNoteGlyph.y=t+n.y,this._endNoteGlyph.paint(0,0,i)),this._notes.sort((e,t)=>t.displayValue-e.displayValue);let o=this._beat.graceType===S.BendGrace?this._beat.nextBeat:this._beat,l=1===this._notes.length?this.getTieDirection(o,n):W.Up;for(let h=0;h<this._notes.length;h++){let o=this._notes[h];h>0&&h>=(this._notes.length/2|0)&&(l=W.Down);let c=t+n.y+n.getNoteY(o,ne.Top),u=Cn.NoteHeadHeight*this.scale*Cn.GraceScale*.5;l===W.Down&&(c+=Cn.NoteHeadHeight*this.scale);let d=o.bendStyle===g.Gradual?"grad.":"";if(o.isTieOrigin){let r=o.tieDestination,a=r?this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,r.beat.voice.bar):null;if(a&&a.staff===n.staff){let n=e+a.x+a.getBeatX(r.beat,te.MiddleNotes),h=t+a.y+a.getNoteY(r,ne.Top);l===W.Down&&(h+=Cn.NoteHeadHeight*this.scale),o.bendType===m.Hold||o.bendType===m.Prebend?Dr.paintTie(i,this.scale,s,c,n,h,l===W.Down,22,4):this.drawBendSlur(i,s,c,n,h,l===W.Down,this.scale,d)}else{let r=e+n.x+n.width,a=o.tieDestination.realValue;n.accidentalHelper.applyAccidentalForValue(o.beat,a,!1,!0);let h=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(a,!1));o.bendType===m.Hold||o.bendType===m.Prebend?Dr.paintTie(i,this.scale,s,c,r,h,l===W.Down,22,4):this.drawBendSlur(i,s,c,r,h,l===W.Down,this.scale,d)}switch(o.bendType){case m.Prebend:case m.PrebendBend:case m.PrebendRelease:let r=e+n.x+n.getBeatX(o.beat,te.PreNotes);r+=n.getPreNotesGlyphForBeat(o.beat).prebendNoteHeadOffset;let a=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(o.displayValue-(o.bendPoints[0].value/2|0),!1))+u;this.drawBendSlur(i,r,a,s,c,l===W.Down,this.scale);break}}else{l===W.Up&&(u=-u);let h=0,p=0;switch(o.bendType){case m.Bend:h=this.getBendNoteValue(o,o.bendPoints[o.bendPoints.length-1]),p=this._endNoteGlyph.getNoteValueY(h)+u,this.drawBendSlur(i,s,c,r,p,l===W.Down,this.scale,d);break;case m.BendRelease:let f=this.getBendNoteValue(o,o.bendPoints[1]),g=this._middleNoteGlyph.getNoteValueY(f)+u;this.drawBendSlur(i,s,c,a,g,l===W.Down,this.scale,d),h=this.getBendNoteValue(o,o.bendPoints[o.bendPoints.length-1]),p=this._endNoteGlyph.getNoteValueY(h)+u,this.drawBendSlur(i,a,g,r,p,l===W.Down,this.scale,d);break;case m.Release:this.BendNoteHeads.length>0&&(h=this.getBendNoteValue(o,o.bendPoints[o.bendPoints.length-1]),p=this.BendNoteHeads[0].getNoteValueY(h)+u,this.drawBendSlur(i,s,c,r,p,l===W.Down,this.scale,d));break;case m.Prebend:case m.PrebendBend:case m.PrebendRelease:let b=e+n.x+n.getBeatX(o.beat,te.PreNotes);b+=n.getPreNotesGlyphForBeat(o.beat).prebendNoteHeadOffset;let y=t+n.y+n.getScoreY(n.accidentalHelper.getNoteLineForValue(o.displayValue-(o.bendPoints[0].value/2|0),!1))+u;this.drawBendSlur(i,b,y,s,c,l===W.Down,this.scale),this.BendNoteHeads.length>0&&(h=this.getBendNoteValue(o,o.bendPoints[o.bendPoints.length-1]),p=this.BendNoteHeads[0].getNoteValueY(h)+u,this.drawBendSlur(i,s,c,r,p,l===W.Down,this.scale,d));break}}}}getBendNoteValue(e,t){return e.displayValueWithoutBend+(t.value/2|0)}}class pa extends Dr{constructor(e,t,i=!1){super(e,t,i)}doLayout(){super.doLayout()}getBeamDirection(e,t){if(e.isRest)return W.Up;switch(t.getBeatDirection(e)){case W.Up:return W.Down;default:return W.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case W.Up:return this.startNoteRenderer.getNoteY(this.startBeat.maxNote,ne.Top);default:return this.startNoteRenderer.getNoteY(this.startBeat.minNote,ne.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case W.Up:return e.getScoreY(9);default:return e.getScoreY(0)}const t=this.startNoteRenderer.getBeatDirection(this.startBeat),i=e.getBeatDirection(this.endBeat);if(t!==i&&this.startBeat.graceType===S.None)if(i===this.tieDirection)switch(this.tieDirection){case W.Up:return e.getNoteY(this.endBeat.maxNote,ne.TopWithStem);default:return e.getNoteY(this.endBeat.minNote,ne.BottomWithStem)}else switch(this.tieDirection){case W.Up:return e.getNoteY(this.endBeat.maxNote,ne.BottomWithStem);default:return e.getNoteY(this.endBeat.minNote,ne.TopWithStem)}switch(this.tieDirection){case W.Up:return e.getNoteY(this.endBeat.maxNote,ne.Top);default:return e.getNoteY(this.endBeat.minNote,ne.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startBeat,te.MiddleNotes)}getEndX(){const e=this.endNoteRenderer.getBeatDirection(this.endBeat);return this.endNoteRenderer.getBeatX(this.endBeat,this.endBeat.duration>v.Whole&&e===this.tieDirection?te.Stem:te.MiddleNotes)}}class fa extends Bn{constructor(e,t,i,n){super(0,0),this._outType=t,this._inType=e,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.drawSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,s=12*this.scale,r=e+n.x+n.getNoteX(this._startNote,se.Left)-2*this.scale,a=t+n.y+n.getNoteY(this._startNote,ne.Center),o=r-s,l=t+n.y;switch(this._inType){case T.IntoFromBelow:l+=n.getNoteY(this._startNote,ne.Bottom);break;case T.IntoFromAbove:l+=n.getNoteY(this._startNote,ne.Top);break;default:return}let h=this.getAccidentalsWidth(n,this._startNote.beat);o-=h,r-=h,this.paintSlideLine(i,!1,o,r,l,a)}getAccidentalsWidth(e,t){let i=e.getPreNotesGlyphForBeat(t);return i&&i.accidentals?i.accidentals.width:0}drawSlideOut(e,t,i){let n=this.renderer,s=12*this.scale,r=3*this.scale,a=1*this.scale,o=2*this.scale,l=0,h=0,c=0,u=0,d=!1;switch(this._outType){case B.Shift:case B.Legato:if(l=e+n.x+n.getBeatX(this._startNote.beat,te.PostNotes)+r,h=t+n.y+n.getNoteY(this._startNote,ne.Center),this._startNote.slideTarget){let i=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);i&&i.staff===n.staff?(c=e+i.x+i.getBeatX(this._startNote.slideTarget.beat,te.PreNotes)-a,u=t+i.y+i.getNoteY(this._startNote.slideTarget,ne.Center)):(c=e+n.x+this._parent.x,u=h),this._startNote.slideTarget.realValue>this._startNote.realValue?(h+=o,u-=o):(h-=o,u+=o)}else c=e+n.x+this._parent.x,u=h;break;case B.OutUp:l=e+n.x+n.getNoteX(this._startNote,se.Right),h=t+n.y+n.getNoteY(this._startNote,ne.Center),c=l+s,u=t+n.y+n.getNoteY(this._startNote,ne.Top);break;case B.OutDown:l=e+n.x+n.getNoteX(this._startNote,se.Right),h=t+n.y+n.getNoteY(this._startNote,ne.Center),c=l+s,u=t+n.y+n.getNoteY(this._startNote,ne.Bottom);break;case B.PickSlideUp:l=e+n.x+n.getNoteX(this._startNote,se.Right)+r,h=t+n.y+n.getNoteY(this._startNote,ne.Center),u=t+n.y+n.getNoteY(this._startNote,ne.Top),c=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(c=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,te.PreNotes)),d=!0;break;case B.PickSlideDown:l=e+n.x+n.getNoteX(this._startNote,se.Right)+r,h=t+n.y+n.getNoteY(this._startNote,ne.Center),u=t+n.y+n.getNoteY(this._startNote,ne.Bottom),c=e+n.x+n.width,this._startNote.beat.nextBeat&&this._startNote.beat.nextBeat.voice===this._startNote.beat.voice&&(c=e+n.x+n.getBeatX(this._startNote.beat.nextBeat,te.PreNotes)),d=!0;break;default:return}this.paintSlideLine(i,d,l,c,h,u)}paintSlideLine(e,t,i,n,s,r){if(t){let t=new Qs(0,0,x.Slight,1.2);t.renderer=this.renderer,t.doLayout(),s-=t.height/2,r-=t.height/2;let a=n-i,o=r-s,l=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));t.width=a;let h=Math.asin(o/l)*(180/Math.PI);e.beginRotate(i,s,h),t.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,s),e.lineTo(n,r),e.stroke()}}class ga extends pa{constructor(e,t,i=!1){super(e.beat,t.beat,i),this._startNote=e,this._endNote=t}getTieHeight(e,t,i,n){return Math.log2(i-e+1)*this.renderer.settings.notation.slurHeight}getStartY(){if(this.isStartCentered())switch(this.tieDirection){case W.Up:return this.startNoteRenderer.getNoteY(this._startNote,ne.Top);default:return this.startNoteRenderer.getNoteY(this._startNote,ne.Bottom)}return this.startNoteRenderer.getNoteY(this._startNote,ne.Center)}getEndY(){if(!this.isEndCentered())return this.endNoteRenderer.getNoteY(this._endNote,ne.Center);if(this.isEndOnStem())switch(this.tieDirection){case W.Up:return this.endNoteRenderer.getNoteY(this._endNote,ne.TopWithStem);default:return this.endNoteRenderer.getNoteY(this._endNote,ne.BottomWithStem)}else switch(this.tieDirection){case W.Up:return this.endNoteRenderer.getNoteY(this._endNote,ne.Top);default:return this.endNoteRenderer.getNoteY(this._endNote,ne.Bottom)}}isStartCentered(){return this._startNote===this._startNote.beat.maxNote&&this.tieDirection===W.Up||this._startNote===this._startNote.beat.minNote&&this.tieDirection===W.Down}isEndCentered(){return this._startNote.beat.graceType===S.None&&(this._endNote===this._endNote.beat.maxNote&&this.tieDirection===W.Up||this._endNote===this._endNote.beat.minNote&&this.tieDirection===W.Down)}isEndOnStem(){const e=this.endNoteRenderer,t=this.startNoteRenderer.getBeatDirection(this.startBeat),i=e.getBeatDirection(this.endBeat);return t!==i&&this.startBeat.graceType===S.None}getStartX(){return this.isStartCentered()?this.startNoteRenderer.getBeatX(this._startNote.beat,te.MiddleNotes):this.startNoteRenderer.getNoteX(this._startNote,se.Right)}getEndX(){return this.isEndCentered()?this.isEndOnStem()?this.endNoteRenderer.getBeatX(this._endNote.beat,te.Stem):this.endNoteRenderer.getNoteX(this._endNote,se.Center):this.endNoteRenderer.getBeatX(this._endNote.beat,te.PreNotes)}}class ma extends Dr{constructor(e,t,i=!1){super(e?e.beat:null,t?t.beat:null,i),this.startNote=e,this.endNote=t}shouldDrawBendSlur(){return this.renderer.settings.notation.extendBendArrowsOnTiedNotes&&!!this.startNote.bendOrigin&&this.startNote.isTieOrigin}doLayout(){super.doLayout()}getBeamDirection(e,t){switch(t.getBeatDirection(e)){case W.Up:return W.Down;default:return W.Up}}getStartY(){if(this.startBeat.isRest)return this.startNoteRenderer.getScoreY(9);switch(this.tieDirection){case W.Up:return this.startNoteRenderer.getNoteY(this.startNote,ne.Top);default:return this.startNoteRenderer.getNoteY(this.startNote,ne.Bottom)}}getEndY(){const e=this.endNoteRenderer;if(this.endBeat.isRest)switch(this.tieDirection){case W.Up:return e.getScoreY(9);default:return e.getScoreY(0)}switch(this.tieDirection){case W.Up:return e.getNoteY(this.endNote,ne.Top);default:return e.getNoteY(this.endNote,ne.Bottom)}}getStartX(){return this.startNoteRenderer.getBeatX(this.startNote.beat,te.PostNotes)}getEndX(){return this.endNoteRenderer.getBeatX(this.endNote.beat,te.PreNotes)}}class ba extends Pn{constructor(e,t){super(e,t),this._bend=null,this._effectSlur=null,this._effectEndSlur=null}doLayout(){if(this._effectSlur=null,this._effectEndSlur=null,super.doLayout(),this.beat.isLegatoOrigin){if(!this.beat.previousBeat||!this.beat.previousBeat.isLegatoOrigin){let e=this.beat.nextBeat;while(e.nextBeat&&e.nextBeat.isLegatoDestination)e=e.nextBeat;this.ties.push(new pa(this.beat,e,!1))}}else if(this.beat.isLegatoDestination&&!this.beat.isLegatoOrigin){let e=this.beat.previousBeat;while(e.previousBeat&&e.previousBeat.isLegatoOrigin)e=e.previousBeat;this.ties.push(new pa(e,this.beat,!0))}this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(e.isVisible){if(e.isTieOrigin&&!e.hasBend&&!e.beat.hasWhammyBar&&e.beat.graceType!==S.BendGrace&&e.tieDestination&&e.tieDestination.isVisible){let t=new ma(e,e.tieDestination,!1);this.ties.push(t)}if(e.isTieDestination&&!e.tieOrigin.hasBend&&!e.beat.hasWhammyBar){let t=new ma(e.tieOrigin,e,!0);this.ties.push(t)}if(e.slideInType!==T.None||e.slideOutType!==B.None){let t=new fa(e.slideInType,e.slideOutType,e,this);this.ties.push(t)}if(e.isSlurOrigin&&e.slurDestination&&e.slurDestination.isVisible){let t=new ga(e,e.slurDestination,!1);this.ties.push(t)}if(e.isSlurDestination){let t=new ga(e.slurOrigin,e,!0);this.ties.push(t)}if(!this._effectSlur&&e.isEffectSlurOrigin&&e.effectSlurDestination){const t=new ga(e,e.effectSlurDestination,!1);this._effectSlur=t,this.ties.push(t)}if(!this._effectEndSlur&&e.beat.isEffectSlurDestination&&e.beat.effectSlurOrigin){let t=this.onNotes.beamingHelper.direction,i=t===W.Up?e.beat.effectSlurOrigin.minNote:e.beat.effectSlurOrigin.maxNote,n=t===W.Up?e.beat.minNote:e.beat.maxNote;const s=new ga(i,n,!0);this._effectEndSlur=s,this.ties.push(s)}if(e.hasBend){if(!this._bend){const t=new da(e.beat);this._bend=t,t.renderer=this.renderer,this.ties.push(t)}this._bend.addBends(e)}}}}class ya extends us{constructor(e,t){super(e,t),this.simpleWhammyOverflow=0,this._firstLineY=0,this._startSpacing=!1,this.accidentalHelper=new ns(this)}getBeatDirection(e){return this.helpers.getBeamingHelperForBeat(e).direction}get lineOffset(){return(us.LineSpacing+1)*this.scale}updateSizes(){let e=this.resources,t=e.tablatureFont.size/2+.2*e.tablatureFont.size;this.topPadding=t*this.scale,this.bottomPadding=t*this.scale,this.height=4*this.lineOffset+this.topPadding+this.bottomPadding,this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=4*this.lineOffset,t=(this.bar.staff.standardNotationLineCount-1)*this.lineOffset;this._firstLineY=(e-t)/2}doLayout(){if(this.updateFirstLineY(),super.doLayout(),!this.bar.isEmpty&&this.accidentalHelper.maxLineBeat){let e=this.getScoreY(-2),t=this.getScoreY(6),i=this.simpleWhammyOverflow;this.registerOverflowTop(i);let n=this.getScoreY(this.accidentalHelper.maxLine),s=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.maxLineBeat);s.direction===W.Up&&(n-=this.getStemSize(s),n-=s.fingeringCount*this.resources.graceFont.size,s.hasTuplet&&(n-=2*this.resources.effectFont.size)),s.hasTuplet&&(n-=1.5*this.resources.effectFont.size),n<e&&this.registerOverflowTop(Math.abs(n)+i);let r=this.getScoreY(this.accidentalHelper.minLine),a=this.helpers.getBeamingHelperForBeat(this.accidentalHelper.minLineBeat);a.direction===W.Down&&(r+=this.getStemSize(a),r+=a.fingeringCount*this.resources.graceFont.size),r>t&&this.registerOverflowBottom(Math.abs(r)-t)}}paint(e,t,i){super.paint(e,t,i),this.paintBeams(e,t,i),this.paintTuplets(e,t,i)}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let s=this.getVoiceContainer(n);for(let n of s.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,n)}}paintBeams(e,t,i){for(let n=0,s=this.helpers.beamHelpers.length;n<s;n++){let s=this.helpers.beamHelpers[n];for(let n=0,r=s.length;n<r;n++){let r=s[n];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,r)}}}paintBeamHelper(e,t,i,n){i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,n.isRestBeamHelper||(1===n.beats.length?this.paintFlag(e,t,i,n):this.paintBar(e,t,i,n))}paintTupletHelper(e,t,i,n){let s,r=this.resources,a=i.textAlign,o=i.textBaseline;i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=E.Center,i.textBaseline=P.Middle;let l=n.beats[0].tupletNumerator,h=n.beats[0].tupletDenominator;s=2===l&&3===h?"2":3===l&&2===h?"3":4===l&&6===h?"4":5===l&&4===h?"5":6===l&&4===h?"6":7===l&&4===h?"7":9===l&&8===h?"9":10===l&&8===h?"10":11===l&&8===h?"11":12===l&&8===h?"12":13===l&&8===h?"13":l+":"+h;let c=10*this.scale,u=5*this.scale;if(1!==n.beats.length&&n.isFull){let a=n.beats[0],o=n.beats[n.beats.length-1],l=null,h=null;for(let e=0;e<n.beats.length;e++)if(!n.beats[e].isRest){l=n.beats[e];break}for(let e=n.beats.length-1;e>=0;e--)if(!n.beats[e].isRest){h=n.beats[e];break}let d=!1;l||(l=a,d=!0),h||(h=o);let p=this.helpers.beamHelperLookup[n.voice.index].get(a.index),f=this.helpers.beamHelperLookup[n.voice.index].get(o.index),g=p.getBeatLineX(a),m=f.getBeatLineX(o),b=this.helpers.beamHelperLookup[n.voice.index].get(l.index),y=this.helpers.beamHelperLookup[n.voice.index].get(h.index),v=p.direction,w=this.calculateBeamYWithDirection(b,g,v),S=this.calculateBeamYWithDirection(y,m,v);d&&(w=Math.max(w,S),S=w),i.font=r.effectFont;let _=i.measureText(s),k=3*this.scale,T=(g+m)/2,B=T-_/2-k,x=T+_/2+k,N=(S-w)/(m-g),C=w-N*g,E=N*B+C,P=N*T+C,L=N*x+C;v===W.Down&&(c*=-1,u*=-1),i.beginPath(),i.moveTo(e+this.x+g,t+this.y+w-c|0),i.lineTo(e+this.x+g,t+this.y+w-c-u|0),i.lineTo(e+this.x+B,t+this.y+E-c-u|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+x,t+this.y+L-c-u|0),i.lineTo(e+this.x+m,t+this.y+S-c-u|0),i.lineTo(e+this.x+m,t+this.y+S-c|0),i.stroke(),i.fillText(s,e+this.x+T,t+this.y+P-c-u)}else for(let d=0,p=n.beats.length;d<p;d++){let a=n.beats[d],o=this.helpers.beamHelperLookup[n.voice.index].get(a.index);if(!o)continue;let l=o.direction,h=o.getBeatLineX(a),p=this.calculateBeamYWithDirection(o,h,l);l===W.Down&&(c*=-1,u*=-1),i.font=r.effectFont,i.fillText(s,e+this.x+h,t+this.y+p-c-u)}i.textAlign=a,i.textBaseline=o}getStemSize(e){let t=1===e.beats.length?this.getFlagStemSize(e.shortestDuration):this.getBarStemSize(e.shortestDuration);return e.isGrace&&(t*=Cn.GraceScale),t}getBarStemSize(e){let t=0;switch(e){case v.QuadrupleWhole:case v.Half:case v.Quarter:case v.Eighth:case v.Sixteenth:t=6;break;case v.ThirtySecond:t=8;break;case v.SixtyFourth:t=9;break;case v.OneHundredTwentyEighth:t=9;break;case v.TwoHundredFiftySixth:t=10;break;default:t=0;break}return this.getScoreHeight(t)}getFlagStemSize(e){let t=0;switch(e){case v.QuadrupleWhole:case v.Half:case v.Quarter:case v.Eighth:case v.Sixteenth:case v.ThirtySecond:case v.SixtyFourth:case v.OneHundredTwentyEighth:case v.TwoHundredFiftySixth:t=6;break;default:t=0;break}return this.getScoreHeight(t)}get middleYPosition(){return this.getScoreY(this.bar.staff.standardNotationLineCount-1)}getNoteY(e,t){let i=super.getNoteY(e,t);if(isNaN(i)){const t=ns.computeLineWithoutAccidentals(this.bar,e);i=this.getScoreY(t)}return i}calculateBeamY(e,t){return this.calculateBeamYWithDirection(e,t,e.direction)}applyLayoutingInfo(){const e=super.applyLayoutingInfo();if(e&&this.bar.isMultiVoice){let e=this.getScoreY(-2),t=this.getScoreY(6),i=this.helpers.collisionHelper.getBeatMinMaxY();i[0]<e&&this.registerOverflowTop(Math.abs(i[0])),i[1]>t&&this.registerOverflowBottom(Math.abs(i[1])-t)}return e}calculateBeamYWithDirection(e,t,i){let n=this.getStemSize(e);if(!e.drawingInfos.has(i)){let t=new rs;e.drawingInfos.set(i,t);const s=e.beats[0],r=e.beats[e.beats.length-1];let a=e.isRestBeamHelper;t.startBeat=s,t.startX=e.getBeatLineX(s),t.startY=a?i===W.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):i===W.Up?this.getScoreY(this.accidentalHelper.getMinLine(s))-n:this.getScoreY(this.accidentalHelper.getMaxLine(s))+n,t.endBeat=r,t.endX=e.getBeatLineX(r),t.endY=a?i===W.Up?this.getScoreY(e.minRestLine):this.getScoreY(e.maxRestLine):i===W.Up?this.getScoreY(this.accidentalHelper.getMinLine(r))-n:this.getScoreY(this.accidentalHelper.getMaxLine(r))+n;let o=10*this.scale;if(i===W.Down&&t.startY>t.endY&&t.startY-t.endY>o&&(t.endY=t.startY-o),i===W.Down&&t.endY>t.startY&&t.endY-t.startY>o&&(t.startY=t.endY-o),i===W.Up&&t.startY<t.endY&&t.endY-t.startY>o&&(t.endY=t.startY+o),i===W.Up&&t.endY<t.startY&&t.startY-t.endY>o&&(t.startY=t.endY+o),e.beats.length>1){if(i===W.Up){let i=this.getScoreY(this.accidentalHelper.getMinLine(e.beatOfHighestNote))-n;const s=t.calcY(e.getBeatLineX(e.beatOfHighestNote)),r=s-i;r>0&&(t.startY-=r,t.endY-=r)}else{let i=this.getScoreY(this.accidentalHelper.getMaxLine(e.beatOfLowestNote))+n;const s=t.calcY(e.getBeatLineX(e.beatOfLowestNote)),r=i-s;r>0&&(t.startY+=r,t.endY+=r)}if(null!==e.minRestLine||null!==e.maxRestLine){const n=ue.getIndex(e.shortestDuration)-2;let s=e.isGrace?Cn.GraceScale:1,r=n*(us.BeamSpacing+us.BeamThickness)*this.scale*s;if(r+=us.BeamSpacing,i===W.Up&&null!==e.minRestLine){let i=this.getScoreY(e.minRestLine)-r;const n=t.calcY(e.getBeatLineX(e.beatOfMinRestLine)),s=n-i;s>0&&(t.startY-=s,t.endY-=s)}else if(i===W.Down&&null!==e.maxRestLine){let i=this.getScoreY(e.maxRestLine)+r;const n=t.calcY(e.getBeatLineX(e.beatOfMaxRestLine)),s=i-n;s>0&&(t.startY+=s,t.endY+=s)}}}}return e.drawingInfos.get(i).calcY(t)}paintBar(e,t,i,n){for(let s=0,r=n.beats.length;s<r;s++){let r=n.beats[s],a=r.graceType!==S.None,o=a?Cn.GraceScale:1,l=n.getBeatLineX(r),h=n.direction,c=t+this.y;c+=h===W.Up?this.getScoreY(this.accidentalHelper.getMaxLine(r)):this.getScoreY(this.accidentalHelper.getMinLine(r));let u=t+this.y;u+=this.calculateBeamY(n,l),i.lineWidth=us.StemWidth*this.scale,i.beginPath(),i.moveTo(e+this.x+l,c),i.lineTo(e+this.x+l,u),i.stroke(),i.lineWidth=this.scale;let d=u;h===W.Down?d+=2*i.font.size:0!==s&&(d-=1.5*i.font.size),this.paintFingering(i,r,e+this.x+l,h,d);let p=6*this.scale*o,f=(us.BeamSpacing+us.BeamThickness)*this.scale*o,g=us.BeamThickness*this.scale*o,m=ue.getIndex(r.duration)-2,b=t+this.y;h===W.Down&&(f=-f,g=-g);for(let t=0;t<m;t++){let a=0,o=0,h=0,c=0,u=b+t*f;if(s<n.beats.length-1){if(as.isFullBarJoin(r,n.beats[s+1],t))a=l,o=n.getBeatLineX(n.beats[s+1]);else{if(0!==s&&as.isFullBarJoin(n.beats[s-1],r,t))continue;a=l,o=a+p}h=u+this.calculateBeamY(n,a),c=u+this.calculateBeamY(n,o),ya.paintSingleBar(i,e+this.x+a,h,e+this.x+o,c,g)}else s>0&&!as.isFullBarJoin(r,n.beats[s-1],t)&&(a=l-p,o=l,h=u+this.calculateBeamY(n,a),c=u+this.calculateBeamY(n,o),ya.paintSingleBar(i,e+this.x+a,h,e+this.x+o,c,g))}}}static paintSingleBar(e,t,i,n,s,r){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.lineTo(n,s+r),e.lineTo(t,i+r),e.closePath(),e.fill()}paintFlag(e,i,n,s){let r=s.beats[0];if(r.graceType===S.BendGrace||r.graceType!==S.None&&this.settings.notation.notationMode===t.NotationMode.SongBook)return;let a=r.graceType!==S.None,o=a?Cn.GraceScale:1,l=this.getFlagStemSize(s.shortestDuration),h=s.getBeatLineX(r),c=s.direction,u=this.getScoreY(this.accidentalHelper.getMinLine(r)),d=this.getScoreY(this.accidentalHelper.getMaxLine(r)),p=0,f=0;if(c===W.Down?(d+=l*o,p=d,f=i+this.y+d):(u-=l*o,p=u,f=i+this.y+u),this.paintFingering(n,r,e+this.x+h,c,f),s.hasLine){if(n.lineWidth=us.StemWidth*this.scale,n.beginPath(),n.moveTo(e+this.x+h,i+this.y+u),n.lineTo(e+this.x+h,i+this.y+d),n.stroke(),n.lineWidth=this.scale,r.graceType===S.BeforeBeat){let t=15*this.scale,s=12*this.scale;n.beginPath(),c===W.Down?(n.moveTo(e+this.x+h-s/2,i+this.y+d-t),n.lineTo(e+this.x+h+s/2,i+this.y+d)):(n.moveTo(e+this.x+h-s/2,i+this.y+u+t),n.lineTo(e+this.x+h+s/2,i+this.y+u)),n.stroke()}if(s.hasFlag){let t=new En(h-this.scale/2,p,r.duration,c,a);t.renderer=this,t.doLayout(),t.paint(e+this.x,i+this.y,n)}}}paintFingering(e,i,n,s,r){let o=this.settings;if(o.notation.fingeringMode!==t.FingeringMode.ScoreDefault&&o.notation.fingeringMode!==t.FingeringMode.ScoreForcePiano)return;s===W.Up?n-=10*this.scale:n+=3*this.scale;let l=i.notes.slice(0);l.sort((e,t)=>e.realValue-t.realValue);for(let t=0;t<l.length;t++){let s=l[t],h=null;s.leftHandFinger!==a.Unknown?h=ue.fingerToString(o,i,s.leftHandFinger,!0):s.rightHandFinger!==a.Unknown&&(h=ue.fingerToString(o,i,s.rightHandFinger,!1)),h&&(e.fillText(h,n,r),r-=0|e.font.size)}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new Or(0,0,1.5,3)),this.isFirstOfLine||this.bar.clef!==this.bar.previousBar.clef||this.bar.clefOttava!==this.bar.previousBar.clefOttava){let e=0;switch(this.bar.clef){case d.Neutral:e=this.bar.staff.standardNotationLineCount-1;break;case d.F4:e=2;break;case d.C3:e=4;break;case d.C4:e=2;break;case d.G2:e=6;break}this.createStartSpacing(),this.addPreBeatGlyph(new Er(0,this.getScoreY(e)+.5*us.StaffLineThickness,this.bar.clef,this.bar.clefOttava))}(0===this.index&&this.bar.masterBar.keySignature!==M.C||this.bar.previousBar&&this.bar.masterBar.keySignature!==this.bar.previousBar.masterBar.keySignature)&&(this.createStartSpacing(),this.createKeySignatureGlyphs()),(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new Nr(0,this.getScoreHeight(-.5),this.bar.index+1))}createBeatGlyphs(){for(let e=0;e<this.bar.voices.length;e++){let t=this.bar.voices[e];this.hasVoiceContainer(t)&&this.createVoiceGlyphs(t)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new Pr(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new Lr(0,this.getScoreHeight(-.5),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new Cr(0,0))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new ea(0,0,2*this.scale)),this._startSpacing=!0)}createKeySignatureGlyphs(){let e=0,t=this.bar.masterBar.keySignature,i=this.bar.previousBar?this.bar.previousBar.masterBar.keySignature:0;switch(this.bar.clef){case d.Neutral:e=0;break;case d.G2:e=1;break;case d.F4:e=2;break;case d.C3:e=-1;break;case d.C4:e=1;break}let n=new Map,s=[];if(ue.keySignatureIsSharp(t))for(let o=0;o<Math.abs(t);o++){let t=ya.SharpKsSteps[o]+e;s.push(new xr(0,this.getScoreY(t),ie.Sharp,!1)),n.set(t,!0)}else for(let o=0;o<Math.abs(t);o++){let t=ya.FlatKsSteps[o]+e;s.push(new xr(0,this.getScoreY(t),ie.Flat,!1)),n.set(t,!0)}let r=Math.abs(i),a=ue.keySignatureIsSharp(i)?ya.SharpKsSteps:ya.FlatKsSteps;for(let o=0;o<r;o++){let t=a[o]+e;n.has(t)||this.addPreBeatGlyph(new xr(0,this.getScoreY(a[o]+e),ie.Natural,!1))}for(let o of s)this.addPreBeatGlyph(o)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new ea(0,0,5*this.scale));const e=this.bar.staff.standardNotationLineCount-1;this.addPreBeatGlyph(new ua(0,this.getScoreY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let i=e.beats[t],n=new ba(i,this.getVoiceContainer(e));n.preNotes=new oa,n.onNotes=new ra,this.addBeatGlyph(n)}}getNoteLine(e){return this.accidentalHelper.getNoteLine(e)}getScoreY(e){return this._firstLineY+this.lineOffset+this.getScoreHeight(e)}getScoreHeight(e){return this.lineOffset/2*e}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;for(let s=0;s<this.bar.staff.standardNotationLineCount;s++){const n=t+this.y+this.getScoreY(2*s);i.fillRect(e+this.x,0|n,this.width,this.scale*us.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}completeBeamingHelper(e){if(this.bar.isMultiVoice&&e.highestNoteInHelper&&e.lowestNoteInHelper){let t=this.getNoteY(e.highestNoteInHelper,ne.Center),i=this.getNoteY(e.lowestNoteInHelper,ne.Center),n=this.getStemSize(e);e.hasTuplet&&(n+=2*this.resources.effectFont.size),e.direction==W.Up?t-=n:i+=n;for(const s of e.beats)this.helpers.collisionHelper.reserveBeatSlot(s,t,i)}}}ya.StaffId="score",ya.SharpKsSteps=[-1,2,-2,1,4,0,3],ya.FlatKsSteps=[3,0,4,1,5,2,6];class va extends Kn{get staffId(){return ya.StaffId}create(e,t){return new ya(e,t)}constructor(){super()}}class wa extends Bn{constructor(e,t,i,n){super(0,0),this._inType=e,this._outType=t,this._startNote=i,this._parent=n}doLayout(){this.width=0}paint(e,t,i){this.paintSlideIn(e,t,i),this.paintSlideOut(e,t,i)}paintSlideIn(e,t,i){let n=this.renderer,s=12*this.scale,r=3*this.scale,a=0,o=0,l=0,h=0;switch(this._inType){case T.IntoFromBelow:l=e+n.x+n.getNoteX(this._startNote,se.Left),h=t+n.y+n.getNoteY(this._startNote,ne.Center),a=l-s,o=t+n.y+n.getNoteY(this._startNote,ne.Center)+r;break;case T.IntoFromAbove:l=e+n.x+n.getNoteX(this._startNote,se.Left),h=t+n.y+n.getNoteY(this._startNote,ne.Center),a=l-s,o=t+n.y+n.getNoteY(this._startNote,ne.Center)-r;break;default:return}this.paintSlideLine(i,!1,a,l,o,h)}paintSlideOut(e,t,i){let n=this.renderer,s=12*this.scale,r=3*this.scale,a=0,o=0,l=0,h=0,c=!1;const u=2*this.scale;switch(this._outType){case B.Shift:case B.Legato:if(a=e+n.x+n.getBeatX(this._startNote.beat,te.PostNotes),o=t+n.y+n.getNoteY(this._startNote,ne.Center),this._startNote.slideTarget){let i=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this._startNote.slideTarget.beat.voice.bar);i&&i.staff===n.staff?(l=e+i.x+i.getBeatX(this._startNote.slideTarget.beat,te.OnNotes)-u,h=t+i.y+i.getNoteY(this._startNote.slideTarget,ne.Center)):(l=e+n.x+this._parent.x,h=o),this._startNote.slideTarget.fret>this._startNote.fret?(o+=r,h-=r):(o-=r,h+=r)}else l=e+n.x+this._parent.x,h=o;break;case B.OutUp:a=e+n.x+n.getNoteX(this._startNote,se.Right),o=t+n.y+n.getNoteY(this._startNote,ne.Center),l=a+s-u,h=t+n.y+n.getNoteY(this._startNote,ne.Center)-r;break;case B.OutDown:a=e+n.x+n.getNoteX(this._startNote,se.Right),o=t+n.y+n.getNoteY(this._startNote,ne.Center),l=a+s-u,h=t+n.y+n.getNoteY(this._startNote,ne.Center)+r;break;case B.PickSlideDown:a=e+n.x+n.getNoteX(this._startNote,se.Right),o=t+n.y+n.getNoteY(this._startNote,ne.Center),l=e+n.x+n.getBeatX(this._startNote.beat,te.EndBeat),h=o+3*r,c=!0;break;case B.PickSlideUp:a=e+n.x+n.getNoteX(this._startNote,se.Right),o=t+n.y+n.getNoteY(this._startNote,ne.Center),l=e+n.x+n.getBeatX(this._startNote.beat,te.EndBeat),h=o-3*r,c=!0;break;default:return}this.paintSlideLine(i,c,a,l,o,h)}paintSlideLine(e,t,i,n,s,r){if(t){let t=new Qs(0,0,x.Slight,1.2);t.renderer=this.renderer,t.doLayout(),s-=t.height/2,r-=t.height/2;let a=n-i,o=r-s,l=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));t.width=a;let h=Math.asin(o/l)*(180/Math.PI);e.beginRotate(i,s,h),t.paint(0,0,e),e.endRotate()}else e.beginPath(),e.moveTo(i,s),e.lineTo(n,r),e.stroke()}}class Sa extends Dr{constructor(e,t,i=!1){super(e.beat,t.beat,i),this.startNote=e,this.endNote=t}getTieHeight(e,t,i,n){return this.startNote===this.endNote?15:super.getTieHeight(e,t,i,n)}getBeamDirection(e,t){return this.startNote===this.endNote?W.Up:Sa.getBeamDirectionForNote(this.startNote)}static getBeamDirectionForNote(e){return e.string>3?W.Up:W.Down}getStartY(){return this.startNote===this.endNote?this.startNoteRenderer.getNoteY(this.startNote,ne.Center):this.tieDirection===W.Up?this.startNoteRenderer.getNoteY(this.startNote,ne.Top):this.startNoteRenderer.getNoteY(this.startNote,ne.Bottom)}getEndY(){return this.getStartY()}getStartX(){return this.startNote===this.endNote?this.getEndX()-20*this.scale:this.startNoteRenderer.getNoteX(this.startNote,se.Center)}getEndX(){return this.startNote===this.endNote?this.endNoteRenderer.getNoteX(this.endNote,se.Left):this.endNoteRenderer.getNoteX(this.endNote,se.Center)}}class _a extends Sa{constructor(e,t,i,n=!1){super(e,t,n),this._direction=Sa.getBeamDirectionForNote(e),this._forSlide=i}getTieHeight(e,t,i,n){return Math.log(i-e+1)*this.renderer.settings.notation.slurHeight}tryExpand(e,t,i,n){if(this._forSlide!==i)return!1;if(this.forEnd!==n)return!1;if(this.startNote.beat.id!==e.beat.id)return!1;if(this.endNote.beat.id!==t.beat.id)return!1;if(this._direction!==Sa.getBeamDirectionForNote(e))return!1;switch(this._direction){case W.Up:e.realValue>this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue>this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat);break;case W.Down:e.realValue<this.startNote.realValue&&(this.startNote=e,this.startBeat=e.beat),t.realValue<this.endNote.realValue&&(this.endNote=t,this.endBeat=t.beat);break}return!0}paint(e,t,i){let n=this.renderer.scoreRenderer.layout.getRendererForBar(this.renderer.staff.staveId,this.startBeat.voice.bar),s=this.getBeamDirection(this.startBeat,n),r="tab.slur."+this.startNote.beat.id+"."+this.endNote.beat.id+"."+s,a=this.renderer,o=a.staff.getSharedLayoutData(r,!1);o||(a.staff.setSharedLayoutData(r,!0),super.paint(e,t,i))}}class ka extends Pn{constructor(e,t){super(e,t),this._bend=null,this._effectSlurs=[]}doLayout(){this._effectSlurs=[],super.doLayout(),this._bend&&(this._bend.renderer=this.renderer,this._bend.doLayout(),this.updateWidth())}createTies(e){if(!e.isVisible)return;let t=this.renderer;if(e.isTieOrigin&&t.showTiedNotes&&e.tieDestination.isVisible){let t=new Sa(e,e.tieDestination,!1);this.ties.push(t)}if(e.isTieDestination&&t.showTiedNotes){let t=new Sa(e.tieOrigin,e,!0);this.ties.push(t)}if(e.isLeftHandTapped&&!e.isHammerPullDestination){let t=new Sa(e,e,!1);this.ties.push(t)}if(e.isEffectSlurOrigin&&e.effectSlurDestination){let t=!1;for(let i of this._effectSlurs)if(i.tryExpand(e,e.effectSlurDestination,!1,!1)){t=!0;break}if(!t){let t=new _a(e,e.effectSlurDestination,!1,!1);this._effectSlurs.push(t),this.ties.push(t)}}if(e.isEffectSlurDestination&&e.effectSlurOrigin){let t=!1;for(let i of this._effectSlurs)if(i.tryExpand(e.effectSlurOrigin,e,!1,!0)){t=!0;break}if(!t){let t=new _a(e.effectSlurOrigin,e,!1,!0);this._effectSlurs.push(t),this.ties.push(t)}}if(e.slideInType!==T.None||e.slideOutType!==B.None){let t=new wa(e.slideInType,e.slideOutType,e,this);this.ties.push(t)}if(e.hasBend){if(!this._bend){const e=new Qr;this._bend=e,e.renderer=this.renderer,this.ties.push(e)}this._bend.addBends(e)}}}class Ta extends Bn{constructor(e,t,i){super(e,t),this._noteString=null,this._trillNoteString=null,this._trillNoteStringWidth=0,this.isEmpty=!1,this.noteStringWidth=0,this._note=i}doLayout(){let e=this._note,i=e.fret-e.beat.voice.bar.staff.transpositionPitch;if(e.harmonicType===_.Natural&&0!==e.harmonicValue&&(i=e.harmonicValue-e.beat.voice.bar.staff.transpositionPitch),e.isTieDestination)0===e.beat.index&&this.renderer.settings.notation.notationMode==t.NotationMode.GuitarPro||(e.bendType===m.Bend||e.bendType===m.BendRelease)&&this.renderer.settings.notation.isNotationElementVisible(o.TabNotesOnTiedBends)?this._noteString="("+(e.tieOrigin.fret-e.beat.voice.bar.staff.transpositionPitch).toString()+")":this._noteString="";else if(this._noteString=e.isDead?"x":i.toString(),e.isGhost)this._noteString="("+this._noteString+")";else if(e.harmonicType===_.Natural){let e=this._noteString.indexOf(String.fromCharCode(46));e>=0&&(this._noteString=this._noteString.substr(0,e+2)),this._noteString="<"+this._noteString+">"}if(e.isTrill)this._trillNoteString="("+(e.trillFret-e.beat.voice.bar.staff.transpositionPitch).toString()+")";else if(ue.isAlmostEqualTo(e.harmonicValue,0))this._trillNoteString="";else switch(e.harmonicType){case _.Artificial:case _.Pinch:case _.Tap:case _.Semi:case _.Feedback:let t=(i+e.harmonicValue).toString(),n=t.indexOf(String.fromCharCode(46));n>=0&&(t=t.substr(0,n+2)),this._trillNoteString="<"+t+">";break;default:this._trillNoteString="";break}if(this.isEmpty=!this._noteString,!this.isEmpty){this.renderer.scoreRenderer.canvas.font=this.renderer.resources.tablatureFont,this.noteStringWidth=this.renderer.scoreRenderer.canvas.measureText(this._noteString)*this.scale,this.width=this.noteStringWidth,this.height=this.renderer.scoreRenderer.canvas.font.size;let e=!!this._trillNoteString;e&&(this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,this._trillNoteStringWidth=3*this.scale+this.renderer.scoreRenderer.canvas.measureText(this._trillNoteString),this.width+=this._trillNoteStringWidth)}}paint(e,t,i){if(this.isEmpty)return;let n=this.noteStringWidth+this._trillNoteStringWidth,s=e+this.x+(this.width-n)/2,r=this.renderer.scoreRenderer.canvas.font;this.renderer.scoreRenderer.canvas.font=this.renderer.resources.graceFont,i.fillText(this._trillNoteString,s+this.noteStringWidth+3*this.scale,t+this.y),this.renderer.scoreRenderer.canvas.font=r,i.fillText(this._noteString,s,t+this.y)}buildBoundingsLookup(e,t,i){let n=new hn;n.note=this._note,n.noteHeadBounds=new st,n.noteHeadBounds.x=t+this.x,n.noteHeadBounds.y=i+this.y-this.height/2,n.noteHeadBounds.w=this.width,n.noteHeadBounds.h=this.height,this.renderer.scoreRenderer.boundsLookup.addNote(n)}}class Ba extends Bn{constructor(e,t,i){super(e,t),this._notes=[],this.minStringNote=null,this.beatEffects=new Map,this.notesPerString=new Map,this.noteStringWidth=0,this._isGrace=i}buildBoundingsLookup(e,t,i){for(const n of this._notes)n.buildBoundingsLookup(e,t+this.x,i+this.y)}getNoteX(e,t){if(this.notesPerString.has(e.string)){let i=this.notesPerString.get(e.string),n=this.x+i.x;switch(t){case se.Left:break;case se.Center:n+=i.noteStringWidth/2;break;case se.Right:n+=i.width;break}return n}return 0}getNoteY(e,t){if(this.notesPerString.has(e.string)){const i=this.notesPerString.get(e.string);let n=this.y+i.y;switch(t){case ne.Top:case ne.TopWithStem:n-=i.height/2+2*this.scale;break;case ne.Center:break;case ne.Bottom:case ne.BottomWithStem:n+=i.height/2;break}return n}return 0}doLayout(){let e=0,t=0;for(let r=0,a=this._notes.length;r<a;r++){let i=this._notes[r];i.renderer=this.renderer,i.doLayout(),i.width>e&&(e=i.width),i.noteStringWidth>t&&(t=i.noteStringWidth)}this.noteStringWidth=t;let i=this.renderer.resources.tablatureFont.size,n=this.getNoteY(this.minStringNote,ne.Center)+i/2,s=7*this.scale;for(const r of this.beatEffects.values())r.y+=n,r.x+=this.width/2,r.renderer=this.renderer,n+=s,r.doLayout();this.width=e}addNoteGlyph(e,t){this._notes.push(e),this.notesPerString.set(t.string,e),(!this.minStringNote||t.string<this.minStringNote.string)&&(this.minStringNote=t)}paint(e,t,i){e+=this.x,t+=this.y;let n=this.renderer.resources,s=i.textBaseline;i.textBaseline=P.Middle,i.font=this._isGrace?n.graceFont:n.tablatureFont;let r=this._notes,a=this.width;for(let o of r)o.renderer=this.renderer,o.width=a,o.paint(e,t,i);i.textBaseline=s;for(const o of this.beatEffects.values())o.paint(e,t,i)}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}}class xa extends Nn{constructor(e,t,i,n){super(e,t,1,zr.getSymbol(n)),this._isVisibleRest=i,this._duration=n}doLayout(){this._isVisibleRest?this.width=zr.getSize(this._duration)*this.scale:this.width=10*this.scale}updateBeamingHelper(e){this.beamingHelper&&this.beamingHelper.isPositionFrom("tab",this.beat)&&this.beamingHelper.registerBeatLineX("tab",this.beat,e+this.x+this.width/2,e+this.x+this.width/2)}paint(e,t,i){this._isVisibleRest&&super.paint(e,t,i)}}class Na extends bs{constructor(){super(...arguments),this.noteNumbers=null,this.restGlyph=null}getNoteX(e,t){return this.noteNumbers?this.noteNumbers.getNoteX(e,t):0}getNoteY(e,t){return this.noteNumbers?this.noteNumbers.getNoteY(e,t):0}buildBoundingsLookup(e,t,i){this.noteNumbers&&this.noteNumbers.buildBoundingsLookup(e,t+this.x,i+this.y)}doLayout(){let e=this.renderer;if(this.container.beat.isRest){let t=Math.floor((this.renderer.bar.staff.tuning.length-1)/2),i=e.getTabY(t);const n=new xa(0,i,e.showRests,this.container.beat.duration);if(this.restGlyph=n,n.beat=this.container.beat,n.beamingHelper=this.beamingHelper,this.addGlyph(n),this.container.beat.dots>0&&e.showRests){this.addGlyph(new ea(0,0,5*this.scale));for(let e=0;e<this.container.beat.dots;e++)this.addGlyph(new Mr(0,i,1.5*this.scale))}}else{let i=this.renderer.settings.notation.smallGraceTabNotes&&this.container.beat.graceType!==S.None;const n=new Ba(0,0,i);this.noteNumbers=n,n.beat=this.container.beat,n.beamingHelper=this.beamingHelper;for(let e of this.container.beat.notes)e.isVisible&&this.createNoteGlyph(e);if(this.addGlyph(n),this.container.beat.hasWhammyBar){let e=new Kr(this.container.beat);e.renderer=this.renderer,e.doLayout(),this.container.ties.push(e)}if(this.container.beat.isTremolo&&!this.noteNumbers.beatEffects.has("tremolo")){let e=0,t=this.container.beat.tremoloSpeed;switch(t){case v.ThirtySecond:e=10;break;case v.Sixteenth:e=5;break;case v.Eighth:e=0;break}this.noteNumbers.beatEffects.set("tremolo",new jr(5*this.scale,e*this.scale,t))}if(this.container.beat.dots>0&&e.settings.notation.rhythmMode!==t.TabRhythmMode.Hidden){this.addGlyph(new ea(0,0,5*this.scale));for(let t=0;t<this.container.beat.dots;t++)this.addGlyph(new Mr(0,e.lineOffset*e.bar.staff.tuning.length+e.settings.notation.rhythmHeight*e.scale,1.5*this.scale))}}if(!this.glyphs)return;let i=0;for(let t=0,n=this.glyphs.length;t<n;t++){let e=this.glyphs[t];e.x=i,e.renderer=this.renderer,e.doLayout(),i+=e.width}this.width=i,this.computedWidth=i,this.container.beat.isEmpty?this.centerX=this.width/2:this.container.beat.isRest?this.centerX=this.restGlyph.x+this.restGlyph.width/2:this.centerX=this.noteNumbers.x+this.noteNumbers.noteStringWidth/2}updateBeamingHelper(){this.container.beat.isRest?this.restGlyph.updateBeamingHelper(this.container.x+this.x):this.noteNumbers.updateBeamingHelper(this.container.x+this.x)}createNoteGlyph(e){let t=this.renderer,i=new Ta(0,0,e),n=e.beat.voice.bar.staff.tuning.length-e.string;i.y=t.getTabY(n),i.renderer=this.renderer,i.doLayout(),this.noteNumbers.addNoteGlyph(i,e);let s=i.y-i.height/2,r=s+i.height;this.renderer.helpers.collisionHelper.reserveBeatSlot(this.container.beat,s,r)}}class Ca extends Bn{constructor(e){super(0,0),this._beat=e}doLayout(){this.width=10*this.scale}paint(e,t,i){let n=this.renderer,s=t+this.x+n.getNoteY(this._beat.maxNote,ne.Top),r=t+this.y+n.getNoteY(this._beat.minNote,ne.Bottom),a=e+this.x+this.width/2|0,o=8*this.scale;if(this._beat.brushType!==b.None){if(this._beat.brushType===b.BrushUp||this._beat.brushType===b.BrushDown)i.beginPath(),i.moveTo(a,s),i.lineTo(a,r),i.stroke();else if(this._beat.brushType===b.ArpeggioUp){let t=new Qs(0,0,x.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=s,a=r-o;t.width=Math.abs(a-n),i.beginRotate(e+this.x+4*this.scale,a,-90),t.paint(0,-t.height/2,i),i.endRotate()}else if(this._beat.brushType===b.ArpeggioDown){let t=new Qs(0,0,x.Slight,1.2,!0);t.renderer=this.renderer,t.doLayout();let n=s+o,a=r;t.width=Math.abs(a-n),i.beginRotate(e+this.x+4*this.scale,n,90),t.paint(0,-t.height/2,i),i.endRotate()}this._beat.brushType===b.BrushUp||this._beat.brushType===b.ArpeggioUp?(i.beginPath(),i.moveTo(a,r),i.lineTo(a+o/2,r-o),i.lineTo(a-o/2,r-o),i.closePath(),i.fill()):(i.beginPath(),i.moveTo(a,s),i.lineTo(a+o/2,s+o),i.lineTo(a-o/2,s+o),i.closePath(),i.fill())}}}class Ea extends ms{doLayout(){this.container.beat.brushType===b.None||this.container.beat.isRest||(this.addGlyph(new Ca(this.container.beat)),this.addGlyph(new ea(0,0,4*this.scale))),super.doLayout()}constructor(){super()}}class Pa extends Bn{constructor(e,t){super(e,t)}doLayout(){this.width=28*this.scale}paint(e,t,i){let n=this.renderer.bar.staff.tuning.length,s=n<=4?C.FourStringTabClef:C.SixStringTabClef,r=n<=4?n/4.5:n/6.5;i.fillMusicFontSymbol(e+this.x+5*this.scale,t+this.y,r*this.scale,s,!1)}}class La extends ca{get commonScale(){return 1}get numberScale(){let e=this.renderer;return e.bar.staff.tuning.length<=4?Cn.GraceScale:1}}class Oa extends us{constructor(e,t){super(e,t),this._firstLineY=0,this._tupletSize=0,this.showTimeSignature=!1,this.showRests=!1,this.showTiedNotes=!1,this._startSpacing=!1}get lineOffset(){return(Oa.TabLineSpacing+1)*this.scale}updateSizes(){let e=this.resources,i=(e.tablatureFont.size/2+.2*e.tablatureFont.size)*this.scale;this.topPadding=i,this.bottomPadding=i,this.height=this.lineOffset*(this.bar.staff.tuning.length-1)+2*i,this.settings.notation.rhythmMode!==t.TabRhythmMode.Hidden&&(this.height+=this.settings.notation.rhythmHeight*this.settings.display.scale,this.bottomPadding+=this.settings.notation.rhythmHeight*this.settings.display.scale),this.updateFirstLineY(),super.updateSizes()}updateFirstLineY(){let e=this.resources;this._firstLineY=(e.tablatureFont.size/2+.2*e.tablatureFont.size)*this.scale}doLayout(){if(this.updateFirstLineY(),super.doLayout(),this.settings.notation.rhythmMode!==t.TabRhythmMode.Hidden){let e=!1;for(let t of this.bar.voices)if(this.hasVoiceContainer(t)){let i=this.getVoiceContainer(t);if(i.tupletGroups.length>0){e=!0;break}}e&&(this._tupletSize=.8*this.resources.effectFont.size,this.registerOverflowBottom(this._tupletSize))}}createPreBeatGlyphs(){if(super.createPreBeatGlyphs(),this.bar.masterBar.isRepeatStart&&this.addPreBeatGlyph(new Or(0,0,1.5,3)),this.isFirstOfLine){let e=(this.bar.staff.tuning.length-1)/2;this.addPreBeatGlyph(new Pa(5*this.scale,this.getTabY(e)))}this.showTimeSignature&&(!this.bar.previousBar||this.bar.previousBar&&this.bar.masterBar.timeSignatureNumerator!==this.bar.previousBar.masterBar.timeSignatureNumerator||this.bar.previousBar&&this.bar.masterBar.timeSignatureDenominator!==this.bar.previousBar.masterBar.timeSignatureDenominator)&&(this.createStartSpacing(),this.createTimeSignatureGlyphs()),this.addPreBeatGlyph(new Nr(0,this.getTabHeight(-.5),this.bar.index+1))}createStartSpacing(){this._startSpacing||(this.addPreBeatGlyph(new ea(0,0,2*this.scale)),this._startSpacing=!0)}createTimeSignatureGlyphs(){this.addPreBeatGlyph(new ea(0,0,5*this.scale));const e=(this.bar.staff.tuning.length+1)/2-1;this.addPreBeatGlyph(new La(0,this.getTabY(e),this.bar.masterBar.timeSignatureNumerator,this.bar.masterBar.timeSignatureDenominator,this.bar.masterBar.timeSignatureCommon))}createVoiceGlyphs(e){for(let t=0,i=e.beats.length;t<i;t++){let i=e.beats[t],n=new ka(i,this.getVoiceContainer(e));n.preNotes=new Ea,n.onNotes=new Na,this.addBeatGlyph(n)}}createPostBeatGlyphs(){super.createPostBeatGlyphs(),this.bar.masterBar.isRepeatEnd?(this.addPostBeatGlyph(new Pr(this.x,0)),this.bar.masterBar.repeatCount>2&&this.addPostBeatGlyph(new Lr(0,this.getTabY(-1),this.bar.masterBar.repeatCount))):this.addPostBeatGlyph(new Cr(0,0))}getTabY(e){return this._firstLineY+this.getTabHeight(e)}getTabHeight(e){return this.lineOffset*e}get middleYPosition(){return this.getTabY(this.bar.staff.tuning.length-1)}paintBackground(e,t,i){super.paintBackground(e,t,i);let n=this.resources;i.color=n.staffLineColor;let s=this.scale,r=[];for(let a=0,o=this.bar.staff.tuning.length;a<o;a++)r.push([]);for(let a of this.bar.voices)if(this.hasVoiceContainer(a)){let e=this.getVoiceContainer(a);for(let t of e.beatGlyphs){let i=t.onNotes,n=i.noteNumbers;if(n)for(const[a,o]of n.notesPerString)o.isEmpty||r[this.bar.staff.tuning.length-a].push(new Float32Array([e.x+t.x+i.x+n.x,n.width+s]))}}for(let a of r)a.sort((e,t)=>e[0]>t[0]?1:e[0]<t[0]?-1:0);for(let a=0,o=this.bar.staff.tuning.length;a<o;a++){const n=this.getTabY(a);let s=0;for(let o of r[a])i.fillRect(e+this.x+s,t+this.y+n|0,o[0]-s,this.scale*us.StaffLineThickness),s=o[0]+o[1];i.fillRect(e+this.x+s,t+this.y+n|0,this.width-s,this.scale*us.StaffLineThickness)}i.color=n.mainGlyphColor,this.paintSimileMark(e,t,i)}paint(e,i,n){super.paint(e,i,n),this.settings.notation.rhythmMode!==t.TabRhythmMode.Hidden&&(this.paintBeams(e,i,n),this.paintTuplets(e,i,n))}paintBeams(e,t,i){for(let n=0,s=this.helpers.beamHelpers.length;n<s;n++){let s=this.helpers.beamHelpers[n];for(let n=0,r=s.length;n<r;n++){let r=s[n];this.paintBeamHelper(e+this.beatGlyphsStart,t,i,r)}}}paintTuplets(e,t,i){for(let n of this.bar.voices)if(this.hasVoiceContainer(n)){let s=this.getVoiceContainer(n);for(let n of s.tupletGroups)this.paintTupletHelper(e+this.beatGlyphsStart,t,i,n)}}paintBeamHelper(e,i,n,s){n.color=0===s.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,s.isRestBeamHelper||(1===s.beats.length||this.settings.notation.rhythmMode===t.TabRhythmMode.ShowWithBeams?this.paintFooter(e,i,n,s):this.paintBar(e,i,n,s))}paintBar(e,t,i,n){for(let s=0,r=n.beats.length;s<r;s++){let r=n.beats[s];if(n.hasBeatLineX(r)){let a=n.getBeatLineX(r),o=t+this.y,l=t+this.y+this.height-this._tupletSize,h=this.getOnNotesGlyphForBeat(r);h.noteNumbers&&r.duration!==v.Half?o+=h.noteNumbers.getNoteY(h.noteNumbers.minStringNote,ne.Bottom)+this.lineOffset/2:o+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize,this.paintBeamingStem(r,t+this.y,e+this.x+a,o,l,i);let c=6*this.scale,u=-6*this.scale,d=3*this.scale,p=ue.getIndex(r.duration)-2,f=l;for(let t=0;t<p;t++){let o=0,l=0,h=0,p=0,g=f+t*u;if(1===n.beats.length)o=a,l=a+c,h=g,p=g,Oa.paintSingleBar(i,e+this.x+o,h,e+this.x+l,p,d);else if(s<n.beats.length-1){if(as.isFullBarJoin(r,n.beats[s+1],t))o=a,l=n.getBeatLineX(n.beats[s+1]);else{if(0!==s&&as.isFullBarJoin(n.beats[s-1],r,t))continue;o=a,l=o+c}h=g,p=g,Oa.paintSingleBar(i,e+this.x+o,h,e+this.x+l,p,d)}else s>0&&!as.isFullBarJoin(r,n.beats[s-1],t)&&(o=a-c,l=a,h=g,p=g,Oa.paintSingleBar(i,e+this.x+o,h,e+this.x+l,p,d))}}}}paintTupletHelper(e,t,i,n){let s,r=this.resources,a=i.textAlign,o=i.textBaseline;i.color=0===n.voice.index?this.resources.mainGlyphColor:this.resources.secondaryGlyphColor,i.textAlign=E.Center,i.textBaseline=P.Middle;let l=n.beats[0].tupletNumerator,h=n.beats[0].tupletDenominator;if(s=2===l&&3===h?"2":3===l&&2===h?"3":4===l&&6===h?"4":5===l&&4===h?"5":6===l&&4===h?"6":7===l&&4===h?"7":9===l&&8===h?"9":10===l&&8===h?"10":11===l&&8===h?"11":12===l&&8===h?"12":13===l&&8===h?"13":l+":"+h,1!==n.beats.length&&n.isFull){let a=n.beats[0],o=n.beats[n.beats.length-1],l=this.helpers.beamHelperLookup[n.voice.index].get(a.index),h=this.helpers.beamHelperLookup[n.voice.index].get(o.index);if(l&&h){let n=l.getBeatLineX(a),c=h.getBeatLineX(o);i.font=r.effectFont;let u=i.measureText(s),d=3*this.scale,p=(n+c)/2,f=p-u/2-d,g=p+u/2+d,m=t+this.y+this.height-this._tupletSize+.5*r.effectFont.size,b=.25*-r.effectFont.size,y=-5*this.scale;i.beginPath(),i.moveTo(e+this.x+n,m-b|0),i.lineTo(e+this.x+n,m-b-y|0),i.lineTo(e+this.x+f,m-b-y|0),i.stroke(),i.beginPath(),i.moveTo(e+this.x+g,m-b-y|0),i.lineTo(e+this.x+c,m-b-y|0),i.lineTo(e+this.x+c,m-b|0),i.stroke(),i.fillText(s,e+this.x+p,m-b-y)}}else for(let c=0,u=n.beats.length;c<u;c++){let a=n.beats[c],o=this.helpers.beamHelperLookup[n.voice.index].get(a.index);if(!o)continue;let l=o.getBeatLineX(a),h=t+this.y+this.height-this._tupletSize+.5*r.effectFont.size;i.font=r.effectFont,i.fillText(s,e+this.x+l,h)}i.textAlign=a,i.textBaseline=o}static paintSingleBar(e,t,i,n,s,r){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.lineTo(n,s-r),e.lineTo(t,i-r),e.closePath(),e.fill()}paintBeamingStem(e,t,i,n,s,r){r.beginPath();let a=[];this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.has(e.displayStart)&&(a=this.helpers.collisionHelper.reservedLayoutAreasByDisplayTime.get(e.displayStart).slots.slice(),a.sort((e,t)=>e.topY-t.topY));let o=s;while(o>n){r.moveTo(i,o);let e=n;if(!(a.length>0&&a[a.length-1].bottomY>e)){r.lineTo(i,e);break}{const n=a.pop();e=t+n.bottomY,r.lineTo(i,e),o=t+n.topY}}r.stroke()}paintFooter(e,t,i,n){for(let s of n.beats){if(s.graceType!==S.None||s.duration===v.Whole||s.duration===v.DoubleWhole||s.duration===v.QuadrupleWhole)return;let r=n.getBeatLineX(s),a=t+this.y,o=t+this.y+this.height-this._tupletSize,l=this.getOnNotesGlyphForBeat(s);if(l.noteNumbers&&s.duration!==v.Half?a+=l.noteNumbers.getNoteY(l.noteNumbers.minStringNote,ne.Bottom):a+=this.height-this.settings.notation.rhythmHeight*this.settings.display.scale-this._tupletSize,this.paintBeamingStem(s,t+this.y,e+this.x+r,a,o,i),s.duration>v.Quarter){let t=new En(0,0,s.duration,W.Down,!1);t.renderer=this,t.doLayout(),t.paint(e+this.x+r,o,i)}}}}Oa.StaffId="tab",Oa.TabLineSpacing=10;class Fa extends Kn{constructor(e,t,i){super(),this._showTimeSignature=e,this._showRests=t,this._showTiedNotes=i,this.hideOnPercussionTrack=!0}get staffId(){return Oa.StaffId}canCreate(e,t){return t.tuning.length>0&&super.canCreate(e,t)}create(e,t){let i=new Oa(e,t);return i.showRests=this._showRests,i.showTimeSignature=this._showTimeSignature,i.showTiedNotes=this._showTiedNotes,i}}class Ma extends xn{constructor(){super(0,0)}doLayout(){super.doLayout();const e=this.renderer.resources.effectFont;this.height=e.size+Ma.Padding*this.scale}paint(e,t,i){let n=this.renderer.resources;i.font=n.effectFont;let s=i.textAlign;i.textAlign=E.Center,i.fillText("T",e+this.x,t+this.y+i.font.size/2),i.textAlign=s,i.strokeCircle(e+this.x,t+this.y+i.font.size/2+(Ma.Padding-1)*this.scale,i.font.size/1.6)}}Ma.Padding=4;class Aa extends Is{get notationElement(){return o.EffectTap}get sizingMode(){return re.SingleOnBeat}shouldCreateGlyphForNote(e){return e.isLeftHandTapped}createNewGlyph(e,t){return new Ma}}class Ia{constructor(){this.noteRange=1,this.x=0,this.y=0}}(function(e){e[e["None"]=0]="None",e[e["Rectangle"]=1]="Rectangle",e[e["Ellipse"]=2]="Ellipse",e[e["Circle"]=3]="Circle"})(oe||(oe={}));class Da extends Ia{constructor(){super(...arguments),this.align=E.Left,this.frame=oe.None,this.text="",this.fontFace="",this.weight=0,this.height=0}}class Ra extends Ia{constructor(){super(...arguments),this.chord=new Re}}class Va extends Ia{}class Ha extends Ia{}class Ga extends Ia{constructor(){super(...arguments),this.number=0}}class Wa extends Ia{constructor(){super(...arguments),this.decrescendo=!1}}class ja extends Ia{constructor(){super(...arguments),this.allNumbers=!1,this.firstNumber=0,this.lastNumber=0}}class $a extends Ia{constructor(){super(...arguments),this.octave=1}}class za extends Ia{}class Ua{constructor(){this.defaultClef=d.G2,this.description="",this.percussion=!1,this.instrument=0,this.volume=0,this.transpose=0,this.index=0}}class Xa{constructor(){this.from=0,this.to=0,this.curly=!1}}class Ya{constructor(){this.currentBarIndex=-1,this.currentBarComplete=!0,this.currentBarDuration=0,this.currentPosition=0,this.voiceStemDir=null,this.repeatCount=0,this.repeatEnd=null}}class qa{constructor(){this._trackChannel=0,this._beamingMode=O.Auto,this._isFirstSystem=!0,this._staffLookup=new Map,this._brackets=[],this._staffLayoutLookup=new Map,this._staffLayouts=[],this._timeSignature=new He,this._voiceStates=new Map}parseXml(e,t){this._galleryObjects=new Map,this._tieStarts=[],this._tieStartIds=new Map,this._voiceCounts=new Map,this._slurs=new Map,this._crescendo=new Map,this._isFirstSystem=!0;let i=new ut;try{i.parse(e)}catch(n){throw new we("Could not parse XML",n)}this.parseDom(i),this.consolidate(),this.score.finish(t)}consolidate(){let e=this.score.tempo;for(const t of this.score.tracks){const i=this._voiceCounts.get(t.index);for(const n of t.staves){while(n.bars.length<this.score.masterBars.length)this.addNewBar(n);for(const t of n.bars){while(t.voices.length<i)t.addVoice(new qe);for(const e of t.voices)if(0===e.beats.length){const t=new De;t.isEmpty=!0,e.addBeat(t)}const n=t.masterBar;n.tempoAutomation&&(n.tempoAutomation.value!==e?e=n.tempoAutomation.value:n.tempoAutomation=null)}}}qa.applyEffectRange(this._slurs,(e,t)=>{t.isLegatoOrigin=!0}),qa.applyEffectRange(this._crescendo,(e,t)=>{t.crescendo=e.decrescendo?y.Decrescendo:y.Crescendo})}static applyEffectRange(e,t){for(const[i,n]of e){const e=n.noteRange;let s=i;for(let i=0;i<e;i++)if(t(n,s),s.index+1<s.voice.beats.length)s=s.voice.beats[s.index+1];else{if(!(s.voice.bar.index+1<s.voice.bar.staff.bars.length))break;{const e=s.voice.bar.staff.bars[s.voice.bar.index+1];s=e.voices[s.voice.index].beats[0]}}}}parseDom(e){let t=e.firstElement;if(!t)throw new we("No valid XML");if("score"!==t.localName)throw new we('Root node of XML was not "score"');this.score=new je,this.score.tempo=120;for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"info":this.parseInfo(i);break;case"layout":this.parseLayout(i);break;case"gallery":this.parseGallery(i);break;case"pageObjects":this.parsePageObjects(i);break;case"systems":this.parseSystems(i);break}}parseLayout(e){for(let s of e.childNodes)if(s.nodeType===H.Element)switch(s.localName){case"staves":this.parseLayoutStaves(s);break;case"brackets":this.parseBrackets(s);break}const t=this._brackets.filter(e=>e.curly);t.sort((e,t)=>e.from-t.from);let i=0,n=null;for(let s=0;s<this._staffLayouts.length;s++){const e=this._staffLayouts[s];while(i<t.length&&s>t[i].to)i++;n&&i<t.length&&s>t[i].from&&s<=t[i].to?n.ensureStaveCount(n.staves.length+1):(n=new Ye,n.ensureStaveCount(1),n.name=e.description,n.playbackInfo.volume=Math.floor(e.volume/128*16),n.playbackInfo.program=e.instrument,e.percussion?(n.playbackInfo.primaryChannel=9,n.playbackInfo.secondaryChannel=9):(n.playbackInfo.primaryChannel=this._trackChannel++,n.playbackInfo.secondaryChannel=this._trackChannel++),this.score.addTrack(n));const r=n.staves[n.staves.length-1];r.isPercussion=e.percussion,r.transpositionPitch=e.transpose,r.displayTranspositionPitch=0,r.showTablature=!1,this._staffLookup.set(e.index,r)}}parseBrackets(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"bracket":this.parseBracket(t);break}}parseBracket(e){const t=new Xa;t.from=parseInt(e.getAttribute("from")),t.to=parseInt(e.getAttribute("to")),e.attributes.has("curly")&&(t.curly="true"===e.attributes.get("curly")),this._brackets.push(t)}parseLayoutStaves(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"staffLayout":this.parseStaffLayout(t);break}}parseStaffLayout(e){const t=new Ua;t.description=e.getAttribute("description");for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"notation":i.attributes.has("defaultClef")&&(t.defaultClef=this.parseClef(i.attributes.get("defaultClef")));break;case"sound":i.attributes.has("percussion")&&(t.percussion="true"===i.attributes.get("percussion")),i.attributes.has("instr")&&(t.instrument=parseInt(i.attributes.get("instr"))),i.attributes.has("volume")&&(t.volume=parseInt(i.attributes.get("volume"))),i.attributes.has("transpose")&&(t.transpose=parseInt(i.attributes.get("transpose")));break}this._staffLayoutLookup.set(t.description,t),t.index=this._staffLayouts.length,this._staffLayouts.push(t)}parseClef(e){switch(e){case"treble":return d.G2;case"bass":return d.F4;case"alto":return d.C4;case"tenor":return d.C4}return d.G2}parseClefOttava(e){return e.endsWith("-")?p._8vb:e.endsWith("+")?p._8va:p.Regular}parseSystems(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"system":this.parseSystem(t);break}}parseSystem(e){e.attributes.has("tempo")&&0===this.score.masterBars.length&&(this.score.tempo=parseInt(e.attributes.get("tempo"))),"0"===e.getAttribute("beamGrouping")&&(this._beamingMode=O.ForceSplitToNext);for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"staves":this.parseStaves(e,t);break}this._isFirstSystem=!1}parseStaves(e,t){let i=this.score.masterBars.length;for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"staff":this.parseStaff(e,i,n);break}}parseStaff(e,t,i){const n=i.getAttribute("layout");this._currentStaffLayout=this._staffLayoutLookup.get(n),this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!1,this.parseTime(i.getAttribute("defaultTime"));const s=this._staffLookup.get(this._currentStaffLayout.index);while(s.bars.length<t)this.addNewBar(s);for(let r of i.childNodes)if(r.nodeType===H.Element)switch(r.localName){case"voices":this.parseVoices(n,s,e,t,r);break}}parseTime(e){switch(e){case"allaBreve":case"C":this._timeSignature.timeSignatureNumerator=2,this._timeSignature.timeSignatureDenominator=2,this._timeSignature.timeSignatureCommon=!0;break;case"longAllaBreve":this._timeSignature.timeSignatureNumerator=4,this._timeSignature.timeSignatureDenominator=4,this._timeSignature.timeSignatureCommon=!0;break;default:if(e.indexOf("/")>0){const t=e.split("/");this._timeSignature.timeSignatureNumerator=parseInt(t[0]),this._timeSignature.timeSignatureDenominator=parseInt(t[1]),this._timeSignature.timeSignatureCommon=!1}break}}parseVoices(e,t,i,n,s){let r=0;for(let a of s.childNodes)if(a.nodeType===H.Element)switch(a.localName){case"voice":this.parseVoice(e,t,i,r,n,a),r++;break}}getOrCreateBar(e,t){return t<e.bars.length?e.bars[t]:this.addNewBar(e)}addNewBar(e){let t=new _e;if(e.bars.length>0?(t.clef=e.bars[e.bars.length-1].clef,t.clefOttava=e.bars[e.bars.length-1].clefOttava):t.clef=this._currentStaffLayout.defaultClef,e.addBar(t),e.bars.length>this.score.masterBars.length){let e=new He;this.score.addMasterBar(e),e.index>0&&(e.keySignature=e.previousMasterBar.keySignature,e.keySignatureType=e.previousMasterBar.keySignatureType,e.tripletFeel=e.previousMasterBar.tripletFeel),e.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,e.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,e.timeSignatureCommon=this._timeSignature.timeSignatureCommon}return t}newBar(e,t){this._currentVoiceState.currentBarIndex++,this._currentBar=this.getOrCreateBar(e,this._currentVoiceState.currentBarIndex),this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1),this._currentVoiceState.currentBarComplete=!1,this._currentVoiceState.currentPosition=0,this.ensureVoice(e,t)}parseVoice(e,t,i,n,s,r){const a=e+"_"+n;if(this._currentVoiceState&&!this._currentVoiceState.currentBarComplete&&(this._currentBar.masterBar.isAnacrusis=!0),this._voiceStates.has(a)?(this._currentVoiceState=this._voiceStates.get(a),this._currentBar=this.getOrCreateBar(t,this._currentVoiceState.currentBarIndex),this.ensureVoice(t,n)):(this._currentVoiceState=new Ya,this._currentVoiceState.currentBarIndex=s-1,this._voiceStates.set(a,this._currentVoiceState),this.newBar(t,n)),r.attributes.has("stemDir"))switch(r.attributes.get("stemDir")){case"up":this._currentVoiceState.voiceStemDir=W.Up;break;case"down":this._currentVoiceState.voiceStemDir=W.Down;break;default:this._currentVoiceState.voiceStemDir=null;break}else this._currentVoiceState.voiceStemDir=null;const o=r.findChildElement("noteObjects");if(i.attributes.has("tempo")&&(this._currentBar.masterBar.tempoAutomation=new Se,this._currentBar.masterBar.tempoAutomation.isLinear=!0,this._currentBar.masterBar.tempoAutomation.type=u.Tempo,this._currentBar.masterBar.tempoAutomation.value=parseInt(i.attributes.get("tempo"))),o)for(let l of o.childNodes)if(l.nodeType===H.Element)switch(this._currentVoiceState.currentBarComplete&&"barline"!==l.localName&&this.newBar(t,n),l.localName){case"clefSign":this._currentBar.clef=this.parseClef(l.getAttribute("clef")),this._currentBar.clefOttava=this.parseClefOttava(l.getAttribute("clef"));break;case"keySign":this._currentBar.masterBar.keySignature=parseInt(l.getAttribute("fifths"));break;case"timeSign":this.parseTime(l.getAttribute("time")),this._currentBar.masterBar.timeSignatureDenominator=this._timeSignature.timeSignatureDenominator,this._currentBar.masterBar.timeSignatureNumerator=this._timeSignature.timeSignatureNumerator,this._currentBar.masterBar.timeSignatureCommon=this._timeSignature.timeSignatureCommon,this._currentVoiceState.currentPosition=0,this._currentVoiceState.currentBarDuration=this._currentBar.masterBar.calculateDuration(!1);break;case"barline":switch(l.getAttribute("type")){case"double":this._currentBar.masterBar.isDoubleBar=!0,this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"end":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0);break;case"repEnd":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(l),this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;case"repBegin":this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0,this._currentVoiceState.repeatEnd=null,this._currentVoiceState.repeatCount=0;break;case"repEndBegin":this._currentVoiceState.repeatEnd=this._currentBar.masterBar,this._currentBar.masterBar.repeatCount<this._currentVoiceState.repeatCount&&(this._currentBar.masterBar.repeatCount=this._currentVoiceState.repeatCount),this.parseBarDrawObject(l),this.newBar(t,n),this._currentBar.masterBar.isRepeatStart=!0;break;case"dashed":this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break;default:this._currentVoiceState.currentBarComplete||(this._currentBar.masterBar.isAnacrusis=!0),this._currentVoiceState.currentBarComplete=!0;break}break;case"chord":let e=new De;this.initFromPreviousBeat(e,this._currentVoice),e.beamingMode=this._beamingMode,this._currentVoiceState.voiceStemDir&&(e.preferredBeamDirection=this._currentVoiceState.voiceStemDir),this.parseDuration(this._currentBar,e,l.findChildElement("duration")),e.updateDurations(),this._currentVoiceState.currentPosition+=e.playbackDuration,this._currentVoice.addBeat(e),this.parseChord(e,l),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0);break;case"rest":const i=this.parseRestDurations(this._currentBar,l.findChildElement("duration"));i&&(this.initFromPreviousBeat(i,this._currentVoice),i.updateDurations(),this._currentVoiceState.currentPosition+=i.playbackDuration,this._currentVoice.addBeat(i),this._currentVoiceState.currentPosition>=this._currentVoiceState.currentBarDuration&&(this._currentVoiceState.currentBarComplete=!0));break}}initFromPreviousBeat(e,t){let i=this.getLastBeat(t);i&&(e.dynamics=i.dynamics)}getLastBeat(e){if(e.beats.length>0)return e.beats[e.beats.length-1];if(e.bar.index>0){const t=e.bar.staff.bars[e.bar.index-1];if(e.index<t.voices.length){const i=t.voices[e.index];return this.getLastBeat(i)}}return null}ensureVoice(e,t){while(this._currentBar.voices.length<t+1)this._currentBar.addVoice(new qe);(!this._voiceCounts.has(e.track.index)||this._voiceCounts.get(e.track.index)<this._currentBar.voices.length)&&this._voiceCounts.set(e.track.index,this._currentBar.voices.length),this._currentVoice=this._currentBar.voices[t]}parseChord(e,t){const i=new Pe;for(let n of t.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"stem":switch(n.getAttribute("dir")){case"up":e.preferredBeamDirection=W.Up;break;case"down":e.preferredBeamDirection=W.Down;break}break;case"articulation":switch(n.getAttribute("type")){case"staccato":i.isStaccato=!0;break;case"normalAccent":i.accentuated=c.Normal;break;case"strongAccent":i.accentuated=c.Heavy;break}break;case"lyric":this.parseLyric(e,n);break;case"drawObjects":this.parseBeatDrawObject(e,n);break;case"heads":this.parseHeads(e,i,n);break;case"beam":switch(n.getAttribute("group")){case"force":e.beamingMode=O.ForceMergeWithNext;break;case"divide":e.beamingMode=O.ForceSplitToNext;break}break}}parseHeads(e,t,i){for(let n of i.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"head":this.parseHead(e,t,n);break}}parseHead(e,t,i){const n=new Pe,s=ue.parseTuning(i.getAttribute("pitch"));n.octave=s.octave-1,n.tone=s.noteValue,n.isStaccato=t.isStaccato,n.accentuated=t.accentuated,e.addNote(n);for(let r of i.childNodes)if(r.nodeType===H.Element)switch(r.localName){case"alter":r.attributes.has("step")&&(n.tone+=parseInt(r.attributes.get("step")));break;case"tie":r.attributes.has("begin")?this._tieStartIds.has(n.id)||(this._tieStartIds.set(n.id,!0),this._tieStarts.push(n)):r.attributes.has("end")&&this._tieStarts.length>0&&!n.isTieDestination&&(n.isTieDestination=!0,n.tieOriginNoteId=this._tieStarts[0].id,this._tieStarts.splice(0,1),this._tieStartIds.delete(n.id));break}}parseBeatDrawObject(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"drawObj":const t=this.parseDrawObj(i);if(t)if(t instanceof Da)t.fontFace.startsWith("capella")?"u"===t.text?(e.fermata=new at,e.fermata.type=V.Medium):"f"===t.text?e.dynamics=w.F:"j"===t.text&&(e.dynamics=w.MF):this._isFirstSystem&&""===this.score.title&&t.align===E.Center&&t.height>16&&t.weight>400?this.score.title=t.text:this._isFirstSystem&&""===this.score.artist&&t.align===E.Center&&t.y<0?this.score.artist=t.text:this._isFirstSystem&&""===this.score.music&&t.align===E.Right&&t.y<0?this.score.music=t.text:t.text.startsWith("by capella")||(e.text=t.text);else if(t instanceof Ra);else if(t instanceof Ha)e.vibrato=x.Slight;else if(t instanceof Wa)e.crescendo=t.decrescendo?y.Decrescendo:y.Crescendo,t.noteRange++,this._crescendo.set(e,t);else if(t instanceof Va){const i=t;this._slurs.set(e,i)}else t instanceof ja&&this.applyVolta(t);break}}parseBarDrawObject(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);e&&e instanceof ja&&this.applyVolta(e);break}}applyVolta(e){if(e.lastNumber>0?(this._currentVoiceState.repeatCount=e.lastNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)):e.firstNumber>0&&(this._currentVoiceState.repeatCount=e.firstNumber,this._currentVoiceState.repeatEnd&&this._currentVoiceState.repeatEnd.repeatCount<this._currentVoiceState.repeatCount&&(this._currentVoiceState.repeatEnd.repeatCount=this._currentVoiceState.repeatCount)),e.lastNumber>0&&e.firstNumber>0){let t=0;for(let i=e.firstNumber;i<=e.lastNumber;i++)t|=1<<i-1;this._currentBar.masterBar.alternateEndings=t}else e.lastNumber>0?this._currentBar.masterBar.alternateEndings=1<<e.lastNumber-1:e.firstNumber>0&&(this._currentBar.masterBar.alternateEndings=1<<e.firstNumber-1)}parseLyric(e,t){for(let i of t.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"verse":e.lyrics||(e.lyrics=[]);let t=i.innerText;"true"===i.getAttribute("hyphen")&&(t+="-"),e.lyrics.push(t);break}}parseRestDurations(e,t){const i=t.getAttribute("base");if(-1!==i.indexOf("/")){let i=new De;return i.beamingMode=this._beamingMode,this.parseDuration(e,i,t),i}const n=parseInt(i);if(1===n){let e=new De;return e.beamingMode=this._beamingMode,e.duration=v.Whole,e}return Ne.warning("Importer","Multi-Bar rests are not supported"),null}parseDurationValue(e){switch(e){case"2/1":return v.DoubleWhole;case"1/1":return v.Whole;case"1/2":return v.Half;case"1/4":return v.Quarter;case"1/8":return v.Eighth;case"1/16":return v.Sixteenth;case"1/32":return v.ThirtySecond;case"1/64":return v.SixtyFourth;case"1/128":return v.OneHundredTwentyEighth;default:return Ne.warning("Importer","Unsupported duration"),v.Quarter}}parseDuration(e,t,i){const n=i.getAttribute("base");t.duration=this.parseDurationValue(n),i.attributes.has("dots")&&(t.dots=parseInt(i.attributes.get("dots")));const s=i.findChildElement("tuplet");if(s){t.tupletNumerator=parseInt(s.getAttribute("count"));const e="true"===s.getAttribute("tripartite")?3:1,i="true"===s.getAttribute("prolong")?0:1;let n=0;while(e*Math.pow(2,n+i)<t.tupletNumerator)n++;t.tupletDenominator=e*Math.pow(2,n)}}parsePageObjects(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);if(e&&e instanceof Da)switch(e.align){case E.Center:this.score.title?this.score.subTitle||(this.score.subTitle=t.innerText):this.score.title=t.innerText;break;case E.Right:this.score.artist||(this.score.artist=t.innerText);break}break}}parseGallery(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"drawObj":const e=this.parseDrawObj(t);e&&this._galleryObjects.set(t.getAttribute("name"),e);break}}parseDrawObj(e){let t=null,i=1;for(let n of e.childNodes)if(n.nodeType===H.Element)switch(n.localName){case"text":t=this.parseText(n);break;case"guitar":t=this.parseGuitar(n);break;case"slur":t=this.parseSlur(n);break;case"wavyLine":t=this.parseWavyLine(n);break;case"bracket":t=this.parseTupletBracket(n);break;case"wedge":t=this.parseWedge(n);break;case"volta":t=this.parseVolta(n);break;case"octaveClef":t=this.parseOctaveClef(n);break;case"trill":t=this.parseTrill(n);break;case"basic":n.attributes.has("noteRange")&&(i=parseInt(n.attributes.get("noteRange")));break}return t&&(t.noteRange=i),t}parseTrill(e){const t=new za;return t}parseOctaveClef(e){const t=new $a;return e.attributes.has("octave")&&(t.octave=parseInt(e.attributes.get("octave"))),t}parseVolta(e){const t=new ja;return t.allNumbers="true"===e.attributes.get("allNumbers"),e.attributes.has("firstNumber")&&(t.firstNumber=parseInt(e.attributes.get("firstNumber"))),e.attributes.has("lastNumber")&&(t.lastNumber=parseInt(e.attributes.get("lastNumber"))),t}parseWedge(e){const t=new Wa;return t.decrescendo="true"===e.attributes.get("decrescendo"),t}parseTupletBracket(e){const t=new Ga;return e.attributes.has("number")&&(t.number=parseInt(e.attributes.get("number"))),t}parseWavyLine(e){const t=new Ha;return t}parseSlur(e){const t=new Va;return t}parseGuitar(e){const t=new Ra,i=e.innerText.trim();for(let n=0;n<i.length;n++)"/"===i.charAt(n)?t.chord.strings.push(0):t.chord.strings.push(parseInt(i.charAt(n)));return t}parseText(e){const t=new Da;switch(e.attributes.has("x")&&(t.x=parseFloat(e.attributes.get("x"))),e.attributes.has("x")&&(t.y=parseFloat(e.attributes.get("y"))),e.getAttribute("align")){case"left":t.align=E.Left;break;case"center":t.align=E.Center;break;case"right":t.align=E.Right;break}switch(e.getAttribute("frame")){case"rectangle":t.frame=oe.Rectangle;break;case"ellipse":t.frame=oe.Ellipse;break;case"circle":t.frame=oe.Circle;break;case"none":t.frame=oe.None;break}if(e.firstElement){for(let i of e.childNodes)if(i.nodeType===H.Element)switch(i.localName){case"font":t.fontFace=i.getAttribute("face"),i.attributes.has("weight")&&(t.weight=parseInt(i.attributes.get("weight"))),i.attributes.has("height")&&(t.height=parseInt(i.attributes.get("height")));break;case"content":t.text=i.innerText;break}}else t.text=e.innerText;return t}parseInfo(e){for(let t of e.childNodes)if(t.nodeType===H.Element)switch(t.localName){case"author":this.score.tab=t.firstChild.innerText;break;case"comment":this.score.notices=t.firstChild.innerText;break}}}class Ja extends ve{get name(){return"Capella"}constructor(){super()}readScore(){Ne.debug(this.name,"Loading ZIP entries");let e,t=new xt(this.data),i=null;if(e=t.read(),Ne.debug(this.name,"Zip entries loaded"),e.length>0)for(let s of e)switch(s.fileName){case"score.xml":i=Qe.toString(s.data,this.settings.importer.encoding);break}else this.data.reset(),i=Qe.toString(this.data.readAll(),this.settings.importer.encoding);if(!i)throw new we("No valid capella file");Ne.debug(this.name,"Start Parsing score.xml");try{let e=new qa;e.parseXml(i,this.settings),Ne.debug(this.name,"score.xml parsed");let t=e.score;return t}catch(n){throw new we("Failed to parse CapXML",n)}}}class Qa{constructor(e){this._targets=new Set,this._callback=e,window.addEventListener("resize",this.onWindowResize.bind(this),!1)}observe(e){this._targets.add(e)}unobserve(e){this._targets.delete(e)}disconnect(){this._targets.clear()}onWindowResize(){const e=[];for(const t of this._targets)e.push({target:t,contentRect:void 0,borderBoxSize:void 0,contentBoxSize:[]});this._callback(e,this)}}class Ka{constructor(e){this._elements=[];let t=null;const i=this._check.bind(this);this._check=()=>{t||(t=setTimeout(()=>{i(),t=null},100))},this._callback=e,window.addEventListener("resize",this._check,!0),document.addEventListener("scroll",this._check,!0)}observe(e){this._elements.indexOf(e)>=0||(this._elements.push(e),this._check())}unobserve(e){this._elements=this._elements.filter(t=>t!=e)}_check(){const e=[];this._elements.forEach(t=>{const i=t.getBoundingClientRect(),n=i.top+i.height>=0&&i.top<=window.innerHeight&&i.left+i.width>=0&&i.left<=window.innerWidth;n&&e.push({target:t,isIntersecting:!0})}),e.length&&this._callback(e,this)}}class Za{constructor(e,t){this.vertical=e,this.createLayout=t}}class eo{constructor(e,t){this.supportsWorkers=e,this.createCanvas=t}}class to{static createStyleElement(e,t){let i=e.getElementById("alphaTabStyle");if(!i){if(!t)return void Ne.error("AlphaTab","Font directory could not be detected, cannot create style element");i=e.createElement("style"),i.id="alphaTabStyle";let n=`\n            @font-face {\n                font-family: 'alphaTab';\n                 src: url('${t}Bravura.eot');\n                 src: url('${t}Bravura.eot?#iefix') format('embedded-opentype')\n                      , url('${t}Bravura.woff') format('woff')\n                      , url('${t}Bravura.otf') format('opentype')\n                      , url('${t}Bravura.svg#Bravura') format('svg');\n                 font-weight: normal;\n                 font-style: normal;\n            }\n            .at-surface * {\n                cursor: default;\n                vertical-align: top;\n                overflow: visible;\n            }\n            .at-surface-svg text {\n                dominant-baseline: central;\n            }             \n            .at {\n                 font-family: 'alphaTab';\n                 speak: none;\n                 font-style: normal;\n                 font-weight: normal;\n                 font-variant: normal;\n                 text-transform: none;\n                 line-height: 1;\n                 line-height: 1;\n                 -webkit-font-smoothing: antialiased;\n                 -moz-osx-font-smoothing: grayscale;\n                 font-size: ${to.MusicFontSize}px;\n                 overflow: visible !important;\n            }`;i.innerHTML=n,e.getElementsByTagName("head").item(0).appendChild(i),to.bravuraFontChecker.checkForFontAvailability()}}static get globalThis(){if(void 0===to._globalThis){try{to._globalThis=globalThis}catch(t){}"undefined"===typeof to._globalThis&&(to._globalThis=self),"undefined"===typeof to._globalThis&&(to._globalThis=e),"undefined"===typeof to._globalThis&&(to._globalThis=window),"undefined"===typeof to._globalThis&&(to._globalThis=Function("return this")())}return this._globalThis}static get isRunningInWorker(){return"WorkerGlobalScope"in to.globalThis}static get isRunningInAudioWorklet(){return"AudioWorkletGlobalScope"in to.globalThis}static throttle(e,t){let i=0;return()=>{to.globalThis.clearTimeout(i),i=to.globalThis.setTimeout(e,t)}}static detectScriptFile(){return"document"in to.globalThis?document.currentScript.src:null}static registerJQueryPlugin(){if(!to.isRunningInWorker&&to.globalThis&&"jQuery"in to.globalThis){let e=to.globalThis["jQuery"],t=new qn;e.fn.alphaTab=function(e){const i=Array.prototype.slice.call(arguments,1);return 1===this.length?t.exec(this[0],e,i):this.each((n,s)=>{t.exec(s,e,i)})},e.alphaTab={restore:qn.restore},e.fn.alphaTab.fn=t}}static createScoreRenderer(e){return new dn(e)}static getRenderEngineFactory(e){return e.core.engine&&to.renderEngines.has(e.core.engine)?to.renderEngines.get(e.core.engine):to.renderEngines.get("default")}static getLayoutEngineFactory(e){return e.display.layoutMode&&to.layoutEngines.has(e.display.layoutMode)?to.layoutEngines.get(e.display.layoutMode):to.layoutEngines.get(t.LayoutMode.Page)}static buildImporters(){return[new tt,new Ot,new Nt,new Ft,new Ja,new et]}static createDefaultRenderEngines(){const e=new Map;return e.set("svg",new eo(!0,()=>new Qn)),e.set("default",e.get("svg")),to.createPlatformSpecificRenderEngines(e),e}static createPlatformSpecificRenderEngines(e){e.set("html5",new eo(!1,()=>new fn))}static createDefaultStaveProfiles(){const e=new Map;e.set(t.StaveProfile.ScoreTab,[new vs("score-effects",[new tr,new ar,new Ws,new ir,new Bs,new Ms,new or,new sr,new $s(!0),new lr,new Js,new hr,new Ks,new Aa,new _s]),new va,new vs("tab-effects",[new Cs,new $s(!1),new Ps,new Gs,new sr,new lr,new Js,new hr,new Ks,new Zs,new Os,new Rs(_.Natural),new Rs(_.Artificial),new Rs(_.Pinch),new Rs(_.Tap),new Rs(_.Semi),new Rs(_.Feedback),new Vs,new Ts,new As,new zs,new Ys,new Us,new Aa]),new Fa(!1,!1,!1)]),e.set(t.StaveProfile.Score,[new vs("score-effects",[new tr,new ar,new Ws,new ir,new Bs,new Ms,new or,new sr,new $s(!0),new lr,new Js,new hr,new Ks,new Os,new Vs,new zs,new Ys,new Us,new Aa,new _s]),new va,new vs("score-bottom-effects",[new Cs,new $s(!1),new Ps,new Gs])]);let i=[new tr,new ar,new Ws,new ir,new Bs,new Ms,new sr,new lr,new Js,new hr,new Ks,new Zs,new Os,new Rs(_.Artificial),new Rs(_.Pinch),new Rs(_.Tap),new Rs(_.Semi),new Rs(_.Feedback),new Vs,new Ts,new As,new zs,new Ys,new Us,new Aa,new _s];return e.set(t.StaveProfile.Tab,[new vs("tab-effects",i),new Fa(!0,!0,!0),new vs("tab-bottom-effects",[new Gs])]),e.set(t.StaveProfile.TabMixed,[new vs("tab-effects",i),new Fa(!1,!1,!1),new vs("tab-bottom-effects",[new Gs])]),e}static createDefaultLayoutEngines(){const e=new Map;return e.set(t.LayoutMode.Page,new Za(!0,e=>new Br(e))),e.set(t.LayoutMode.Horizontal,new Za(!1,e=>new Tr(e))),e}static platformInit(){to.isRunningInAudioWorklet?zn.init():to.isRunningInWorker?(pn.init(),nn.init()):to.webPlatform===ee.Browser&&(to.registerJQueryPlugin(),to.HighDpiFactor=window.devicePixelRatio,"ResizeObserver"in to.globalThis||(to.globalThis.ResizeObserver=Qa),"IntersectionObserver"in to.globalThis||(to.globalThis.IntersectionObserver=Ka))}static detectWebPlatform(){try{if("[object process]"===Object.prototype.toString.call("undefined"!==typeof i?i:0))return ee.NodeJs}catch(e){}return ee.Browser}}to.MusicFontSize=34,to.HighDpiFactor=1,to._globalThis=void 0,to.webPlatform=to.detectWebPlatform(),to.scriptFile=to.detectScriptFile(),to.bravuraFontChecker=new Rn("alphaTab"),to.renderEngines=to.createDefaultRenderEngines(),to.layoutEngines=to.createDefaultLayoutEngines(),to.staveProfiles=to.createDefaultStaveProfiles(),to.platformInit();class io{constructor(){if(this.scriptFile=null,this.fontDirectory=null,this.file=null,this.tex=!1,this.tracks=null,this.enableLazyLoading=!0,this.engine="default",this.logLevel=t.LogLevel.Info,this.useWorkers=!0,this.includeNoteBounds=!1,!to.isRunningInWorker&&to.globalThis.ALPHATAB_ROOT?(this.scriptFile=to.globalThis.ALPHATAB_ROOT,this.scriptFile=io.ensureFullUrl(this.scriptFile),this.scriptFile=io.appendScriptName(this.scriptFile)):this.scriptFile=to.scriptFile,!to.isRunningInWorker&&to.globalThis.ALPHATAB_FONT)this.fontDirectory=to.globalThis["ALPHATAB_FONT"],this.fontDirectory=io.ensureFullUrl(this.fontDirectory);else if(this.fontDirectory=this.scriptFile,this.fontDirectory){let e=this.fontDirectory.lastIndexOf(String.fromCharCode(47));e>=0&&(this.fontDirectory=this.fontDirectory.substr(0,e)+"/font/")}}static ensureFullUrl(e){var t,i,n;if(!e)return"";if(!e.startsWith("http")&&!e.startsWith("https")&&!e.startsWith("file")){let s="",r=to.globalThis["location"];if(s+=null===(t=r.protocol)||void 0===t?void 0:t.toString(),s+="//".toString(),r.hostname&&(s+=null===(i=r.hostname)||void 0===i?void 0:i.toString()),r.port&&(s+=":".toString(),s+=null===(n=r.port)||void 0===n?void 0:n.toString()),!e.startsWith("/")){let e=r.pathname.split("/").slice(0,-1).join("/");e.length>0&&(e.startsWith("/")||(s+="/".toString()),s+=null===e||void 0===e?void 0:e.toString())}return e.startsWith("/")||(s+="/".toString()),s+=null===e||void 0===e?void 0:e.toString(),s}return e}static appendScriptName(e){return e&&!e.endsWith(".js")&&(e.endsWith("/")||(e+="/"),e+="alphaTab.js"),e}}class no{constructor(e,t){this.loaded=e,this.total=t}}class so{}so.version="1.3.0-alpha.131",so.date="2021-08-22T12:37:40.842Z";class ro{init(e,t){this.data=e,this.settings=t}export(e,t=null){const i=Ke.withCapacity(1024);return this.init(i,null!==t&&void 0!==t?t:new xi),this.writeScore(e),i.toArray()}}(function(e){e[e["SteelGuitar"]=1]="SteelGuitar",e[e["AcousticGuitar"]=2]="AcousticGuitar",e[e["TwelveStringGuitar"]=3]="TwelveStringGuitar",e[e["ElectricGuitar"]=4]="ElectricGuitar",e[e["Bass"]=5]="Bass",e[e["ClassicalGuitar"]=23]="ClassicalGuitar",e[e["UprightBass"]=6]="UprightBass",e[e["Ukulele"]=7]="Ukulele",e[e["Banjo"]=8]="Banjo",e[e["Mandolin"]=9]="Mandolin",e[e["Piano"]=10]="Piano",e[e["Synth"]=12]="Synth",e[e["Strings"]=11]="Strings",e[e["Brass"]=13]="Brass",e[e["Reed"]=14]="Reed",e[e["Woodwind"]=15]="Woodwind",e[e["Vocal"]=16]="Vocal",e[e["PitchedIdiophone"]=17]="PitchedIdiophone",e[e["Fx"]=21]="Fx",e[e["PercussionKit"]=18]="PercussionKit",e[e["Idiophone"]=19]="Idiophone",e[e["Membraphone"]=20]="Membraphone"})(le||(le={}));class ao{constructor(e,t,i=null){if(this.icon=le.Piano,this.icon=e,this.instrumentSetName=t,i)this.instrumentSetType=i;else{const e=t.split(" ");e[0]=e[0].substr(0,1).toLowerCase()+e[0].substr(1),this.instrumentSetType=e.join("")}}}class oo{constructor(){this._rhythmIdLookup=new Map}writeXml(e){const t=new ut;return this._rhythmIdLookup=new Map,this.writeDom(t,e),t.toFormattedString("",!0)}writeDom(e,t){const i=e.addElement("GPIF");i.addElement("GPVersion").innerText="7";const n=i.addElement("GPRevision");n.innerText="7",n.attributes.set("required","12021"),n.attributes.set("recommended","12023"),n.innerText="12025",i.addElement("Encoding").addElement("EncodingDescription").innerText="GP7",this.writeScoreNode(i,t),this.writeMasterTrackNode(i,t),this.writeAudioTracksNode(i,t),this.writeTracksNode(i,t),this.writeMasterBarsNode(i,t);const s=i.addElement("Bars"),r=i.addElement("Voices"),a=i.addElement("Beats"),o=i.addElement("Notes"),l=i.addElement("Rhythms");for(const h of t.tracks)for(const e of h.staves)for(const t of e.bars){this.writeBarNode(s,t);for(const e of t.voices){this.writeVoiceNode(r,e);for(const t of e.beats){this.writeBeatNode(a,t,l);for(const e of t.notes)this.writeNoteNode(o,e)}}}}writeNoteNode(e,t){const i=e.addElement("Note");i.attributes.set("id",t.id.toString()),this.writeNoteProperties(i,t),t.isGhost&&(i.addElement("AntiAccent").innerText="normal"),t.isLetRing&&i.addElement("LetRing"),t.isTrill&&(i.addElement("Trill").innerText=t.trillValue.toString());let n=0;switch(t.isStaccato&&(n|=1),t.accentuated){case c.Normal:n|=8;break;case c.Heavy:n|=4;break}if(n>0&&(i.addElement("Accent").innerText=n.toString()),t.isTieOrigin||t.isTieDestination){const e=i.addElement("Tie");e.attributes.set("origin",t.isTieOrigin?"true":"false"),e.attributes.set("destination",t.isTieDestination?"true":"false")}switch(t.vibrato){case x.Slight:i.addElement("Vibrato").innerText="Slight";break;case x.Wide:i.addElement("Vibrato").innerText="Wide";break}if(t.isFingering){switch(t.leftHandFinger){case a.Thumb:i.addElement("LeftFingering").innerText="P";break;case a.IndexFinger:i.addElement("LeftFingering").innerText="I";break;case a.MiddleFinger:i.addElement("LeftFingering").innerText="M";break;case a.AnnularFinger:i.addElement("LeftFingering").innerText="A";break;case a.LittleFinger:i.addElement("LeftFingering").innerText="C";break}switch(t.rightHandFinger){case a.Thumb:i.addElement("RightFingering").innerText="P";break;case a.IndexFinger:i.addElement("RightFingering").innerText="I";break;case a.MiddleFinger:i.addElement("RightFingering").innerText="M";break;case a.AnnularFinger:i.addElement("RightFingering").innerText="A";break;case a.LittleFinger:i.addElement("RightFingering").innerText="C";break}}t.percussionArticulation>=0?i.addElement("InstrumentArticulation").innerText=t.percussionArticulation.toString():i.addElement("InstrumentArticulation").innerText="0"}writeNoteProperties(e,t){const i=e.addElement("Properties");if(this.writeConcertPitch(i,t),this.writeTransposedPitch(i,t),t.isStringed&&(this.writeSimplePropertyNode(i,"String","String",(t.string-1).toString()),this.writeSimplePropertyNode(i,"Fret","Fret",t.fret.toString()),this.writeSimplePropertyNode(i,"Midi","Number",t.realValue.toString())),t.isPiano&&(this.writeSimplePropertyNode(i,"Octave","Number",t.octave.toString()),this.writeSimplePropertyNode(i,"Tone","Step",t.tone.toString()),this.writeSimplePropertyNode(i,"Midi","Number",t.realValue.toString())),t.beat.tap&&this.writeSimplePropertyNode(i,"Tapped","Enable",null),t.harmonicType!==_.None){switch(t.harmonicType){case _.Natural:this.writeSimplePropertyNode(i,"HarmonicType","HType","Natural");break;case _.Artificial:this.writeSimplePropertyNode(i,"HarmonicType","HType","Artificial");break;case _.Pinch:this.writeSimplePropertyNode(i,"HarmonicType","HType","Pinch");break;case _.Tap:this.writeSimplePropertyNode(i,"HarmonicType","HType","Tap");break;case _.Semi:this.writeSimplePropertyNode(i,"HarmonicType","HType","Semi");break;case _.Feedback:this.writeSimplePropertyNode(i,"HarmonicType","HType","Feedback");break}0!==t.harmonicValue&&this.writeSimplePropertyNode(i,"HarmonicFret","HFret",t.harmonicValue.toString())}t.isDead&&this.writeSimplePropertyNode(i,"Muted","Enable",null),t.isPalmMute&&this.writeSimplePropertyNode(i,"PalmMuted","Enable",null),t.hasBend&&this.writeBend(i,t),t.isHammerPullOrigin&&this.writeSimplePropertyNode(i,"HopoOrigin","Enable",null),t.isHammerPullDestination&&this.writeSimplePropertyNode(i,"HopoDestination","Enable",null),t.isLeftHandTapped&&this.writeSimplePropertyNode(i,"LeftHandTapped","Enable",null);let n=0;switch(t.slideInType){case T.IntoFromAbove:n|=32;break;case T.IntoFromBelow:n|=16;break}switch(t.slideOutType){case B.Shift:n|=1;break;case B.Legato:n|=2;break;case B.OutDown:n|=4;break;case B.OutUp:n|=8;break;case B.PickSlideDown:n|=64;break;case B.PickSlideUp:n|=128;break}n>0&&this.writeSimplePropertyNode(i,"Slide","Flags",n.toString())}writeTransposedPitch(e,t){t.isPercussion?this.writePitch(e,"ConcertPitch","C","-1",""):this.writePitchForValue(e,"TransposedPitch",t.displayValueWithoutBend,t.accidentalMode)}writeConcertPitch(e,t){t.isPercussion?this.writePitch(e,"ConcertPitch","C","-1",""):this.writePitchForValue(e,"ConcertPitch",t.realValueWithoutHarmonic,t.accidentalMode)}writePitchForValue(e,t,i,n){let s=0,r=0,a="",o="";const l=()=>{s=i%12,r=i/12|0,a=Ue.defaultSteps[s],o=Ue.defaultAccidentals[s]};switch(l(),n){case k.Default:break;case k.ForceNone:o="";break;case k.ForceNatural:o="";break;case k.ForceSharp:o="#";break;case k.ForceDoubleSharp:"#"===o&&(i-=2,l()),o="x";break;case k.ForceFlat:"#"===o&&(i+=1,l()),o="b";break;case k.ForceDoubleFlat:"#"===o&&(i+=2,l()),o="bb";break}this.writePitch(e,t,a,r.toString(),o)}writePitch(e,t,i,n,s){const r=e.addElement("Property");r.attributes.set("name",t);const a=r.addElement("Pitch");a.addElement("Step").innerText=i,a.addElement("Accidental").innerText=s,a.addElement("Octave").innerText=n}writeBend(e,t){t.hasBend&&t.bendPoints.length<=4&&this.writeStandardBend(e,t.bendPoints)}writeStandardBend(e,t){this.writeSimplePropertyNode(e,"Bended","Enable",null);var i,n,s=t[0],r=t[t.length-1];switch(t.length){case 4:i=t[1],n=t[2];break;case 3:i=t[1],n=t[1];break;default:i=new Te((s.offset+r.offset)/2,(s.value+r.value)/2),n=i;break}this.writeSimplePropertyNode(e,"BendDestinationOffset","Float",this.toBendOffset(r.offset).toString()),this.writeSimplePropertyNode(e,"BendDestinationValue","Float",this.toBendValue(r.value).toString()),this.writeSimplePropertyNode(e,"BendMiddleOffset1","Float",this.toBendOffset(i.offset).toString()),this.writeSimplePropertyNode(e,"BendMiddleOffset2","Float",this.toBendOffset(n.offset).toString()),this.writeSimplePropertyNode(e,"BendMiddleValue","Float",this.toBendValue(i.value).toString()),this.writeSimplePropertyNode(e,"BendOriginOffset","Float",this.toBendOffset(s.offset).toString()),this.writeSimplePropertyNode(e,"BendOriginValue","Float",this.toBendValue(s.value).toString())}toBendValue(e){return 25*e}toBendOffset(e){return e/Te.MaxPosition*100}writeBeatNode(e,t,i){const n=e.addElement("Beat");if(n.attributes.set("id",t.id.toString()),n.addElement("Dynamic").innerText=w[t.dynamics],t.fadeIn&&(n.addElement("Fadding").innerText="FadeIn"),t.isTremolo)switch(t.tremoloSpeed){case v.Eighth:n.addElement("Tremolo").innerText="1/2";break;case v.Sixteenth:n.addElement("Tremolo").innerText="1/4";break;case v.ThirtySecond:n.addElement("Tremolo").innerText="1/8";break}switch(t.hasChord&&n.addElement("Chord").setCData(t.chordId),t.crescendo!==y.None&&(n.addElement("Hairpin").innerText=y[t.crescendo]),t.brushType){case b.ArpeggioUp:n.addElement("Arpeggio").innerText="Up";break;case b.ArpeggioDown:n.addElement("Arpeggio").innerText="Down";break}switch(t.text&&n.addElement("FreeText").setCData(t.text),t.graceType){case S.OnBeat:case S.BeforeBeat:n.addElement("GraceNotes").innerText=S[t.graceType];break}if(t.ottava!==p.Regular&&(n.addElement("Ottavia").innerText=p[t.ottava].substr(1)),t.hasWhammyBar&&this.writeWhammyNode(n,t),t.isLegatoOrigin||t.isLegatoDestination){const e=n.addElement("Legato");e.attributes.set("origin",t.isLegatoOrigin?"true":"false"),e.attributes.set("destination",t.isLegatoDestination?"true":"false")}if(this.writeRhythm(n,t,i),null!==t.preferredBeamDirection)switch(t.preferredBeamDirection){case W.Up:n.addElement("TransposedPitchStemOrientation").innerText="Upward";break;case W.Down:n.addElement("TransposedPitchStemOrientation").innerText="Downward";break}n.addElement("ConcertPitchStemOrientation").innerText="Undefined",t.isRest||(n.addElement("Notes").innerText=t.notes.map(e=>e.id).join(" ")),this.writeBeatProperties(n,t),this.writeBeatXProperties(n,t),t.lyrics&&t.lyrics.length>0&&this.writeBeatLyrics(n,t.lyrics)}writeBeatLyrics(e,t){const i=e.addElement("Lyrics");for(const n of t){const e=i.addElement("Line");e.setCData(n)}}writeBeatXProperties(e,t){const i=e.addElement("XProperties");t.brushDuration>0&&this.writeSimpleXPropertyNode(i,"687935489","Int",t.brushDuration.toString())}writeBeatProperties(e,t){const i=e.addElement("Properties");switch(t.brushType){case b.BrushUp:this.writeSimplePropertyNode(i,"Brush","Direction","Up");break;case b.BrushDown:this.writeSimplePropertyNode(i,"Brush","Direction","Down");break}switch(t.pickStroke){case N.Up:this.writeSimplePropertyNode(i,"PickStroke","Direction","Up");break;case N.Down:this.writeSimplePropertyNode(i,"PickStroke","Direction","Down");break}switch(t.slap&&this.writeSimplePropertyNode(i,"Slapped","Enable",null),t.pop&&this.writeSimplePropertyNode(i,"Popped","Enable",null),t.vibrato){case x.Wide:this.writeSimplePropertyNode(i,"VibratoWTremBar","Strength","Wide");break;case x.Slight:this.writeSimplePropertyNode(i,"VibratoWTremBar","Strength","Slight");break}}writeRhythm(e,t,i){const n=`${t.duration}_${t.dots}_${t.tupletNumerator}_${t.tupletDenominator}';`;let s;if(this._rhythmIdLookup.has(n))s=this._rhythmIdLookup.get(n);else{s=this._rhythmIdLookup.size.toString(),this._rhythmIdLookup.set(n,s);const e=i.addElement("Rhythm");if(e.attributes.set("id",s),t.hasTuplet){const i=e.addElement("PrimaryTuplet");i.attributes.set("num",t.tupletNumerator.toString()),i.attributes.set("den",t.tupletDenominator.toString())}t.dots>0&&e.addElement("AugmentationDot").attributes.set("count",t.dots.toString());let r="Quarter";switch(t.duration){case v.QuadrupleWhole:r="Long";break;case v.DoubleWhole:r="DoubleWhole";break;case v.Whole:r="Whole";break;case v.Half:r="Half";break;case v.Quarter:r="Quarter";break;case v.Eighth:r="Eighth";break;case v.Sixteenth:r="16th";break;case v.ThirtySecond:r="32nd";break;case v.SixtyFourth:r="64th";break;case v.OneHundredTwentyEighth:r="128th";break;case v.TwoHundredFiftySixth:r="256th";break}e.addElement("NoteValue").innerText=r}e.addElement("Rhythm").attributes.set("ref",s)}writeWhammyNode(e,t){t.hasWhammyBar&&t.whammyBarPoints.length<=4&&this.writeStandardWhammy(e,t.whammyBarPoints)}writeStandardWhammy(e,t){const i=e.addElement("Whammy");var n,s,r=t[0],a=t[t.length-1];switch(t.length){case 4:n=t[1],s=t[2];break;case 3:n=t[1],s=t[1];break;default:n=new Te((r.offset+a.offset)/2,(r.value+a.value)/2),s=n;break}i.attributes.set("destinationOffset",this.toBendOffset(a.offset).toString()),i.attributes.set("destinationValue",this.toBendValue(a.value).toString()),i.attributes.set("middleOffset1",this.toBendOffset(n.offset).toString()),i.attributes.set("middleOffset2",this.toBendOffset(s.offset).toString()),i.attributes.set("middleValue",this.toBendValue(n.value).toString()),i.attributes.set("originOffset",this.toBendOffset(r.offset).toString()),i.attributes.set("originValue",this.toBendValue(r.value).toString())}writeScoreNode(e,t){const i=e.addElement("Score");i.addElement("Title").setCData(t.title),i.addElement("SubTitle").setCData(t.subTitle),i.addElement("Artist").setCData(t.artist),i.addElement("Album").setCData(t.album),i.addElement("Words").setCData(t.words),i.addElement("Music").setCData(t.music),i.addElement("WordsAndMusic").setCData(t.words===t.music?t.words:""),i.addElement("Copyright").setCData(t.copyright),i.addElement("Tabber").setCData(t.tab),i.addElement("Instructions").setCData(t.instructions),i.addElement("Notices").setCData(t.notices),i.addElement("FirstPageHeader").setCData(""),i.addElement("FirstPageFooter").setCData(""),i.addElement("PageHeader").setCData(""),i.addElement("PageFooter").setCData(""),i.addElement("ScoreSystemsDefaultLayout").setCData("4"),i.addElement("ScoreSystemsLayout").setCData("4"),i.addElement("ScoreZoomPolicy").innerText="Value",i.addElement("ScoreZoom").innerText="1",i.addElement("MultiVoice").innerText="1>"}writeMasterTrackNode(e,t){const i=e.addElement("MasterTrack");i.addElement("Tracks").innerText=t.tracks.map(e=>e.index).join(" ");const n=i.addElement("Automations");t.masterBars.length>0&&t.masterBars[0].isAnacrusis&&i.addElement("Anacrusis");const s=n.addElement("Automation");s.addElement("Type").innerText="Tempo",s.addElement("Linear").innerText="false",s.addElement("Bar").innerText="0",s.addElement("Position").innerText="0",s.addElement("Visible").innerText="true",s.addElement("Value").innerText=t.tempo+" 2",t.tempoLabel&&(s.addElement("Text").innerText=t.tempoLabel);for(const r of t.masterBars)if(r.index>0&&r.tempoAutomation){const e=n.addElement("Automation");e.addElement("Type").innerText="Tempo",e.addElement("Linear").innerText=r.tempoAutomation.isLinear?"true":"false",e.addElement("Bar").innerText=r.index.toString(),e.addElement("Position").innerText=r.tempoAutomation.ratioPosition.toString(),e.addElement("Visible").innerText="true",e.addElement("Value").innerText=r.tempoAutomation.value+" 2",r.tempoAutomation.text&&(e.addElement("Text").innerText=r.tempoAutomation.text)}}writeAudioTracksNode(e,t){e.addElement("AudioTracks")}writeTracksNode(e,t){const i=e.addElement("Tracks");for(const n of t.tracks)this.writeTrackNode(i,n)}writeTrackNode(e,t){const i=e.addElement("Track");i.attributes.set("id",t.index.toString()),i.addElement("Name").setCData(t.name),i.addElement("ShortName").setCData(t.shortName),i.addElement("Color").innerText=`${t.color.r} ${t.color.g} ${t.color.b}`,i.addElement("SystemsDefautLayout").innerText="3",i.addElement("SystemsLayout").innerText="1",i.addElement("AutoBrush"),i.addElement("PalmMute").innerText="0",i.addElement("PlayingStyle").innerText=r.isGuitar(t.playbackInfo.program)?"StringedPick":"Default",i.addElement("UseOneChannelPerString"),i.addElement("IconId").innerText=oo.getIconId(t.playbackInfo).toString(),this.writeInstrumentSetNode(i,t),this.writeTransposeNode(i,t),this.writeRseNode(i,t),i.addElement("ForcedSound").innerText="-1",this.writeMidiConnectionNode(i,t),t.playbackInfo.isSolo?i.addElement("PlaybackState").innerText="Solo":t.playbackInfo.isMute?i.addElement("PlaybackState").innerText="Mute":i.addElement("PlaybackState").innerText="Default",i.addElement("AudioEngineState").innerText="MIDI",this.writeLyricsNode(i,t),this.writeStavesNode(i,t),this.writeSoundsAndAutomations(i,t)}static getIconId(e){return 9===e.primaryChannel?oo.DrumKitProgramInfo.icon:oo.MidiProgramInfoLookup.has(e.program)?oo.MidiProgramInfoLookup.get(e.program).icon:le.SteelGuitar}writeSoundAndAutomation(e,t,i,n,s,r,a,o=0){const l=e.addElement("Sound");l.addElement("Name").setCData(i),l.addElement("Label").setCData(i),l.addElement("Path").setCData(n),l.addElement("Role").setCData(s);const h=l.addElement("MIDI");h.addElement("LSB").innerText="0",h.addElement("MSB").innerText="0",h.addElement("Program").innerText=a.toString();const c=t.addElement("Automation");c.addElement("Type").innerText="Sound",c.addElement("Linear").innerText="false",c.addElement("Bar").innerText=r.toString(),c.addElement("Position").innerText=o.toString(),c.addElement("Visible").innerText="true",c.addElement("Value").setCData(`${n};${i};${s}`)}writeSoundsAndAutomations(e,t){const i=e.addElement("Sounds"),n=e.addElement("Automations");if(t.staves.length>0&&t.staves[0].bars.length>0){const e=`Track_${t.index}_Initial`,s="Midi/"+t.playbackInfo.program,r="Factory";let a=!1;for(const o of t.staves)for(const l of o.bars)for(const o of l.voices)for(const h of o.beats){const o=h.getAutomation(u.Instrument),c=0===l.index&&0===h.index;if(o){const u=c?e:"ProgramChange_"+h.id,d=c?s:"Midi/"+o.value,p=c?r:"User";c||a||(this.writeSoundAndAutomation(i,n,e,s,r,t.staves[0].bars[0].index,t.playbackInfo.program),a=!0),this.writeSoundAndAutomation(i,n,u,d,p,l.index,o.value,o.ratioPosition),c&&(a=!0)}}}}writeMidiConnectionNode(e,t){const i=e.addElement("MidiConnection");i.addElement("Port").innerText=t.playbackInfo.port.toString(),i.addElement("PrimaryChannel").innerText=t.playbackInfo.primaryChannel.toString(),i.addElement("SecondaryChannel").innerText=t.playbackInfo.secondaryChannel.toString(),i.addElement("ForeOneChannelPerString").innerText="false"}writeRseNode(e,t){const i=e.addElement("RSE"),n=i.addElement("ChannelStrip");n.attributes.set("version","E56");const s=n.addElement("Parameters");s.innerText=`0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 0.5 1 0.5 ${t.playbackInfo.balance/16} ${t.playbackInfo.volume/16} 0.5 0.5 0.5`}writeStavesNode(e,t){const i=e.addElement("Staves");for(const n of t.staves)this.writeStaffNode(i,n)}writeStaffNode(e,t){const i=e.addElement("Staff"),n=i.addElement("Properties");if(this.writeSimplePropertyNode(n,"CapoFret","Fret",t.capo.toString()),this.writeSimplePropertyNode(n,"FretCount","Fret","24"),t.tuning.length>0){const e=n.addElement("Property");switch(e.attributes.set("name","Tuning"),e.addElement("Pitches").innerText=t.tuning.slice().reverse().join(" "),e.addElement("Label").setCData(t.tuningName),e.addElement("LabelVisible").innerText=t.tuningName?"true":"false",e.addElement("Flat"),t.tuning.length){case 3:e.addElement("Instrument").innerText="Shamisen";break;case 4:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":42==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Cello":43==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Contrabass":40==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Violin":41==t.track.playbackInfo.program?e.addElement("Instrument").innerText="Viola":e.addElement("Instrument").innerText="Bass";break;case 5:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":e.addElement("Instrument").innerText="Bass";break;case 6:105===t.track.playbackInfo.program?e.addElement("Instrument").innerText="Banjo":t.track.playbackInfo.program<=39?e.addElement("Instrument").innerText="Bass":e.addElement("Instrument").innerText="Guitar";break;case 7:t.track.playbackInfo.program<=39?e.addElement("Instrument").innerText="Bass":e.addElement("Instrument").innerText="Guitar";break;default:e.addElement("Instrument").innerText="Guitar";break}}this.writeSimplePropertyNode(n,"PartialCapoFret","Fret","0"),this.writeSimplePropertyNode(n,"PartialCapoStringFlags","Bitset",t.tuning.map(e=>"0").join("")),this.writeSimplePropertyNode(n,"TuningFlat","Enable",null),this.writeDiagramCollection(n,t,"DiagramCollection"),this.writeDiagramCollection(n,t,"DiagramWorkingSet")}writeDiagramCollection(e,t,i){const n=e.addElement("Property");n.attributes.set("name",i);const s=n.addElement("Items");for(const[r,o]of t.chords){const e=s.addElement("Item");e.attributes.set("id",r),e.attributes.set("name",o.name);const t=e.addElement("Diagram");t.attributes.set("stringCount",o.strings.length.toString()),t.attributes.set("fretCount","5"),t.attributes.set("baseFret",(o.firstFret-1).toString()),t.attributes.set("barStates",o.strings.map(e=>"1").join(" "));const i=[],n=new Map;for(let s=0;s<o.strings.length;s++){let e=o.strings[s];if(-1!==e){const r=t.addElement("Fret"),a=o.strings.length-1-s;r.attributes.set("string",a.toString()),r.attributes.set("fret",(e-o.firstFret+1).toString()),n.has(e)||(n.set(e,[]),i.push(e)),n.get(e).push(a)}}i.sort();const l=t.addElement("Fingering");if(o.barreFrets.length>0){const e=[a.LittleFinger,a.AnnularFinger,a.MiddleFinger,a.IndexFinger];for(const t of i){const i=n.get(t);if(i.length>1&&o.barreFrets.indexOf(t)>=0){const n=e.length>0?e.pop():a.IndexFinger;for(const e of i){const i=l.addElement("Position");switch(n){case a.LittleFinger:i.attributes.set("finger","Pinky");break;case a.AnnularFinger:i.attributes.set("finger","Ring");break;case a.MiddleFinger:i.attributes.set("finger","Middle");break;case a.IndexFinger:i.attributes.set("finger","Index");break}i.attributes.set("fret",(t-o.firstFret+1).toString()),i.attributes.set("string",e.toString())}}}}const h=t.addElement("Property");h.attributes.set("name","ShowName"),h.attributes.set("type","bool"),h.attributes.set("value",o.showName?"true":"false");const c=t.addElement("Property");c.attributes.set("name","ShowDiagram"),c.attributes.set("type","bool"),c.attributes.set("value",o.showDiagram?"true":"false");const u=t.addElement("Property");u.attributes.set("name","ShowFingering"),u.attributes.set("type","bool"),u.attributes.set("value",o.showFingering?"true":"false");const d=t.addElement("Chord"),p=d.addElement("KeyNote");p.attributes.set("step","C"),p.attributes.set("accidental","Natural");const f=d.addElement("BassNote");f.attributes.set("step","C"),f.attributes.set("accidental","Natural");const g=d.addElement("Degree");g.attributes.set("interval","Third"),g.attributes.set("alteration","Major"),g.attributes.set("omitted","false");const m=d.addElement("Degree");m.attributes.set("interval","Fifth"),m.attributes.set("alteration","Perfect"),m.attributes.set("omitted","false")}}writeSimplePropertyNode(e,t,i,n){const s=e.addElement("Property");s.attributes.set("name",t);const r=s.addElement(i);return null!==n&&(r.innerText=n),s}writeSimpleXPropertyNode(e,t,i,n){const s=e.addElement("XProperty");s.attributes.set("id",t);const r=s.addElement(i);return null!==n&&(r.innerText=n),s}writeLyricsNode(e,t){const i=e.addElement("Lyrics");i.attributes.set("dispatched","true");let n=[];for(const s of t.staves[0].bars)for(const e of s.voices)if(!e.isEmpty)for(const t of e.beats)if(t.lyrics)for(let e=0;e<t.lyrics.length;e++){while(e>=n.length){const e=new Ve;e.startBar=s.index,e.text="[Empty]",n.push(e)}const i=n[e];i.text="[Empty]"==i.text?t.lyrics[e]:i.text+" "+t.lyrics[e].split(" ").join("+")}for(let s=0;s<n.length;s++){const e=i.addElement("Line");e.addElement("Text").setCData(n[s].text),e.addElement("Offset").innerText=n[s].startBar.toString()}}writeTransposeNode(e,t){const i=e.addElement("Transpose"),n=Math.floor(t.staves[0].displayTranspositionPitch/12),s=t.staves[0].displayTranspositionPitch-12*n;i.addElement("Chromatic").innerText=s.toString(),i.addElement("Octave").innerText=n.toString()}writeInstrumentSetNode(e,t){const i=e.addElement("InstrumentSet"),n=t.staves[0];if(i.addElement("LineCount").innerText=n.standardNotationLineCount.toString(),t.percussionArticulations.length>0||n.isPercussion){const e=t.percussionArticulations.length>0?t.percussionArticulations:Array.from(Ee.instrumentArticulations.values());i.addElement("Name").innerText=oo.DrumKitProgramInfo.instrumentSetName,i.addElement("Type").innerText=oo.DrumKitProgramInfo.instrumentSetType;let n="",r=new ot,a=new Map;const o=i.addElement("Elements");for(const t of e){{var s=o.addElement("Element");let e=t.elementType;if(a.has(e)){const t=a.get(e);e+=" "+t,a.set(e,t+1)}else a.set(e,1);n=e,s.addElement("Name").innerText=e,s.addElement("Type").innerText=t.elementType,r=s.addElement("Articulations")}const e=r.addElement("Articulation");switch(e.addElement("Name").innerText=n+" "+r.childNodes.length,e.addElement("StaffLine").innerText=t.staffLine.toString(),e.addElement("Noteheads").innerText=[this.mapMusicSymbol(t.noteHeadDefault),this.mapMusicSymbol(t.noteHeadHalf),this.mapMusicSymbol(t.noteHeadWhole)].join(" "),t.techniqueSymbolPlacement){case P.Top:e.addElement("TechniquePlacement").innerText="below";break;case P.Middle:e.addElement("TechniquePlacement").innerText="inside";break;case P.Bottom:e.addElement("TechniquePlacement").innerText="above";break}e.addElement("TechniqueSymbol").innerText=this.mapMusicSymbol(t.techniqueSymbol),e.addElement("InputMidiNumbers").innerText="",e.addElement("OutputMidiNumber").innerText=t.outputMidiNumber.toString()}}else{const e=oo.MidiProgramInfoLookup.has(t.playbackInfo.program)?oo.MidiProgramInfoLookup.get(t.playbackInfo.program):oo.MidiProgramInfoLookup.get(0);i.addElement("Name").innerText=e.instrumentSetName,i.addElement("Type").innerText=e.instrumentSetType;const n=i.addElement("Elements"),s=n.addElement("Element");s.addElement("Pitched").innerText="Pitched",s.addElement("Type").innerText="pitched",s.addElement("SoundbankName").innerText="";const r=s.addElement("Articulations"),a=r.addElement("Articulation");a.addElement("Name").innerText="",a.addElement("StaffLine").innerText="0",a.addElement("Noteheads").innerText="noteheadBlack noteheadHalf noteheadWhole",a.addElement("TechniquePlacement").innerText="outside",a.addElement("TechniqueSymbol").innerText="",a.addElement("InputMidiNumbers").innerText="",a.addElement("OutputRSESound").innerText="",a.addElement("OutputMidiNumber").innerText="0"}}mapMusicSymbol(e){if(e===C.None)return"";let t=C[e];return t.substring(0,1).toLowerCase()+t.substring(1)}writeMasterBarsNode(e,t){const i=e.addElement("MasterBars");for(const n of t.masterBars)this.writeMasterBarNode(i,n)}writeMasterBarNode(e,t){const i=e.addElement("MasterBar"),n=i.addElement("Key");n.addElement("AccidentalCount").innerText=t.keySignature.toString(),n.addElement("Mode").innerText=A[t.keySignatureType],n.addElement("Sharps").innerText="Sharps",i.addElement("Time").innerText=`${t.timeSignatureNumerator}/${t.timeSignatureDenominator}`;let s=[];for(const r of t.score.tracks)for(const e of r.staves)s.push(e.bars[t.index].id.toString());if(i.addElement("Bars").innerText=s.join(" "),t.isDoubleBar&&i.addElement("DoubleBar"),t.isSectionStart){const e=i.addElement("Section");e.addElement("Letter").setCData(t.section.marker),e.addElement("Text").setCData(t.section.text)}if(t.isRepeatStart||t.isRepeatEnd){const e=i.addElement("Repeat");e.attributes.set("start",t.isRepeatStart?"true":"false"),e.attributes.set("end",t.isRepeatEnd?"true":"false"),t.isRepeatEnd&&e.attributes.set("count",t.repeatCount.toString())}if(t.alternateEndings>0){let e=t.alternateEndings;const n=[];let s=0;while(e>0)1==(e>>s&1)&&(n.push(s+1),e&=~(1<<s)),s++;i.addElement("AlternateEndings").innerText=n.join(" ")}t.tripletFeel!==I.NoTripletFeel&&(i.addElement("TripletFeel").innerText=I[t.tripletFeel]),this.writeFermatas(i,t)}writeFermatas(e,t){if(0!==t.fermata.size&&t.fermata.size>0){const i=e.addElement("Fermatas");for(const[e,n]of t.fermata)this.writeFermata(i,e,n)}}writeFermata(e,t,i){let n=-1,s=1;if(t>0)while(s<10){if(n=t/ke.QuarterTime*s,n===Math.floor(n))break;n=-1,s++}else n=0,s=1;if(-1===n)return;const r=e.addElement("Fermata");r.addElement("Type").innerText=V[i.type],r.addElement("Length").innerText=i.length.toString(),r.addElement("Offset").innerText=`${n}/${s}`}writeBarNode(e,t){const i=e.addElement("Bar");i.attributes.set("id",t.id.toString()),i.addElement("Voices").innerText=t.voices.map(e=>e.isEmpty?"-1":e.id.toString()).join(" "),i.addElement("Clef").innerText=d[t.clef],t.clefOttava!==p.Regular&&(i.addElement("Ottavia").innerText=p[t.clefOttava].substr(1)),t.simileMark!==f.None&&(i.addElement("SimileMark").innerText=f[t.simileMark])}writeVoiceNode(e,t){if(t.isEmpty)return;const i=e.addElement("Voice");i.attributes.set("id",t.id.toString()),i.addElement("Beats").innerText=t.beats.map(e=>e.id).join(" ")}}oo.MidiProgramInfoLookup=new Map([[0,new ao(le.Piano,"Acoustic Piano")],[1,new ao(le.Piano,"Acoustic Piano")],[2,new ao(le.Piano,"Electric Piano")],[3,new ao(le.Piano,"Acoustic Piano")],[4,new ao(le.Piano,"Electric Piano")],[5,new ao(le.Piano,"Electric Piano")],[6,new ao(le.Piano,"Harpsichord")],[7,new ao(le.Piano,"Harpsichord")],[8,new ao(le.PitchedIdiophone,"Celesta")],[9,new ao(le.PitchedIdiophone,"Vibraphone")],[10,new ao(le.PitchedIdiophone,"Vibraphone")],[11,new ao(le.PitchedIdiophone,"Vibraphone")],[12,new ao(le.PitchedIdiophone,"Xylophone")],[13,new ao(le.PitchedIdiophone,"Xylophone")],[14,new ao(le.PitchedIdiophone,"Vibraphone")],[15,new ao(le.Banjo,"Banjo")],[16,new ao(le.Piano,"Electric Organ")],[17,new ao(le.Piano,"Electric Organ")],[18,new ao(le.Piano,"Electric Organ")],[19,new ao(le.Piano,"Electric Organ")],[20,new ao(le.Piano,"Electric Organ")],[21,new ao(le.Piano,"Electric Organ")],[22,new ao(le.Woodwind,"Recorder")],[23,new ao(le.Piano,"Electric Organ")],[24,new ao(le.ClassicalGuitar,"Nylon Guitar")],[25,new ao(le.SteelGuitar,"Steel Guitar")],[26,new ao(le.SteelGuitar,"Electric Guitar")],[27,new ao(le.ElectricGuitar,"Electric Guitar")],[28,new ao(le.ElectricGuitar,"Electric Guitar")],[29,new ao(le.ElectricGuitar,"Electric Guitar")],[30,new ao(le.SteelGuitar,"Electric Guitar")],[31,new ao(le.SteelGuitar,"Electric Guitar")],[32,new ao(le.Bass,"Acoustic Bass")],[33,new ao(le.Bass,"Electric Bass")],[34,new ao(le.Bass,"Electric Bass")],[35,new ao(le.Bass,"Acoustic Bass")],[36,new ao(le.Bass,"Electric Bass")],[37,new ao(le.Bass,"Electric Bass")],[38,new ao(le.Synth,"Synth Bass")],[39,new ao(le.Synth,"Synth Bass")],[40,new ao(le.Strings,"Violin")],[41,new ao(le.Strings,"Viola")],[42,new ao(le.Strings,"Cello")],[43,new ao(le.Strings,"Contrabass")],[44,new ao(le.Strings,"Violin")],[45,new ao(le.Strings,"Violin")],[46,new ao(le.Piano,"Harp")],[47,new ao(le.Membraphone,"Timpani")],[48,new ao(le.Strings,"Violin")],[49,new ao(le.Strings,"Violin")],[50,new ao(le.Strings,"Violin")],[51,new ao(le.Strings,"Violin")],[52,new ao(le.Vocal,"Voice")],[53,new ao(le.Vocal,"Voice")],[54,new ao(le.Vocal,"Voice")],[55,new ao(le.Synth,"Pad Synthesizer")],[56,new ao(le.Brass,"Trumpet")],[57,new ao(le.Brass,"Trombone")],[58,new ao(le.Brass,"Tuba")],[59,new ao(le.Brass,"Trumpet")],[60,new ao(le.Brass,"French Horn")],[61,new ao(le.Brass,"Trumpet")],[62,new ao(le.Brass,"Trumpet")],[63,new ao(le.Brass,"Trumpet")],[64,new ao(le.Reed,"Saxophone")],[65,new ao(le.Reed,"Saxophone")],[66,new ao(le.Reed,"Saxophone")],[67,new ao(le.Reed,"Saxophone")],[68,new ao(le.Reed,"Oboe")],[69,new ao(le.Reed,"English Horn")],[70,new ao(le.Reed,"Bassoon")],[71,new ao(le.Reed,"Clarinet")],[72,new ao(le.Reed,"Piccolo")],[73,new ao(le.Woodwind,"Flute")],[74,new ao(le.Woodwind,"Recorder")],[75,new ao(le.Woodwind,"Flute")],[76,new ao(le.Woodwind,"Recorder")],[77,new ao(le.Woodwind,"Flute")],[78,new ao(le.Woodwind,"Recorder")],[79,new ao(le.Woodwind,"Flute")],[80,new ao(le.Synth,"Lead Synthesizer")],[81,new ao(le.Synth,"Lead Synthesizer")],[82,new ao(le.Synth,"Lead Synthesizer")],[83,new ao(le.Synth,"Lead Synthesizer")],[84,new ao(le.Synth,"Lead Synthesizer")],[85,new ao(le.Synth,"Lead Synthesizer")],[86,new ao(le.Synth,"Lead Synthesizer")],[87,new ao(le.Synth,"Lead Synthesizer")],[88,new ao(le.Synth,"Pad Synthesizer")],[89,new ao(le.Synth,"Pad Synthesizer")],[90,new ao(le.Synth,"Pad Synthesizer")],[91,new ao(le.Synth,"Pad Synthesizer")],[92,new ao(le.Synth,"Pad Synthesizer")],[93,new ao(le.Synth,"Pad Synthesizer")],[94,new ao(le.Synth,"Pad Synthesizer")],[95,new ao(le.Synth,"Pad Synthesizer")],[96,new ao(le.Fx,"Pad Synthesizer")],[97,new ao(le.Fx,"Pad Synthesizer")],[98,new ao(le.Fx,"Pad Synthesizer")],[99,new ao(le.Fx,"Pad Synthesizer")],[100,new ao(le.Fx,"Lead Synthesizer")],[101,new ao(le.Fx,"Lead Synthesizer")],[102,new ao(le.Fx,"Lead Synthesizer")],[103,new ao(le.Fx,"Trumpet")],[104,new ao(le.ElectricGuitar,"Banjo")],[105,new ao(le.Banjo,"Banjo")],[106,new ao(le.Ukulele,"Ukulele")],[107,new ao(le.Banjo,"Banjo")],[108,new ao(le.PitchedIdiophone,"Xylophone")],[109,new ao(le.Reed,"Bassoon")],[110,new ao(le.Strings,"Violin")],[111,new ao(le.Woodwind,"Flute")],[112,new ao(le.PitchedIdiophone,"Xylophone")],[113,new ao(le.Idiophone,"Celesta")],[114,new ao(le.PitchedIdiophone,"Vibraphone")],[115,new ao(le.Idiophone,"Xylophone")],[116,new ao(le.Membraphone,"Xylophone")],[117,new ao(le.Membraphone,"Xylophone")],[118,new ao(le.Membraphone,"Xylophone")],[119,new ao(le.Idiophone,"Celesta")],[120,new ao(le.Fx,"Steel Guitar")],[121,new ao(le.Fx,"Recorder")],[122,new ao(le.Fx,"Recorder")],[123,new ao(le.Fx,"Recorder")],[124,new ao(le.Fx,"Recorder")],[125,new ao(le.Fx,"Recorder")],[126,new ao(le.Fx,"Recorder")],[127,new ao(le.Fx,"Timpani")]]),oo.DrumKitProgramInfo=new ao(le.PercussionKit,"Drums","drumKit");class lo{constructor(){this._checkValue=lo.CrcInit,this.reset()}static buildCrc32Lookup(){const e=3988292384,t=new Uint32Array(256);for(let i=0;i<t.length;i++){let n=i;for(let t=0;t<8;t++)n=1===(1&n)?n>>>1^e:n>>>1;t[i]=n}return t}get value(){return~this._checkValue}update(e,t,i){for(let n=0;n<i;n++)this._checkValue=lo.Crc32Lookup[255&(this._checkValue^e[t+n])]^this._checkValue>>>8}reset(){this._checkValue=lo.CrcInit}}lo.Crc32Lookup=lo.buildCrc32Lookup(),lo.CrcInit=4294967295;class ho{}ho.MAX_WBITS=15,ho.WSIZE=1<<ho.MAX_WBITS,ho.WMASK=ho.WSIZE-1,ho.MIN_MATCH=3,ho.MAX_MATCH=258,ho.DEFAULT_MEM_LEVEL=8,ho.PENDING_BUF_SIZE=1<<ho.DEFAULT_MEM_LEVEL+8,ho.HASH_BITS=ho.DEFAULT_MEM_LEVEL+7,ho.HASH_SIZE=1<<ho.HASH_BITS,ho.HASH_SHIFT=(ho.HASH_BITS+ho.MIN_MATCH-1)/ho.MIN_MATCH,ho.HASH_MASK=ho.HASH_SIZE-1,ho.MIN_LOOKAHEAD=ho.MAX_MATCH+ho.MIN_MATCH+1,ho.MAX_DIST=ho.WSIZE-ho.MIN_LOOKAHEAD;class co{constructor(e,t,i,n){this.length=null,this.numCodes=0,this.codes=null,this.huffman=e,this.minNumCodes=i,this.maxLength=n,this.freqs=new Int16Array(t),this.bitLengthCounts=new Int32Array(n)}reset(){for(let e=0;e<this.freqs.length;e++)this.freqs[e]=0;this.codes=null,this.length=null}buildTree(){let e=this.freqs.length,t=new Int32Array(e),i=0,n=0;for(let l=0;l<e;l++){let e=this.freqs[l];if(0!==e){let s=i++;while(1){if(!(s>0))break;{let i=Math.floor((s-1)/2);if(!(this.freqs[t[i]]>e))break;t[s]=t[i],s=i}}t[s]=l,n=l}}while(i<2){let e=n<2?++n:0;t[i++]=e}this.numCodes=Math.max(n+1,this.minNumCodes);let s=i,r=new Int32Array(4*i-2),a=new Int32Array(2*i-1),o=s;for(let l=0;l<i;l++){let e=t[l];r[2*l]=e,r[2*l+1]=-1,a[l]=this.freqs[e]<<8,t[l]=l}do{let e=t[0],n=t[--i],s=0,l=1;while(l<i)l+1<i&&a[t[l]]>a[t[l+1]]&&l++,t[s]=t[l],s=l,l=2*l+1;let h=a[n];while(1){if(l=s,!(s>0))break;if(s=Math.floor((l-1)/2),!(a[t[s]]>h))break;t[l]=t[s]}t[l]=n;let c=t[0];n=o++,r[2*n]=e,r[2*n+1]=c;let u=Math.min(255&a[e],255&a[c]);h=a[e]+a[c]-u+1,a[n]=h,s=0,l=1;while(l<i)l+1<i&&a[t[l]]>a[t[l+1]]&&l++,t[s]=t[l],s=l,l=2*s+1;while(1){if(l=s,!(l>0))break;if(s=Math.floor((l-1)/2),!(a[t[s]]>h))break;t[l]=t[s]}t[l]=n}while(i>1);this.buildLength(r)}buildLength(e){this.length=new Uint8Array(this.freqs.length);let t=Math.floor(e.length/2),i=Math.floor((t+1)/2),n=0;for(let o=0;o<this.maxLength;o++)this.bitLengthCounts[o]=0;let s=new Int32Array(t);s[t-1]=0;for(let o=t-1;o>=0;o--)if(-1!=e[2*o+1]){let t=s[o]+1;t>this.maxLength&&(t=this.maxLength,n++),s[e[2*o]]=t,s[e[2*o+1]]=t}else{let t=s[o];this.bitLengthCounts[t-1]++,this.length[e[2*o]]=s[o]}if(0==n)return;let r=this.maxLength-1;do{while(0==this.bitLengthCounts[--r]);do{this.bitLengthCounts[r]--,this.bitLengthCounts[++r]++,n-=1<<this.maxLength-1-r}while(n>0&&r<this.maxLength-1)}while(n>0);this.bitLengthCounts[this.maxLength-1]+=n,this.bitLengthCounts[this.maxLength-2]-=n;let a=2*i;for(let o=this.maxLength;0!=o;o--){let t=this.bitLengthCounts[o-1];while(t>0){let i=2*e[a++];-1==e[i+1]&&(this.length[e[i]]=o,t--)}}}getEncodedLength(){let e=0;for(let t=0;t<this.freqs.length;t++)e+=this.freqs[t]*this.length[t];return e}calcBLFreq(e){let t,i,n,s=-1,r=0;while(r<this.numCodes){n=1;let a=this.length[r];0==a?(t=138,i=3):(t=6,i=3,s!=a&&(e.freqs[a]++,n=0)),s=a,r++;while(r<this.numCodes&&s==this.length[r])if(r++,++n>=t)break;n<i?e.freqs[s]+=n:0!=s?e.freqs[co.Repeat3To6]++:n<=10?e.freqs[co.Repeat3To10]++:e.freqs[co.Repeat11To138]++}}setStaticCodes(e,t){this.codes=e,this.length=t}buildCodes(){let e=new Int32Array(this.maxLength),t=0;this.codes=new Int16Array(this.freqs.length);for(let i=0;i<this.maxLength;i++)e[i]=t,t+=this.bitLengthCounts[i]<<15-i;for(let i=0;i<this.numCodes;i++){let t=this.length[i];t>0&&(this.codes[i]=uo.bitReverse(e[t-1]),e[t-1]+=1<<16-t)}}writeTree(e){let t,i,n,s=-1,r=0;while(r<this.numCodes){n=1;let a=this.length[r];0==a?(t=138,i=3):(t=6,i=3,s!=a&&(e.writeSymbol(a),n=0)),s=a,r++;while(r<this.numCodes&&s==this.length[r])if(r++,++n>=t)break;if(n<i)while(n-- >0)e.writeSymbol(s);else 0!=s?(e.writeSymbol(co.Repeat3To6),this.huffman.pending.writeBits(n-3,2)):n<=10?(e.writeSymbol(co.Repeat3To10),this.huffman.pending.writeBits(n-3,3)):(e.writeSymbol(co.Repeat11To138),this.huffman.pending.writeBits(n-11,7))}}writeSymbol(e){this.huffman.pending.writeBits(65535&this.codes[e],this.length[e])}}co.Repeat3To6=16,co.Repeat3To10=17,co.Repeat11To138=18;class uo{constructor(e){this.last_lit=0,this.extra_bits=0,this.pending=e,this.literalTree=new co(this,uo.LITERAL_NUM,257,15),this.distTree=new co(this,uo.DIST_NUM,1,15),this.blTree=new co(this,uo.BITLEN_NUM,4,7),this.d_buf=new Int16Array(uo.BUFSIZE),this.l_buf=new Uint8Array(uo.BUFSIZE)}static staticInit(){let e=0;while(e<144)uo.staticLCodes[e]=uo.bitReverse(48+e<<8),uo.staticLLength[e++]=8;while(e<256)uo.staticLCodes[e]=uo.bitReverse(256+e<<7),uo.staticLLength[e++]=9;while(e<280)uo.staticLCodes[e]=uo.bitReverse(-256+e<<9),uo.staticLLength[e++]=7;while(e<uo.LITERAL_NUM)uo.staticLCodes[e]=uo.bitReverse(-88+e<<8),uo.staticLLength[e++]=8;for(e=0;e<uo.DIST_NUM;e++)uo.staticDCodes[e]=uo.bitReverse(e<<11),uo.staticDLength[e]=5}static bitReverse(e){return uo.bit4Reverse[15&e]<<12|uo.bit4Reverse[e>>4&15]<<8|uo.bit4Reverse[e>>8&15]<<4|uo.bit4Reverse[e>>12]}isFull(){return this.last_lit>=uo.BUFSIZE}reset(){this.last_lit=0,this.extra_bits=0,this.literalTree.reset(),this.distTree.reset(),this.blTree.reset()}flushStoredBlock(e,t,i,n){this.pending.writeBits((uo.STORED_BLOCK<<1)+(n?1:0),3),this.pending.alignToByte(),this.pending.writeShort(i),this.pending.writeShort(~i),this.pending.writeBlock(e,t,i),this.reset()}flushBlock(e,t,i,n){this.literalTree.freqs[uo.EOF_SYMBOL]++,this.literalTree.buildTree(),this.distTree.buildTree(),this.literalTree.calcBLFreq(this.blTree),this.distTree.calcBLFreq(this.blTree),this.blTree.buildTree();let s=4;for(let o=18;o>s;o--)this.blTree.length[uo.BL_ORDER[o]]>0&&(s=o+1);let r=14+3*s+this.blTree.getEncodedLength()+this.literalTree.getEncodedLength()+this.distTree.getEncodedLength()+this.extra_bits,a=this.extra_bits;for(let o=0;o<uo.LITERAL_NUM;o++)a+=this.literalTree.freqs[o]*uo.staticLLength[o];for(let o=0;o<uo.DIST_NUM;o++)a+=this.distTree.freqs[o]*uo.staticDLength[o];r>=a&&(r=a),t>=0&&i+4<r>>3?this.flushStoredBlock(e,t,i,n):r==a?(this.pending.writeBits((uo.STATIC_TREES<<1)+(n?1:0),3),this.literalTree.setStaticCodes(uo.staticLCodes,uo.staticLLength),this.distTree.setStaticCodes(uo.staticDCodes,uo.staticDLength),this.compressBlock(),this.reset()):(this.pending.writeBits((uo.DYN_TREES<<1)+(n?1:0),3),this.sendAllTrees(s),this.compressBlock(),this.reset())}sendAllTrees(e){this.blTree.buildCodes(),this.literalTree.buildCodes(),this.distTree.buildCodes(),this.pending.writeBits(this.literalTree.numCodes-257,5),this.pending.writeBits(this.distTree.numCodes-1,5),this.pending.writeBits(e-4,4);for(let t=0;t<e;t++)this.pending.writeBits(this.blTree.length[uo.BL_ORDER[t]],3);this.literalTree.writeTree(this.blTree),this.distTree.writeTree(this.blTree)}compressBlock(){for(let e=0;e<this.last_lit;e++){let t=255&this.l_buf[e],i=this.d_buf[e];if(0!=i--){let e=uo.Lcode(t);this.literalTree.writeSymbol(e);let n=Math.floor((e-261)/4);n>0&&n<=5&&this.pending.writeBits(t&(1<<n)-1,n);let s=uo.Dcode(i);this.distTree.writeSymbol(s),n=Math.floor(s/2)-1,n>0&&this.pending.writeBits(i&(1<<n)-1,n)}else this.literalTree.writeSymbol(t)}this.literalTree.writeSymbol(uo.EOF_SYMBOL)}tallyDist(e,t){this.d_buf[this.last_lit]=e,this.l_buf[this.last_lit++]=t-3;let i=uo.Lcode(t-3);this.literalTree.freqs[i]++,i>=265&&i<285&&(this.extra_bits+=Math.floor((i-261)/4));let n=uo.Dcode(e-1);return this.distTree.freqs[n]++,n>=4&&(this.extra_bits+=Math.floor(n/2)-1),this.isFull()}tallyLit(e){return this.d_buf[this.last_lit]=0,this.l_buf[this.last_lit++]=e,this.literalTree.freqs[e]++,this.isFull()}static Lcode(e){if(255==e)return 285;let t=257;while(e>=8)t+=4,e>>=1;return t+e}static Dcode(e){let t=0;while(e>=4)t+=2,e>>=1;return t+e}}uo.BUFSIZE=1<<ho.DEFAULT_MEM_LEVEL+6,uo.LITERAL_NUM=286,uo.STORED_BLOCK=0,uo.STATIC_TREES=1,uo.DYN_TREES=2,uo.DIST_NUM=30,uo.staticLCodes=new Int16Array(uo.LITERAL_NUM),uo.staticLLength=new Uint8Array(uo.LITERAL_NUM),uo.staticDCodes=new Int16Array(uo.DIST_NUM),uo.staticDLength=new Uint8Array(uo.DIST_NUM),uo.BL_ORDER=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],uo.bit4Reverse=new Uint8Array([0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15]),uo.BITLEN_NUM=19,uo.EOF_SYMBOL=256,uo.staticInit();class po{constructor(e){this.maxChain=128,this.niceLength=128,this.goodLength=8,this.insertHashIndex=0,this.lookahead=0,this.inputBuf=null,this.inputOff=0,this.inputEnd=0,this.prevAvailable=!1,this.matchStart=0,this.matchLen=0,this.pending=e,this.huffman=new uo(e),this.inputCrc=new lo,this.window=new Uint8Array(2*ho.WSIZE),this.head=new Int16Array(ho.HASH_SIZE),this.prev=new Int16Array(ho.WSIZE),this.blockStart=1,this.strstart=1}reset(){this.huffman.reset(),this.inputCrc.reset(),this.blockStart=1,this.strstart=1,this.lookahead=0,this.prevAvailable=!1,this.matchLen=ho.MIN_MATCH-1;for(let e=0;e<ho.HASH_SIZE;e++)this.head[e]=0;for(let e=0;e<ho.WSIZE;e++)this.prev[e]=0}updateHash(){this.insertHashIndex=this.window[this.strstart]<<ho.HASH_SHIFT^this.window[this.strstart+1]}needsInput(){return this.inputEnd==this.inputOff}setInput(e,t,i){let n=t+i;this.inputBuf=e,this.inputOff=t,this.inputEnd=n}deflate(e,t){let i;do{this.fillWindow();let n=e&&this.inputOff==this.inputEnd;i=this.deflateSlow(n,t)}while(this.pending.isFlushed&&i);return i}deflateSlow(e,t){if(this.lookahead<ho.MIN_LOOKAHEAD&&!e)return!1;while(this.lookahead>=ho.MIN_LOOKAHEAD||e){if(0==this.lookahead)return this.prevAvailable&&this.huffman.tallyLit(255&this.window[this.strstart-1]),this.prevAvailable=!1,this.huffman.flushBlock(this.window,this.blockStart,this.strstart-this.blockStart,t),this.blockStart=this.strstart,!1;this.strstart>=2*ho.WSIZE-ho.MIN_LOOKAHEAD&&this.slideWindow();let e=this.matchStart,i=this.matchLen;if(this.lookahead>=ho.MIN_MATCH){let e=this.insertString();0!=e&&this.strstart-e<=ho.MAX_DIST&&this.findLongestMatch(e)&&this.matchLen==ho.MIN_MATCH&&this.strstart-this.matchStart>po.TooFar&&(this.matchLen=ho.MIN_MATCH-1)}if(i>=ho.MIN_MATCH&&this.matchLen<=i){this.huffman.tallyDist(this.strstart-1-e,i),i-=2;do{this.strstart++,this.lookahead--,this.lookahead>=ho.MIN_MATCH&&this.insertString()}while(--i>0);this.strstart++,this.lookahead--,this.prevAvailable=!1,this.matchLen=ho.MIN_MATCH-1}else this.prevAvailable&&this.huffman.tallyLit(255&this.window[this.strstart-1]),this.prevAvailable=!0,this.strstart++,this.lookahead--;if(this.huffman.isFull()){let e=this.strstart-this.blockStart;this.prevAvailable&&e--;let i=t&&0==this.lookahead&&!this.prevAvailable;return this.huffman.flushBlock(this.window,this.blockStart,e,i),this.blockStart+=e,!i}}return!0}findLongestMatch(e){let t,i=this.strstart,n=i+Math.min(ho.MAX_MATCH,this.lookahead)-1,s=Math.max(i-ho.MAX_DIST,0),r=this.window,a=this.prev,o=this.maxChain,l=Math.min(this.niceLength,this.lookahead);if(this.matchLen=Math.max(this.matchLen,ho.MIN_MATCH-1),i+this.matchLen>n)return!1;let h=r[i+this.matchLen-1],c=r[i+this.matchLen];this.matchLen>=this.goodLength&&(o>>=2);do{if(t=e,i=this.strstart,r[t+this.matchLen]==c&&r[t+this.matchLen-1]==h&&r[t]==r[i]&&r[++t]==r[++i]){switch((n-i)%8){case 1:if(r[++i]==r[++t])break;break;case 2:if(r[++i]==r[++t]&&r[++i]==r[++t])break;break;case 3:if(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t])break;break;case 4:if(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t])break;break;case 5:if(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t])break;break;case 6:if(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t])break;break;case 7:if(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t])break;break}if(r[i]==r[t])do{if(i==n){++i,++t;break}}while(r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]&&r[++i]==r[++t]);if(i-this.strstart>this.matchLen){if(this.matchStart=e,this.matchLen=i-this.strstart,this.matchLen>=l)break;h=r[i-1],c=r[i]}e=65535&a[e&ho.WMASK]}}while(e>s&&0!==--o);return this.matchLen>=ho.MIN_MATCH}insertString(){let e,t=(this.insertHashIndex<<ho.HASH_SHIFT^this.window[this.strstart+(ho.MIN_MATCH-1)])&ho.HASH_MASK;return e=this.head[t],this.prev[this.strstart&ho.WMASK]=e,this.head[t]=this.strstart,this.insertHashIndex=t,65535&e}fillWindow(){if(this.strstart>=ho.WSIZE+ho.MAX_DIST&&this.slideWindow(),this.lookahead<ho.MIN_LOOKAHEAD&&this.inputOff<this.inputEnd){let e=2*ho.WSIZE-this.lookahead-this.strstart;e>this.inputEnd-this.inputOff&&(e=this.inputEnd-this.inputOff),this.window.set(this.inputBuf.subarray(this.inputOff,this.inputOff+e),this.strstart+this.lookahead),this.inputCrc.update(this.inputBuf,this.inputOff,e),this.inputOff+=e,this.lookahead+=e}this.lookahead>=ho.MIN_MATCH&&this.updateHash()}slideWindow(){this.window.set(this.window.subarray(ho.WSIZE,ho.WSIZE+ho.WSIZE),0),this.matchStart-=ho.WSIZE,this.strstart-=ho.WSIZE,this.blockStart-=ho.WSIZE;for(let e=0;e<ho.HASH_SIZE;++e){let t=65535&this.head[e];this.head[e]=t>=ho.WSIZE?t-ho.WSIZE:0}for(let e=0;e<ho.WSIZE;e++){let t=65535&this.prev[e];this.prev[e]=t>=ho.WSIZE?t-ho.WSIZE:0}}}po.TooFar=4096;class fo{constructor(e){this._start=0,this._end=0,this._bits=0,this.bitCount=0,this._buffer=new Uint8Array(e)}get isFlushed(){return 0===this._end}reset(){this._start=0,this._end=0,this.bitCount=0}writeShortMSB(e){this._buffer[this._end++]=e>>8&255,this._buffer[this._end++]=255&e}writeShort(e){this._buffer[this._end++]=e,this._buffer[this._end++]=e>>8}writeBlock(e,t,i){this._buffer.set(e.subarray(t,t+i),this._end),this._end+=i}flush(e,t,i){return this.bitCount>=8&&(this._buffer[this._end++]=255&this._bits,this._bits>>=8,this.bitCount-=8),i>this._end-this._start?(i=this._end-this._start,e.set(this._buffer.subarray(this._start,this._start+i),t),this._start=0,this._end=0):(e.set(this._buffer.subarray(this._start,this._start+i),t),this._start+=i),i}writeBits(e,t){this._bits|=e<<this.bitCount,this.bitCount+=t,this.bitCount>=16&&(this._buffer[this._end++]=255&this._bits,this._buffer[this._end++]=this._bits>>8&255,this._bits>>=16,this.bitCount-=16)}alignToByte(){this.bitCount>0&&(this._buffer[this._end++]=255&this._bits,this.bitCount>8&&(this._buffer[this._end++]=this._bits>>8&255)),this._bits=0,this.bitCount=0}}class go{constructor(){this._state=0,this._pending=new fo(ho.PENDING_BUF_SIZE),this._engine=new po(this._pending),this.reset()}get inputCrc(){return this._engine.inputCrc.value}get isNeedingInput(){return this._engine.needsInput()}get isFinished(){return this._state==go.FinishedState&&this._pending.isFlushed}reset(){this._state=go.BusyState,this._pending.reset(),this._engine.reset()}setInput(e,t,i){this._engine.setInput(e,t,i)}deflate(e,t,i){let n=i;while(1){let s=this._pending.flush(e,t,i);if(t+=s,i-=s,0==i||this._state==go.FinishedState)break;if(!this._engine.deflate(0!=(this._state&go.IsFlushing),0!=(this._state&go.IsFinishing)))switch(this._state){case go.BusyState:return n-i;case go.FlushingState:let e=8+(7&-this._pending.bitCount);while(e>0)this._pending.writeBits(2,10),e-=10;this._state=go.BusyState;break;case go.FinishingState:this._pending.alignToByte(),this._state=go.FinishedState;break}}return n-i}finish(){this._state|=go.IsFlushing|go.IsFinishing}}go.IsFlushing=4,go.IsFinishing=8,go.BusyState=16,go.FlushingState=20,go.FinishingState=28,go.FinishedState=30;class mo{constructor(e,t,i,n,s){this.entry=e,this.crc32=t,this.localHeaderOffset=i,this.compressionMode=n,this.compressedSize=s}}class bo{constructor(e){this._centralDirectoryHeaders=[],this._deflater=new go,this._data=e}writeEntry(e){const t=Bt.CompressionMethodDeflate,i=Ke.empty(),n=this.compress(i,e.data,t),s=i.toArray(),r=new mo(e,n,this._data.bytesWritten,t,i.length);this._centralDirectoryHeaders.push(r),Qe.writeInt32LE(this._data,Bt.LocalFileHeaderSignature),Qe.writeUInt16LE(this._data,10),Qe.writeUInt16LE(this._data,2048),Qe.writeUInt16LE(this._data,t),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt32LE(this._data,n),Qe.writeInt32LE(this._data,s.length),Qe.writeInt32LE(this._data,e.data.length),Qe.writeInt16LE(this._data,e.fullName.length),Qe.writeInt16LE(this._data,0);const a=Qe.stringToBytes(e.fullName);this._data.write(a,0,a.length),this._data.write(s,0,s.length)}compress(e,t,i){if(i!=Bt.CompressionMethodDeflate){const i=new lo;return i.update(t,0,t.length),e.write(t,0,t.length),i.value}{let i=new Uint8Array(512);this._deflater.reset(),this._deflater.setInput(t,0,t.length);while(!this._deflater.isNeedingInput){const t=this._deflater.deflate(i,0,i.length);if(t<=0)break;e.write(i,0,t)}this._deflater.finish();while(!this._deflater.isFinished){const t=this._deflater.deflate(i,0,i.length);if(t<=0)break;e.write(i,0,t)}return this._deflater.inputCrc}}end(){const e=this._data.bytesWritten;for(const i of this._centralDirectoryHeaders)this.writeCentralDirectoryHeader(i);const t=this._data.bytesWritten;this.writeEndOfCentralDirectoryRecord(e,t)}writeEndOfCentralDirectoryRecord(e,t){Qe.writeInt32LE(this._data,Bt.EndOfCentralDirSignature),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,this._centralDirectoryHeaders.length),Qe.writeInt16LE(this._data,this._centralDirectoryHeaders.length),Qe.writeInt32LE(this._data,t-e),Qe.writeInt32LE(this._data,e),Qe.writeInt16LE(this._data,0)}writeCentralDirectoryHeader(e){Qe.writeInt32LE(this._data,Bt.CentralFileHeaderSignature),Qe.writeUInt16LE(this._data,10),Qe.writeUInt16LE(this._data,10),Qe.writeUInt16LE(this._data,2048),Qe.writeUInt16LE(this._data,e.compressionMode),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt32LE(this._data,e.crc32),Qe.writeInt32LE(this._data,e.compressedSize),Qe.writeInt32LE(this._data,e.entry.data.length),Qe.writeInt16LE(this._data,e.entry.fullName.length),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt16LE(this._data,0),Qe.writeInt32LE(this._data,0),Qe.writeInt32LE(this._data,e.localHeaderOffset);const t=Qe.stringToBytes(e.entry.fullName);this._data.write(t,0,t.length)}}class yo extends ro{get name(){return"Guitar Pro 7"}constructor(){super()}writeScore(e){Ne.debug(this.name,"Writing data entries");const t=new oo,i=t.writeXml(e),n=rt.writeForScore(e),s=bt.writeForScore(e);Ne.debug(this.name,"Writing ZIP entries");let r=new bo(this.data);r.writeEntry(new Bt("VERSION",Qe.stringToBytes("7.0"))),r.writeEntry(new Bt("Content/",new Uint8Array(0))),r.writeEntry(new Bt("Content/BinaryStylesheet",n)),r.writeEntry(new Bt("Content/PartConfiguration",s)),r.writeEntry(new Bt("Content/score.gpif",Qe.stringToBytes(i))),r.end()}}const vo=so,wo={ScoreImporter:ve,ScoreLoader:An,UnsupportedFormatError:we},So={ScoreExporter:ro,Gp7Exporter:yo},_o={BeatTickLookup:mn,MasterBarTickLookup:yn,MidiTickLookup:wn,MidiTickLookupFindBeatResult:vn,MidiFile:vi,ControllerType:Z,MetaDataEvent:wi,MetaEvent:At,MetaEventType:z,MetaNumberEvent:Si,MidiEvent:Mt,MidiEventType:$,Midi20PerNotePitchBendEvent:Ni,SystemCommonEvent:It,SystemCommonType:U,SystemExclusiveEvent:Dt,MidiFileGenerator:kn,AlphaSynthMidiFileHandler:gn},ko={AccentuationType:c,AccidentalType:ie,AutomationType:u,Automation:Se,Bar:_e,Beat:De,BendPoint:Te,BendStyle:g,BendType:m,BrushType:b,Chord:Re,Clef:d,Color:de,CrescendoType:y,Duration:v,DynamicValue:w,FermataType:V,Fermata:at,Fingers:a,FontStyle:l,Font:me,GraceType:S,HarmonicType:_,InstrumentArticulation:Ce,JsonConverter:en,KeySignature:M,KeySignatureType:A,Lyrics:Ve,MasterBar:He,MusicFontSymbol:C,Note:Pe,NoteAccidentalMode:k,Ottavia:p,PickStroke:N,PlaybackInformation:ze,RenderStylesheet:Ge,RepeatGroup:We,Score:je,Section:$e,SimileMark:f,SlideInType:T,SlideOutType:B,Staff:Xe,Track:Ye,TripletFeel:I,Tuning:Ue,TupletGroup:Le,VibratoType:x,Voice:qe,WhammyType:L},To={ScoreRenderer:dn,RenderFinishedEventArgs:rn,BarBounds:an,BeatBounds:on,Bounds:st,BoundsLookup:un,MasterBarBounds:ln,NoteBounds:hn,StaveGroupBounds:cn},Bo={AlphaSynth:yi,PlaybackRange:Tn,PlayerState:Y,PlayerStateChangedEventArgs:jt,PositionChangedEventArgs:$t,AlphaSynthWebWorkerApi:Wn};t.AlphaTabApi=Yn,t.AlphaTabError=n,t.CoreSettings=io,t.DisplaySettings=ye,t.FileLoadError=Mn,t.FormatError=s,t.ImporterSettings=_i,t.Logger=Ne,t.NotationSettings=he,t.PlayerSettings=Bi,t.ProgressEventArgs=no,t.RenderingResources=be,t.ResizeEventArgs=Ln,t.Settings=xi,t.VibratoPlaybackSettings=ki,t.exporter=So,t.importer=wo,t.meta=vo,t.midi=_o,t.model=ko,t.rendering=To,t.synth=Bo,Object.defineProperty(t,"__esModule",{value:!0})}))}).call(this,i("c8ba"),i("4362"))},"20f6":function(e,t,i){},"219c":function(e,t,i){"use strict";var n=i("ebb5"),s=i("da84"),r=i("d039"),a=i("1c0b"),o=i("50c4"),l=i("addb"),h=i("04d1"),c=i("d998"),u=i("2d00"),d=i("512c"),p=n.aTypedArray,f=n.exportTypedArrayMethod,g=s.Uint16Array,m=g&&g.prototype.sort,b=!!m&&!r((function(){var e=new g(2);e.sort(null),e.sort({})})),y=!!m&&!r((function(){if(u)return u<74;if(h)return h<67;if(c)return!0;if(d)return d<602;var e,t,i=new g(516),n=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,n[e]=e-2*t+3;for(i.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==n[e])return!0})),v=function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!==i?-1:t!==t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}};f("sort",(function(e){var t=this;if(void 0!==e&&a(e),y)return m.call(t,e);p(t);var i,n=o(t.length),s=Array(n);for(i=0;i<n;i++)s[i]=t[i];for(s=l(t,v(e)),i=0;i<n;i++)t[i]=s[i];return t}),!y||b)},2266:function(e,t,i){var n=i("825a"),s=i("e95a"),r=i("50c4"),a=i("0366"),o=i("9a1f"),l=i("35a1"),h=i("2a62"),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,i){var u,d,p,f,g,m,b,y=i&&i.that,v=!(!i||!i.AS_ENTRIES),w=!(!i||!i.IS_ITERATOR),S=!(!i||!i.INTERRUPTED),_=a(t,y,1+v+S),k=function(e){return u&&h(u,"normal",e),new c(!0,e)},T=function(e){return v?(n(e),S?_(e[0],e[1],k):_(e[0],e[1])):S?_(e,k):_(e)};if(w)u=e;else{if(d=l(e),"function"!=typeof d)throw TypeError("Target is not iterable");if(s(d)){for(p=0,f=r(e.length);f>p;p++)if(g=T(e[p]),g&&g instanceof c)return g;return new c(!1)}u=o(e,d)}m=u.next;while(!(b=m.call(u)).done){try{g=T(b.value)}catch(B){h(u,"throw",B)}if("object"==typeof g&&g&&g instanceof c)return g}return new c(!1)}},"23a7":function(e,t,i){"use strict";var n=i("2909"),s=i("5530"),r=i("53ca"),a=(i("a9e3"),i("caad"),i("d81d"),i("b0c0"),i("99af"),i("a434"),i("159b"),i("fb6a"),i("5803"),i("2677")),o=i("3835"),l=(i("4de4"),i("8adc"),i("58df")),h=i("0789"),c=i("9d26"),u=i("a9ad"),d=i("4e82"),p=i("7560"),f=i("f2e7"),g=i("1c87"),m=i("af2b"),b=i("d9bd"),y=Object(l["a"])(u["a"],m["a"],g["a"],p["a"],Object(d["a"])("chipGroup"),Object(f["b"])("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default:function(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:function(){return{proxyClass:"v-chip--active"}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({"v-chip":!0},g["a"].options.computed.classes.call(this)),{},{"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose},this.themeClasses),this.sizeableClasses),this.groupClasses)},hasClose:function(){return Boolean(this.close)},isClickable:function(){return Boolean(g["a"].options.computed.isClickable.call(this)||this.chipGroup)}},created:function(){var e=this,t=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];t.forEach((function(t){var i=Object(o["a"])(t,2),n=i[0],s=i[1];e.$attrs.hasOwnProperty(n)&&Object(b["a"])(n,s,e)}))},methods:{click:function(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter:function(){var e=[];return this.isActive&&e.push(this.$createElement(c["a"],{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(h["b"],e)},genClose:function(){var e=this;return this.$createElement(c["a"],{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.$emit("click:close"),e.$emit("update:active",!1)}}},this.closeIcon)},genContent:function(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render:function(e){var t=[this.genContent()],i=this.generateRouteLink(),n=i.tag,r=i.data;r.attrs=Object(s["a"])(Object(s["a"])({},r.attrs),{},{draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:r.attrs.tabindex}),r.directives.push({name:"show",value:this.active}),r=this.setBackgroundColor(this.color,r);var a=this.textColor||this.outlined&&this.color;return e(n,this.setTextColor(a,r),t)}}),v=i("80d2"),w=i("d9f7");t["a"]=a["a"].extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(e){return"boolean"===typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(e){return Object(v["y"])(e).every((function(e){return null!=e&&"object"===Object(r["a"])(e)}))}}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},a["a"].options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);var t=this.internalArrayValue.reduce((function(e,t){var i=t.size,n=void 0===i?0:i;return e+n}),0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(v["p"])(t,1024===this.base))},internalArrayValue:function(){return Object(v["y"])(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},text:function(){var e=this;return this.isDirty||!this.isFocused&&this.hasLabel?this.internalArrayValue.map((function(t){var i=t.name,n=void 0===i?"":i,s=t.size,r=void 0===s?0:s,a=e.truncateText(n);return e.showSize?"".concat(a," (").concat(Object(v["p"])(r,1024===e.base),")"):a})):[this.placeholder]},base:function(){return"boolean"!==typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(e){!0===e&&Object(b["b"])("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(e){var t=this.multiple?e:e?[e]:[];Object(v["i"])(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips:function(){var e=this;return this.isDirty?this.text.map((function(t,i){return e.$createElement(y,{props:{small:e.smallChips},on:{"click:close":function(){var t=e.internalValue;t.splice(i,1),e.internalValue=t}}},[t])})):[]},genControl:function(){var e=a["a"].options.methods.genControl.call(this);return this.hideInput&&(e.data.style=Object(w["b"])(e.data.style,{display:"none"})),e},genInput:function(){var e=a["a"].options.methods.genInput.call(this);return e.data.attrs.multiple=this.multiple,delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot:function(){var e=this;if(!this.prependIcon)return null;var t=this.genIcon("prepend",(function(){e.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText:function(){var e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections:function(){var e=this,t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(i,n){e.$scopedSlots.selection&&t.push(e.$scopedSlots.selection({text:e.text[n],file:i,index:n}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot:function(){var e=this,t=a["a"].options.methods.genTextFieldSlot.call(this);return t.data.on=Object(s["a"])(Object(s["a"])({},t.data.on||{}),{},{click:function(){return e.$refs.input.click()}}),t},onInput:function(e){var t=Object(n["a"])(e.target.files||[]);this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown:function(e){this.$emit("keydown",e)},truncateText:function(e){if(e.length<Number(this.truncateLength))return e;var t=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(e.slice(0,t),"").concat(e.slice(e.length-t))}}})},"23cb":function(e,t,i){var n=i("a691"),s=Math.max,r=Math.min;e.exports=function(e,t){var i=n(e);return i<0?s(i+t,0):r(i,t)}},"23e7":function(e,t,i){var n=i("da84"),s=i("06cf").f,r=i("9112"),a=i("6eeb"),o=i("ce4e"),l=i("e893"),h=i("94ca");e.exports=function(e,t){var i,c,u,d,p,f,g=e.target,m=e.global,b=e.stat;if(c=m?n:b?n[g]||o(g,{}):(n[g]||{}).prototype,c)for(u in t){if(p=t[u],e.noTargetGet?(f=s(c,u),d=f&&f.value):d=c[u],i=h(m?u:g+(b?".":"#")+u,e.forced),!i&&void 0!==d){if(typeof p===typeof d)continue;l(p,d)}(e.sham||d&&d.sham)&&r(p,"sham",!0),a(c,u,p,e)}}},"241c":function(e,t,i){var n=i("ca84"),s=i("7839"),r=s.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},"24b2":function(e,t,i){"use strict";i("a9e3");var n=i("80d2"),s=i("2b0e");t["a"]=s["a"].extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles:function(){var e={},t=Object(n["f"])(this.height),i=Object(n["f"])(this.minHeight),s=Object(n["f"])(this.minWidth),r=Object(n["f"])(this.maxHeight),a=Object(n["f"])(this.maxWidth),o=Object(n["f"])(this.width);return t&&(e.height=t),i&&(e.minHeight=i),s&&(e.minWidth=s),r&&(e.maxHeight=r),a&&(e.maxWidth=a),o&&(e.width=o),e}}})},2532:function(e,t,i){"use strict";var n=i("23e7"),s=i("5a34"),r=i("1d80"),a=i("577e"),o=i("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~a(r(this)).indexOf(a(s(e)),arguments.length>1?arguments[1]:void 0)}})},"25a1":function(e,t,i){"use strict";var n=i("ebb5"),s=i("d58f").right,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduceRight",(function(e){return s(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},"25a8":function(e,t,i){},"25f0":function(e,t,i){"use strict";var n=i("6eeb"),s=i("825a"),r=i("577e"),a=i("d039"),o=i("ad6d"),l="toString",h=RegExp.prototype,c=h[l],u=a((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=l;(u||d)&&n(RegExp.prototype,l,(function(){var e=s(this),t=r(e.source),i=e.flags,n=r(void 0===i&&e instanceof RegExp&&!("flags"in h)?o.call(e):i);return"/"+t+"/"+n}),{unsafe:!0})},2626:function(e,t,i){"use strict";var n=i("d066"),s=i("9bf2"),r=i("b622"),a=i("83ab"),o=r("species");e.exports=function(e){var t=n(e),i=s.f;a&&t&&!t[o]&&i(t,o,{configurable:!0,get:function(){return this}})}},2677:function(e,t,i){"use strict";var n=i("8654");t["a"]=n["a"]},2877:function(e,t,i){"use strict";function n(e,t,i,n,s,r,a,o){var l,h="function"===typeof e?e.options:e;if(t&&(h.render=t,h.staticRenderFns=i,h._compiled=!0),n&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),a?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},h._ssrRegister=l):s&&(l=o?function(){s.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(h.functional){h._injectStyles=l;var c=h.render;h.render=function(e,t){return l.call(t),c(e,t)}}else{var u=h.beforeCreate;h.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:h}}i.d(t,"a",(function(){return n}))},2909:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("6b75");function s(e){if(Array.isArray(e))return Object(n["a"])(e)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var a=i("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return s(e)||r(e)||Object(a["a"])(e)||o()}},2954:function(e,t,i){"use strict";var n=i("ebb5"),s=i("b6b7"),r=i("d039"),a=n.aTypedArray,o=n.exportTypedArrayMethod,l=[].slice,h=r((function(){new Int8Array(1).slice()}));o("slice",(function(e,t){var i=l.call(a(this),e,t),n=s(this),r=0,o=i.length,h=new n(o);while(o>r)h[r]=i[r++];return h}),h)},"297c":function(e,t,i){"use strict";i("a9e3");var n=i("2b0e"),s=i("37c6");t["a"]=n["a"].extend().extend({name:"loadable",props:{loading:{type:[Boolean,String],default:!1},loaderHeight:{type:[Number,String],default:2}},methods:{genProgress:function(){return!1===this.loading?null:this.$slots.progress||this.$createElement(s["a"],{props:{absolute:!0,color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,height:this.loaderHeight,indeterminate:!0}})}}})},"2a62":function(e,t,i){var n=i("825a");e.exports=function(e,t,i){var s,r;n(e);try{if(s=e["return"],void 0===s){if("throw"===t)throw i;return i}s=s.call(e)}catch(a){r=!0,s=a}if("throw"===t)throw i;if(r)throw s;return n(s),i}},"2a7f":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("71d9"),s=i("80d2"),r=Object(s["h"])("v-toolbar__title"),a=Object(s["h"])("v-toolbar__items");n["a"]},"2b0e":function(e,t,i){"use strict";(function(e){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({});function n(e){return void 0===e||null===e}function s(e){return void 0!==e&&null!==e}function r(e){return!0===e}function a(e){return!1===e}function o(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function l(e){return null!==e&&"object"===typeof e}var h=Object.prototype.toString;function c(e){return"[object Object]"===h.call(e)}function u(e){return"[object RegExp]"===h.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return s(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||c(e)&&e.toString===h?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function m(e,t){for(var i=Object.create(null),n=e.split(","),s=0;s<n.length;s++)i[n[s]]=!0;return t?function(e){return i[e.toLowerCase()]}:function(e){return i[e]}}m("slot,component",!0);var b=m("key,ref,slot,slot-scope,is");function y(e,t){if(e.length){var i=e.indexOf(t);if(i>-1)return e.splice(i,1)}}var v=Object.prototype.hasOwnProperty;function w(e,t){return v.call(e,t)}function S(e){var t=Object.create(null);return function(i){var n=t[i];return n||(t[i]=e(i))}}var _=/-(\w)/g,k=S((function(e){return e.replace(_,(function(e,t){return t?t.toUpperCase():""}))})),T=S((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),B=/\B([A-Z])/g,x=S((function(e){return e.replace(B,"-$1").toLowerCase()}));function N(e,t){function i(i){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,i):e.call(t)}return i._length=e.length,i}function C(e,t){return e.bind(t)}var E=Function.prototype.bind?C:N;function P(e,t){t=t||0;var i=e.length-t,n=new Array(i);while(i--)n[i]=e[i+t];return n}function L(e,t){for(var i in t)e[i]=t[i];return e}function O(e){for(var t={},i=0;i<e.length;i++)e[i]&&L(t,e[i]);return t}function F(e,t,i){}var M=function(e,t,i){return!1},A=function(e){return e};function I(e,t){if(e===t)return!0;var i=l(e),n=l(t);if(!i||!n)return!i&&!n&&String(e)===String(t);try{var s=Array.isArray(e),r=Array.isArray(t);if(s&&r)return e.length===t.length&&e.every((function(e,i){return I(e,t[i])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(s||r)return!1;var a=Object.keys(e),o=Object.keys(t);return a.length===o.length&&a.every((function(i){return I(e[i],t[i])}))}catch(h){return!1}}function D(e,t){for(var i=0;i<e.length;i++)if(I(e[i],t))return i;return-1}function R(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var V="data-server-rendered",H=["component","directive","filter"],G=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],W={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:F,parsePlatformTagName:A,mustUseProp:M,async:!0,_lifecycleHooks:G},j=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function $(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function z(e,t,i,n){Object.defineProperty(e,t,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var U=new RegExp("[^"+j.source+".$_\\d]");function X(e){if(!U.test(e)){var t=e.split(".");return function(e){for(var i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e}}}var Y,q="__proto__"in{},J="undefined"!==typeof window,Q="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=Q&&WXEnvironment.platform.toLowerCase(),Z=J&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ie=Z&&Z.indexOf("edge/")>0,ne=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===K),se=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),re={}.watch,ae=!1;if(J)try{var oe={};Object.defineProperty(oe,"passive",{get:function(){ae=!0}}),window.addEventListener("test-passive",null,oe)}catch(ka){}var le=function(){return void 0===Y&&(Y=!J&&!Q&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),Y},he=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ce(e){return"function"===typeof e&&/native code/.test(e.toString())}var ue,de="undefined"!==typeof Symbol&&ce(Symbol)&&"undefined"!==typeof Reflect&&ce(Reflect.ownKeys);ue="undefined"!==typeof Set&&ce(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var pe=F,fe=0,ge=function(){this.id=fe++,this.subs=[]};ge.prototype.addSub=function(e){this.subs.push(e)},ge.prototype.removeSub=function(e){y(this.subs,e)},ge.prototype.depend=function(){ge.target&&ge.target.addDep(this)},ge.prototype.notify=function(){var e=this.subs.slice();for(var t=0,i=e.length;t<i;t++)e[t].update()},ge.target=null;var me=[];function be(e){me.push(e),ge.target=e}function ye(){me.pop(),ge.target=me[me.length-1]}var ve=function(e,t,i,n,s,r,a,o){this.tag=e,this.data=t,this.children=i,this.text=n,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},we={child:{configurable:!0}};we.child.get=function(){return this.componentInstance},Object.defineProperties(ve.prototype,we);var Se=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function _e(e){return new ve(void 0,void 0,void 0,String(e))}function ke(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Te=Array.prototype,Be=Object.create(Te),xe=["push","pop","shift","unshift","splice","sort","reverse"];xe.forEach((function(e){var t=Te[e];z(Be,e,(function(){var i=[],n=arguments.length;while(n--)i[n]=arguments[n];var s,r=t.apply(this,i),a=this.__ob__;switch(e){case"push":case"unshift":s=i;break;case"splice":s=i.slice(2);break}return s&&a.observeArray(s),a.dep.notify(),r}))}));var Ne=Object.getOwnPropertyNames(Be),Ce=!0;function Ee(e){Ce=e}var Pe=function(e){this.value=e,this.dep=new ge,this.vmCount=0,z(e,"__ob__",this),Array.isArray(e)?(q?Le(e,Be):Oe(e,Be,Ne),this.observeArray(e)):this.walk(e)};function Le(e,t){e.__proto__=t}function Oe(e,t,i){for(var n=0,s=i.length;n<s;n++){var r=i[n];z(e,r,t[r])}}function Fe(e,t){var i;if(l(e)&&!(e instanceof ve))return w(e,"__ob__")&&e.__ob__ instanceof Pe?i=e.__ob__:Ce&&!le()&&(Array.isArray(e)||c(e))&&Object.isExtensible(e)&&!e._isVue&&(i=new Pe(e)),t&&i&&i.vmCount++,i}function Me(e,t,i,n,s){var r=new ge,a=Object.getOwnPropertyDescriptor(e,t);if(!a||!1!==a.configurable){var o=a&&a.get,l=a&&a.set;o&&!l||2!==arguments.length||(i=e[t]);var h=!s&&Fe(i);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=o?o.call(e):i;return ge.target&&(r.depend(),h&&(h.dep.depend(),Array.isArray(t)&&De(t))),t},set:function(t){var n=o?o.call(e):i;t===n||t!==t&&n!==n||o&&!l||(l?l.call(e,t):i=t,h=!s&&Fe(t),r.notify())}})}}function Ae(e,t,i){if(Array.isArray(e)&&d(t))return e.length=Math.max(e.length,t),e.splice(t,1,i),i;if(t in e&&!(t in Object.prototype))return e[t]=i,i;var n=e.__ob__;return e._isVue||n&&n.vmCount?i:n?(Me(n.value,t,i),n.dep.notify(),i):(e[t]=i,i)}function Ie(e,t){if(Array.isArray(e)&&d(t))e.splice(t,1);else{var i=e.__ob__;e._isVue||i&&i.vmCount||w(e,t)&&(delete e[t],i&&i.dep.notify())}}function De(e){for(var t=void 0,i=0,n=e.length;i<n;i++)t=e[i],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&De(t)}Pe.prototype.walk=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)Me(e,t[i])},Pe.prototype.observeArray=function(e){for(var t=0,i=e.length;t<i;t++)Fe(e[t])};var Re=W.optionMergeStrategies;function Ve(e,t){if(!t)return e;for(var i,n,s,r=de?Reflect.ownKeys(t):Object.keys(t),a=0;a<r.length;a++)i=r[a],"__ob__"!==i&&(n=e[i],s=t[i],w(e,i)?n!==s&&c(n)&&c(s)&&Ve(n,s):Ae(e,i,s));return e}function He(e,t,i){return i?function(){var n="function"===typeof t?t.call(i,i):t,s="function"===typeof e?e.call(i,i):e;return n?Ve(n,s):s}:t?e?function(){return Ve("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function Ge(e,t){var i=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return i?We(i):i}function We(e){for(var t=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}function je(e,t,i,n){var s=Object.create(e||null);return t?L(s,t):s}Re.data=function(e,t,i){return i?He(e,t,i):t&&"function"!==typeof t?e:He(e,t)},G.forEach((function(e){Re[e]=Ge})),H.forEach((function(e){Re[e+"s"]=je})),Re.watch=function(e,t,i,n){if(e===re&&(e=void 0),t===re&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var s={};for(var r in L(s,e),t){var a=s[r],o=t[r];a&&!Array.isArray(a)&&(a=[a]),s[r]=a?a.concat(o):Array.isArray(o)?o:[o]}return s},Re.props=Re.methods=Re.inject=Re.computed=function(e,t,i,n){if(!e)return t;var s=Object.create(null);return L(s,e),t&&L(s,t),s},Re.provide=He;var $e=function(e,t){return void 0===t?e:t};function ze(e,t){var i=e.props;if(i){var n,s,r,a={};if(Array.isArray(i)){n=i.length;while(n--)s=i[n],"string"===typeof s&&(r=k(s),a[r]={type:null})}else if(c(i))for(var o in i)s=i[o],r=k(o),a[r]=c(s)?s:{type:s};else 0;e.props=a}}function Ue(e,t){var i=e.inject;if(i){var n=e.inject={};if(Array.isArray(i))for(var s=0;s<i.length;s++)n[i[s]]={from:i[s]};else if(c(i))for(var r in i){var a=i[r];n[r]=c(a)?L({from:r},a):{from:a}}else 0}}function Xe(e){var t=e.directives;if(t)for(var i in t){var n=t[i];"function"===typeof n&&(t[i]={bind:n,update:n})}}function Ye(e,t,i){if("function"===typeof t&&(t=t.options),ze(t,i),Ue(t,i),Xe(t),!t._base&&(t.extends&&(e=Ye(e,t.extends,i)),t.mixins))for(var n=0,s=t.mixins.length;n<s;n++)e=Ye(e,t.mixins[n],i);var r,a={};for(r in e)o(r);for(r in t)w(e,r)||o(r);function o(n){var s=Re[n]||$e;a[n]=s(e[n],t[n],i,n)}return a}function qe(e,t,i,n){if("string"===typeof i){var s=e[t];if(w(s,i))return s[i];var r=k(i);if(w(s,r))return s[r];var a=T(r);if(w(s,a))return s[a];var o=s[i]||s[r]||s[a];return o}}function Je(e,t,i,n){var s=t[e],r=!w(i,e),a=i[e],o=tt(Boolean,s.type);if(o>-1)if(r&&!w(s,"default"))a=!1;else if(""===a||a===x(e)){var l=tt(String,s.type);(l<0||o<l)&&(a=!0)}if(void 0===a){a=Qe(n,s,e);var h=Ce;Ee(!0),Fe(a),Ee(h)}return a}function Qe(e,t,i){if(w(t,"default")){var n=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[i]&&void 0!==e._props[i]?e._props[i]:"function"===typeof n&&"Function"!==Ze(t.type)?n.call(e):n}}var Ke=/^\s*function (\w+)/;function Ze(e){var t=e&&e.toString().match(Ke);return t?t[1]:""}function et(e,t){return Ze(e)===Ze(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var i=0,n=t.length;i<n;i++)if(et(t[i],e))return i;return-1}function it(e,t,i){be();try{if(t){var n=t;while(n=n.$parent){var s=n.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{var a=!1===s[r].call(n,e,t,i);if(a)return}catch(ka){st(ka,n,"errorCaptured hook")}}}st(e,t,i)}finally{ye()}}function nt(e,t,i,n,s){var r;try{r=i?e.apply(t,i):e.call(t),r&&!r._isVue&&p(r)&&!r._handled&&(r.catch((function(e){return it(e,n,s+" (Promise/async)")})),r._handled=!0)}catch(ka){it(ka,n,s)}return r}function st(e,t,i){if(W.errorHandler)try{return W.errorHandler.call(null,e,t,i)}catch(ka){ka!==e&&rt(ka,null,"config.errorHandler")}rt(e,t,i)}function rt(e,t,i){if(!J&&!Q||"undefined"===typeof console)throw e;console.error(e)}var at,ot=!1,lt=[],ht=!1;function ct(){ht=!1;var e=lt.slice(0);lt.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ce(Promise)){var ut=Promise.resolve();at=function(){ut.then(ct),ne&&setTimeout(F)},ot=!0}else if(ee||"undefined"===typeof MutationObserver||!ce(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())at="undefined"!==typeof setImmediate&&ce(setImmediate)?function(){setImmediate(ct)}:function(){setTimeout(ct,0)};else{var dt=1,pt=new MutationObserver(ct),ft=document.createTextNode(String(dt));pt.observe(ft,{characterData:!0}),at=function(){dt=(dt+1)%2,ft.data=String(dt)},ot=!0}function gt(e,t){var i;if(lt.push((function(){if(e)try{e.call(t)}catch(ka){it(ka,t,"nextTick")}else i&&i(t)})),ht||(ht=!0,at()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){i=e}))}var mt=new ue;function bt(e){yt(e,mt),mt.clear()}function yt(e,t){var i,n,s=Array.isArray(e);if(!(!s&&!l(e)||Object.isFrozen(e)||e instanceof ve)){if(e.__ob__){var r=e.__ob__.dep.id;if(t.has(r))return;t.add(r)}if(s){i=e.length;while(i--)yt(e[i],t)}else{n=Object.keys(e),i=n.length;while(i--)yt(e[n[i]],t)}}}var vt=S((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var i="~"===e.charAt(0);e=i?e.slice(1):e;var n="!"===e.charAt(0);return e=n?e.slice(1):e,{name:e,once:i,capture:n,passive:t}}));function wt(e,t){function i(){var e=arguments,n=i.fns;if(!Array.isArray(n))return nt(n,null,arguments,t,"v-on handler");for(var s=n.slice(),r=0;r<s.length;r++)nt(s[r],null,e,t,"v-on handler")}return i.fns=e,i}function St(e,t,i,s,a,o){var l,h,c,u;for(l in e)h=e[l],c=t[l],u=vt(l),n(h)||(n(c)?(n(h.fns)&&(h=e[l]=wt(h,o)),r(u.once)&&(h=e[l]=a(u.name,h,u.capture)),i(u.name,h,u.capture,u.passive,u.params)):h!==c&&(c.fns=h,e[l]=c));for(l in t)n(e[l])&&(u=vt(l),s(u.name,t[l],u.capture))}function _t(e,t,i){var a;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var o=e[t];function l(){i.apply(this,arguments),y(a.fns,l)}n(o)?a=wt([l]):s(o.fns)&&r(o.merged)?(a=o,a.fns.push(l)):a=wt([o,l]),a.merged=!0,e[t]=a}function kt(e,t,i){var r=t.options.props;if(!n(r)){var a={},o=e.attrs,l=e.props;if(s(o)||s(l))for(var h in r){var c=x(h);Tt(a,l,h,c,!0)||Tt(a,o,h,c,!1)}return a}}function Tt(e,t,i,n,r){if(s(t)){if(w(t,i))return e[i]=t[i],r||delete t[i],!0;if(w(t,n))return e[i]=t[n],r||delete t[n],!0}return!1}function Bt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function xt(e){return o(e)?[_e(e)]:Array.isArray(e)?Ct(e):void 0}function Nt(e){return s(e)&&s(e.text)&&a(e.isComment)}function Ct(e,t){var i,a,l,h,c=[];for(i=0;i<e.length;i++)a=e[i],n(a)||"boolean"===typeof a||(l=c.length-1,h=c[l],Array.isArray(a)?a.length>0&&(a=Ct(a,(t||"")+"_"+i),Nt(a[0])&&Nt(h)&&(c[l]=_e(h.text+a[0].text),a.shift()),c.push.apply(c,a)):o(a)?Nt(h)?c[l]=_e(h.text+a):""!==a&&c.push(_e(a)):Nt(a)&&Nt(h)?c[l]=_e(h.text+a.text):(r(e._isVList)&&s(a.tag)&&n(a.key)&&s(t)&&(a.key="__vlist"+t+"_"+i+"__"),c.push(a)));return c}function Et(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Pt(e){var t=Lt(e.$options.inject,e);t&&(Ee(!1),Object.keys(t).forEach((function(i){Me(e,i,t[i])})),Ee(!0))}function Lt(e,t){if(e){for(var i=Object.create(null),n=de?Reflect.ownKeys(e):Object.keys(e),s=0;s<n.length;s++){var r=n[s];if("__ob__"!==r){var a=e[r].from,o=t;while(o){if(o._provided&&w(o._provided,a)){i[r]=o._provided[a];break}o=o.$parent}if(!o)if("default"in e[r]){var l=e[r].default;i[r]="function"===typeof l?l.call(t):l}else 0}}return i}}function Ot(e,t){if(!e||!e.length)return{};for(var i={},n=0,s=e.length;n<s;n++){var r=e[n],a=r.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,r.context!==t&&r.fnContext!==t||!a||null==a.slot)(i.default||(i.default=[])).push(r);else{var o=a.slot,l=i[o]||(i[o]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var h in i)i[h].every(Ft)&&delete i[h];return i}function Ft(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Mt(e){return e.isComment&&e.asyncFactory}function At(e,t,n){var s,r=Object.keys(t).length>0,a=e?!!e.$stable:!r,o=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(a&&n&&n!==i&&o===n.$key&&!r&&!n.$hasNormal)return n;for(var l in s={},e)e[l]&&"$"!==l[0]&&(s[l]=It(t,l,e[l]))}else s={};for(var h in t)h in s||(s[h]=Dt(t,h));return e&&Object.isExtensible(e)&&(e._normalized=s),z(s,"$stable",a),z(s,"$key",o),z(s,"$hasNormal",r),s}function It(e,t,i){var n=function(){var e=arguments.length?i.apply(null,arguments):i({});e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:xt(e);var t=e&&e[0];return e&&(!t||1===e.length&&t.isComment&&!Mt(t))?void 0:e};return i.proxy&&Object.defineProperty(e,t,{get:n,enumerable:!0,configurable:!0}),n}function Dt(e,t){return function(){return e[t]}}function Rt(e,t){var i,n,r,a,o;if(Array.isArray(e)||"string"===typeof e)for(i=new Array(e.length),n=0,r=e.length;n<r;n++)i[n]=t(e[n],n);else if("number"===typeof e)for(i=new Array(e),n=0;n<e;n++)i[n]=t(n+1,n);else if(l(e))if(de&&e[Symbol.iterator]){i=[];var h=e[Symbol.iterator](),c=h.next();while(!c.done)i.push(t(c.value,i.length)),c=h.next()}else for(a=Object.keys(e),i=new Array(a.length),n=0,r=a.length;n<r;n++)o=a[n],i[n]=t(e[o],o,n);return s(i)||(i=[]),i._isVList=!0,i}function Vt(e,t,i,n){var s,r=this.$scopedSlots[e];r?(i=i||{},n&&(i=L(L({},n),i)),s=r(i)||("function"===typeof t?t():t)):s=this.$slots[e]||("function"===typeof t?t():t);var a=i&&i.slot;return a?this.$createElement("template",{slot:a},s):s}function Ht(e){return qe(this.$options,"filters",e,!0)||A}function Gt(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function Wt(e,t,i,n,s){var r=W.keyCodes[t]||i;return s&&n&&!W.keyCodes[t]?Gt(s,n):r?Gt(r,e):n?x(n)!==t:void 0===e}function jt(e,t,i,n,s){if(i)if(l(i)){var r;Array.isArray(i)&&(i=O(i));var a=function(a){if("class"===a||"style"===a||b(a))r=e;else{var o=e.attrs&&e.attrs.type;r=n||W.mustUseProp(t,o,a)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=k(a),h=x(a);if(!(l in r)&&!(h in r)&&(r[a]=i[a],s)){var c=e.on||(e.on={});c["update:"+a]=function(e){i[a]=e}}};for(var o in i)a(o)}else;return e}function $t(e,t){var i=this._staticTrees||(this._staticTrees=[]),n=i[e];return n&&!t||(n=i[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),Ut(n,"__static__"+e,!1)),n}function zt(e,t,i){return Ut(e,"__once__"+t+(i?"_"+i:""),!0),e}function Ut(e,t,i){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]&&"string"!==typeof e[n]&&Xt(e[n],t+"_"+n,i);else Xt(e,t,i)}function Xt(e,t,i){e.isStatic=!0,e.key=t,e.isOnce=i}function Yt(e,t){if(t)if(c(t)){var i=e.on=e.on?L({},e.on):{};for(var n in t){var s=i[n],r=t[n];i[n]=s?[].concat(s,r):r}}else;return e}function qt(e,t,i,n){t=t||{$stable:!i};for(var s=0;s<e.length;s++){var r=e[s];Array.isArray(r)?qt(r,t,i):r&&(r.proxy&&(r.fn.proxy=!0),t[r.key]=r.fn)}return n&&(t.$key=n),t}function Jt(e,t){for(var i=0;i<t.length;i+=2){var n=t[i];"string"===typeof n&&n&&(e[t[i]]=t[i+1])}return e}function Qt(e,t){return"string"===typeof e?t+e:e}function Kt(e){e._o=zt,e._n=g,e._s=f,e._l=Rt,e._t=Vt,e._q=I,e._i=D,e._m=$t,e._f=Ht,e._k=Wt,e._b=jt,e._v=_e,e._e=Se,e._u=qt,e._g=Yt,e._d=Jt,e._p=Qt}function Zt(e,t,n,s,a){var o,l=this,h=a.options;w(s,"_uid")?(o=Object.create(s),o._original=s):(o=s,s=s._original);var c=r(h._compiled),u=!c;this.data=e,this.props=t,this.children=n,this.parent=s,this.listeners=e.on||i,this.injections=Lt(h.inject,s),this.slots=function(){return l.$slots||At(e.scopedSlots,l.$slots=Ot(n,s)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return At(e.scopedSlots,this.slots())}}),c&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=At(e.scopedSlots,this.$slots)),h._scopeId?this._c=function(e,t,i,n){var r=di(o,e,t,i,n,u);return r&&!Array.isArray(r)&&(r.fnScopeId=h._scopeId,r.fnContext=s),r}:this._c=function(e,t,i,n){return di(o,e,t,i,n,u)}}function ei(e,t,n,r,a){var o=e.options,l={},h=o.props;if(s(h))for(var c in h)l[c]=Je(c,h,t||i);else s(n.attrs)&&ii(l,n.attrs),s(n.props)&&ii(l,n.props);var u=new Zt(n,l,a,r,e),d=o.render.call(null,u._c,u);if(d instanceof ve)return ti(d,n,u.parent,o,u);if(Array.isArray(d)){for(var p=xt(d)||[],f=new Array(p.length),g=0;g<p.length;g++)f[g]=ti(p[g],n,u.parent,o,u);return f}}function ti(e,t,i,n,s){var r=ke(e);return r.fnContext=i,r.fnOptions=n,t.slot&&((r.data||(r.data={})).slot=t.slot),r}function ii(e,t){for(var i in t)e[k(i)]=t[i]}Kt(Zt.prototype);var ni={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var i=e;ni.prepatch(i,i)}else{var n=e.componentInstance=ai(e,Pi);n.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var i=t.componentOptions,n=t.componentInstance=e.componentInstance;Ai(n,i.propsData,i.listeners,t,i.children)},insert:function(e){var t=e.context,i=e.componentInstance;i._isMounted||(i._isMounted=!0,Vi(i,"mounted")),e.data.keepAlive&&(t._isMounted?Ki(i):Di(i,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Ri(t,!0):t.$destroy())}},si=Object.keys(ni);function ri(e,t,i,a,o){if(!n(e)){var h=i.$options._base;if(l(e)&&(e=h.extend(e)),"function"===typeof e){var c;if(n(e.cid)&&(c=e,e=_i(c,h),void 0===e))return Si(c,t,i,a,o);t=t||{},_n(e),s(t.model)&&hi(e.options,t);var u=kt(t,e,o);if(r(e.options.functional))return ei(e,u,t,i,a);var d=t.on;if(t.on=t.nativeOn,r(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}oi(t);var f=e.options.name||o,g=new ve("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,i,{Ctor:e,propsData:u,listeners:d,tag:o,children:a},c);return g}}}function ai(e,t){var i={_isComponent:!0,_parentVnode:e,parent:t},n=e.data.inlineTemplate;return s(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new e.componentOptions.Ctor(i)}function oi(e){for(var t=e.hook||(e.hook={}),i=0;i<si.length;i++){var n=si[i],s=t[n],r=ni[n];s===r||s&&s._merged||(t[n]=s?li(r,s):r)}}function li(e,t){var i=function(i,n){e(i,n),t(i,n)};return i._merged=!0,i}function hi(e,t){var i=e.model&&e.model.prop||"value",n=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[i]=t.model.value;var r=t.on||(t.on={}),a=r[n],o=t.model.callback;s(a)?(Array.isArray(a)?-1===a.indexOf(o):a!==o)&&(r[n]=[o].concat(a)):r[n]=o}var ci=1,ui=2;function di(e,t,i,n,s,a){return(Array.isArray(i)||o(i))&&(s=n,n=i,i=void 0),r(a)&&(s=ui),pi(e,t,i,n,s)}function pi(e,t,i,n,r){if(s(i)&&s(i.__ob__))return Se();if(s(i)&&s(i.is)&&(t=i.is),!t)return Se();var a,o,l;(Array.isArray(n)&&"function"===typeof n[0]&&(i=i||{},i.scopedSlots={default:n[0]},n.length=0),r===ui?n=xt(n):r===ci&&(n=Bt(n)),"string"===typeof t)?(o=e.$vnode&&e.$vnode.ns||W.getTagNamespace(t),a=W.isReservedTag(t)?new ve(W.parsePlatformTagName(t),i,n,void 0,void 0,e):i&&i.pre||!s(l=qe(e.$options,"components",t))?new ve(t,i,n,void 0,void 0,e):ri(l,i,e,n,t)):a=ri(t,i,e,n);return Array.isArray(a)?a:s(a)?(s(o)&&fi(a,o),s(i)&&gi(i),a):Se()}function fi(e,t,i){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,i=!0),s(e.children))for(var a=0,o=e.children.length;a<o;a++){var l=e.children[a];s(l.tag)&&(n(l.ns)||r(i)&&"svg"!==l.tag)&&fi(l,t,i)}}function gi(e){l(e.style)&&bt(e.style),l(e.class)&&bt(e.class)}function mi(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,s=n&&n.context;e.$slots=Ot(t._renderChildren,s),e.$scopedSlots=i,e._c=function(t,i,n,s){return di(e,t,i,n,s,!1)},e.$createElement=function(t,i,n,s){return di(e,t,i,n,s,!0)};var r=n&&n.data;Me(e,"$attrs",r&&r.attrs||i,null,!0),Me(e,"$listeners",t._parentListeners||i,null,!0)}var bi,yi=null;function vi(e){Kt(e.prototype),e.prototype.$nextTick=function(e){return gt(e,this)},e.prototype._render=function(){var e,t=this,i=t.$options,n=i.render,s=i._parentVnode;s&&(t.$scopedSlots=At(s.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=s;try{yi=t,e=n.call(t._renderProxy,t.$createElement)}catch(ka){it(ka,t,"render"),e=t._vnode}finally{yi=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=Se()),e.parent=s,e}}function wi(e,t){return(e.__esModule||de&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?t.extend(e):e}function Si(e,t,i,n,s){var r=Se();return r.asyncFactory=e,r.asyncMeta={data:t,context:i,children:n,tag:s},r}function _i(e,t){if(r(e.error)&&s(e.errorComp))return e.errorComp;if(s(e.resolved))return e.resolved;var i=yi;if(i&&s(e.owners)&&-1===e.owners.indexOf(i)&&e.owners.push(i),r(e.loading)&&s(e.loadingComp))return e.loadingComp;if(i&&!s(e.owners)){var a=e.owners=[i],o=!0,h=null,c=null;i.$on("hook:destroyed",(function(){return y(a,i)}));var u=function(e){for(var t=0,i=a.length;t<i;t++)a[t].$forceUpdate();e&&(a.length=0,null!==h&&(clearTimeout(h),h=null),null!==c&&(clearTimeout(c),c=null))},d=R((function(i){e.resolved=wi(i,t),o?a.length=0:u(!0)})),f=R((function(t){s(e.errorComp)&&(e.error=!0,u(!0))})),g=e(d,f);return l(g)&&(p(g)?n(e.resolved)&&g.then(d,f):p(g.component)&&(g.component.then(d,f),s(g.error)&&(e.errorComp=wi(g.error,t)),s(g.loading)&&(e.loadingComp=wi(g.loading,t),0===g.delay?e.loading=!0:h=setTimeout((function(){h=null,n(e.resolved)&&n(e.error)&&(e.loading=!0,u(!1))}),g.delay||200)),s(g.timeout)&&(c=setTimeout((function(){c=null,n(e.resolved)&&f(null)}),g.timeout)))),o=!1,e.loading?e.loadingComp:e.resolved}}function ki(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t];if(s(i)&&(s(i.componentOptions)||Mt(i)))return i}}function Ti(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Ci(e,t)}function Bi(e,t){bi.$on(e,t)}function xi(e,t){bi.$off(e,t)}function Ni(e,t){var i=bi;return function n(){var s=t.apply(null,arguments);null!==s&&i.$off(e,n)}}function Ci(e,t,i){bi=e,St(t,i||{},Bi,xi,Ni,e),bi=void 0}function Ei(e){var t=/^hook:/;e.prototype.$on=function(e,i){var n=this;if(Array.isArray(e))for(var s=0,r=e.length;s<r;s++)n.$on(e[s],i);else(n._events[e]||(n._events[e]=[])).push(i),t.test(e)&&(n._hasHookEvent=!0);return n},e.prototype.$once=function(e,t){var i=this;function n(){i.$off(e,n),t.apply(i,arguments)}return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,t){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(e)){for(var n=0,s=e.length;n<s;n++)i.$off(e[n],t);return i}var r,a=i._events[e];if(!a)return i;if(!t)return i._events[e]=null,i;var o=a.length;while(o--)if(r=a[o],r===t||r.fn===t){a.splice(o,1);break}return i},e.prototype.$emit=function(e){var t=this,i=t._events[e];if(i){i=i.length>1?P(i):i;for(var n=P(arguments,1),s='event handler for "'+e+'"',r=0,a=i.length;r<a;r++)nt(i[r],t,n,t,s)}return t}}var Pi=null;function Li(e){var t=Pi;return Pi=e,function(){Pi=t}}function Oi(e){var t=e.$options,i=t.parent;if(i&&!t.abstract){while(i.$options.abstract&&i.$parent)i=i.$parent;i.$children.push(e)}e.$parent=i,e.$root=i?i.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Fi(e){e.prototype._update=function(e,t){var i=this,n=i.$el,s=i._vnode,r=Li(i);i._vnode=e,i.$el=s?i.__patch__(s,e):i.__patch__(i.$el,e,t,!1),r(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Vi(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||y(t.$children,e),e._watcher&&e._watcher.teardown();var i=e._watchers.length;while(i--)e._watchers[i].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Vi(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Mi(e,t,i){var n;return e.$el=t,e.$options.render||(e.$options.render=Se),Vi(e,"beforeMount"),n=function(){e._update(e._render(),i)},new nn(e,n,F,{before:function(){e._isMounted&&!e._isDestroyed&&Vi(e,"beforeUpdate")}},!0),i=!1,null==e.$vnode&&(e._isMounted=!0,Vi(e,"mounted")),e}function Ai(e,t,n,s,r){var a=s.data.scopedSlots,o=e.$scopedSlots,l=!!(a&&!a.$stable||o!==i&&!o.$stable||a&&e.$scopedSlots.$key!==a.$key||!a&&e.$scopedSlots.$key),h=!!(r||e.$options._renderChildren||l);if(e.$options._parentVnode=s,e.$vnode=s,e._vnode&&(e._vnode.parent=s),e.$options._renderChildren=r,e.$attrs=s.data.attrs||i,e.$listeners=n||i,t&&e.$options.props){Ee(!1);for(var c=e._props,u=e.$options._propKeys||[],d=0;d<u.length;d++){var p=u[d],f=e.$options.props;c[p]=Je(p,f,t,e)}Ee(!0),e.$options.propsData=t}n=n||i;var g=e.$options._parentListeners;e.$options._parentListeners=n,Ci(e,n,g),h&&(e.$slots=Ot(r,s.context),e.$forceUpdate())}function Ii(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Di(e,t){if(t){if(e._directInactive=!1,Ii(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var i=0;i<e.$children.length;i++)Di(e.$children[i]);Vi(e,"activated")}}function Ri(e,t){if((!t||(e._directInactive=!0,!Ii(e)))&&!e._inactive){e._inactive=!0;for(var i=0;i<e.$children.length;i++)Ri(e.$children[i]);Vi(e,"deactivated")}}function Vi(e,t){be();var i=e.$options[t],n=t+" hook";if(i)for(var s=0,r=i.length;s<r;s++)nt(i[s],e,null,e,n);e._hasHookEvent&&e.$emit("hook:"+t),ye()}var Hi=[],Gi=[],Wi={},ji=!1,$i=!1,zi=0;function Ui(){zi=Hi.length=Gi.length=0,Wi={},ji=$i=!1}var Xi=0,Yi=Date.now;if(J&&!ee){var qi=window.performance;qi&&"function"===typeof qi.now&&Yi()>document.createEvent("Event").timeStamp&&(Yi=function(){return qi.now()})}function Ji(){var e,t;for(Xi=Yi(),$i=!0,Hi.sort((function(e,t){return e.id-t.id})),zi=0;zi<Hi.length;zi++)e=Hi[zi],e.before&&e.before(),t=e.id,Wi[t]=null,e.run();var i=Gi.slice(),n=Hi.slice();Ui(),Zi(i),Qi(n),he&&W.devtools&&he.emit("flush")}function Qi(e){var t=e.length;while(t--){var i=e[t],n=i.vm;n._watcher===i&&n._isMounted&&!n._isDestroyed&&Vi(n,"updated")}}function Ki(e){e._inactive=!1,Gi.push(e)}function Zi(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Di(e[t],!0)}function en(e){var t=e.id;if(null==Wi[t]){if(Wi[t]=!0,$i){var i=Hi.length-1;while(i>zi&&Hi[i].id>e.id)i--;Hi.splice(i+1,0,e)}else Hi.push(e);ji||(ji=!0,gt(Ji))}}var tn=0,nn=function(e,t,i,n,s){this.vm=e,s&&(e._watcher=this),e._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++tn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ue,this.newDepIds=new ue,this.expression="","function"===typeof t?this.getter=t:(this.getter=X(t),this.getter||(this.getter=F)),this.value=this.lazy?void 0:this.get()};nn.prototype.get=function(){var e;be(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(ka){if(!this.user)throw ka;it(ka,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&bt(e),ye(),this.cleanupDeps()}return e},nn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},nn.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},nn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():en(this)},nn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user){var i='callback for watcher "'+this.expression+'"';nt(this.cb,this.vm,[e,t],this.vm,i)}else this.cb.call(this.vm,e,t)}}},nn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nn.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},nn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var sn={enumerable:!0,configurable:!0,get:F,set:F};function rn(e,t,i){sn.get=function(){return this[t][i]},sn.set=function(e){this[t][i]=e},Object.defineProperty(e,i,sn)}function an(e){e._watchers=[];var t=e.$options;t.props&&on(e,t.props),t.methods&&gn(e,t.methods),t.data?ln(e):Fe(e._data={},!0),t.computed&&un(e,t.computed),t.watch&&t.watch!==re&&mn(e,t.watch)}function on(e,t){var i=e.$options.propsData||{},n=e._props={},s=e.$options._propKeys=[],r=!e.$parent;r||Ee(!1);var a=function(r){s.push(r);var a=Je(r,t,i,e);Me(n,r,a),r in e||rn(e,"_props",r)};for(var o in t)a(o);Ee(!0)}function ln(e){var t=e.$options.data;t=e._data="function"===typeof t?hn(t,e):t||{},c(t)||(t={});var i=Object.keys(t),n=e.$options.props,s=(e.$options.methods,i.length);while(s--){var r=i[s];0,n&&w(n,r)||$(r)||rn(e,"_data",r)}Fe(t,!0)}function hn(e,t){be();try{return e.call(t,t)}catch(ka){return it(ka,t,"data()"),{}}finally{ye()}}var cn={lazy:!0};function un(e,t){var i=e._computedWatchers=Object.create(null),n=le();for(var s in t){var r=t[s],a="function"===typeof r?r:r.get;0,n||(i[s]=new nn(e,a||F,F,cn)),s in e||dn(e,s,r)}}function dn(e,t,i){var n=!le();"function"===typeof i?(sn.get=n?pn(t):fn(i),sn.set=F):(sn.get=i.get?n&&!1!==i.cache?pn(t):fn(i.get):F,sn.set=i.set||F),Object.defineProperty(e,t,sn)}function pn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ge.target&&t.depend(),t.value}}function fn(e){return function(){return e.call(this,this)}}function gn(e,t){e.$options.props;for(var i in t)e[i]="function"!==typeof t[i]?F:E(t[i],e)}function mn(e,t){for(var i in t){var n=t[i];if(Array.isArray(n))for(var s=0;s<n.length;s++)bn(e,i,n[s]);else bn(e,i,n)}}function bn(e,t,i,n){return c(i)&&(n=i,i=i.handler),"string"===typeof i&&(i=e[i]),e.$watch(t,i,n)}function yn(e){var t={get:function(){return this._data}},i={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",i),e.prototype.$set=Ae,e.prototype.$delete=Ie,e.prototype.$watch=function(e,t,i){var n=this;if(c(t))return bn(n,e,t,i);i=i||{},i.user=!0;var s=new nn(n,e,t,i);if(i.immediate){var r='callback for immediate watcher "'+s.expression+'"';be(),nt(t,n,[s.value],n,r),ye()}return function(){s.teardown()}}}var vn=0;function wn(e){e.prototype._init=function(e){var t=this;t._uid=vn++,t._isVue=!0,e&&e._isComponent?Sn(t,e):t.$options=Ye(_n(t.constructor),e||{},t),t._renderProxy=t,t._self=t,Oi(t),Ti(t),mi(t),Vi(t,"beforeCreate"),Pt(t),an(t),Et(t),Vi(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Sn(e,t){var i=e.$options=Object.create(e.constructor.options),n=t._parentVnode;i.parent=t.parent,i._parentVnode=n;var s=n.componentOptions;i.propsData=s.propsData,i._parentListeners=s.listeners,i._renderChildren=s.children,i._componentTag=s.tag,t.render&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns)}function _n(e){var t=e.options;if(e.super){var i=_n(e.super),n=e.superOptions;if(i!==n){e.superOptions=i;var s=kn(e);s&&L(e.extendOptions,s),t=e.options=Ye(i,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function kn(e){var t,i=e.options,n=e.sealedOptions;for(var s in i)i[s]!==n[s]&&(t||(t={}),t[s]=i[s]);return t}function Tn(e){this._init(e)}function Bn(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var i=P(arguments,1);return i.unshift(this),"function"===typeof e.install?e.install.apply(e,i):"function"===typeof e&&e.apply(null,i),t.push(e),this}}function xn(e){e.mixin=function(e){return this.options=Ye(this.options,e),this}}function Nn(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var i=this,n=i.cid,s=e._Ctor||(e._Ctor={});if(s[n])return s[n];var r=e.name||i.options.name;var a=function(e){this._init(e)};return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=t++,a.options=Ye(i.options,e),a["super"]=i,a.options.props&&Cn(a),a.options.computed&&En(a),a.extend=i.extend,a.mixin=i.mixin,a.use=i.use,H.forEach((function(e){a[e]=i[e]})),r&&(a.options.components[r]=a),a.superOptions=i.options,a.extendOptions=e,a.sealedOptions=L({},a.options),s[n]=a,a}}function Cn(e){var t=e.options.props;for(var i in t)rn(e.prototype,"_props",i)}function En(e){var t=e.options.computed;for(var i in t)dn(e.prototype,i,t[i])}function Pn(e){H.forEach((function(t){e[t]=function(e,i){return i?("component"===t&&c(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===t&&"function"===typeof i&&(i={bind:i,update:i}),this.options[t+"s"][e]=i,i):this.options[t+"s"][e]}}))}function Ln(e){return e&&(e.Ctor.options.name||e.tag)}function On(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!u(e)&&e.test(t)}function Fn(e,t){var i=e.cache,n=e.keys,s=e._vnode;for(var r in i){var a=i[r];if(a){var o=a.name;o&&!t(o)&&Mn(i,r,n,s)}}}function Mn(e,t,i,n){var s=e[t];!s||n&&s.tag===n.tag||s.componentInstance.$destroy(),e[t]=null,y(i,t)}wn(Tn),yn(Tn),Ei(Tn),Fi(Tn),vi(Tn);var An=[String,RegExp,Array],In={name:"keep-alive",abstract:!0,props:{include:An,exclude:An,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,i=e.keys,n=e.vnodeToCache,s=e.keyToCache;if(n){var r=n.tag,a=n.componentInstance,o=n.componentOptions;t[s]={name:Ln(o),tag:r,componentInstance:a},i.push(s),this.max&&i.length>parseInt(this.max)&&Mn(t,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Mn(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Fn(e,(function(e){return On(t,e)}))})),this.$watch("exclude",(function(t){Fn(e,(function(e){return!On(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=ki(e),i=t&&t.componentOptions;if(i){var n=Ln(i),s=this,r=s.include,a=s.exclude;if(r&&(!n||!On(r,n))||a&&n&&On(a,n))return t;var o=this,l=o.cache,h=o.keys,c=null==t.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):t.key;l[c]?(t.componentInstance=l[c].componentInstance,y(h,c),h.push(c)):(this.vnodeToCache=t,this.keyToCache=c),t.data.keepAlive=!0}return t||e&&e[0]}},Dn={KeepAlive:In};function Rn(e){var t={get:function(){return W}};Object.defineProperty(e,"config",t),e.util={warn:pe,extend:L,mergeOptions:Ye,defineReactive:Me},e.set=Ae,e.delete=Ie,e.nextTick=gt,e.observable=function(e){return Fe(e),e},e.options=Object.create(null),H.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,L(e.options.components,Dn),Bn(e),xn(e),Nn(e),Pn(e)}Rn(Tn),Object.defineProperty(Tn.prototype,"$isServer",{get:le}),Object.defineProperty(Tn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Tn,"FunctionalRenderContext",{value:Zt}),Tn.version="2.6.14";var Vn=m("style,class"),Hn=m("input,textarea,option,select,progress"),Gn=function(e,t,i){return"value"===i&&Hn(e)&&"button"!==t||"selected"===i&&"option"===e||"checked"===i&&"input"===e||"muted"===i&&"video"===e},Wn=m("contenteditable,draggable,spellcheck"),jn=m("events,caret,typing,plaintext-only"),$n=function(e,t){return qn(t)||"false"===t?"false":"contenteditable"===e&&jn(t)?t:"true"},zn=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Un="http://www.w3.org/1999/xlink",Xn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yn=function(e){return Xn(e)?e.slice(6,e.length):""},qn=function(e){return null==e||!1===e};function Jn(e){var t=e.data,i=e,n=e;while(s(n.componentInstance))n=n.componentInstance._vnode,n&&n.data&&(t=Qn(n.data,t));while(s(i=i.parent))i&&i.data&&(t=Qn(t,i.data));return Kn(t.staticClass,t.class)}function Qn(e,t){return{staticClass:Zn(e.staticClass,t.staticClass),class:s(e.class)?[e.class,t.class]:t.class}}function Kn(e,t){return s(e)||s(t)?Zn(e,es(t)):""}function Zn(e,t){return e?t?e+" "+t:e:t||""}function es(e){return Array.isArray(e)?ts(e):l(e)?is(e):"string"===typeof e?e:""}function ts(e){for(var t,i="",n=0,r=e.length;n<r;n++)s(t=es(e[n]))&&""!==t&&(i&&(i+=" "),i+=t);return i}function is(e){var t="";for(var i in e)e[i]&&(t&&(t+=" "),t+=i);return t}var ns={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ss=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),rs=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),as=function(e){return ss(e)||rs(e)};function os(e){return rs(e)?"svg":"math"===e?"math":void 0}var ls=Object.create(null);function hs(e){if(!J)return!0;if(as(e))return!1;if(e=e.toLowerCase(),null!=ls[e])return ls[e];var t=document.createElement(e);return e.indexOf("-")>-1?ls[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:ls[e]=/HTMLUnknownElement/.test(t.toString())}var cs=m("text,number,password,search,email,tel,url");function us(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function ds(e,t){var i=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i}function ps(e,t){return document.createElementNS(ns[e],t)}function fs(e){return document.createTextNode(e)}function gs(e){return document.createComment(e)}function ms(e,t,i){e.insertBefore(t,i)}function bs(e,t){e.removeChild(t)}function ys(e,t){e.appendChild(t)}function vs(e){return e.parentNode}function ws(e){return e.nextSibling}function Ss(e){return e.tagName}function _s(e,t){e.textContent=t}function ks(e,t){e.setAttribute(t,"")}var Ts=Object.freeze({createElement:ds,createElementNS:ps,createTextNode:fs,createComment:gs,insertBefore:ms,removeChild:bs,appendChild:ys,parentNode:vs,nextSibling:ws,tagName:Ss,setTextContent:_s,setStyleScope:ks}),Bs={create:function(e,t){xs(t)},update:function(e,t){e.data.ref!==t.data.ref&&(xs(e,!0),xs(t))},destroy:function(e){xs(e,!0)}};function xs(e,t){var i=e.data.ref;if(s(i)){var n=e.context,r=e.componentInstance||e.elm,a=n.$refs;t?Array.isArray(a[i])?y(a[i],r):a[i]===r&&(a[i]=void 0):e.data.refInFor?Array.isArray(a[i])?a[i].indexOf(r)<0&&a[i].push(r):a[i]=[r]:a[i]=r}}var Ns=new ve("",{},[]),Cs=["create","activate","update","remove","destroy"];function Es(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&s(e.data)===s(t.data)&&Ps(e,t)||r(e.isAsyncPlaceholder)&&n(t.asyncFactory.error))}function Ps(e,t){if("input"!==e.tag)return!0;var i,n=s(i=e.data)&&s(i=i.attrs)&&i.type,r=s(i=t.data)&&s(i=i.attrs)&&i.type;return n===r||cs(n)&&cs(r)}function Ls(e,t,i){var n,r,a={};for(n=t;n<=i;++n)r=e[n].key,s(r)&&(a[r]=n);return a}function Os(e){var t,i,a={},l=e.modules,h=e.nodeOps;for(t=0;t<Cs.length;++t)for(a[Cs[t]]=[],i=0;i<l.length;++i)s(l[i][Cs[t]])&&a[Cs[t]].push(l[i][Cs[t]]);function c(e){return new ve(h.tagName(e).toLowerCase(),{},[],void 0,e)}function u(e,t){function i(){0===--i.listeners&&d(e)}return i.listeners=t,i}function d(e){var t=h.parentNode(e);s(t)&&h.removeChild(t,e)}function p(e,t,i,n,a,o,l){if(s(e.elm)&&s(o)&&(e=o[l]=ke(e)),e.isRootInsert=!a,!f(e,t,i,n)){var c=e.data,u=e.children,d=e.tag;s(d)?(e.elm=e.ns?h.createElementNS(e.ns,d):h.createElement(d,e),_(e),v(e,u,t),s(c)&&S(e,t),y(i,e.elm,n)):r(e.isComment)?(e.elm=h.createComment(e.text),y(i,e.elm,n)):(e.elm=h.createTextNode(e.text),y(i,e.elm,n))}}function f(e,t,i,n){var a=e.data;if(s(a)){var o=s(e.componentInstance)&&a.keepAlive;if(s(a=a.hook)&&s(a=a.init)&&a(e,!1),s(e.componentInstance))return g(e,t),y(i,e.elm,n),r(o)&&b(e,t,i,n),!0}}function g(e,t){s(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,w(e)?(S(e,t),_(e)):(xs(e),t.push(e))}function b(e,t,i,n){var r,o=e;while(o.componentInstance)if(o=o.componentInstance._vnode,s(r=o.data)&&s(r=r.transition)){for(r=0;r<a.activate.length;++r)a.activate[r](Ns,o);t.push(o);break}y(i,e.elm,n)}function y(e,t,i){s(e)&&(s(i)?h.parentNode(i)===e&&h.insertBefore(e,t,i):h.appendChild(e,t))}function v(e,t,i){if(Array.isArray(t)){0;for(var n=0;n<t.length;++n)p(t[n],i,e.elm,null,!0,t,n)}else o(e.text)&&h.appendChild(e.elm,h.createTextNode(String(e.text)))}function w(e){while(e.componentInstance)e=e.componentInstance._vnode;return s(e.tag)}function S(e,i){for(var n=0;n<a.create.length;++n)a.create[n](Ns,e);t=e.data.hook,s(t)&&(s(t.create)&&t.create(Ns,e),s(t.insert)&&i.push(e))}function _(e){var t;if(s(t=e.fnScopeId))h.setStyleScope(e.elm,t);else{var i=e;while(i)s(t=i.context)&&s(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t),i=i.parent}s(t=Pi)&&t!==e.context&&t!==e.fnContext&&s(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t)}function k(e,t,i,n,s,r){for(;n<=s;++n)p(i[n],r,e,t,!1,i,n)}function T(e){var t,i,n=e.data;if(s(n))for(s(t=n.hook)&&s(t=t.destroy)&&t(e),t=0;t<a.destroy.length;++t)a.destroy[t](e);if(s(t=e.children))for(i=0;i<e.children.length;++i)T(e.children[i])}function B(e,t,i){for(;t<=i;++t){var n=e[t];s(n)&&(s(n.tag)?(x(n),T(n)):d(n.elm))}}function x(e,t){if(s(t)||s(e.data)){var i,n=a.remove.length+1;for(s(t)?t.listeners+=n:t=u(e.elm,n),s(i=e.componentInstance)&&s(i=i._vnode)&&s(i.data)&&x(i,t),i=0;i<a.remove.length;++i)a.remove[i](e,t);s(i=e.data.hook)&&s(i=i.remove)?i(e,t):t()}else d(e.elm)}function N(e,t,i,r,a){var o,l,c,u,d=0,f=0,g=t.length-1,m=t[0],b=t[g],y=i.length-1,v=i[0],w=i[y],S=!a;while(d<=g&&f<=y)n(m)?m=t[++d]:n(b)?b=t[--g]:Es(m,v)?(E(m,v,r,i,f),m=t[++d],v=i[++f]):Es(b,w)?(E(b,w,r,i,y),b=t[--g],w=i[--y]):Es(m,w)?(E(m,w,r,i,y),S&&h.insertBefore(e,m.elm,h.nextSibling(b.elm)),m=t[++d],w=i[--y]):Es(b,v)?(E(b,v,r,i,f),S&&h.insertBefore(e,b.elm,m.elm),b=t[--g],v=i[++f]):(n(o)&&(o=Ls(t,d,g)),l=s(v.key)?o[v.key]:C(v,t,d,g),n(l)?p(v,r,e,m.elm,!1,i,f):(c=t[l],Es(c,v)?(E(c,v,r,i,f),t[l]=void 0,S&&h.insertBefore(e,c.elm,m.elm)):p(v,r,e,m.elm,!1,i,f)),v=i[++f]);d>g?(u=n(i[y+1])?null:i[y+1].elm,k(e,u,i,f,y,r)):f>y&&B(t,d,g)}function C(e,t,i,n){for(var r=i;r<n;r++){var a=t[r];if(s(a)&&Es(e,a))return r}}function E(e,t,i,o,l,c){if(e!==t){s(t.elm)&&s(o)&&(t=o[l]=ke(t));var u=t.elm=e.elm;if(r(e.isAsyncPlaceholder))s(t.asyncFactory.resolved)?O(e.elm,t,i):t.isAsyncPlaceholder=!0;else if(r(t.isStatic)&&r(e.isStatic)&&t.key===e.key&&(r(t.isCloned)||r(t.isOnce)))t.componentInstance=e.componentInstance;else{var d,p=t.data;s(p)&&s(d=p.hook)&&s(d=d.prepatch)&&d(e,t);var f=e.children,g=t.children;if(s(p)&&w(t)){for(d=0;d<a.update.length;++d)a.update[d](e,t);s(d=p.hook)&&s(d=d.update)&&d(e,t)}n(t.text)?s(f)&&s(g)?f!==g&&N(u,f,g,i,c):s(g)?(s(e.text)&&h.setTextContent(u,""),k(u,null,g,0,g.length-1,i)):s(f)?B(f,0,f.length-1):s(e.text)&&h.setTextContent(u,""):e.text!==t.text&&h.setTextContent(u,t.text),s(p)&&s(d=p.hook)&&s(d=d.postpatch)&&d(e,t)}}}function P(e,t,i){if(r(i)&&s(e.parent))e.parent.data.pendingInsert=t;else for(var n=0;n<t.length;++n)t[n].data.hook.insert(t[n])}var L=m("attrs,class,staticClass,staticStyle,key");function O(e,t,i,n){var a,o=t.tag,l=t.data,h=t.children;if(n=n||l&&l.pre,t.elm=e,r(t.isComment)&&s(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(s(l)&&(s(a=l.hook)&&s(a=a.init)&&a(t,!0),s(a=t.componentInstance)))return g(t,i),!0;if(s(o)){if(s(h))if(e.hasChildNodes())if(s(a=l)&&s(a=a.domProps)&&s(a=a.innerHTML)){if(a!==e.innerHTML)return!1}else{for(var c=!0,u=e.firstChild,d=0;d<h.length;d++){if(!u||!O(u,h[d],i,n)){c=!1;break}u=u.nextSibling}if(!c||u)return!1}else v(t,h,i);if(s(l)){var p=!1;for(var f in l)if(!L(f)){p=!0,S(t,i);break}!p&&l["class"]&&bt(l["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,i,o){if(!n(t)){var l=!1,u=[];if(n(e))l=!0,p(t,u);else{var d=s(e.nodeType);if(!d&&Es(e,t))E(e,t,u,null,null,o);else{if(d){if(1===e.nodeType&&e.hasAttribute(V)&&(e.removeAttribute(V),i=!0),r(i)&&O(e,t,u))return P(t,u,!0),e;e=c(e)}var f=e.elm,g=h.parentNode(f);if(p(t,u,f._leaveCb?null:g,h.nextSibling(f)),s(t.parent)){var m=t.parent,b=w(t);while(m){for(var y=0;y<a.destroy.length;++y)a.destroy[y](m);if(m.elm=t.elm,b){for(var v=0;v<a.create.length;++v)a.create[v](Ns,m);var S=m.data.hook.insert;if(S.merged)for(var _=1;_<S.fns.length;_++)S.fns[_]()}else xs(m);m=m.parent}}s(g)?B([e],0,0):s(e.tag)&&T(e)}}return P(t,u,l),t.elm}s(e)&&T(e)}}var Fs={create:Ms,update:Ms,destroy:function(e){Ms(e,Ns)}};function Ms(e,t){(e.data.directives||t.data.directives)&&As(e,t)}function As(e,t){var i,n,s,r=e===Ns,a=t===Ns,o=Ds(e.data.directives,e.context),l=Ds(t.data.directives,t.context),h=[],c=[];for(i in l)n=o[i],s=l[i],n?(s.oldValue=n.value,s.oldArg=n.arg,Vs(s,"update",t,e),s.def&&s.def.componentUpdated&&c.push(s)):(Vs(s,"bind",t,e),s.def&&s.def.inserted&&h.push(s));if(h.length){var u=function(){for(var i=0;i<h.length;i++)Vs(h[i],"inserted",t,e)};r?_t(t,"insert",u):u()}if(c.length&&_t(t,"postpatch",(function(){for(var i=0;i<c.length;i++)Vs(c[i],"componentUpdated",t,e)})),!r)for(i in o)l[i]||Vs(o[i],"unbind",e,e,a)}var Is=Object.create(null);function Ds(e,t){var i,n,s=Object.create(null);if(!e)return s;for(i=0;i<e.length;i++)n=e[i],n.modifiers||(n.modifiers=Is),s[Rs(n)]=n,n.def=qe(t.$options,"directives",n.name,!0);return s}function Rs(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Vs(e,t,i,n,s){var r=e.def&&e.def[t];if(r)try{r(i.elm,e,i,n,s)}catch(ka){it(ka,i.context,"directive "+e.name+" "+t+" hook")}}var Hs=[Bs,Fs];function Gs(e,t){var i=t.componentOptions;if((!s(i)||!1!==i.Ctor.options.inheritAttrs)&&(!n(e.data.attrs)||!n(t.data.attrs))){var r,a,o,l=t.elm,h=e.data.attrs||{},c=t.data.attrs||{};for(r in s(c.__ob__)&&(c=t.data.attrs=L({},c)),c)a=c[r],o=h[r],o!==a&&Ws(l,r,a,t.data.pre);for(r in(ee||ie)&&c.value!==h.value&&Ws(l,"value",c.value),h)n(c[r])&&(Xn(r)?l.removeAttributeNS(Un,Yn(r)):Wn(r)||l.removeAttribute(r))}}function Ws(e,t,i,n){n||e.tagName.indexOf("-")>-1?js(e,t,i):zn(t)?qn(i)?e.removeAttribute(t):(i="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,i)):Wn(t)?e.setAttribute(t,$n(t,i)):Xn(t)?qn(i)?e.removeAttributeNS(Un,Yn(t)):e.setAttributeNS(Un,t,i):js(e,t,i)}function js(e,t,i){if(qn(i))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==i&&!e.__ieph){var n=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",n)};e.addEventListener("input",n),e.__ieph=!0}e.setAttribute(t,i)}}var $s={create:Gs,update:Gs};function zs(e,t){var i=t.elm,r=t.data,a=e.data;if(!(n(r.staticClass)&&n(r.class)&&(n(a)||n(a.staticClass)&&n(a.class)))){var o=Jn(t),l=i._transitionClasses;s(l)&&(o=Zn(o,es(l))),o!==i._prevClass&&(i.setAttribute("class",o),i._prevClass=o)}}var Us,Xs={create:zs,update:zs},Ys="__r",qs="__c";function Js(e){if(s(e[Ys])){var t=ee?"change":"input";e[t]=[].concat(e[Ys],e[t]||[]),delete e[Ys]}s(e[qs])&&(e.change=[].concat(e[qs],e.change||[]),delete e[qs])}function Qs(e,t,i){var n=Us;return function s(){var r=t.apply(null,arguments);null!==r&&er(e,s,i,n)}}var Ks=ot&&!(se&&Number(se[1])<=53);function Zs(e,t,i,n){if(Ks){var s=Xi,r=t;t=r._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=s||e.timeStamp<=0||e.target.ownerDocument!==document)return r.apply(this,arguments)}}Us.addEventListener(e,t,ae?{capture:i,passive:n}:i)}function er(e,t,i,n){(n||Us).removeEventListener(e,t._wrapper||t,i)}function tr(e,t){if(!n(e.data.on)||!n(t.data.on)){var i=t.data.on||{},s=e.data.on||{};Us=t.elm,Js(i),St(i,s,Zs,er,Qs,t.context),Us=void 0}}var ir,nr={create:tr,update:tr};function sr(e,t){if(!n(e.data.domProps)||!n(t.data.domProps)){var i,r,a=t.elm,o=e.data.domProps||{},l=t.data.domProps||{};for(i in s(l.__ob__)&&(l=t.data.domProps=L({},l)),o)i in l||(a[i]="");for(i in l){if(r=l[i],"textContent"===i||"innerHTML"===i){if(t.children&&(t.children.length=0),r===o[i])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===i&&"PROGRESS"!==a.tagName){a._value=r;var h=n(r)?"":String(r);rr(a,h)&&(a.value=h)}else if("innerHTML"===i&&rs(a.tagName)&&n(a.innerHTML)){ir=ir||document.createElement("div"),ir.innerHTML="<svg>"+r+"</svg>";var c=ir.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(c.firstChild)a.appendChild(c.firstChild)}else if(r!==o[i])try{a[i]=r}catch(ka){}}}}function rr(e,t){return!e.composing&&("OPTION"===e.tagName||ar(e,t)||or(e,t))}function ar(e,t){var i=!0;try{i=document.activeElement!==e}catch(ka){}return i&&e.value!==t}function or(e,t){var i=e.value,n=e._vModifiers;if(s(n)){if(n.number)return g(i)!==g(t);if(n.trim)return i.trim()!==t.trim()}return i!==t}var lr={create:sr,update:sr},hr=S((function(e){var t={},i=/;(?![^(]*\))/g,n=/:(.+)/;return e.split(i).forEach((function(e){if(e){var i=e.split(n);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}));function cr(e){var t=ur(e.style);return e.staticStyle?L(e.staticStyle,t):t}function ur(e){return Array.isArray(e)?O(e):"string"===typeof e?hr(e):e}function dr(e,t){var i,n={};if(t){var s=e;while(s.componentInstance)s=s.componentInstance._vnode,s&&s.data&&(i=cr(s.data))&&L(n,i)}(i=cr(e.data))&&L(n,i);var r=e;while(r=r.parent)r.data&&(i=cr(r.data))&&L(n,i);return n}var pr,fr=/^--/,gr=/\s*!important$/,mr=function(e,t,i){if(fr.test(t))e.style.setProperty(t,i);else if(gr.test(i))e.style.setProperty(x(t),i.replace(gr,""),"important");else{var n=yr(t);if(Array.isArray(i))for(var s=0,r=i.length;s<r;s++)e.style[n]=i[s];else e.style[n]=i}},br=["Webkit","Moz","ms"],yr=S((function(e){if(pr=pr||document.createElement("div").style,e=k(e),"filter"!==e&&e in pr)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<br.length;i++){var n=br[i]+t;if(n in pr)return n}}));function vr(e,t){var i=t.data,r=e.data;if(!(n(i.staticStyle)&&n(i.style)&&n(r.staticStyle)&&n(r.style))){var a,o,l=t.elm,h=r.staticStyle,c=r.normalizedStyle||r.style||{},u=h||c,d=ur(t.data.style)||{};t.data.normalizedStyle=s(d.__ob__)?L({},d):d;var p=dr(t,!0);for(o in u)n(p[o])&&mr(l,o,"");for(o in p)a=p[o],a!==u[o]&&mr(l,o,null==a?"":a)}}var wr={create:vr,update:vr},Sr=/\s+/;function _r(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Sr).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var i=" "+(e.getAttribute("class")||"")+" ";i.indexOf(" "+t+" ")<0&&e.setAttribute("class",(i+t).trim())}}function kr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Sr).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var i=" "+(e.getAttribute("class")||"")+" ",n=" "+t+" ";while(i.indexOf(n)>=0)i=i.replace(n," ");i=i.trim(),i?e.setAttribute("class",i):e.removeAttribute("class")}}function Tr(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&L(t,Br(e.name||"v")),L(t,e),t}return"string"===typeof e?Br(e):void 0}}var Br=S((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),xr=J&&!te,Nr="transition",Cr="animation",Er="transition",Pr="transitionend",Lr="animation",Or="animationend";xr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Er="WebkitTransition",Pr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Lr="WebkitAnimation",Or="webkitAnimationEnd"));var Fr=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Mr(e){Fr((function(){Fr(e)}))}function Ar(e,t){var i=e._transitionClasses||(e._transitionClasses=[]);i.indexOf(t)<0&&(i.push(t),_r(e,t))}function Ir(e,t){e._transitionClasses&&y(e._transitionClasses,t),kr(e,t)}function Dr(e,t,i){var n=Vr(e,t),s=n.type,r=n.timeout,a=n.propCount;if(!s)return i();var o=s===Nr?Pr:Or,l=0,h=function(){e.removeEventListener(o,c),i()},c=function(t){t.target===e&&++l>=a&&h()};setTimeout((function(){l<a&&h()}),r+1),e.addEventListener(o,c)}var Rr=/\b(transform|all)(,|$)/;function Vr(e,t){var i,n=window.getComputedStyle(e),s=(n[Er+"Delay"]||"").split(", "),r=(n[Er+"Duration"]||"").split(", "),a=Hr(s,r),o=(n[Lr+"Delay"]||"").split(", "),l=(n[Lr+"Duration"]||"").split(", "),h=Hr(o,l),c=0,u=0;t===Nr?a>0&&(i=Nr,c=a,u=r.length):t===Cr?h>0&&(i=Cr,c=h,u=l.length):(c=Math.max(a,h),i=c>0?a>h?Nr:Cr:null,u=i?i===Nr?r.length:l.length:0);var d=i===Nr&&Rr.test(n[Er+"Property"]);return{type:i,timeout:c,propCount:u,hasTransform:d}}function Hr(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,i){return Gr(t)+Gr(e[i])})))}function Gr(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Wr(e,t){var i=e.elm;s(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var r=Tr(e.data.transition);if(!n(r)&&!s(i._enterCb)&&1===i.nodeType){var a=r.css,o=r.type,h=r.enterClass,c=r.enterToClass,u=r.enterActiveClass,d=r.appearClass,p=r.appearToClass,f=r.appearActiveClass,m=r.beforeEnter,b=r.enter,y=r.afterEnter,v=r.enterCancelled,w=r.beforeAppear,S=r.appear,_=r.afterAppear,k=r.appearCancelled,T=r.duration,B=Pi,x=Pi.$vnode;while(x&&x.parent)B=x.context,x=x.parent;var N=!B._isMounted||!e.isRootInsert;if(!N||S||""===S){var C=N&&d?d:h,E=N&&f?f:u,P=N&&p?p:c,L=N&&w||m,O=N&&"function"===typeof S?S:b,F=N&&_||y,M=N&&k||v,A=g(l(T)?T.enter:T);0;var I=!1!==a&&!te,D=zr(O),V=i._enterCb=R((function(){I&&(Ir(i,P),Ir(i,E)),V.cancelled?(I&&Ir(i,C),M&&M(i)):F&&F(i),i._enterCb=null}));e.data.show||_t(e,"insert",(function(){var t=i.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),O&&O(i,V)})),L&&L(i),I&&(Ar(i,C),Ar(i,E),Mr((function(){Ir(i,C),V.cancelled||(Ar(i,P),D||($r(A)?setTimeout(V,A):Dr(i,o,V)))}))),e.data.show&&(t&&t(),O&&O(i,V)),I||D||V()}}}function jr(e,t){var i=e.elm;s(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var r=Tr(e.data.transition);if(n(r)||1!==i.nodeType)return t();if(!s(i._leaveCb)){var a=r.css,o=r.type,h=r.leaveClass,c=r.leaveToClass,u=r.leaveActiveClass,d=r.beforeLeave,p=r.leave,f=r.afterLeave,m=r.leaveCancelled,b=r.delayLeave,y=r.duration,v=!1!==a&&!te,w=zr(p),S=g(l(y)?y.leave:y);0;var _=i._leaveCb=R((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),v&&(Ir(i,c),Ir(i,u)),_.cancelled?(v&&Ir(i,h),m&&m(i)):(t(),f&&f(i)),i._leaveCb=null}));b?b(k):k()}function k(){_.cancelled||(!e.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),d&&d(i),v&&(Ar(i,h),Ar(i,u),Mr((function(){Ir(i,h),_.cancelled||(Ar(i,c),w||($r(S)?setTimeout(_,S):Dr(i,o,_)))}))),p&&p(i,_),v||w||_())}}function $r(e){return"number"===typeof e&&!isNaN(e)}function zr(e){if(n(e))return!1;var t=e.fns;return s(t)?zr(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ur(e,t){!0!==t.data.show&&Wr(t)}var Xr=J?{create:Ur,activate:Ur,remove:function(e,t){!0!==e.data.show?jr(e,t):t()}}:{},Yr=[$s,Xs,nr,lr,wr,Xr],qr=Yr.concat(Hs),Jr=Os({nodeOps:Ts,modules:qr});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&sa(e,"input")}));var Qr={inserted:function(e,t,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?_t(i,"postpatch",(function(){Qr.componentUpdated(e,t,i)})):Kr(e,t,i.context),e._vOptions=[].map.call(e.options,ta)):("textarea"===i.tag||cs(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",ia),e.addEventListener("compositionend",na),e.addEventListener("change",na),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,i){if("select"===i.tag){Kr(e,t,i.context);var n=e._vOptions,s=e._vOptions=[].map.call(e.options,ta);if(s.some((function(e,t){return!I(e,n[t])}))){var r=e.multiple?t.value.some((function(e){return ea(e,s)})):t.value!==t.oldValue&&ea(t.value,s);r&&sa(e,"change")}}}};function Kr(e,t,i){Zr(e,t,i),(ee||ie)&&setTimeout((function(){Zr(e,t,i)}),0)}function Zr(e,t,i){var n=t.value,s=e.multiple;if(!s||Array.isArray(n)){for(var r,a,o=0,l=e.options.length;o<l;o++)if(a=e.options[o],s)r=D(n,ta(a))>-1,a.selected!==r&&(a.selected=r);else if(I(ta(a),n))return void(e.selectedIndex!==o&&(e.selectedIndex=o));s||(e.selectedIndex=-1)}}function ea(e,t){return t.every((function(t){return!I(t,e)}))}function ta(e){return"_value"in e?e._value:e.value}function ia(e){e.target.composing=!0}function na(e){e.target.composing&&(e.target.composing=!1,sa(e.target,"input"))}function sa(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}function ra(e){return!e.componentInstance||e.data&&e.data.transition?e:ra(e.componentInstance._vnode)}var aa={bind:function(e,t,i){var n=t.value;i=ra(i);var s=i.data&&i.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;n&&s?(i.data.show=!0,Wr(i,(function(){e.style.display=r}))):e.style.display=n?r:"none"},update:function(e,t,i){var n=t.value,s=t.oldValue;if(!n!==!s){i=ra(i);var r=i.data&&i.data.transition;r?(i.data.show=!0,n?Wr(i,(function(){e.style.display=e.__vOriginalDisplay})):jr(i,(function(){e.style.display="none"}))):e.style.display=n?e.__vOriginalDisplay:"none"}},unbind:function(e,t,i,n,s){s||(e.style.display=e.__vOriginalDisplay)}},oa={model:Qr,show:aa},la={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ha(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?ha(ki(t.children)):e}function ca(e){var t={},i=e.$options;for(var n in i.propsData)t[n]=e[n];var s=i._parentListeners;for(var r in s)t[k(r)]=s[r];return t}function ua(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function da(e){while(e=e.parent)if(e.data.transition)return!0}function pa(e,t){return t.key===e.key&&t.tag===e.tag}var fa=function(e){return e.tag||Mt(e)},ga=function(e){return"show"===e.name},ma={name:"transition",props:la,abstract:!0,render:function(e){var t=this,i=this.$slots.default;if(i&&(i=i.filter(fa),i.length)){0;var n=this.mode;0;var s=i[0];if(da(this.$vnode))return s;var r=ha(s);if(!r)return s;if(this._leaving)return ua(e,s);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:o(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var l=(r.data||(r.data={})).transition=ca(this),h=this._vnode,c=ha(h);if(r.data.directives&&r.data.directives.some(ga)&&(r.data.show=!0),c&&c.data&&!pa(r,c)&&!Mt(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var u=c.data.transition=L({},l);if("out-in"===n)return this._leaving=!0,_t(u,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),ua(e,s);if("in-out"===n){if(Mt(r))return h;var d,p=function(){d()};_t(l,"afterEnter",p),_t(l,"enterCancelled",p),_t(u,"delayLeave",(function(e){d=e}))}}return s}}},ba=L({tag:String,moveClass:String},la);delete ba.mode;var ya={props:ba,beforeMount:function(){var e=this,t=this._update;this._update=function(i,n){var s=Li(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,s(),t.call(e,i,n)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],a=ca(this),o=0;o<s.length;o++){var l=s[o];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))r.push(l),i[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(n){for(var h=[],c=[],u=0;u<n.length;u++){var d=n[u];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),i[d.key]?h.push(d):c.push(d)}this.kept=e(t,null,h),this.removed=c}return e(t,null,r)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(va),e.forEach(wa),e.forEach(Sa),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var i=e.elm,n=i.style;Ar(i,t),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(Pr,i._moveCb=function e(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(Pr,e),i._moveCb=null,Ir(i,t))})}})))},methods:{hasMove:function(e,t){if(!xr)return!1;if(this._hasMove)return this._hasMove;var i=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){kr(i,e)})),_r(i,t),i.style.display="none",this.$el.appendChild(i);var n=Vr(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function va(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function wa(e){e.data.newPos=e.elm.getBoundingClientRect()}function Sa(e){var t=e.data.pos,i=e.data.newPos,n=t.left-i.left,s=t.top-i.top;if(n||s){e.data.moved=!0;var r=e.elm.style;r.transform=r.WebkitTransform="translate("+n+"px,"+s+"px)",r.transitionDuration="0s"}}var _a={Transition:ma,TransitionGroup:ya};Tn.config.mustUseProp=Gn,Tn.config.isReservedTag=as,Tn.config.isReservedAttr=Vn,Tn.config.getTagNamespace=os,Tn.config.isUnknownElement=hs,L(Tn.options.directives,oa),L(Tn.options.components,_a),Tn.prototype.__patch__=J?Jr:F,Tn.prototype.$mount=function(e,t){return e=e&&J?us(e):void 0,Mi(this,e,t)},J&&setTimeout((function(){W.devtools&&he&&he.emit("init",Tn)}),0),t["a"]=Tn}).call(this,i("c8ba"))},"2b19":function(e,t,i){var n=i("23e7"),s=i("129f");n({target:"Object",stat:!0},{is:s})},"2ca0":function(e,t,i){"use strict";var n=i("23e7"),s=i("06cf").f,r=i("50c4"),a=i("577e"),o=i("5a34"),l=i("1d80"),h=i("ab13"),c=i("c430"),u="".startsWith,d=Math.min,p=h("startsWith"),f=!c&&!p&&!!function(){var e=s(String.prototype,"startsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!f&&!p},{startsWith:function(e){var t=a(l(this));o(e);var i=r(d(arguments.length>1?arguments[1]:void 0,t.length)),n=a(e);return u?u.call(t,n,i):t.slice(i,i+n.length)===n}})},"2cf4":function(e,t,i){var n,s,r,a,o=i("da84"),l=i("d039"),h=i("0366"),c=i("1be4"),u=i("cc12"),d=i("1cdc"),p=i("605d"),f=o.setImmediate,g=o.clearImmediate,m=o.process,b=o.MessageChannel,y=o.Dispatch,v=0,w={},S="onreadystatechange";try{n=o.location}catch(x){}var _=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},k=function(e){return function(){_(e)}},T=function(e){_(e.data)},B=function(e){o.postMessage(String(e),n.protocol+"//"+n.host)};f&&g||(f=function(e){var t=[],i=arguments.length,n=1;while(i>n)t.push(arguments[n++]);return w[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},s(v),v},g=function(e){delete w[e]},p?s=function(e){m.nextTick(k(e))}:y&&y.now?s=function(e){y.now(k(e))}:b&&!d?(r=new b,a=r.port2,r.port1.onmessage=T,s=h(a.postMessage,a,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&n&&"file:"!==n.protocol&&!l(B)?(s=B,o.addEventListener("message",T,!1)):s=S in u("script")?function(e){c.appendChild(u("script"))[S]=function(){c.removeChild(this),_(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:f,clear:g}},"2d00":function(e,t,i){var n,s,r=i("da84"),a=i("342f"),o=r.process,l=r.Deno,h=o&&o.versions||l&&l.version,c=h&&h.v8;c?(n=c.split("."),s=n[0]<4?1:n[0]+n[1]):a&&(n=a.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/),n&&(s=n[1]))),e.exports=s&&+s},"2f62":function(e,t,i){"use strict";(function(e){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function i(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:n});else{var i=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,i.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var n="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},s=n.__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(e){s&&(e._devtoolHook=s,s.emit("vuex:init",e),s.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){s.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){s.emit("vuex:action",e,t)}),{prepend:!0}))}function a(e,t){return e.filter(t)[0]}function o(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var i=a(t,(function(t){return t.original===e}));if(i)return i.copy;var n=Array.isArray(e)?[]:{};return t.push({original:e,copy:n}),Object.keys(e).forEach((function(i){n[i]=o(e[i],t)})),n}function l(e,t){Object.keys(e).forEach((function(i){return t(e[i],i)}))}function h(e){return null!==e&&"object"===typeof e}function c(e){return e&&"function"===typeof e.then}function u(e,t){return function(){return e(t)}}var d=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=("function"===typeof i?i():i)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},d.prototype.addChild=function(e,t){this._children[e]=t},d.prototype.removeChild=function(e){delete this._children[e]},d.prototype.getChild=function(e){return this._children[e]},d.prototype.hasChild=function(e){return e in this._children},d.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},d.prototype.forEachChild=function(e){l(this._children,e)},d.prototype.forEachGetter=function(e){this._rawModule.getters&&l(this._rawModule.getters,e)},d.prototype.forEachAction=function(e){this._rawModule.actions&&l(this._rawModule.actions,e)},d.prototype.forEachMutation=function(e){this._rawModule.mutations&&l(this._rawModule.mutations,e)},Object.defineProperties(d.prototype,p);var f=function(e){this.register([],e,!1)};function g(e,t,i){if(t.update(i),i.modules)for(var n in i.modules){if(!t.getChild(n))return void 0;g(e.concat(n),t.getChild(n),i.modules[n])}}f.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},f.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,i){return t=t.getChild(i),e+(t.namespaced?i+"/":"")}),"")},f.prototype.update=function(e){g([],this.root,e)},f.prototype.register=function(e,t,i){var n=this;void 0===i&&(i=!0);var s=new d(t,i);if(0===e.length)this.root=s;else{var r=this.get(e.slice(0,-1));r.addChild(e[e.length-1],s)}t.modules&&l(t.modules,(function(t,s){n.register(e.concat(s),t,i)}))},f.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],n=t.getChild(i);n&&n.runtime&&t.removeChild(i)},f.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return!!t&&t.hasChild(i)};var m;var b=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&L(window.Vue);var i=e.plugins;void 0===i&&(i=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var s=this,a=this,o=a.dispatch,l=a.commit;this.dispatch=function(e,t){return o.call(s,e,t)},this.commit=function(e,t,i){return l.call(s,e,t,i)},this.strict=n;var h=this._modules.root.state;_(this,h,[],this._modules.root),S(this,h),i.forEach((function(e){return e(t)}));var c=void 0!==e.devtools?e.devtools:m.config.devtools;c&&r(this)},y={state:{configurable:!0}};function v(e,t,i){return t.indexOf(e)<0&&(i&&i.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function w(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var i=e.state;_(e,i,[],e._modules.root,!0),S(e,i,t)}function S(e,t,i){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,r={};l(s,(function(t,i){r[i]=u(t,e),Object.defineProperty(e.getters,i,{get:function(){return e._vm[i]},enumerable:!0})}));var a=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:r}),m.config.silent=a,e.strict&&C(e),n&&(i&&e._withCommit((function(){n._data.$$state=null})),m.nextTick((function(){return n.$destroy()})))}function _(e,t,i,n,s){var r=!i.length,a=e._modules.getNamespace(i);if(n.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=n),!r&&!s){var o=E(t,i.slice(0,-1)),l=i[i.length-1];e._withCommit((function(){m.set(o,l,n.state)}))}var h=n.context=k(e,a,i);n.forEachMutation((function(t,i){var n=a+i;B(e,n,t,h)})),n.forEachAction((function(t,i){var n=t.root?i:a+i,s=t.handler||t;x(e,n,s,h)})),n.forEachGetter((function(t,i){var n=a+i;N(e,n,t,h)})),n.forEachChild((function(n,r){_(e,t,i.concat(r),n,s)}))}function k(e,t,i){var n=""===t,s={dispatch:n?e.dispatch:function(i,n,s){var r=P(i,n,s),a=r.payload,o=r.options,l=r.type;return o&&o.root||(l=t+l),e.dispatch(l,a)},commit:n?e.commit:function(i,n,s){var r=P(i,n,s),a=r.payload,o=r.options,l=r.type;o&&o.root||(l=t+l),e.commit(l,a,o)}};return Object.defineProperties(s,{getters:{get:n?function(){return e.getters}:function(){return T(e,t)}},state:{get:function(){return E(e.state,i)}}}),s}function T(e,t){if(!e._makeLocalGettersCache[t]){var i={},n=t.length;Object.keys(e.getters).forEach((function(s){if(s.slice(0,n)===t){var r=s.slice(n);Object.defineProperty(i,r,{get:function(){return e.getters[s]},enumerable:!0})}})),e._makeLocalGettersCache[t]=i}return e._makeLocalGettersCache[t]}function B(e,t,i,n){var s=e._mutations[t]||(e._mutations[t]=[]);s.push((function(t){i.call(e,n.state,t)}))}function x(e,t,i,n){var s=e._actions[t]||(e._actions[t]=[]);s.push((function(t){var s=i.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return c(s)||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}function N(e,t,i,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return i(n.state,n.getters,e.state,e.getters)})}function C(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function E(e,t){return t.reduce((function(e,t){return e[t]}),e)}function P(e,t,i){return h(e)&&e.type&&(i=t,t=e,e=e.type),{type:e,payload:t,options:i}}function L(e){m&&e===m||(m=e,i(m))}y.state.get=function(){return this._vm._data.$$state},y.state.set=function(e){0},b.prototype.commit=function(e,t,i){var n=this,s=P(e,t,i),r=s.type,a=s.payload,o=(s.options,{type:r,payload:a}),l=this._mutations[r];l&&(this._withCommit((function(){l.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(o,n.state)})))},b.prototype.dispatch=function(e,t){var i=this,n=P(e,t),s=n.type,r=n.payload,a={type:s,payload:r},o=this._actions[s];if(o){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,i.state)}))}catch(h){0}var l=o.length>1?Promise.all(o.map((function(e){return e(r)}))):o[0](r);return new Promise((function(e,t){l.then((function(t){try{i._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,i.state)}))}catch(h){0}e(t)}),(function(e){try{i._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,i.state,e)}))}catch(h){0}t(e)}))}))}},b.prototype.subscribe=function(e,t){return v(e,this._subscribers,t)},b.prototype.subscribeAction=function(e,t){var i="function"===typeof e?{before:e}:e;return v(i,this._actionSubscribers,t)},b.prototype.watch=function(e,t,i){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,i)},b.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},b.prototype.registerModule=function(e,t,i){void 0===i&&(i={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),_(this,this.state,e,this._modules.get(e),i.preserveState),S(this,this.state)},b.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var i=E(t.state,e.slice(0,-1));m.delete(i,e[e.length-1])})),w(this)},b.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},b.prototype.hotUpdate=function(e){this._modules.update(e),w(this,!0)},b.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(b.prototype,y);var O=V((function(e,t){var i={};return D(t).forEach((function(t){var n=t.key,s=t.val;i[n]=function(){var t=this.$store.state,i=this.$store.getters;if(e){var n=H(this.$store,"mapState",e);if(!n)return;t=n.context.state,i=n.context.getters}return"function"===typeof s?s.call(this,t,i):t[s]},i[n].vuex=!0})),i})),F=V((function(e,t){var i={};return D(t).forEach((function(t){var n=t.key,s=t.val;i[n]=function(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];var n=this.$store.commit;if(e){var r=H(this.$store,"mapMutations",e);if(!r)return;n=r.context.commit}return"function"===typeof s?s.apply(this,[n].concat(t)):n.apply(this.$store,[s].concat(t))}})),i})),M=V((function(e,t){var i={};return D(t).forEach((function(t){var n=t.key,s=t.val;s=e+s,i[n]=function(){if(!e||H(this.$store,"mapGetters",e))return this.$store.getters[s]},i[n].vuex=!0})),i})),A=V((function(e,t){var i={};return D(t).forEach((function(t){var n=t.key,s=t.val;i[n]=function(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];var n=this.$store.dispatch;if(e){var r=H(this.$store,"mapActions",e);if(!r)return;n=r.context.dispatch}return"function"===typeof s?s.apply(this,[n].concat(t)):n.apply(this.$store,[s].concat(t))}})),i})),I=function(e){return{mapState:O.bind(null,e),mapGetters:M.bind(null,e),mapMutations:F.bind(null,e),mapActions:A.bind(null,e)}};function D(e){return R(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function R(e){return Array.isArray(e)||h(e)}function V(e){return function(t,i){return"string"!==typeof t?(i=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,i)}}function H(e,t,i){var n=e._modulesNamespaceMap[i];return n}function G(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var i=e.filter;void 0===i&&(i=function(e,t,i){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var s=e.mutationTransformer;void 0===s&&(s=function(e){return e});var r=e.actionFilter;void 0===r&&(r=function(e,t){return!0});var a=e.actionTransformer;void 0===a&&(a=function(e){return e});var l=e.logMutations;void 0===l&&(l=!0);var h=e.logActions;void 0===h&&(h=!0);var c=e.logger;return void 0===c&&(c=console),function(e){var u=o(e.state);"undefined"!==typeof c&&(l&&e.subscribe((function(e,r){var a=o(r);if(i(e,u,a)){var l=$(),h=s(e),d="mutation "+e.type+l;W(c,d,t),c.log("%c prev state","color: #9E9E9E; font-weight: bold",n(u)),c.log("%c mutation","color: #03A9F4; font-weight: bold",h),c.log("%c next state","color: #4CAF50; font-weight: bold",n(a)),j(c)}u=a})),h&&e.subscribeAction((function(e,i){if(r(e,i)){var n=$(),s=a(e),o="action "+e.type+n;W(c,o,t),c.log("%c action","color: #03A9F4; font-weight: bold",s),j(c)}})))}}function W(e,t,i){var n=i?e.groupCollapsed:e.group;try{n.call(e,t)}catch(s){e.log(t)}}function j(e){try{e.groupEnd()}catch(t){e.log(" log end ")}}function $(){var e=new Date;return" @ "+U(e.getHours(),2)+":"+U(e.getMinutes(),2)+":"+U(e.getSeconds(),2)+"."+U(e.getMilliseconds(),3)}function z(e,t){return new Array(t+1).join(e)}function U(e,t){return z("0",t-e.toString().length)+e}var X={Store:b,install:L,version:"3.6.2",mapState:O,mapMutations:F,mapGetters:M,mapActions:A,createNamespacedHelpers:I,createLogger:G};t["a"]=X}).call(this,i("c8ba"))},"2fa4":function(e,t,i){"use strict";i("20f6");var n=i("80d2");t["a"]=Object(n["h"])("spacer","div","v-spacer")},3206:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ade3"),s=(i("99af"),i("2b0e")),r=i("d9bd");function a(e,t){return function(){return Object(r["c"])("The ".concat(e," component must be used inside a ").concat(t))}}function o(e,t,i){var r=t&&i?{register:a(t,i),unregister:a(t,i)}:null;return s["a"].extend({name:"registrable-inject",inject:Object(n["a"])({},e,{default:r})})}},3280:function(e,t,i){"use strict";var n=i("ebb5"),s=i("e58c"),r=n.aTypedArray,a=n.exportTypedArrayMethod;a("lastIndexOf",(function(e){return s.apply(r(this),arguments)}))},3408:function(e,t,i){},3410:function(e,t,i){var n=i("23e7"),s=i("d039"),r=i("7b0b"),a=i("e163"),o=i("e177"),l=s((function(){a(1)}));n({target:"Object",stat:!0,forced:l,sham:!o},{getPrototypeOf:function(e){return a(r(e))}})},"342f":function(e,t,i){var n=i("d066");e.exports=n("navigator","userAgent")||""},"34c3":function(e,t,i){"use strict";i("498a");var n=i("2b0e");t["a"]=n["a"].extend({name:"v-list-item-icon",functional:!0,render:function(e,t){var i=t.data,n=t.children;return i.staticClass="v-list-item__icon ".concat(i.staticClass||"").trim(),e("div",i,n)}})},"35a1":function(e,t,i){var n=i("f5df"),s=i("3f8c"),r=i("b622"),a=r("iterator");e.exports=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||s[n(e)]}},"36a7":function(e,t,i){},"37c6":function(e,t,i){"use strict";var n=i("8e36");t["a"]=n["a"]},"37e8":function(e,t,i){var n=i("83ab"),s=i("9bf2"),r=i("825a"),a=i("df75");e.exports=n?Object.defineProperties:function(e,t){r(e);var i,n=a(t),o=n.length,l=0;while(o>l)s.f(e,i=n[l++],t[i]);return e}},3835:function(e,t,i){"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return o}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function s(e,t){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,r=[],a=!0,o=!1;try{for(i=i.call(e);!(a=(n=i.next()).done);a=!0)if(r.push(n.value),t&&r.length===t)break}catch(l){o=!0,s=l}finally{try{a||null==i["return"]||i["return"]()}finally{if(o)throw s}}return r}}var r=i("06c5");function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){return n(e)||s(e,t)||Object(r["a"])(e,t)||a()}},"38cb":function(e,t,i){"use strict";var n=i("53ca"),s=(i("a9e3"),i("fb6a"),i("a9ad")),r=i("7560"),a=i("3206"),o=i("80d2"),l=i("d9bd"),h=i("58df"),c=Object(h["a"])(s["a"],Object(a["a"])("form"),r["a"]);t["a"]=c.extend({name:"validatable",props:{disabled:Boolean,error:Boolean,errorCount:{type:[Number,String],default:1},errorMessages:{type:[String,Array],default:function(){return[]}},messages:{type:[String,Array],default:function(){return[]}},readonly:Boolean,rules:{type:Array,default:function(){return[]}},success:Boolean,successMessages:{type:[String,Array],default:function(){return[]}},validateOnBlur:Boolean,value:{required:!1}},data:function(){return{errorBucket:[],hasColor:!1,hasFocused:!1,hasInput:!1,isFocused:!1,isResetting:!1,lazyValue:this.value,valid:!1}},computed:{computedColor:function(){if(!this.isDisabled)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},hasError:function(){return this.internalErrorMessages.length>0||this.errorBucket.length>0||this.error},hasSuccess:function(){return this.internalSuccessMessages.length>0||this.success},externalError:function(){return this.internalErrorMessages.length>0||this.error},hasMessages:function(){return this.validationTarget.length>0},hasState:function(){return!this.isDisabled&&(this.hasSuccess||this.shouldValidate&&this.hasError)},internalErrorMessages:function(){return this.genInternalMessages(this.errorMessages)},internalMessages:function(){return this.genInternalMessages(this.messages)},internalSuccessMessages:function(){return this.genInternalMessages(this.successMessages)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("input",e)}},isDisabled:function(){return this.disabled||!!this.form&&this.form.disabled},isInteractive:function(){return!this.isDisabled&&!this.isReadonly},isReadonly:function(){return this.readonly||!!this.form&&this.form.readonly},shouldValidate:function(){return!!this.externalError||!this.isResetting&&(this.validateOnBlur?this.hasFocused&&!this.isFocused:this.hasInput||this.hasFocused)},validations:function(){return this.validationTarget.slice(0,Number(this.errorCount))},validationState:function(){if(!this.isDisabled)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":this.hasColor?this.computedColor:void 0},validationTarget:function(){return this.internalErrorMessages.length>0?this.internalErrorMessages:this.successMessages&&this.successMessages.length>0?this.internalSuccessMessages:this.messages&&this.messages.length>0?this.internalMessages:this.shouldValidate?this.errorBucket:[]}},watch:{rules:{handler:function(e,t){Object(o["i"])(e,t)||this.validate()},deep:!0},internalValue:function(){this.hasInput=!0,this.validateOnBlur||this.$nextTick(this.validate)},isFocused:function(e){e||this.isDisabled||(this.hasFocused=!0,this.validateOnBlur&&this.$nextTick(this.validate))},isResetting:function(){var e=this;setTimeout((function(){e.hasInput=!1,e.hasFocused=!1,e.isResetting=!1,e.validate()}),0)},hasError:function(e){this.shouldValidate&&this.$emit("update:error",e)},value:function(e){this.lazyValue=e}},beforeMount:function(){this.validate()},created:function(){this.form&&this.form.register(this)},beforeDestroy:function(){this.form&&this.form.unregister(this)},methods:{genInternalMessages:function(e){return e?Array.isArray(e)?e:[e]:[]},reset:function(){this.isResetting=!0,this.internalValue=Array.isArray(this.internalValue)?[]:null},resetValidation:function(){this.isResetting=!0},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,i=[];t=t||this.internalValue,e&&(this.hasInput=this.hasFocused=!0);for(var s=0;s<this.rules.length;s++){var r=this.rules[s],a="function"===typeof r?r(t):r;!1===a||"string"===typeof a?i.push(a||""):"boolean"!==typeof a&&Object(l["b"])("Rules should return a string or boolean, received '".concat(Object(n["a"])(a),"' instead"),this)}return this.errorBucket=i,this.valid=0===i.length,this.valid}}})},"38cf":function(e,t,i){var n=i("23e7"),s=i("1148");n({target:"String",proto:!0},{repeat:s})},"3a66":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fe6c"),s=i("58df");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(s["a"])(Object(n["b"])(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty:function(){return e}},watch:{app:function(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty:function(e,t){this.$vuetify.application.unregister(this._uid,t)}},activated:function(){this.callUpdate()},created:function(){for(var e=0,i=t.length;e<i;e++)this.$watch(t[e],this.callUpdate);this.callUpdate()},mounted:function(){this.callUpdate()},deactivated:function(){this.removeApplication()},destroyed:function(){this.removeApplication()},methods:{callUpdate:function(){this.app&&this.$vuetify.application.register(this._uid,this.applicationProperty,this.updateApplication())},removeApplication:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.app)&&this.$vuetify.application.unregister(this._uid,this.applicationProperty)},updateApplication:function(){return 0}}})}},"3a7b":function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").findIndex,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("findIndex",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"3ad0":function(e,t,i){},"3bbe":function(e,t,i){var n=i("861d");e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},"3c5d":function(e,t,i){"use strict";var n=i("ebb5"),s=i("50c4"),r=i("182d"),a=i("7b0b"),o=i("d039"),l=n.aTypedArray,h=n.exportTypedArrayMethod,c=o((function(){new Int8Array(1).set({})}));h("set",(function(e){l(this);var t=r(arguments.length>1?arguments[1]:void 0,1),i=this.length,n=a(e),o=s(n.length),h=0;if(o+t>i)throw RangeError("Wrong length");while(h<o)this[t+h]=n[h++]}),c)},"3c93":function(e,t,i){},"3ca3":function(e,t,i){"use strict";var n=i("6547").charAt,s=i("577e"),r=i("69f3"),a=i("7dd0"),o="String Iterator",l=r.set,h=r.getterFor(o);a(String,"String",(function(e){l(this,{type:o,string:s(e),index:0})}),(function(){var e,t=h(this),i=t.string,s=t.index;return s>=i.length?{value:void 0,done:!0}:(e=n(i,s),t.index+=e.length,{value:e,done:!1})}))},"3ea3":function(e,t,i){var n=i("23e7"),s=i("f748"),r=Math.abs,a=Math.pow;n({target:"Math",stat:!0},{cbrt:function(e){return s(e=+e)*a(r(e),1/3)}})},"3f8c":function(e,t){e.exports={}},"3fcc":function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").map,r=i("b6b7"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("map",(function(e){return s(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(r(e))(t)}))}))},"408a":function(e,t){var i=1..valueOf;e.exports=function(e){return i.call(e)}},"40dc":function(e,t,i){"use strict";var n=i("5530"),s=(i("c7cd"),i("a9e3"),i("8b0d"),i("71d9")),r=i("53ca");function a(e,t){var i=t.modifiers||{},n=i.self,s=void 0!==n&&n,a=t.value,o="object"===Object(r["a"])(a)&&a.options||{passive:!0},l="function"===typeof a||"handleEvent"in a?a:a.handler,h=s?e:t.arg?document.querySelector(t.arg):window;h&&(h.addEventListener("scroll",l,o),e._onScroll={handler:l,options:o,target:s?void 0:h})}function o(e){if(e._onScroll){var t=e._onScroll,i=t.handler,n=t.options,s=t.target,r=void 0===s?e:s;r.removeEventListener("scroll",i,n),delete e._onScroll}}var l={inserted:a,unbind:o},h=l,c=i("3a66"),u=i("d9bd"),d=i("2b0e"),p=d["a"].extend({name:"scrollable",directives:{Scroll:l},props:{scrollTarget:String,scrollThreshold:[String,Number]},data:function(){return{currentScroll:0,currentThreshold:0,isActive:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}},computed:{canScroll:function(){return"undefined"!==typeof window},computedScrollThreshold:function(){return this.scrollThreshold?Number(this.scrollThreshold):300}},watch:{isScrollingUp:function(){this.savedScroll=this.savedScroll||this.currentScroll},isActive:function(){this.savedScroll=0}},mounted:function(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget),this.target||Object(u["c"])("Unable to locate element with identifier ".concat(this.scrollTarget),this))},methods:{onScroll:function(){var e=this;this.canScroll&&(this.previousScroll=this.currentScroll,this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.currentThreshold=Math.abs(this.currentScroll-this.computedScrollThreshold),this.$nextTick((function(){Math.abs(e.currentScroll-e.savedScroll)>e.computedScrollThreshold&&e.thresholdMet()})))},thresholdMet:function(){}}}),f=i("d10f"),g=i("f2e7"),m=i("80d2"),b=i("58df"),y=Object(b["a"])(s["a"],p,f["a"],g["a"],Object(c["a"])("top",["clippedLeft","clippedRight","computedHeight","invertedScroll","isExtended","isProminent","value"]));t["a"]=y.extend({name:"v-app-bar",directives:{Scroll:h},provide:function(){return{VAppBar:this}},props:{clippedLeft:Boolean,clippedRight:Boolean,collapseOnScroll:Boolean,elevateOnScroll:Boolean,fadeImgOnScroll:Boolean,hideOnScroll:Boolean,invertedScroll:Boolean,scrollOffScreen:Boolean,shrinkOnScroll:Boolean,value:{type:Boolean,default:!0}},data:function(){return{isActive:this.value}},computed:{applicationProperty:function(){return this.bottom?"bottom":"top"},canScroll:function(){return p.options.computed.canScroll.call(this)&&(this.invertedScroll||this.elevateOnScroll||this.hideOnScroll||this.collapseOnScroll||this.isBooted||!this.value)},classes:function(){return Object(n["a"])(Object(n["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-toolbar--collapse":this.collapse||this.collapseOnScroll,"v-app-bar":!0,"v-app-bar--clipped":this.clippedLeft||this.clippedRight,"v-app-bar--fade-img-on-scroll":this.fadeImgOnScroll,"v-app-bar--elevate-on-scroll":this.elevateOnScroll,"v-app-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-app-bar--hide-shadow":this.hideShadow,"v-app-bar--is-scrolled":this.currentScroll>0,"v-app-bar--shrink-on-scroll":this.shrinkOnScroll})},scrollRatio:function(){var e=this.computedScrollThreshold;return Math.max((e-this.currentScroll)/e,0)},computedContentHeight:function(){if(!this.shrinkOnScroll)return s["a"].options.computed.computedContentHeight.call(this);var e=this.dense?48:56,t=this.computedOriginalHeight;return e+(t-e)*this.scrollRatio},computedFontSize:function(){if(this.isProminent){var e=1.25,t=1.5;return e+(t-e)*this.scrollRatio}},computedLeft:function(){return!this.app||this.clippedLeft?0:this.$vuetify.application.left},computedMarginTop:function(){return this.app?this.$vuetify.application.bar:0},computedOpacity:function(){if(this.fadeImgOnScroll)return this.scrollRatio},computedOriginalHeight:function(){var e=s["a"].options.computed.computedContentHeight.call(this);return this.isExtended&&(e+=parseInt(this.extensionHeight)),e},computedRight:function(){return!this.app||this.clippedRight?0:this.$vuetify.application.right},computedScrollThreshold:function(){return this.scrollThreshold?Number(this.scrollThreshold):this.computedOriginalHeight-(this.dense?48:56)},computedTransform:function(){if(!this.canScroll||this.elevateOnScroll&&0===this.currentScroll&&this.isActive)return 0;if(this.isActive)return 0;var e=this.scrollOffScreen?this.computedHeight:this.computedContentHeight;return this.bottom?e:-e},hideShadow:function(){return this.elevateOnScroll&&this.isExtended?this.currentScroll<this.computedScrollThreshold:this.elevateOnScroll?0===this.currentScroll||this.computedTransform<0:(!this.isExtended||this.scrollOffScreen)&&0!==this.computedTransform},isCollapsed:function(){return this.collapseOnScroll?this.currentScroll>0:s["a"].options.computed.isCollapsed.call(this)},isProminent:function(){return s["a"].options.computed.isProminent.call(this)||this.shrinkOnScroll},styles:function(){return Object(n["a"])(Object(n["a"])({},s["a"].options.computed.styles.call(this)),{},{fontSize:Object(m["f"])(this.computedFontSize,"rem"),marginTop:Object(m["f"])(this.computedMarginTop),transform:"translateY(".concat(Object(m["f"])(this.computedTransform),")"),left:Object(m["f"])(this.computedLeft),right:Object(m["f"])(this.computedRight)})}},watch:{canScroll:"onScroll",computedTransform:function(){this.canScroll&&(this.clippedLeft||this.clippedRight)&&this.callUpdate()},invertedScroll:function(e){this.isActive=!e||0!==this.currentScroll}},created:function(){this.invertedScroll&&(this.isActive=!1)},methods:{genBackground:function(){var e=s["a"].options.methods.genBackground.call(this);return e.data=this._b(e.data||{},e.tag,{style:{opacity:this.computedOpacity}}),e},updateApplication:function(){return this.invertedScroll?0:this.computedHeight+this.computedTransform},thresholdMet:function(){this.invertedScroll?this.isActive=this.currentScroll>this.computedScrollThreshold:(this.hideOnScroll&&(this.isActive=this.isScrollingUp||this.currentScroll<this.computedScrollThreshold),this.currentThreshold<this.computedScrollThreshold||(this.savedScroll=this.currentScroll))}},render:function(e){var t=s["a"].options.render.call(this,e);return t.data=t.data||{},this.canScroll&&(t.data.directives=t.data.directives||[],t.data.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),t}})},"428f":function(e,t,i){var n=i("da84");e.exports=n},4362:function(e,t,i){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,n="/";t.cwd=function(){return n},t.chdir=function(t){e||(e=i("df7c")),n=e.resolve(t,n)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,i){var n=i("d039"),s=i("c6b6"),r="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?r.call(e,""):Object(e)}:Object},"44d2":function(e,t,i){var n=i("b622"),s=i("7c73"),r=i("9bf2"),a=n("unscopables"),o=Array.prototype;void 0==o[a]&&r.f(o,a,{configurable:!0,value:s(null)}),e.exports=function(e){o[a][e]=!0}},"44de":function(e,t,i){var n=i("da84");e.exports=function(e,t){var i=n.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}},"44e7":function(e,t,i){var n=i("861d"),s=i("c6b6"),r=i("b622"),a=r("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==s(e))}},"466d":function(e,t,i){"use strict";var n=i("d784"),s=i("825a"),r=i("50c4"),a=i("577e"),o=i("1d80"),l=i("8aa5"),h=i("14c3");n("match",(function(e,t,i){return[function(t){var i=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](a(i))},function(e){var n=s(this),o=a(e),c=i(t,n,o);if(c.done)return c.value;if(!n.global)return h(n,o);var u=n.unicode;n.lastIndex=0;var d,p=[],f=0;while(null!==(d=h(n,o))){var g=a(d[0]);p[f]=g,""===g&&(n.lastIndex=l(o,r(n.lastIndex),u)),f++}return 0===f?null:p}]}))},4804:function(e,t,i){},4840:function(e,t,i){var n=i("825a"),s=i("1c0b"),r=i("b622"),a=r("species");e.exports=function(e,t){var i,r=n(e).constructor;return void 0===r||void 0==(i=n(r)[a])?t:s(i)}},"485a":function(e,t,i){var n=i("861d");e.exports=function(e,t){var i,s;if("string"===t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;if("function"==typeof(i=e.valueOf)&&!n(s=i.call(e)))return s;if("string"!==t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},4930:function(e,t,i){var n=i("2d00"),s=i("d039");e.exports=!!Object.getOwnPropertySymbols&&!s((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},"498a":function(e,t,i){"use strict";var n=i("23e7"),s=i("58a8").trim,r=i("c8d2");n({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},"4ae1":function(e,t,i){var n=i("23e7"),s=i("d066"),r=i("1c0b"),a=i("825a"),o=i("861d"),l=i("7c73"),h=i("0538"),c=i("d039"),u=s("Reflect","construct"),d=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),p=!c((function(){u((function(){}))})),f=d||p;n({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(e,t){r(e),a(t);var i=arguments.length<3?e:r(arguments[2]);if(p&&!d)return u(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(h.apply(e,n))}var s=i.prototype,c=l(o(s)?s:Object.prototype),f=Function.apply.call(e,c,t);return o(f)?f:c}})},"4b85":function(e,t,i){},"4d63":function(e,t,i){var n=i("83ab"),s=i("da84"),r=i("94ca"),a=i("7156"),o=i("9112"),l=i("9bf2").f,h=i("241c").f,c=i("44e7"),u=i("577e"),d=i("ad6d"),p=i("9f7f"),f=i("6eeb"),g=i("d039"),m=i("5135"),b=i("69f3").enforce,y=i("2626"),v=i("b622"),w=i("fce3"),S=i("107c"),_=v("match"),k=s.RegExp,T=k.prototype,B=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,N=/a/g,C=new k(x)!==x,E=p.UNSUPPORTED_Y,P=n&&(!C||E||w||S||g((function(){return N[_]=!1,k(x)!=x||k(N)==N||"/a/i"!=k(x,"i")}))),L=function(e){for(var t,i=e.length,n=0,s="",r=!1;n<=i;n++)t=e.charAt(n),"\\"!==t?r||"."!==t?("["===t?r=!0:"]"===t&&(r=!1),s+=t):s+="[\\s\\S]":s+=t+e.charAt(++n);return s},O=function(e){for(var t,i=e.length,n=0,s="",r=[],a={},o=!1,l=!1,h=0,c="";n<=i;n++){if(t=e.charAt(n),"\\"===t)t+=e.charAt(++n);else if("]"===t)o=!1;else if(!o)switch(!0){case"["===t:o=!0;break;case"("===t:B.test(e.slice(n+1))&&(n+=2,l=!0),s+=t,h++;continue;case">"===t&&l:if(""===c||m(a,c))throw new SyntaxError("Invalid capture group name");a[c]=!0,r.push([c,h]),l=!1,c="";continue}l?c+=t:s+=t}return[s,r]};if(r("RegExp",P)){for(var F=function(e,t){var i,n,s,r,l,h,p=this instanceof F,f=c(e),g=void 0===t,m=[],y=e;if(!p&&f&&g&&e.constructor===F)return e;if((f||e instanceof F)&&(e=e.source,g&&(t="flags"in y?y.flags:d.call(y))),e=void 0===e?"":u(e),t=void 0===t?"":u(t),y=e,w&&"dotAll"in x&&(n=!!t&&t.indexOf("s")>-1,n&&(t=t.replace(/s/g,""))),i=t,E&&"sticky"in x&&(s=!!t&&t.indexOf("y")>-1,s&&(t=t.replace(/y/g,""))),S&&(r=O(e),e=r[0],m=r[1]),l=a(k(e,t),p?this:T,F),(n||s||m.length)&&(h=b(l),n&&(h.dotAll=!0,h.raw=F(L(e),i)),s&&(h.sticky=!0),m.length&&(h.groups=m)),e!==y)try{o(l,"source",""===y?"(?:)":y)}catch(v){}return l},M=function(e){e in F||l(F,e,{configurable:!0,get:function(){return k[e]},set:function(t){k[e]=t}})},A=h(k),I=0;A.length>I;)M(A[I++]);T.constructor=F,F.prototype=T,f(s,"RegExp",F)}y("RegExp")},"4d64":function(e,t,i){var n=i("fc6a"),s=i("50c4"),r=i("23cb"),a=function(e){return function(t,i,a){var o,l=n(t),h=s(l.length),c=r(a,h);if(e&&i!=i){while(h>c)if(o=l[c++],o!=o)return!0}else for(;h>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(e,t,i){"use strict";var n=i("23e7"),s=i("b727").filter,r=i("1dde"),a=r("filter");n({target:"Array",proto:!0,forced:!a},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,i){"use strict";var n=i("0366"),s=i("7b0b"),r=i("9bdd"),a=i("e95a"),o=i("50c4"),l=i("8418"),h=i("9a1f"),c=i("35a1");e.exports=function(e){var t,i,u,d,p,f,g=s(e),m="function"==typeof this?this:Array,b=arguments.length,y=b>1?arguments[1]:void 0,v=void 0!==y,w=c(g),S=0;if(v&&(y=n(y,b>2?arguments[2]:void 0,2)),void 0==w||m==Array&&a(w))for(t=o(g.length),i=new m(t);t>S;S++)f=v?y(g[S],S):g[S],l(i,S,f);else for(d=h(g,w),p=d.next,i=new m;!(u=p.call(d)).done;S++)f=v?r(d,y,[u.value,S],!0):u.value,l(i,S,f);return i.length=S,i}},"4e82":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("ade3"),s=i("3206");function r(e,t,i){return Object(s["a"])(e,t,i).extend({name:"groupable",props:{activeClass:{type:String,default:function(){if(this[e])return this[e].activeClass}},disabled:Boolean},data:function(){return{isActive:!1}},computed:{groupClasses:function(){return this.activeClass?Object(n["a"])({},this.activeClass,this.isActive):{}}},created:function(){this[e]&&this[e].register(this)},beforeDestroy:function(){this[e]&&this[e].unregister(this)},methods:{toggle:function(){this.$emit("change")}}})}r("itemGroup")},"4e827":function(e,t,i){"use strict";var n=i("23e7"),s=i("1c0b"),r=i("7b0b"),a=i("50c4"),o=i("577e"),l=i("d039"),h=i("addb"),c=i("a640"),u=i("04d1"),d=i("d998"),p=i("2d00"),f=i("512c"),g=[],m=g.sort,b=l((function(){g.sort(void 0)})),y=l((function(){g.sort(null)})),v=c("sort"),w=!l((function(){if(p)return p<70;if(!(u&&u>3)){if(d)return!0;if(f)return f<603;var e,t,i,n,s="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(n=0;n<47;n++)g.push({k:t+n,v:i})}for(g.sort((function(e,t){return t.v-e.v})),n=0;n<g.length;n++)t=g[n].k.charAt(0),s.charAt(s.length-1)!==t&&(s+=t);return"DGBEFHACIJK"!==s}})),S=b||!y||!v||!w,_=function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:o(t)>o(i)?1:-1}};n({target:"Array",proto:!0,forced:S},{sort:function(e){void 0!==e&&s(e);var t=r(this);if(w)return void 0===e?m.call(t):m.call(t,e);var i,n,o=[],l=a(t.length);for(n=0;n<l;n++)n in t&&o.push(t[n]);o=h(o,_(e)),i=o.length,n=0;while(n<i)t[n]=o[n++];while(n<l)delete t[n++];return t}})},"4ec9":function(e,t,i){"use strict";var n=i("6d61"),s=i("6566");e.exports=n("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},"4ff9":function(e,t,i){},"50c4":function(e,t,i){var n=i("a691"),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},"512c":function(e,t,i){var n=i("342f"),s=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!s&&+s[1]},5135:function(e,t,i){var n=i("7b0b"),s={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return s.call(n(e),t)}},5319:function(e,t,i){"use strict";var n=i("d784"),s=i("d039"),r=i("825a"),a=i("a691"),o=i("50c4"),l=i("577e"),h=i("1d80"),c=i("8aa5"),u=i("0cb2"),d=i("14c3"),p=i("b622"),f=p("replace"),g=Math.max,m=Math.min,b=function(e){return void 0===e?e:String(e)},y=function(){return"$0"==="a".replace(/./,"$0")}(),v=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),w=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,i){var n=v?"$":"$0";return[function(e,i){var n=h(this),s=void 0==e?void 0:e[f];return void 0!==s?s.call(e,n,i):t.call(l(n),e,i)},function(e,s){var h=r(this),p=l(e);if("string"===typeof s&&-1===s.indexOf(n)&&-1===s.indexOf("$<")){var f=i(t,h,p,s);if(f.done)return f.value}var y="function"===typeof s;y||(s=l(s));var v=h.global;if(v){var w=h.unicode;h.lastIndex=0}var S=[];while(1){var _=d(h,p);if(null===_)break;if(S.push(_),!v)break;var k=l(_[0]);""===k&&(h.lastIndex=c(p,o(h.lastIndex),w))}for(var T="",B=0,x=0;x<S.length;x++){_=S[x];for(var N=l(_[0]),C=g(m(a(_.index),p.length),0),E=[],P=1;P<_.length;P++)E.push(b(_[P]));var L=_.groups;if(y){var O=[N].concat(E,C,p);void 0!==L&&O.push(L);var F=l(s.apply(void 0,O))}else F=u(N,p,C,E,L,s);C>=B&&(T+=p.slice(B,C)+F,B=C+N.length)}return T+p.slice(B)}]}),!w||!y||v)},"53ca":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}},5530:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("b64b"),i("a4d3"),i("4de4"),i("e439"),i("159b"),i("dbb4");var n=i("ade3");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){Object(n["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}},"553a":function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("c7cd"),i("b5b6"),i("8dd9")),r=i("3a66"),a=i("d10f"),o=i("58df"),l=i("80d2");t["a"]=Object(o["a"])(s["a"],Object(r["a"])("footer",["height","inset"]),a["a"]).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tag:{type:String,default:"footer"}},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},classes:function(){return Object(n["a"])(Object(n["a"])({},s["a"].options.computed.classes.call(this)),{},{"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset})},computedBottom:function(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight:function(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned:function(){return Boolean(this.absolute||this.fixed||this.app)},styles:function(){var e=parseInt(this.height);return Object(n["a"])(Object(n["a"])({},s["a"].options.computed.styles.call(this)),{},{height:isNaN(e)?e:Object(l["f"])(e),left:Object(l["f"])(this.computedLeft),right:Object(l["f"])(this.computedRight),bottom:Object(l["f"])(this.computedBottom)})}},methods:{updateApplication:function(){var e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render:function(e){var t=this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles});return e(this.tag,t,this.$slots.default)}})},5607:function(e,t,i){"use strict";i("a4d3"),i("e01a"),i("d3b7"),i("25f0"),i("b0c0"),i("99af"),i("a9e3"),i("7435");var n=i("80d2"),s=Symbol("rippleStop"),r=80;function a(e,t){e.style.transform=t,e.style.webkitTransform=t}function o(e,t){e.style.opacity=t.toString()}function l(e){return"TouchEvent"===e.constructor.name}function h(e){return"KeyboardEvent"===e.constructor.name}var c=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=0,s=0;if(!h(e)){var r=t.getBoundingClientRect(),a=l(e)?e.touches[e.touches.length-1]:e;n=a.clientX-r.left,s=a.clientY-r.top}var o=0,c=.3;t._ripple&&t._ripple.circle?(c=.15,o=t.clientWidth/2,o=i.center?o:o+Math.sqrt(Math.pow(n-o,2)+Math.pow(s-o,2))/4):o=Math.sqrt(Math.pow(t.clientWidth,2)+Math.pow(t.clientHeight,2))/2;var u="".concat((t.clientWidth-2*o)/2,"px"),d="".concat((t.clientHeight-2*o)/2,"px"),p=i.center?u:"".concat(n-o,"px"),f=i.center?d:"".concat(s-o,"px");return{radius:o,scale:c,x:p,y:f,centerX:u,centerY:d}},u={show:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t._ripple&&t._ripple.enabled){var n=document.createElement("span"),s=document.createElement("span");n.appendChild(s),n.className="v-ripple__container",i.class&&(n.className+=" ".concat(i.class));var r=c(e,t,i),l=r.radius,h=r.scale,u=r.x,d=r.y,p=r.centerX,f=r.centerY,g="".concat(2*l,"px");s.className="v-ripple__animation",s.style.width=g,s.style.height=g,t.appendChild(n);var m=window.getComputedStyle(t);m&&"static"===m.position&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),a(s,"translate(".concat(u,", ").concat(d,") scale3d(").concat(h,",").concat(h,",").concat(h,")")),o(s,0),s.dataset.activated=String(performance.now()),setTimeout((function(){s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),a(s,"translate(".concat(p,", ").concat(f,") scale3d(1,1,1)")),o(s,.25)}),0)}},hide:function(e){if(e&&e._ripple&&e._ripple.enabled){var t=e.getElementsByClassName("v-ripple__animation");if(0!==t.length){var i=t[t.length-1];if(!i.dataset.isHiding){i.dataset.isHiding="true";var n=performance.now()-Number(i.dataset.activated),s=Math.max(250-n,0);setTimeout((function(){i.classList.remove("v-ripple__animation--in"),i.classList.add("v-ripple__animation--out"),o(i,0),setTimeout((function(){var t=e.getElementsByClassName("v-ripple__animation");1===t.length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),i.parentNode&&e.removeChild(i.parentNode)}),300)}),s)}}}}};function d(e){return"undefined"===typeof e||!!e}function p(e){var t={},i=e.currentTarget;if(i&&i._ripple&&!i._ripple.touched&&!e[s]){if(e[s]=!0,l(e))i._ripple.touched=!0,i._ripple.isTouch=!0;else if(i._ripple.isTouch)return;if(t.center=i._ripple.centered||h(e),i._ripple.class&&(t.class=i._ripple.class),l(e)){if(i._ripple.showTimerCommit)return;i._ripple.showTimerCommit=function(){u.show(e,i,t)},i._ripple.showTimer=window.setTimeout((function(){i&&i._ripple&&i._ripple.showTimerCommit&&(i._ripple.showTimerCommit(),i._ripple.showTimerCommit=null)}),r)}else u.show(e,i,t)}}function f(e){var t=e.currentTarget;if(t&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=setTimeout((function(){f(e)})));window.setTimeout((function(){t._ripple&&(t._ripple.touched=!1)})),u.hide(t)}}function g(e){var t=e.currentTarget;t&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}var m=!1;function b(e){m||e.keyCode!==n["r"].enter&&e.keyCode!==n["r"].space||(m=!0,p(e))}function y(e){m=!1,f(e)}function v(e){!0===m&&(m=!1,f(e))}function w(e,t,i){var n=d(t.value);n||u.hide(e),e._ripple=e._ripple||{},e._ripple.enabled=n;var s=t.value||{};s.center&&(e._ripple.centered=!0),s.class&&(e._ripple.class=t.value.class),s.circle&&(e._ripple.circle=s.circle),n&&!i?(e.addEventListener("touchstart",p,{passive:!0}),e.addEventListener("touchend",f,{passive:!0}),e.addEventListener("touchmove",g,{passive:!0}),e.addEventListener("touchcancel",f),e.addEventListener("mousedown",p),e.addEventListener("mouseup",f),e.addEventListener("mouseleave",f),e.addEventListener("keydown",b),e.addEventListener("keyup",y),e.addEventListener("blur",v),e.addEventListener("dragstart",f,{passive:!0})):!n&&i&&S(e)}function S(e){e.removeEventListener("mousedown",p),e.removeEventListener("touchstart",p),e.removeEventListener("touchend",f),e.removeEventListener("touchmove",g),e.removeEventListener("touchcancel",f),e.removeEventListener("mouseup",f),e.removeEventListener("mouseleave",f),e.removeEventListener("keydown",b),e.removeEventListener("keyup",y),e.removeEventListener("dragstart",f),e.removeEventListener("blur",v)}function _(e,t,i){w(e,t,!1)}function k(e){delete e._ripple,S(e)}function T(e,t){if(t.value!==t.oldValue){var i=d(t.oldValue);w(e,t,i)}}var B={bind:_,unbind:k,update:T};t["a"]=B},5692:function(e,t,i){var n=i("c430"),s=i("c6cd");(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.17.2",mode:n?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,i){var n=i("d066"),s=i("241c"),r=i("7418"),a=i("825a");e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(a(e)),i=r.f;return i?t.concat(i(e)):t}},"577e":function(e,t,i){var n=i("d9b5");e.exports=function(e){if(n(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)}},5803:function(e,t,i){},5899:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(e,t,i){var n=i("1d80"),s=i("577e"),r=i("5899"),a="["+r+"]",o=RegExp("^"+a+a+"*"),l=RegExp(a+a+"*$"),h=function(e){return function(t){var i=s(n(t));return 1&e&&(i=i.replace(o,"")),2&e&&(i=i.replace(l,"")),i}};e.exports={start:h(1),end:h(2),trim:h(3)}},"58df":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("2b0e");function s(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n["a"].extend({mixins:t})}},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5bc1":function(e,t,i){"use strict";var n=i("5530"),s=(i("498a"),i("9d26")),r=i("8336"),a=i("2b0e");t["a"]=a["a"].extend({name:"v-app-bar-nav-icon",functional:!0,render:function(e,t){var i=t.slots,a=t.listeners,o=t.props,l=t.data,h=Object.assign(l,{staticClass:"v-app-bar__nav-icon ".concat(l.staticClass||"").trim(),props:Object(n["a"])(Object(n["a"])({},o),{},{icon:!0}),on:a}),c=i().default;return e(r["a"],h,c||[e(s["a"],"$menu")])}})},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5cc6":function(e,t,i){var n=i("74e8");n("Uint8",(function(e){return function(t,i,n){return e(this,t,i,n)}}))},"5d23":function(e,t,i){"use strict";i.d(t,"a",(function(){return E})),i.d(t,"c",(function(){return P})),i.d(t,"b",(function(){return L}));var n=i("80d2"),s=i("8860"),r=i("5530"),a=i("ade3"),o=(i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("db42"),i("9d26")),l=i("da13"),h=i("34c3"),c=i("7e2b"),u=i("9d65"),d=i("a9ad"),p=i("f2e7"),f=i("3206"),g=i("5607"),m=i("0789"),b=i("58df"),y=Object(b["a"])(c["a"],u["a"],d["a"],Object(f["a"])("list"),p["a"]),v=y.extend().extend({name:"v-list-group",directives:{ripple:g["a"]},props:{activeClass:{type:String,default:""},appendIcon:{type:String,default:"$expand"},color:{type:String,default:"primary"},disabled:Boolean,group:[String,RegExp],noAction:Boolean,prependIcon:String,ripple:{type:[Boolean,Object],default:!0},subGroup:Boolean},computed:{classes:function(){return{"v-list-group--active":this.isActive,"v-list-group--disabled":this.disabled,"v-list-group--no-action":this.noAction,"v-list-group--sub-group":this.subGroup}}},watch:{isActive:function(e){!this.subGroup&&e&&this.list&&this.list.listClick(this._uid)},$route:"onRouteChange"},created:function(){this.list&&this.list.register(this),this.group&&this.$route&&null==this.value&&(this.isActive=this.matchRoute(this.$route.path))},beforeDestroy:function(){this.list&&this.list.unregister(this)},methods:{click:function(e){var t=this;this.disabled||(this.isBooted=!0,this.$emit("click",e),this.$nextTick((function(){return t.isActive=!t.isActive})))},genIcon:function(e){return this.$createElement(o["a"],e)},genAppendIcon:function(){var e=!this.subGroup&&this.appendIcon;return e||this.$slots.appendIcon?this.$createElement(h["a"],{staticClass:"v-list-group__header__append-icon"},[this.$slots.appendIcon||this.genIcon(e)]):null},genHeader:function(){return this.$createElement(l["a"],{staticClass:"v-list-group__header",attrs:{"aria-expanded":String(this.isActive),role:"button"},class:Object(a["a"])({},this.activeClass,this.isActive),props:{inputValue:this.isActive},directives:[{name:"ripple",value:this.ripple}],on:Object(r["a"])(Object(r["a"])({},this.listeners$),{},{click:this.click})},[this.genPrependIcon(),this.$slots.activator,this.genAppendIcon()])},genItems:function(){var e=this;return this.showLazyContent((function(){return[e.$createElement("div",{staticClass:"v-list-group__items",directives:[{name:"show",value:e.isActive}]},Object(n["m"])(e))]}))},genPrependIcon:function(){var e=this.subGroup&&null==this.prependIcon?"$subgroup":this.prependIcon;return e||this.$slots.prependIcon?this.$createElement(h["a"],{staticClass:"v-list-group__header__prepend-icon"},[this.$slots.prependIcon||this.genIcon(e)]):null},onRouteChange:function(e){if(this.group){var t=this.matchRoute(e.path);t&&this.isActive!==t&&this.list&&this.list.listClick(this._uid),this.isActive=t}},toggle:function(e){var t=this,i=this._uid===e;i&&(this.isBooted=!0),this.$nextTick((function(){return t.isActive=i}))},matchRoute:function(e){return null!==e.match(this.group)}},render:function(e){return e("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-list-group",class:this.classes}),[this.genHeader(),e(m["a"],this.genItems())])}}),w=i("1baa"),S=(i("4de4"),i("2b0e")),_=S["a"].extend({name:"v-list-item-action",functional:!0,render:function(e,t){var i=t.data,n=t.children,s=void 0===n?[]:n;i.staticClass=i.staticClass?"v-list-item__action ".concat(i.staticClass):"v-list-item__action";var r=s.filter((function(e){return!1===e.isComment&&" "!==e.text}));return r.length>1&&(i.staticClass+=" v-list-item__action--stack"),e("div",i,s)}}),k=(i("a9e3"),i("3408"),i("24b2")),T=i("a236"),B=Object(b["a"])(d["a"],k["a"],T["a"]).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes:function(){return Object(r["a"])({"v-avatar--left":this.left,"v-avatar--right":this.right},this.roundedClasses)},styles:function(){return Object(r["a"])({height:Object(n["f"])(this.size),minWidth:Object(n["f"])(this.size),width:Object(n["f"])(this.size)},this.measurableStyles)}},render:function(e){var t={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return e("div",this.setBackgroundColor(this.color,t),this.$slots.default)}}),x=B,N=x.extend({name:"v-list-item-avatar",props:{horizontal:Boolean,size:{type:[Number,String],default:40}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({"v-list-item__avatar--horizontal":this.horizontal},x.options.computed.classes.call(this)),{},{"v-avatar--tile":this.tile||this.horizontal})}},render:function(e){var t=x.options.render.call(this,e);return t.data=t.data||{},t.data.staticClass+=" v-list-item__avatar",t}}),C=Object(n["h"])("v-list-item__action-text","span"),E=Object(n["h"])("v-list-item__content","div"),P=Object(n["h"])("v-list-item__title","div"),L=Object(n["h"])("v-list-item__subtitle","div");s["a"],l["a"],w["a"],h["a"]},"5e23":function(e,t,i){},"5e89":function(e,t,i){var n=i("861d"),s=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&s(e)===e}},"5f96":function(e,t,i){"use strict";var n=i("ebb5"),s=n.aTypedArray,r=n.exportTypedArrayMethod,a=[].join;r("join",(function(e){return a.apply(s(this),arguments)}))},"605d":function(e,t,i){var n=i("c6b6"),s=i("da84");e.exports="process"==n(s.process)},6069:function(e,t){e.exports="object"==typeof window},"60bd":function(e,t,i){"use strict";var n=i("da84"),s=i("ebb5"),r=i("e260"),a=i("b622"),o=a("iterator"),l=n.Uint8Array,h=r.values,c=r.keys,u=r.entries,d=s.aTypedArray,p=s.exportTypedArrayMethod,f=l&&l.prototype[o],g=!!f&&("values"==f.name||void 0==f.name),m=function(){return h.call(d(this))};p("entries",(function(){return u.call(d(this))})),p("keys",(function(){return c.call(d(this))})),p("values",m,!g),p(o,m,!g)},"60da":function(e,t,i){"use strict";var n=i("83ab"),s=i("d039"),r=i("df75"),a=i("7418"),o=i("d1e7"),l=i("7b0b"),h=i("44ad"),c=Object.assign,u=Object.defineProperty;e.exports=!c||s((function(){if(n&&1!==c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),s="abcdefghijklmnopqrst";return e[i]=7,s.split("").forEach((function(e){t[e]=e})),7!=c({},e)[i]||r(c({},t)).join("")!=s}))?function(e,t){var i=l(e),s=arguments.length,c=1,u=a.f,d=o.f;while(s>c){var p,f=h(arguments[c++]),g=u?r(f).concat(u(f)):r(f),m=g.length,b=0;while(m>b)p=g[b++],n&&!d.call(f,p)||(i[p]=f[p])}return i}:c},"615b":function(e,t,i){},"61d2":function(e,t,i){},"621a":function(e,t,i){"use strict";var n=i("da84"),s=i("83ab"),r=i("a981"),a=i("9112"),o=i("e2cc"),l=i("d039"),h=i("19aa"),c=i("a691"),u=i("50c4"),d=i("0b25"),p=i("77a7"),f=i("e163"),g=i("d2bb"),m=i("241c").f,b=i("9bf2").f,y=i("81d5"),v=i("d44e"),w=i("69f3"),S=w.get,_=w.set,k="ArrayBuffer",T="DataView",B="prototype",x="Wrong length",N="Wrong index",C=n[k],E=C,P=n[T],L=P&&P[B],O=Object.prototype,F=n.RangeError,M=p.pack,A=p.unpack,I=function(e){return[255&e]},D=function(e){return[255&e,e>>8&255]},R=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},V=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},H=function(e){return M(e,23,4)},G=function(e){return M(e,52,8)},W=function(e,t){b(e[B],t,{get:function(){return S(this)[t]}})},j=function(e,t,i,n){var s=d(i),r=S(e);if(s+t>r.byteLength)throw F(N);var a=S(r.buffer).bytes,o=s+r.byteOffset,l=a.slice(o,o+t);return n?l:l.reverse()},$=function(e,t,i,n,s,r){var a=d(i),o=S(e);if(a+t>o.byteLength)throw F(N);for(var l=S(o.buffer).bytes,h=a+o.byteOffset,c=n(+s),u=0;u<t;u++)l[h+u]=c[r?u:t-u-1]};if(r){if(!l((function(){C(1)}))||!l((function(){new C(-1)}))||l((function(){return new C,new C(1.5),new C(NaN),C.name!=k}))){E=function(e){return h(this,E),new C(d(e))};for(var z,U=E[B]=C[B],X=m(C),Y=0;X.length>Y;)(z=X[Y++])in E||a(E,z,C[z]);U.constructor=E}g&&f(L)!==O&&g(L,O);var q=new P(new E(2)),J=L.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||o(L,{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},{unsafe:!0})}else E=function(e){h(this,E,k);var t=d(e);_(this,{bytes:y.call(new Array(t),0),byteLength:t}),s||(this.byteLength=t)},P=function(e,t,i){h(this,P,T),h(e,E,T);var n=S(e).byteLength,r=c(t);if(r<0||r>n)throw F("Wrong offset");if(i=void 0===i?n-r:u(i),r+i>n)throw F(x);_(this,{buffer:e,byteLength:i,byteOffset:r}),s||(this.buffer=e,this.byteLength=i,this.byteOffset=r)},s&&(W(E,"byteLength"),W(P,"buffer"),W(P,"byteLength"),W(P,"byteOffset")),o(P[B],{getInt8:function(e){return j(this,1,e)[0]<<24>>24},getUint8:function(e){return j(this,1,e)[0]},getInt16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=j(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return V(j(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return V(j(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return A(j(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return A(j(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){$(this,1,e,I,t)},setUint8:function(e,t){$(this,1,e,I,t)},setInt16:function(e,t){$(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){$(this,2,e,D,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){$(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){$(this,4,e,R,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){$(this,4,e,H,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){$(this,8,e,G,t,arguments.length>2?arguments[2]:void 0)}});v(E,k),v(P,T),e.exports={ArrayBuffer:E,DataView:P}},"62ad":function(e,t,i){"use strict";var n=i("ade3"),s=i("5530"),r=(i("a9e3"),i("b64b"),i("ac1f"),i("5319"),i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("caad"),i("159b"),i("2ca0"),i("4b85"),i("2b0e")),a=i("d9f7"),o=i("80d2"),l=["sm","md","lg","xl"],h=function(){return l.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{})}(),c=function(){return l.reduce((function(e,t){return e["offset"+Object(o["x"])(t)]={type:[String,Number],default:null},e}),{})}(),u=function(){return l.reduce((function(e,t){return e["order"+Object(o["x"])(t)]={type:[String,Number],default:null},e}),{})}(),d={col:Object.keys(h),offset:Object.keys(c),order:Object.keys(u)};function p(e,t,i){var n=e;if(null!=i&&!1!==i){if(t){var s=t.replace(e,"");n+="-".concat(s)}return"col"!==e||""!==i&&!0!==i?(n+="-".concat(i),n.toLowerCase()):n.toLowerCase()}}var f=new Map;t["a"]=r["a"].extend({name:"v-col",functional:!0,props:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({cols:{type:[Boolean,String,Number],default:!1}},h),{},{offset:{type:[String,Number],default:null}},c),{},{order:{type:[String,Number],default:null}},u),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var i=t.props,s=t.data,r=t.children,o=(t.parent,"");for(var l in i)o+=String(i[l]);var h=f.get(o);return h||function(){var e,t;for(t in h=[],d)d[t].forEach((function(e){var n=i[e],s=p(t,e,n);s&&h.push(s)}));var s=h.some((function(e){return e.startsWith("col-")}));h.push((e={col:!s||!i.cols},Object(n["a"])(e,"col-".concat(i.cols),i.cols),Object(n["a"])(e,"offset-".concat(i.offset),i.offset),Object(n["a"])(e,"order-".concat(i.order),i.order),Object(n["a"])(e,"align-self-".concat(i.alignSelf),i.alignSelf),e)),f.set(o,h)}(),e(i.tag,Object(a["a"])(s,{class:h}),r)}})},"649e":function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").some,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("some",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},6544:function(e,t){e.exports=function(e,t){var i="function"===typeof e.exports?e.exports.extendOptions:e.options;for(var n in"function"===typeof e.exports&&(i.components=e.exports.options.components),i.components=i.components||{},t)i.components[n]=i.components[n]||t[n]}},6547:function(e,t,i){var n=i("a691"),s=i("577e"),r=i("1d80"),a=function(e){return function(t,i){var a,o,l=s(r(t)),h=n(i),c=l.length;return h<0||h>=c?e?"":void 0:(a=l.charCodeAt(h),a<55296||a>56319||h+1===c||(o=l.charCodeAt(h+1))<56320||o>57343?e?l.charAt(h):a:e?l.slice(h,h+2):o-56320+(a-55296<<10)+65536)}};e.exports={codeAt:a(!1),charAt:a(!0)}},6566:function(e,t,i){"use strict";var n=i("9bf2").f,s=i("7c73"),r=i("e2cc"),a=i("0366"),o=i("19aa"),l=i("2266"),h=i("7dd0"),c=i("2626"),u=i("83ab"),d=i("f183").fastKey,p=i("69f3"),f=p.set,g=p.getterFor;e.exports={getConstructor:function(e,t,i,h){var c=e((function(e,n){o(e,c,t),f(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),u||(e.size=0),void 0!=n&&l(n,e[h],{that:e,AS_ENTRIES:i})})),p=g(t),m=function(e,t,i){var n,s,r=p(e),a=b(e,t);return a?a.value=i:(r.last=a={index:s=d(t,!0),key:t,value:i,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=a),n&&(n.next=a),u?r.size++:e.size++,"F"!==s&&(r.index[s]=a)),e},b=function(e,t){var i,n=p(e),s=d(t);if("F"!==s)return n.index[s];for(i=n.first;i;i=i.next)if(i.key==t)return i};return r(c.prototype,{clear:function(){var e=this,t=p(e),i=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;t.first=t.last=void 0,u?t.size=0:e.size=0},delete:function(e){var t=this,i=p(t),n=b(t,e);if(n){var s=n.next,r=n.previous;delete i.index[n.index],n.removed=!0,r&&(r.next=s),s&&(s.previous=r),i.first==n&&(i.first=s),i.last==n&&(i.last=r),u?i.size--:t.size--}return!!n},forEach:function(e){var t,i=p(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:i.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!b(this,e)}}),r(c.prototype,i?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return m(this,0===e?0:e,t)}}:{add:function(e){return m(this,e=0===e?0:e,e)}}),u&&n(c.prototype,"size",{get:function(){return p(this).size}}),c},setStrong:function(e,t,i){var n=t+" Iterator",s=g(t),r=g(n);h(e,t,(function(e,t){f(this,{type:n,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?"keys"==t?{value:i.key,done:!1}:"values"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),c(t)}}},"65f0":function(e,t,i){var n=i("0b42");e.exports=function(e,t){return new(n(e))(0===t?0:t)}},"69f3":function(e,t,i){var n,s,r,a=i("7f9a"),o=i("da84"),l=i("861d"),h=i("9112"),c=i("5135"),u=i("c6cd"),d=i("f772"),p=i("d012"),f="Object already initialized",g=o.WeakMap,m=function(e){return r(e)?s(e):n(e,{})},b=function(e){return function(t){var i;if(!l(t)||(i=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}};if(a||u.state){var y=u.state||(u.state=new g),v=y.get,w=y.has,S=y.set;n=function(e,t){if(w.call(y,e))throw new TypeError(f);return t.facade=e,S.call(y,e,t),t},s=function(e){return v.call(y,e)||{}},r=function(e){return w.call(y,e)}}else{var _=d("state");p[_]=!0,n=function(e,t){if(c(e,_))throw new TypeError(f);return t.facade=e,h(e,_,t),t},s=function(e){return c(e,_)?e[_]:{}},r=function(e){return c(e,_)}}e.exports={set:n,get:s,has:r,enforce:m,getterFor:b}},"6b75":function(e,t,i){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return n}))},"6d61":function(e,t,i){"use strict";var n=i("23e7"),s=i("da84"),r=i("94ca"),a=i("6eeb"),o=i("f183"),l=i("2266"),h=i("19aa"),c=i("861d"),u=i("d039"),d=i("1c7e"),p=i("d44e"),f=i("7156");e.exports=function(e,t,i){var g=-1!==e.indexOf("Map"),m=-1!==e.indexOf("Weak"),b=g?"set":"add",y=s[e],v=y&&y.prototype,w=y,S={},_=function(e){var t=v[e];a(v,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(m&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return m&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(m&&!c(e))&&t.call(this,0===e?0:e)}:function(e,i){return t.call(this,0===e?0:e,i),this})},k=r(e,"function"!=typeof y||!(m||v.forEach&&!u((function(){(new y).entries().next()}))));if(k)w=i.getConstructor(t,e,g,b),o.enable();else if(r(e,!0)){var T=new w,B=T[b](m?{}:-0,1)!=T,x=u((function(){T.has(1)})),N=d((function(e){new y(e)})),C=!m&&u((function(){var e=new y,t=5;while(t--)e[b](t,t);return!e.has(-0)}));N||(w=t((function(t,i){h(t,w,e);var n=f(new y,t,w);return void 0!=i&&l(i,n[b],{that:n,AS_ENTRIES:g}),n})),w.prototype=v,v.constructor=w),(x||C)&&(_("delete"),_("has"),g&&_("get")),(C||B)&&_(b),m&&v.clear&&delete v.clear}return S[e]=w,n({global:!0,forced:w!=y},S),p(w,e),m||i.setStrong(w,e,g),w}},"6ece":function(e,t,i){},"6eeb":function(e,t,i){var n=i("da84"),s=i("9112"),r=i("5135"),a=i("ce4e"),o=i("8925"),l=i("69f3"),h=l.get,c=l.enforce,u=String(String).split("String");(e.exports=function(e,t,i,o){var l,h=!!o&&!!o.unsafe,d=!!o&&!!o.enumerable,p=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||r(i,"name")||s(i,"name",t),l=c(i),l.source||(l.source=u.join("string"==typeof t?t:""))),e!==n?(h?!p&&e[t]&&(d=!0):delete e[t],d?e[t]=i:s(e,t,i)):d?e[t]=i:a(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&h(this).source||o(this)}))},"6f53":function(e,t,i){var n=i("83ab"),s=i("df75"),r=i("fc6a"),a=i("d1e7").f,o=function(e){return function(t){var i,o=r(t),l=s(o),h=l.length,c=0,u=[];while(h>c)i=l[c++],n&&!a.call(o,i)||u.push(e?[i,o[i]]:o[i]);return u}};e.exports={entries:o(!0),values:o(!1)}},7037:function(e,t,i){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),n(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),e.exports=n,e.exports["default"]=e.exports,e.exports.__esModule=!0},7156:function(e,t,i){var n=i("861d"),s=i("d2bb");e.exports=function(e,t,i){var r,a;return s&&"function"==typeof(r=t.constructor)&&r!==i&&n(a=r.prototype)&&a!==i.prototype&&s(e,a),e}},"71d9":function(e,t,i){"use strict";var n=i("3835"),s=i("5530"),r=(i("a9e3"),i("0481"),i("5e23"),i("8dd9")),a=i("adda"),o=i("80d2"),l=i("d9bd");t["a"]=r["a"].extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:function(){return{isExtended:!1}},computed:{computedHeight:function(){var e=this.computedContentHeight;if(!this.isExtended)return e;var t=parseInt(this.extensionHeight);return this.isCollapsed?e:e+(isNaN(t)?0:t)},computedContentHeight:function(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this.short?112:this.isProminent?128:this.dense?48:this.short||this.$vuetify.breakpoint.smAndDown?56:64},classes:function(){return Object(s["a"])(Object(s["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent})},isCollapsed:function(){return this.collapse},isProminent:function(){return this.prominent},styles:function(){return Object(s["a"])(Object(s["a"])({},this.measurableStyles),{},{height:Object(o["f"])(this.computedHeight)})}},created:function(){var e=this,t=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];t.forEach((function(t){var i=Object(n["a"])(t,2),s=i[0],r=i[1];e.$attrs.hasOwnProperty(s)&&Object(l["a"])(s,r,e)}))},methods:{genBackground:function(){var e={height:Object(o["f"])(this.computedHeight),src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img({props:e}):this.$createElement(a["a"],{props:e});return this.$createElement("div",{staticClass:"v-toolbar__image"},[t])},genContent:function(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:Object(o["f"])(this.computedContentHeight)}},Object(o["m"])(this))},genExtension:function(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:Object(o["f"])(this.extensionHeight)}},Object(o["m"])(this,"extension"))}},render:function(e){this.isExtended=this.extended||!!this.$scopedSlots.extension;var t=[this.genContent()],i=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&t.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&t.unshift(this.genBackground()),e(this.tag,i,t)}})},"72f7":function(e,t,i){"use strict";var n=i("ebb5").exportTypedArrayMethod,s=i("d039"),r=i("da84"),a=r.Uint8Array,o=a&&a.prototype||{},l=[].toString,h=[].join;s((function(){l.call({})}))&&(l=function(){return h.call(this)});var c=o.toString!=l;n("toString",l,c)},"735e":function(e,t,i){"use strict";var n=i("ebb5"),s=i("81d5"),r=n.aTypedArray,a=n.exportTypedArrayMethod;a("fill",(function(e){return s.apply(r(this),arguments)}))},7418:function(e,t){t.f=Object.getOwnPropertySymbols},7435:function(e,t,i){},"746f":function(e,t,i){var n=i("428f"),s=i("5135"),r=i("e538"),a=i("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});s(t,e)||a(t,e,{value:r.f(e)})}},7496:function(e,t,i){"use strict";var n=i("5530"),s=(i("df86"),i("7560")),r=i("58df");t["a"]=Object(r["a"])(s["a"]).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark:function(){return this.$vuetify.theme.dark}},beforeCreate:function(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render:function(e){var t=e("div",{staticClass:"v-application--wrap"},this.$slots.default);return e("div",{staticClass:"v-application",class:Object(n["a"])({"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl},this.themeClasses),attrs:{"data-app":!0},domProps:{id:this.id}},[t])}})},"74e8":function(e,t,i){"use strict";var n=i("23e7"),s=i("da84"),r=i("83ab"),a=i("8aa7"),o=i("ebb5"),l=i("621a"),h=i("19aa"),c=i("5c6c"),u=i("9112"),d=i("5e89"),p=i("50c4"),f=i("0b25"),g=i("182d"),m=i("a04b"),b=i("5135"),y=i("f5df"),v=i("861d"),w=i("d9b5"),S=i("7c73"),_=i("d2bb"),k=i("241c").f,T=i("a078"),B=i("b727").forEach,x=i("2626"),N=i("9bf2"),C=i("06cf"),E=i("69f3"),P=i("7156"),L=E.get,O=E.set,F=N.f,M=C.f,A=Math.round,I=s.RangeError,D=l.ArrayBuffer,R=l.DataView,V=o.NATIVE_ARRAY_BUFFER_VIEWS,H=o.TYPED_ARRAY_CONSTRUCTOR,G=o.TYPED_ARRAY_TAG,W=o.TypedArray,j=o.TypedArrayPrototype,$=o.aTypedArrayConstructor,z=o.isTypedArray,U="BYTES_PER_ELEMENT",X="Wrong length",Y=function(e,t){var i=0,n=t.length,s=new($(e))(n);while(n>i)s[i]=t[i++];return s},q=function(e,t){F(e,t,{get:function(){return L(this)[t]}})},J=function(e){var t;return e instanceof D||"ArrayBuffer"==(t=y(e))||"SharedArrayBuffer"==t},Q=function(e,t){return z(e)&&!w(t)&&t in e&&d(+t)&&t>=0},K=function(e,t){return t=m(t),Q(e,t)?c(2,e[t]):M(e,t)},Z=function(e,t,i){return t=m(t),!(Q(e,t)&&v(i)&&b(i,"value"))||b(i,"get")||b(i,"set")||i.configurable||b(i,"writable")&&!i.writable||b(i,"enumerable")&&!i.enumerable?F(e,t,i):(e[t]=i.value,e)};r?(V||(C.f=K,N.f=Z,q(j,"buffer"),q(j,"byteOffset"),q(j,"byteLength"),q(j,"length")),n({target:"Object",stat:!0,forced:!V},{getOwnPropertyDescriptor:K,defineProperty:Z}),e.exports=function(e,t,i){var r=e.match(/\d+$/)[0]/8,o=e+(i?"Clamped":"")+"Array",l="get"+e,c="set"+e,d=s[o],m=d,b=m&&m.prototype,y={},w=function(e,t){var i=L(e);return i.view[l](t*r+i.byteOffset,!0)},N=function(e,t,n){var s=L(e);i&&(n=(n=A(n))<0?0:n>255?255:255&n),s.view[c](t*r+s.byteOffset,n,!0)},C=function(e,t){F(e,t,{get:function(){return w(this,t)},set:function(e){return N(this,t,e)},enumerable:!0})};V?a&&(m=t((function(e,t,i,n){return h(e,m,o),P(function(){return v(t)?J(t)?void 0!==n?new d(t,g(i,r),n):void 0!==i?new d(t,g(i,r)):new d(t):z(t)?Y(m,t):T.call(m,t):new d(f(t))}(),e,m)})),_&&_(m,W),B(k(d),(function(e){e in m||u(m,e,d[e])})),m.prototype=b):(m=t((function(e,t,i,n){h(e,m,o);var s,a,l,c=0,u=0;if(v(t)){if(!J(t))return z(t)?Y(m,t):T.call(m,t);s=t,u=g(i,r);var d=t.byteLength;if(void 0===n){if(d%r)throw I(X);if(a=d-u,a<0)throw I(X)}else if(a=p(n)*r,a+u>d)throw I(X);l=a/r}else l=f(t),a=l*r,s=new D(a);O(e,{buffer:s,byteOffset:u,byteLength:a,length:l,view:new R(s)});while(c<l)C(e,c++)})),_&&_(m,W),b=m.prototype=S(j)),b.constructor!==m&&u(b,"constructor",m),u(b,H,m),G&&u(b,G,o),y[o]=m,n({global:!0,forced:m!=d,sham:!V},y),U in m||u(m,U,r),U in b||u(b,U,r),x(o)}):e.exports=function(){}},7560:function(e,t,i){"use strict";i.d(t,"b",(function(){return a}));var n=i("5530"),s=i("2b0e"),r=s["a"].extend().extend({name:"themeable",provide:function(){return{theme:this.themeableProvide}},inject:{theme:{default:{isDark:!1}}},props:{dark:{type:Boolean,default:null},light:{type:Boolean,default:null}},data:function(){return{themeableProvide:{isDark:!1}}},computed:{appIsDark:function(){return this.$vuetify.theme.dark||!1},isDark:function(){return!0===this.dark||!0!==this.light&&this.theme.isDark},themeClasses:function(){return{"theme--dark":this.isDark,"theme--light":!this.isDark}},rootIsDark:function(){return!0===this.dark||!0!==this.light&&this.appIsDark},rootThemeClasses:function(){return{"theme--dark":this.rootIsDark,"theme--light":!this.rootIsDark}}},watch:{isDark:{handler:function(e,t){e!==t&&(this.themeableProvide.isDark=this.isDark)},immediate:!0}}});function a(e){var t=Object(n["a"])(Object(n["a"])({},e.props),e.injections),i=r.options.computed.isDark.call(t);return r.options.computed.themeClasses.call({isDark:i})}t["a"]=r},"77a7":function(e,t){var i=Math.abs,n=Math.pow,s=Math.floor,r=Math.log,a=Math.LN2,o=function(e,t,o){var l,h,c,u=new Array(o),d=8*o-t-1,p=(1<<d)-1,f=p>>1,g=23===t?n(2,-24)-n(2,-77):0,m=e<0||0===e&&1/e<0?1:0,b=0;for(e=i(e),e!=e||e===1/0?(h=e!=e?1:0,l=p):(l=s(r(e)/a),e*(c=n(2,-l))<1&&(l--,c*=2),e+=l+f>=1?g/c:g*n(2,1-f),e*c>=2&&(l++,c/=2),l+f>=p?(h=0,l=p):l+f>=1?(h=(e*c-1)*n(2,t),l+=f):(h=e*n(2,f-1)*n(2,t),l=0));t>=8;u[b++]=255&h,h/=256,t-=8);for(l=l<<t|h,d+=t;d>0;u[b++]=255&l,l/=256,d-=8);return u[--b]|=128*m,u},l=function(e,t){var i,s=e.length,r=8*s-t-1,a=(1<<r)-1,o=a>>1,l=r-7,h=s-1,c=e[h--],u=127&c;for(c>>=7;l>0;u=256*u+e[h],h--,l-=8);for(i=u&(1<<-l)-1,u>>=-l,l+=t;l>0;i=256*i+e[h],h--,l-=8);if(0===u)u=1-o;else{if(u===a)return i?NaN:c?-1/0:1/0;i+=n(2,t),u-=o}return(c?-1:1)*i*n(2,u-t)};e.exports={pack:o,unpack:l}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7958:function(e,t,i){},"7b0b":function(e,t,i){var n=i("1d80");e.exports=function(e){return Object(n(e))}},"7bc6":function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return o}));i("5530"),i("3835"),i("ac1f"),i("466d"),i("a15b"),i("d81d"),i("1276"),i("b0c0"),i("5319"),i("498a"),i("d3b7"),i("25f0"),i("38cf"),i("99af"),i("fb6a"),i("2ca0"),i("07ac");var n=i("d9bd");i("80d2"),i("8da5");function s(e){return!!e&&!!e.match(/^(#|var\(--|(rgb|hsl)a?\()/)}function r(e){var t;if("number"===typeof e)t=e;else{if("string"!==typeof e)throw new TypeError("Colors can only be numbers or strings, recieved ".concat(null==e?e:e.constructor.name," instead"));var i="#"===e[0]?e.substring(1):e;3===i.length&&(i=i.split("").map((function(e){return e+e})).join("")),6!==i.length&&Object(n["c"])("'".concat(e,"' is not a valid rgb color")),t=parseInt(i,16)}return t<0?(Object(n["c"])("Colors cannot be negative: '".concat(e,"'")),t=0):(t>16777215||isNaN(t))&&(Object(n["c"])("'".concat(e,"' is not a valid rgb color")),t=16777215),t}function a(e){var t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}function o(e){return a(r(e))}},"7c73":function(e,t,i){var n,s=i("825a"),r=i("37e8"),a=i("7839"),o=i("d012"),l=i("1be4"),h=i("cc12"),c=i("f772"),u=">",d="<",p="prototype",f="script",g=c("IE_PROTO"),m=function(){},b=function(e){return d+f+u+e+d+"/"+f+u},y=function(e){e.write(b("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){var e,t=h("iframe"),i="java"+f+":";return t.style.display="none",l.appendChild(t),t.src=String(i),e=t.contentWindow.document,e.open(),e.write(b("document.F=Object")),e.close(),e.F},w=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&n?y(n):v():y(n);var e=a.length;while(e--)delete w[p][a[e]];return w()};o[g]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(m[p]=s(e),i=new m,m[p]=null,i[g]=e):i=w(),void 0===t?i:r(i,t)}},"7db0":function(e,t,i){"use strict";var n=i("23e7"),s=i("b727").find,r=i("44d2"),a="find",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r(a)},"7dd0":function(e,t,i){"use strict";var n=i("23e7"),s=i("9ed3"),r=i("e163"),a=i("d2bb"),o=i("d44e"),l=i("9112"),h=i("6eeb"),c=i("b622"),u=i("c430"),d=i("3f8c"),p=i("ae93"),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=c("iterator"),b="keys",y="values",v="entries",w=function(){return this};e.exports=function(e,t,i,c,p,S,_){s(i,t,c);var k,T,B,x=function(e){if(e===p&&L)return L;if(!g&&e in E)return E[e];switch(e){case b:return function(){return new i(this,e)};case y:return function(){return new i(this,e)};case v:return function(){return new i(this,e)}}return function(){return new i(this)}},N=t+" Iterator",C=!1,E=e.prototype,P=E[m]||E["@@iterator"]||p&&E[p],L=!g&&P||x(p),O="Array"==t&&E.entries||P;if(O&&(k=r(O.call(new e)),f!==Object.prototype&&k.next&&(u||r(k)===f||(a?a(k,f):"function"!=typeof k[m]&&l(k,m,w)),o(k,N,!0,!0),u&&(d[N]=w))),p==y&&P&&P.name!==y&&(C=!0,L=function(){return P.call(this)}),u&&!_||E[m]===L||l(E,m,L),d[t]=L,p)if(T={values:x(y),keys:S?L:x(b),entries:x(v)},_)for(B in T)(g||C||!(B in E))&&h(E,B,T[B]);else n({target:t,proto:!0,forced:g||C},T);return T}},"7e2b":function(e,t,i){"use strict";var n=i("2b0e");function s(e){return function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(t,n)||this.$delete(this.$data[e],n);for(var s in t)this.$set(this.$data[e],s,t[s])}}t["a"]=n["a"].extend({data:function(){return{attrs$:{},listeners$:{}}},created:function(){this.$watch("$attrs",s("attrs$"),{immediate:!0}),this.$watch("$listeners",s("listeners$"),{immediate:!0})}})},"7f9a":function(e,t,i){var n=i("da84"),s=i("8925"),r=n.WeakMap;e.exports="function"===typeof r&&/native code/.test(s(r))},"80d2":function(e,t,i){"use strict";i.d(t,"h",(function(){return r})),i.d(t,"a",(function(){return a})),i.d(t,"v",(function(){return o})),i.d(t,"b",(function(){return h})),i.d(t,"k",(function(){return c})),i.d(t,"i",(function(){return u})),i.d(t,"l",(function(){return d})),i.d(t,"g",(function(){return p})),i.d(t,"o",(function(){return f})),i.d(t,"j",(function(){return g})),i.d(t,"f",(function(){return m})),i.d(t,"q",(function(){return b})),i.d(t,"r",(function(){return v})),i.d(t,"w",(function(){return w})),i.d(t,"s",(function(){return S})),i.d(t,"c",(function(){return k})),i.d(t,"x",(function(){return T})),i.d(t,"y",(function(){return B})),i.d(t,"n",(function(){return x})),i.d(t,"m",(function(){return N})),i.d(t,"e",(function(){return C})),i.d(t,"u",(function(){return E})),i.d(t,"d",(function(){return P})),i.d(t,"p",(function(){return L})),i.d(t,"t",(function(){return O}));i("3835");var n=i("53ca"),s=(i("5530"),i("ac1f"),i("5319"),i("498a"),i("99af"),i("b64b"),i("1276"),i("a630"),i("3ca3"),i("a9e3"),i("dca8"),i("2ca0"),i("fb6a"),i("4e827"),i("d81d"),i("d3b7"),i("25f0"),i("4de4"),i("b0c0"),i("38cf"),i("b680"),i("cb29"),i("2b0e"));function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",i=arguments.length>2?arguments[2]:void 0;return s["a"].extend({name:i||e.replace(/__/g,"-"),functional:!0,render:function(i,n){var s=n.data,r=n.children;return s.staticClass="".concat(e," ").concat(s.staticClass||"").trim(),i(t,s,r)}})}function a(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=function s(r){i(r),e.removeEventListener(t,s,n)};e.addEventListener(t,s,n)}var o=!1;try{if("undefined"!==typeof window){var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testListener",l,l),window.removeEventListener("testListener",l,l)}}catch(F){console.warn(F)}function h(e,t,i,n){e.addEventListener(t,i,!!o&&n)}function c(e,t,i){var n=t.length-1;if(n<0)return void 0===e?i:e;for(var s=0;s<n;s++){if(null==e)return i;e=e[t[s]]}return null==e||void 0===e[t[n]]?i:e[t[n]]}function u(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime())return!1;if(e!==Object(e)||t!==Object(t))return!1;var i=Object.keys(e);return i.length===Object.keys(t).length&&i.every((function(i){return u(e[i],t[i])}))}function d(e,t,i){return null!=e&&t&&"string"===typeof t?void 0!==e[t]?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),c(e,t.split("."),i)):i}function p(e){return Array.from({length:e},(function(e,t){return t}))}function f(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return 0;var t=+window.getComputedStyle(e).getPropertyValue("z-index");return t||f(e.parentNode)}function g(e,t){for(var i={},n=0;n<t.length;n++){var s=t[n];"undefined"!==typeof e[s]&&(i[s]=e[s])}return i}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return null==e||""===e?void 0:isNaN(+e)?String(e):"".concat(Number(e)).concat(t)}function b(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function y(e){return null!==e&&"object"===Object(n["a"])(e)}var v=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function w(e,t){var i=e.$vuetify.icons.component;if(t.startsWith("$")){var n="$vuetify.icons.values.".concat(t.split("$").pop().split(".").pop()),s=d(e,n,t);if("string"!==typeof s)return s;t=s}return null==i?t:{component:i,props:{icon:t}}}function S(e){return Object.keys(e)}var _=/-(\w)/g,k=function(e){return e.replace(_,(function(e,t){return t?t.toUpperCase():""}))};function T(e){return e.charAt(0).toUpperCase()+e.slice(1)}function B(e){return null!=e?Array.isArray(e)?e:[e]:[]}function x(e,t,i){return e.$slots[t]&&e.$scopedSlots[t]&&e.$scopedSlots[t].name?i?"v-slot":"scoped":e.$slots[t]?"normal":e.$scopedSlots[t]?"scoped":void 0}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.$scopedSlots[t]?e.$scopedSlots[t](i instanceof Function?i():i):!e.$slots[t]||i&&!n?void 0:e.$slots[t]}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(i,e))}function E(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e+i.repeat(Math.max(0,t-e.length))}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=[],n=0;while(n<e.length)i.push(e.substr(n,t)),n+=t;return i}function L(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?1024:1e3;if(e<i)return"".concat(e," B");var n=t?["Ki","Mi","Gi"]:["k","M","G"],s=-1;while(Math.abs(e)>=i&&s<n.length-1)e/=i,++s;return"".concat(e.toFixed(1)," ").concat(n[s],"B")}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in t){var n=e[i],s=t[i];y(n)&&y(s)?e[i]=O(n,s):e[i]=s}return e}},"81d5":function(e,t,i){"use strict";var n=i("7b0b"),s=i("23cb"),r=i("50c4");e.exports=function(e){var t=n(this),i=r(t.length),a=arguments.length,o=s(a>1?arguments[1]:void 0,i),l=a>2?arguments[2]:void 0,h=void 0===l?i:s(l,i);while(h>o)t[o++]=e;return t}},"825a":function(e,t,i){var n=i("861d");e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},"82f8":function(e,t,i){"use strict";var n=i("ebb5"),s=i("4d64").includes,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("includes",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},8308:function(e,t,i){},8336:function(e,t,i){"use strict";var n=i("53ca"),s=i("3835"),r=i("5530"),a=(i("c7cd"),i("a9e3"),i("caad"),i("86cc"),i("10d2")),o=(i("99af"),i("8d4f"),i("90a2")),l=i("a9ad"),h=i("80d2"),c=l["a"].extend({name:"v-progress-circular",directives:{intersect:o["a"]},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:function(){return{radius:20,isVisible:!0}},computed:{calculatedSize:function(){return Number(this.size)+(this.button?8:0)},circumference:function(){return 2*Math.PI*this.radius},classes:function(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue:function(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray:function(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset:function(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth:function(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles:function(){return{height:Object(h["f"])(this.calculatedSize),width:Object(h["f"])(this.calculatedSize)}},svgStyles:function(){return{transform:"rotate(".concat(Number(this.rotate),"deg)")}},viewBoxSize:function(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle:function(e,t){return this.$createElement("circle",{class:"v-progress-circular__".concat(e),attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":t}})},genSvg:function(){var e=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"".concat(this.viewBoxSize," ").concat(this.viewBoxSize," ").concat(2*this.viewBoxSize," ").concat(2*this.viewBoxSize)}},e)},genInfo:function(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)},onObserve:function(e,t,i){this.isVisible=i}},render:function(e){return e("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}}),u=c,d=i("4e82"),p=i("f2e7"),f=i("c995"),g=i("fe6c"),m=i("1c87"),b=i("af2b"),y=i("58df"),v=i("d9bd"),w=Object(y["a"])(a["a"],m["a"],g["a"],b["a"],Object(d["a"])("btnToggle"),Object(p["b"])("inputValue"));t["a"]=w.extend().extend({name:"v-btn",props:{activeClass:{type:String,default:function(){return this.btnToggle?this.btnToggle.activeClass:""}},block:Boolean,depressed:Boolean,fab:Boolean,icon:Boolean,loading:Boolean,outlined:Boolean,plain:Boolean,retainFocusOnClick:Boolean,rounded:Boolean,tag:{type:String,default:"button"},text:Boolean,tile:Boolean,type:{type:String,default:"button"},value:null},data:function(){return{proxyClass:"v-btn--active"}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({"v-btn":!0},m["a"].options.computed.classes.call(this)),{},{"v-btn--absolute":this.absolute,"v-btn--block":this.block,"v-btn--bottom":this.bottom,"v-btn--disabled":this.disabled,"v-btn--is-elevated":this.isElevated,"v-btn--fab":this.fab,"v-btn--fixed":this.fixed,"v-btn--has-bg":this.hasBg,"v-btn--icon":this.icon,"v-btn--left":this.left,"v-btn--loading":this.loading,"v-btn--outlined":this.outlined,"v-btn--plain":this.plain,"v-btn--right":this.right,"v-btn--round":this.isRound,"v-btn--rounded":this.rounded,"v-btn--router":this.to,"v-btn--text":this.text,"v-btn--tile":this.tile,"v-btn--top":this.top},this.themeClasses),this.groupClasses),this.elevationClasses),this.sizeableClasses)},computedElevation:function(){if(!this.disabled)return f["a"].options.computed.computedElevation.call(this)},computedRipple:function(){var e,t=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!=(e=this.ripple)?e:t)},hasBg:function(){return!this.text&&!this.plain&&!this.outlined&&!this.icon},isElevated:function(){return Boolean(!this.icon&&!this.text&&!this.outlined&&!this.depressed&&!this.disabled&&!this.plain&&(null==this.elevation||Number(this.elevation)>0))},isRound:function(){return Boolean(this.icon||this.fab)},styles:function(){return Object(r["a"])({},this.measurableStyles)}},created:function(){var e=this,t=[["flat","text"],["outline","outlined"],["round","rounded"]];t.forEach((function(t){var i=Object(s["a"])(t,2),n=i[0],r=i[1];e.$attrs.hasOwnProperty(n)&&Object(v["a"])(n,r,e)}))},methods:{click:function(e){!this.retainFocusOnClick&&!this.fab&&e.detail&&this.$el.blur(),this.$emit("click",e),this.btnToggle&&this.toggle()},genContent:function(){return this.$createElement("span",{staticClass:"v-btn__content"},this.$slots.default)},genLoader:function(){return this.$createElement("span",{class:"v-btn__loader"},this.$slots.loader||[this.$createElement(u,{props:{indeterminate:!0,size:23,width:2}})])}},render:function(e){var t=[this.genContent(),this.loading&&this.genLoader()],i=this.generateRouteLink(),s=i.tag,r=i.data,a=this.hasBg?this.setBackgroundColor:this.setTextColor;return"button"===s&&(r.attrs.type=this.type,r.attrs.disabled=this.disabled),r.attrs.value=["string","number"].includes(Object(n["a"])(this.value))?this.value:JSON.stringify(this.value),e(s,this.disabled?r:a(this.color,r),t)}})},"83ab":function(e,t,i){var n=i("d039");e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(e,t,i){"use strict";var n=i("a04b"),s=i("9bf2"),r=i("5c6c");e.exports=function(e,t,i){var a=n(t);a in e?s.f(e,a,r(0,i)):e[a]=i}},"857a":function(e,t,i){var n=i("1d80"),s=i("577e"),r=/"/g;e.exports=function(e,t,i,a){var o=s(n(e)),l="<"+t;return""!==i&&(l+=" "+i+'="'+s(a).replace(r,"&quot;")+'"'),l+">"+o+"</"+t+">"}},"861d":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},8654:function(e,t,i){"use strict";var n=i("15fd"),s=i("2909"),r=i("5530"),a=(i("a9e3"),i("0481"),i("d3b7"),i("25f0"),i("caad"),i("2b19"),i("4ff9"),i("c37a")),o=(i("99af"),i("e9b1"),i("7560")),l=i("58df"),h=Object(l["a"])(o["a"]).extend({name:"v-counter",functional:!0,props:{value:{type:[Number,String],default:""},max:[Number,String]},render:function(e,t){var i=t.props,n=parseInt(i.max,10),s=parseInt(i.value,10),a=n?"".concat(s," / ").concat(n):String(i.value),l=n&&s>n;return e("div",{staticClass:"v-counter",class:Object(r["a"])({"error--text":l},Object(o["b"])(t))},a)}}),c=h,u=i("ba87"),d=i("90a2"),p=i("d9bd"),f=i("2b0e");function g(e){return f["a"].extend({name:"intersectable",mounted:function(){d["a"].inserted(this.$el,{name:"intersect",value:this.onObserve})},destroyed:function(){d["a"].unbind(this.$el)},methods:{onObserve:function(t,i,n){if(n)for(var s=0,r=e.onVisible.length;s<r;s++){var a=this[e.onVisible[s]];"function"!==typeof a?Object(p["c"])(e.onVisible[s]+" method is not available on the instance but referenced in intersectable mixin options"):a()}}}})}var m=i("297c"),b=i("38cb"),y=i("dc22"),v=i("5607"),w=i("dd89"),S=i("80d2"),_=["title"],k=Object(l["a"])(a["a"],g({onVisible:["onResize","tryAutofocus"]}),m["a"]),T=["color","file","time","date","datetime-local","week","month"];t["a"]=k.extend().extend({name:"v-text-field",directives:{resize:y["a"],ripple:v["a"]},inheritAttrs:!1,props:{appendOuterIcon:String,autofocus:Boolean,clearable:Boolean,clearIcon:{type:String,default:"$clear"},counter:[Boolean,Number,String],counterValue:Function,filled:Boolean,flat:Boolean,fullWidth:Boolean,label:String,outlined:Boolean,placeholder:String,prefix:String,prependInnerIcon:String,persistentPlaceholder:Boolean,reverse:Boolean,rounded:Boolean,shaped:Boolean,singleLine:Boolean,solo:Boolean,soloInverted:Boolean,suffix:String,type:{type:String,default:"text"}},data:function(){return{badInput:!1,labelWidth:0,prefixWidth:0,prependWidth:0,initialValue:null,isBooted:!1,isClearing:!1}},computed:{classes:function(){return Object(r["a"])(Object(r["a"])({},a["a"].options.computed.classes.call(this)),{},{"v-text-field":!0,"v-text-field--full-width":this.fullWidth,"v-text-field--prefix":this.prefix,"v-text-field--single-line":this.isSingle,"v-text-field--solo":this.isSolo,"v-text-field--solo-inverted":this.soloInverted,"v-text-field--solo-flat":this.flat,"v-text-field--filled":this.filled,"v-text-field--is-booted":this.isBooted,"v-text-field--enclosed":this.isEnclosed,"v-text-field--reverse":this.reverse,"v-text-field--outlined":this.outlined,"v-text-field--placeholder":this.placeholder,"v-text-field--rounded":this.rounded,"v-text-field--shaped":this.shaped})},computedColor:function(){var e=b["a"].options.computed.computedColor.call(this);return this.soloInverted&&this.isFocused?this.color||"primary":e},computedCounterValue:function(){return"function"===typeof this.counterValue?this.counterValue(this.internalValue):Object(s["a"])((this.internalValue||"").toString()).length},hasCounter:function(){return!1!==this.counter&&null!=this.counter},hasDetails:function(){return a["a"].options.computed.hasDetails.call(this)||this.hasCounter},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("input",this.lazyValue)}},isDirty:function(){var e;return(null==(e=this.lazyValue)?void 0:e.toString().length)>0||this.badInput},isEnclosed:function(){return this.filled||this.isSolo||this.outlined},isLabelActive:function(){return this.isDirty||T.includes(this.type)},isSingle:function(){return this.isSolo||this.singleLine||this.fullWidth||this.filled&&!this.hasLabel},isSolo:function(){return this.solo||this.soloInverted},labelPosition:function(){var e=this.prefix&&!this.labelValue?this.prefixWidth:0;return this.labelValue&&this.prependWidth&&(e-=this.prependWidth),this.$vuetify.rtl===this.reverse?{left:e,right:"auto"}:{left:"auto",right:e}},showLabel:function(){return this.hasLabel&&!(this.isSingle&&this.labelValue)},labelValue:function(){return this.isFocused||this.isLabelActive||this.persistentPlaceholder}},watch:{outlined:"setLabelWidth",label:function(){this.$nextTick(this.setLabelWidth)},prefix:function(){this.$nextTick(this.setPrefixWidth)},isFocused:"updateValue",value:function(e){this.lazyValue=e}},created:function(){this.$attrs.hasOwnProperty("box")&&Object(p["a"])("box","filled",this),this.$attrs.hasOwnProperty("browser-autocomplete")&&Object(p["a"])("browser-autocomplete","autocomplete",this),this.shaped&&!(this.filled||this.outlined||this.isSolo)&&Object(p["c"])("shaped should be used with either filled or outlined",this)},mounted:function(){var e=this;this.$watch((function(){return e.labelValue}),this.setLabelWidth),this.autofocus&&this.tryAutofocus(),requestAnimationFrame((function(){return e.isBooted=!0}))},methods:{focus:function(){this.onFocus()},blur:function(e){var t=this;window.requestAnimationFrame((function(){t.$refs.input&&t.$refs.input.blur()}))},clearableCallback:function(){var e=this;this.$refs.input&&this.$refs.input.focus(),this.$nextTick((function(){return e.internalValue=null}))},genAppendSlot:function(){var e=[];return this.$slots["append-outer"]?e.push(this.$slots["append-outer"]):this.appendOuterIcon&&e.push(this.genIcon("appendOuter")),this.genSlot("append","outer",e)},genPrependInnerSlot:function(){var e=[];return this.$slots["prepend-inner"]?e.push(this.$slots["prepend-inner"]):this.prependInnerIcon&&e.push(this.genIcon("prependInner")),this.genSlot("prepend","inner",e)},genIconSlot:function(){var e=[];return this.$slots.append?e.push(this.$slots.append):this.appendIcon&&e.push(this.genIcon("append")),this.genSlot("append","inner",e)},genInputSlot:function(){var e=a["a"].options.methods.genInputSlot.call(this),t=this.genPrependInnerSlot();return t&&(e.children=e.children||[],e.children.unshift(t)),e},genClearIcon:function(){return this.clearable?this.isDirty?this.genSlot("append","inner",[this.genIcon("clear",this.clearableCallback)]):this.genSlot("append","inner",[this.$createElement("div")]):null},genCounter:function(){var e,t,i;if(!this.hasCounter)return null;var n=!0===this.counter?this.attrs$.maxlength:this.counter,s={dark:this.dark,light:this.light,max:n,value:this.computedCounterValue};return null!=(e=null==(t=(i=this.$scopedSlots).counter)?void 0:t.call(i,{props:s}))?e:this.$createElement(c,{props:s})},genControl:function(){return a["a"].options.methods.genControl.call(this)},genDefaultSlot:function(){return[this.genFieldset(),this.genTextFieldSlot(),this.genClearIcon(),this.genIconSlot(),this.genProgress()]},genFieldset:function(){return this.outlined?this.$createElement("fieldset",{attrs:{"aria-hidden":!0}},[this.genLegend()]):null},genLabel:function(){if(!this.showLabel)return null;var e={props:{absolute:!0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:!this.isSingle&&(this.isFocused||!!this.validationState),for:this.computedId,left:this.labelPosition.left,light:this.light,right:this.labelPosition.right,value:this.labelValue}};return this.$createElement(u["a"],e,this.$slots.label||this.label)},genLegend:function(){var e=this.singleLine||!this.labelValue&&!this.isDirty?0:this.labelWidth,t=this.$createElement("span",{domProps:{innerHTML:"&#8203;"},staticClass:"notranslate"});return this.$createElement("legend",{style:{width:this.isSingle?void 0:Object(S["f"])(e)}},[t])},genInput:function(){var e=Object.assign({},this.listeners$);delete e.change;var t=this.attrs$,i=(t.title,Object(n["a"])(t,_));return this.$createElement("input",{style:{},domProps:{value:"number"===this.type&&Object.is(this.lazyValue,-0)?"-0":this.lazyValue},attrs:Object(r["a"])(Object(r["a"])({},i),{},{autofocus:this.autofocus,disabled:this.isDisabled,id:this.computedId,placeholder:this.persistentPlaceholder||this.isFocused||!this.hasLabel?this.placeholder:void 0,readonly:this.isReadonly,type:this.type}),on:Object.assign(e,{blur:this.onBlur,input:this.onInput,focus:this.onFocus,keydown:this.onKeyDown}),ref:"input",directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]})},genMessages:function(){if(!this.showDetails)return null;var e=a["a"].options.methods.genMessages.call(this),t=this.genCounter();return this.$createElement("div",{staticClass:"v-text-field__details"},[e,t])},genTextFieldSlot:function(){return this.$createElement("div",{staticClass:"v-text-field__slot"},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,this.genInput(),this.suffix?this.genAffix("suffix"):null])},genAffix:function(e){return this.$createElement("div",{class:"v-text-field__".concat(e),ref:e},this[e])},onBlur:function(e){var t=this;this.isFocused=!1,e&&this.$nextTick((function(){return t.$emit("blur",e)}))},onClick:function(){this.isFocused||this.isDisabled||!this.$refs.input||this.$refs.input.focus()},onFocus:function(e){if(this.$refs.input){var t=Object(w["a"])(this.$el);if(t)return t.activeElement!==this.$refs.input?this.$refs.input.focus():void(this.isFocused||(this.isFocused=!0,e&&this.$emit("focus",e)))}},onInput:function(e){var t=e.target;this.internalValue=t.value,this.badInput=t.validity&&t.validity.badInput},onKeyDown:function(e){e.keyCode===S["r"].enter&&this.lazyValue!==this.initialValue&&(this.initialValue=this.lazyValue,this.$emit("change",this.initialValue)),this.$emit("keydown",e)},onMouseDown:function(e){e.target!==this.$refs.input&&(e.preventDefault(),e.stopPropagation()),a["a"].options.methods.onMouseDown.call(this,e)},onMouseUp:function(e){this.hasMouseDown&&this.focus(),a["a"].options.methods.onMouseUp.call(this,e)},setLabelWidth:function(){this.outlined&&(this.labelWidth=this.$refs.label?Math.min(.75*this.$refs.label.scrollWidth+6,this.$el.offsetWidth-24):0)},setPrefixWidth:function(){this.$refs.prefix&&(this.prefixWidth=this.$refs.prefix.offsetWidth)},setPrependWidth:function(){this.outlined&&this.$refs["prepend-inner"]&&(this.prependWidth=this.$refs["prepend-inner"].offsetWidth)},tryAutofocus:function(){if(!this.autofocus||"undefined"===typeof document||!this.$refs.input)return!1;var e=Object(w["a"])(this.$el);return!(!e||e.activeElement===this.$refs.input)&&(this.$refs.input.focus(),!0)},updateValue:function(e){this.hasColor=e,e?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)},onResize:function(){this.setLabelWidth(),this.setPrefixWidth(),this.setPrependWidth()}}})},"86cc":function(e,t,i){},8860:function(e,t,i){"use strict";var n=i("b85c"),s=i("5530"),r=(i("0481"),i("c740"),i("a434"),i("3ad0"),i("8dd9"));t["a"]=r["a"].extend().extend({name:"v-list",provide:function(){return{isInList:!0,list:this}},inject:{isInMenu:{default:!1},isInNav:{default:!1}},props:{dense:Boolean,disabled:Boolean,expand:Boolean,flat:Boolean,nav:Boolean,rounded:Boolean,subheader:Boolean,threeLine:Boolean,twoLine:Boolean},data:function(){return{groups:[]}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-list--dense":this.dense,"v-list--disabled":this.disabled,"v-list--flat":this.flat,"v-list--nav":this.nav,"v-list--rounded":this.rounded,"v-list--subheader":this.subheader,"v-list--two-line":this.twoLine,"v-list--three-line":this.threeLine})}},methods:{register:function(e){this.groups.push(e)},unregister:function(e){var t=this.groups.findIndex((function(t){return t._uid===e._uid}));t>-1&&this.groups.splice(t,1)},listClick:function(e){if(!this.expand){var t,i=Object(n["a"])(this.groups);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.toggle(e)}}catch(r){i.e(r)}finally{i.f()}}}},render:function(e){var t={staticClass:"v-list",class:this.classes,style:this.styles,attrs:Object(s["a"])({role:this.isInNav||this.isInMenu?void 0:"list"},this.attrs$)};return e(this.tag,this.setBackgroundColor(this.color,t),[this.$slots.default])}})},8925:function(e,t,i){var n=i("c6cd"),s=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return s.call(e)}),e.exports=n.inspectSource},"899c":function(e,t,i){},"8a79":function(e,t,i){"use strict";var n=i("23e7"),s=i("06cf").f,r=i("50c4"),a=i("577e"),o=i("5a34"),l=i("1d80"),h=i("ab13"),c=i("c430"),u="".endsWith,d=Math.min,p=h("endsWith"),f=!c&&!p&&!!function(){var e=s(String.prototype,"endsWith");return e&&!e.writable}();n({target:"String",proto:!0,forced:!f&&!p},{endsWith:function(e){var t=a(l(this));o(e);var i=arguments.length>1?arguments[1]:void 0,n=r(t.length),s=void 0===i?n:d(r(i),n),h=a(e);return u?u.call(t,h,s):t.slice(s-h.length,s)===h}})},"8aa5":function(e,t,i){"use strict";var n=i("6547").charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},"8aa7":function(e,t,i){var n=i("da84"),s=i("d039"),r=i("1c7e"),a=i("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,l=n.Int8Array;e.exports=!a||!s((function(){l(1)}))||!s((function(){new l(-1)}))||!r((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||s((function(){return 1!==new l(new o(2),1,void 0).length}))},"8adc":function(e,t,i){},"8b0d":function(e,t,i){},"8b9c":function(e,t,i){"use strict";i("a9e3"),i("94aa");var n=i("2b0e"),s=n["a"].extend({name:"translatable",props:{height:Number},data:function(){return{elOffsetTop:0,parallax:0,parallaxDist:0,percentScrolled:0,scrollTop:0,windowHeight:0,windowBottom:0}},computed:{imgHeight:function(){return this.objHeight()}},beforeDestroy:function(){window.removeEventListener("scroll",this.translate,!1),window.removeEventListener("resize",this.translate,!1)},methods:{calcDimensions:function(){var e=this.$el.getBoundingClientRect();this.scrollTop=window.pageYOffset,this.parallaxDist=this.imgHeight-this.height,this.elOffsetTop=e.top+this.scrollTop,this.windowHeight=window.innerHeight,this.windowBottom=this.scrollTop+this.windowHeight},listeners:function(){window.addEventListener("scroll",this.translate,!1),window.addEventListener("resize",this.translate,!1)},objHeight:function(){throw new Error("Not implemented !")},translate:function(){this.calcDimensions(),this.percentScrolled=(this.windowBottom-this.elOffsetTop)/(parseInt(this.height)+this.windowHeight),this.parallax=Math.round(this.parallaxDist*this.percentScrolled)}}}),r=i("58df"),a=Object(r["a"])(s);t["a"]=a.extend().extend({name:"v-parallax",props:{alt:{type:String,default:""},height:{type:[String,Number],default:500},src:String,srcset:String},data:function(){return{isBooted:!1}},computed:{styles:function(){return{display:"block",opacity:this.isBooted?1:0,transform:"translate(-50%, ".concat(this.parallax,"px)")}}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=this.$refs.img;t&&(t.complete?(this.translate(),this.listeners()):t.addEventListener("load",(function(){e.translate(),e.listeners()}),!1),this.isBooted=!0)},objHeight:function(){return this.$refs.img.naturalHeight}},render:function(e){var t={staticClass:"v-parallax__image",style:this.styles,attrs:{src:this.src,srcset:this.srcset,alt:this.alt},ref:"img"},i=e("div",{staticClass:"v-parallax__image-container"},[e("img",t)]),n=e("div",{staticClass:"v-parallax__content"},this.$slots.default);return e("div",{staticClass:"v-parallax",style:{height:"".concat(this.height,"px")},on:this.$listeners},[i,n])}})},"8c4f":function(e,t,i){"use strict";
/*!
  * vue-router v3.5.2
  * (c) 2021 Evan You
  * @license MIT
  */function n(e,t){0}function s(e,t){for(var i in t)e[i]=t[i];return e}var r=/[!'()*]/g,a=function(e){return"%"+e.charCodeAt(0).toString(16)},o=/%2C/g,l=function(e){return encodeURIComponent(e).replace(r,a).replace(o,",")};function h(e){try{return decodeURIComponent(e)}catch(t){0}return e}function c(e,t,i){void 0===t&&(t={});var n,s=i||d;try{n=s(e||"")}catch(o){n={}}for(var r in t){var a=t[r];n[r]=Array.isArray(a)?a.map(u):u(a)}return n}var u=function(e){return null==e||"object"===typeof e?e:String(e)};function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var i=e.replace(/\+/g," ").split("="),n=h(i.shift()),s=i.length>0?h(i.join("=")):null;void 0===t[n]?t[n]=s:Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]})),t):t}function p(e){var t=e?Object.keys(e).map((function(t){var i=e[t];if(void 0===i)return"";if(null===i)return l(t);if(Array.isArray(i)){var n=[];return i.forEach((function(e){void 0!==e&&(null===e?n.push(l(t)):n.push(l(t)+"="+l(e)))})),n.join("&")}return l(t)+"="+l(i)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var f=/\/?$/;function g(e,t,i,n){var s=n&&n.options.stringifyQuery,r=t.query||{};try{r=m(r)}catch(o){}var a={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:r,params:t.params||{},fullPath:v(t,s),matched:e?y(e):[]};return i&&(a.redirectedFrom=v(i,s)),Object.freeze(a)}function m(e){if(Array.isArray(e))return e.map(m);if(e&&"object"===typeof e){var t={};for(var i in e)t[i]=m(e[i]);return t}return e}var b=g(null,{path:"/"});function y(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function v(e,t){var i=e.path,n=e.query;void 0===n&&(n={});var s=e.hash;void 0===s&&(s="");var r=t||p;return(i||"/")+r(n)+s}function w(e,t,i){return t===b?e===t:!!t&&(e.path&&t.path?e.path.replace(f,"")===t.path.replace(f,"")&&(i||e.hash===t.hash&&S(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(i||e.hash===t.hash&&S(e.query,t.query)&&S(e.params,t.params))))}function S(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var i=Object.keys(e).sort(),n=Object.keys(t).sort();return i.length===n.length&&i.every((function(i,s){var r=e[i],a=n[s];if(a!==i)return!1;var o=t[i];return null==r||null==o?r===o:"object"===typeof r&&"object"===typeof o?S(r,o):String(r)===String(o)}))}function _(e,t){return 0===e.path.replace(f,"/").indexOf(t.path.replace(f,"/"))&&(!t.hash||e.hash===t.hash)&&k(e.query,t.query)}function k(e,t){for(var i in t)if(!(i in e))return!1;return!0}function T(e){for(var t=0;t<e.matched.length;t++){var i=e.matched[t];for(var n in i.instances){var s=i.instances[n],r=i.enteredCbs[n];if(s&&r){delete i.enteredCbs[n];for(var a=0;a<r.length;a++)s._isBeingDestroyed||r[a](s)}}}}var B={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var i=t.props,n=t.children,r=t.parent,a=t.data;a.routerView=!0;var o=r.$createElement,l=i.name,h=r.$route,c=r._routerViewCache||(r._routerViewCache={}),u=0,d=!1;while(r&&r._routerRoot!==r){var p=r.$vnode?r.$vnode.data:{};p.routerView&&u++,p.keepAlive&&r._directInactive&&r._inactive&&(d=!0),r=r.$parent}if(a.routerViewDepth=u,d){var f=c[l],g=f&&f.component;return g?(f.configProps&&x(g,a,f.route,f.configProps),o(g,a,n)):o()}var m=h.matched[u],b=m&&m.components[l];if(!m||!b)return c[l]=null,o();c[l]={component:b},a.registerRouteInstance=function(e,t){var i=m.instances[l];(t&&i!==e||!t&&i===e)&&(m.instances[l]=t)},(a.hook||(a.hook={})).prepatch=function(e,t){m.instances[l]=t.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[l]&&(m.instances[l]=e.componentInstance),T(h)};var y=m.props&&m.props[l];return y&&(s(c[l],{route:h,configProps:y}),x(b,a,h,y)),o(b,a,n)}};function x(e,t,i,n){var r=t.props=N(i,n);if(r){r=t.props=s({},r);var a=t.attrs=t.attrs||{};for(var o in r)e.props&&o in e.props||(a[o]=r[o],delete r[o])}}function N(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function C(e,t,i){var n=e.charAt(0);if("/"===n)return e;if("?"===n||"#"===n)return t+e;var s=t.split("/");i&&s[s.length-1]||s.pop();for(var r=e.replace(/^\//,"").split("/"),a=0;a<r.length;a++){var o=r[a];".."===o?s.pop():"."!==o&&s.push(o)}return""!==s[0]&&s.unshift(""),s.join("/")}function E(e){var t="",i="",n=e.indexOf("#");n>=0&&(t=e.slice(n),e=e.slice(0,n));var s=e.indexOf("?");return s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),{path:e,query:i,hash:t}}function P(e){return e.replace(/\/\//g,"/")}var L=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},O=Q,F=R,M=V,A=W,I=J,D=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function R(e,t){var i,n=[],s=0,r=0,a="",o=t&&t.delimiter||"/";while(null!=(i=D.exec(e))){var l=i[0],h=i[1],c=i.index;if(a+=e.slice(r,c),r=c+l.length,h)a+=h[1];else{var u=e[r],d=i[2],p=i[3],f=i[4],g=i[5],m=i[6],b=i[7];a&&(n.push(a),a="");var y=null!=d&&null!=u&&u!==d,v="+"===m||"*"===m,w="?"===m||"*"===m,S=i[2]||o,_=f||g;n.push({name:p||s++,prefix:d||"",delimiter:S,optional:w,repeat:v,partial:y,asterisk:!!b,pattern:_?$(_):b?".*":"[^"+j(S)+"]+?"})}}return r<e.length&&(a+=e.substr(r)),a&&n.push(a),n}function V(e,t){return W(R(e,t),t)}function H(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function G(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function W(e,t){for(var i=new Array(e.length),n=0;n<e.length;n++)"object"===typeof e[n]&&(i[n]=new RegExp("^(?:"+e[n].pattern+")$",U(t)));return function(t,n){for(var s="",r=t||{},a=n||{},o=a.pretty?H:encodeURIComponent,l=0;l<e.length;l++){var h=e[l];if("string"!==typeof h){var c,u=r[h.name];if(null==u){if(h.optional){h.partial&&(s+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(L(u)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var d=0;d<u.length;d++){if(c=o(u[d]),!i[l].test(c))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(c)+"`");s+=(0===d?h.prefix:h.delimiter)+c}}else{if(c=h.asterisk?G(u):o(u),!i[l].test(c))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+c+'"');s+=h.prefix+c}}else s+=h}return s}}function j(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function $(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function z(e,t){return e.keys=t,e}function U(e){return e&&e.sensitive?"":"i"}function X(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return z(e,t)}function Y(e,t,i){for(var n=[],s=0;s<e.length;s++)n.push(Q(e[s],t,i).source);var r=new RegExp("(?:"+n.join("|")+")",U(i));return z(r,t)}function q(e,t,i){return J(R(e,i),t,i)}function J(e,t,i){L(t)||(i=t||i,t=[]),i=i||{};for(var n=i.strict,s=!1!==i.end,r="",a=0;a<e.length;a++){var o=e[a];if("string"===typeof o)r+=j(o);else{var l=j(o.prefix),h="(?:"+o.pattern+")";t.push(o),o.repeat&&(h+="(?:"+l+h+")*"),h=o.optional?o.partial?l+"("+h+")?":"(?:"+l+"("+h+"))?":l+"("+h+")",r+=h}}var c=j(i.delimiter||"/"),u=r.slice(-c.length)===c;return n||(r=(u?r.slice(0,-c.length):r)+"(?:"+c+"(?=$))?"),r+=s?"$":n&&u?"":"(?="+c+"|$)",z(new RegExp("^"+r,U(i)),t)}function Q(e,t,i){return L(t)||(i=t||i,t=[]),i=i||{},e instanceof RegExp?X(e,t):L(e)?Y(e,t,i):q(e,t,i)}O.parse=F,O.compile=M,O.tokensToFunction=A,O.tokensToRegExp=I;var K=Object.create(null);function Z(e,t,i){t=t||{};try{var n=K[e]||(K[e]=O.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),n(t,{pretty:!0})}catch(s){return""}finally{delete t[0]}}function ee(e,t,i,n){var r="string"===typeof e?{path:e}:e;if(r._normalized)return r;if(r.name){r=s({},e);var a=r.params;return a&&"object"===typeof a&&(r.params=s({},a)),r}if(!r.path&&r.params&&t){r=s({},r),r._normalized=!0;var o=s(s({},t.params),r.params);if(t.name)r.name=t.name,r.params=o;else if(t.matched.length){var l=t.matched[t.matched.length-1].path;r.path=Z(l,o,"path "+t.path)}else 0;return r}var h=E(r.path||""),u=t&&t.path||"/",d=h.path?C(h.path,u,i||r.append):u,p=c(h.query,r.query,n&&n.options.parseQuery),f=r.hash||h.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:d,query:p,hash:f}}var te,ie=[String,Object],ne=[String,Array],se=function(){},re={name:"RouterLink",props:{to:{type:ie,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ne,default:"click"}},render:function(e){var t=this,i=this.$router,n=this.$route,r=i.resolve(this.to,n,this.append),a=r.location,o=r.route,l=r.href,h={},c=i.options.linkActiveClass,u=i.options.linkExactActiveClass,d=null==c?"router-link-active":c,p=null==u?"router-link-exact-active":u,f=null==this.activeClass?d:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,b=o.redirectedFrom?g(null,ee(o.redirectedFrom),null,i):o;h[m]=w(n,b,this.exactPath),h[f]=this.exact||this.exactPath?h[m]:_(n,b);var y=h[m]?this.ariaCurrentValue:null,v=function(e){ae(e)&&(t.replace?i.replace(a,se):i.push(a,se))},S={click:ae};Array.isArray(this.event)?this.event.forEach((function(e){S[e]=v})):S[this.event]=v;var k={class:h},T=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:l,route:o,navigate:v,isActive:h[f],isExactActive:h[m]});if(T){if(1===T.length)return T[0];if(T.length>1||!T.length)return 0===T.length?e():e("span",{},T)}if("a"===this.tag)k.on=S,k.attrs={href:l,"aria-current":y};else{var B=oe(this.$slots.default);if(B){B.isStatic=!1;var x=B.data=s({},B.data);for(var N in x.on=x.on||{},x.on){var C=x.on[N];N in S&&(x.on[N]=Array.isArray(C)?C:[C])}for(var E in S)E in x.on?x.on[E].push(S[E]):x.on[E]=v;var P=B.data.attrs=s({},B.data.attrs);P.href=l,P["aria-current"]=y}else k.on=S}return e(this.tag,k,this.$slots.default)}};function ae(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function oe(e){if(e)for(var t,i=0;i<e.length;i++){if(t=e[i],"a"===t.tag)return t;if(t.children&&(t=oe(t.children)))return t}}function le(e){if(!le.installed||te!==e){le.installed=!0,te=e;var t=function(e){return void 0!==e},i=function(e,i){var n=e.$options._parentVnode;t(n)&&t(n=n.data)&&t(n=n.registerRouteInstance)&&n(e,i)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,i(this,this)},destroyed:function(){i(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",B),e.component("RouterLink",re);var n=e.config.optionMergeStrategies;n.beforeRouteEnter=n.beforeRouteLeave=n.beforeRouteUpdate=n.created}}var he="undefined"!==typeof window;function ce(e,t,i,n,s){var r=t||[],a=i||Object.create(null),o=n||Object.create(null);e.forEach((function(e){ue(r,a,o,e,s)}));for(var l=0,h=r.length;l<h;l++)"*"===r[l]&&(r.push(r.splice(l,1)[0]),h--,l--);return{pathList:r,pathMap:a,nameMap:o}}function ue(e,t,i,n,s,r){var a=n.path,o=n.name;var l=n.pathToRegexpOptions||{},h=pe(a,s,l.strict);"boolean"===typeof n.caseSensitive&&(l.sensitive=n.caseSensitive);var c={path:h,regex:de(h,l),components:n.components||{default:n.component},alias:n.alias?"string"===typeof n.alias?[n.alias]:n.alias:[],instances:{},enteredCbs:{},name:o,parent:s,matchAs:r,redirect:n.redirect,beforeEnter:n.beforeEnter,meta:n.meta||{},props:null==n.props?{}:n.components?n.props:{default:n.props}};if(n.children&&n.children.forEach((function(n){var s=r?P(r+"/"+n.path):void 0;ue(e,t,i,n,c,s)})),t[c.path]||(e.push(c.path),t[c.path]=c),void 0!==n.alias)for(var u=Array.isArray(n.alias)?n.alias:[n.alias],d=0;d<u.length;++d){var p=u[d];0;var f={path:p,children:n.children};ue(e,t,i,f,s,c.path||"/")}o&&(i[o]||(i[o]=c))}function de(e,t){var i=O(e,[],t);return i}function pe(e,t,i){return i||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:P(t.path+"/"+e)}function fe(e,t){var i=ce(e),n=i.pathList,s=i.pathMap,r=i.nameMap;function a(e){ce(e,n,s,r)}function o(e,t){var i="object"!==typeof e?r[e]:void 0;ce([t||e],n,s,r,i),i&&i.alias.length&&ce(i.alias.map((function(e){return{path:e,children:[t]}})),n,s,r,i)}function l(){return n.map((function(e){return s[e]}))}function h(e,i,a){var o=ee(e,i,!1,t),l=o.name;if(l){var h=r[l];if(!h)return d(null,o);var c=h.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof o.params&&(o.params={}),i&&"object"===typeof i.params)for(var u in i.params)!(u in o.params)&&c.indexOf(u)>-1&&(o.params[u]=i.params[u]);return o.path=Z(h.path,o.params,'named route "'+l+'"'),d(h,o,a)}if(o.path){o.params={};for(var p=0;p<n.length;p++){var f=n[p],g=s[f];if(ge(g.regex,o.path,o.params))return d(g,o,a)}}return d(null,o)}function c(e,i){var n=e.redirect,s="function"===typeof n?n(g(e,i,null,t)):n;if("string"===typeof s&&(s={path:s}),!s||"object"!==typeof s)return d(null,i);var a=s,o=a.name,l=a.path,c=i.query,u=i.hash,p=i.params;if(c=a.hasOwnProperty("query")?a.query:c,u=a.hasOwnProperty("hash")?a.hash:u,p=a.hasOwnProperty("params")?a.params:p,o){r[o];return h({_normalized:!0,name:o,query:c,hash:u,params:p},void 0,i)}if(l){var f=me(l,e),m=Z(f,p,'redirect route with path "'+f+'"');return h({_normalized:!0,path:m,query:c,hash:u},void 0,i)}return d(null,i)}function u(e,t,i){var n=Z(i,t.params,'aliased route with path "'+i+'"'),s=h({_normalized:!0,path:n});if(s){var r=s.matched,a=r[r.length-1];return t.params=s.params,d(a,t)}return d(null,t)}function d(e,i,n){return e&&e.redirect?c(e,n||i):e&&e.matchAs?u(e,i,e.matchAs):g(e,i,n,t)}return{match:h,addRoute:o,getRoutes:l,addRoutes:a}}function ge(e,t,i){var n=t.match(e);if(!n)return!1;if(!i)return!0;for(var s=1,r=n.length;s<r;++s){var a=e.keys[s-1];a&&(i[a.name||"pathMatch"]="string"===typeof n[s]?h(n[s]):n[s])}return!0}function me(e,t){return C(e,t.parent?t.parent.path:"/",!0)}var be=he&&window.performance&&window.performance.now?window.performance:Date;function ye(){return be.now().toFixed(3)}var ve=ye();function we(){return ve}function Se(e){return ve=e}var _e=Object.create(null);function ke(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),i=s({},window.history.state);return i.key=we(),window.history.replaceState(i,"",t),window.addEventListener("popstate",xe),function(){window.removeEventListener("popstate",xe)}}function Te(e,t,i,n){if(e.app){var s=e.options.scrollBehavior;s&&e.app.$nextTick((function(){var r=Ne(),a=s.call(e,t,i,n?r:null);a&&("function"===typeof a.then?a.then((function(e){Me(e,r)})).catch((function(e){0})):Me(a,r))}))}}function Be(){var e=we();e&&(_e[e]={x:window.pageXOffset,y:window.pageYOffset})}function xe(e){Be(),e.state&&e.state.key&&Se(e.state.key)}function Ne(){var e=we();if(e)return _e[e]}function Ce(e,t){var i=document.documentElement,n=i.getBoundingClientRect(),s=e.getBoundingClientRect();return{x:s.left-n.left-t.x,y:s.top-n.top-t.y}}function Ee(e){return Oe(e.x)||Oe(e.y)}function Pe(e){return{x:Oe(e.x)?e.x:window.pageXOffset,y:Oe(e.y)?e.y:window.pageYOffset}}function Le(e){return{x:Oe(e.x)?e.x:0,y:Oe(e.y)?e.y:0}}function Oe(e){return"number"===typeof e}var Fe=/^#\d/;function Me(e,t){var i="object"===typeof e;if(i&&"string"===typeof e.selector){var n=Fe.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(n){var s=e.offset&&"object"===typeof e.offset?e.offset:{};s=Le(s),t=Ce(n,s)}else Ee(e)&&(t=Pe(e))}else i&&Ee(e)&&(t=Pe(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var Ae=he&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Ie(e,t){Be();var i=window.history;try{if(t){var n=s({},i.state);n.key=we(),i.replaceState(n,"",e)}else i.pushState({key:Se(ye())},"",e)}catch(r){window.location[t?"replace":"assign"](e)}}function De(e){Ie(e,!0)}function Re(e,t,i){var n=function(s){s>=e.length?i():e[s]?t(e[s],(function(){n(s+1)})):n(s+1)};n(0)}var Ve={redirected:2,aborted:4,cancelled:8,duplicated:16};function He(e,t){return $e(e,t,Ve.redirected,'Redirected when going from "'+e.fullPath+'" to "'+Ue(t)+'" via a navigation guard.')}function Ge(e,t){var i=$e(e,t,Ve.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return i.name="NavigationDuplicated",i}function We(e,t){return $e(e,t,Ve.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function je(e,t){return $e(e,t,Ve.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function $e(e,t,i,n){var s=new Error(n);return s._isRouter=!0,s.from=e,s.to=t,s.type=i,s}var ze=["params","query","hash"];function Ue(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return ze.forEach((function(i){i in e&&(t[i]=e[i])})),JSON.stringify(t,null,2)}function Xe(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Ye(e,t){return Xe(e)&&e._isRouter&&(null==t||e.type===t)}function qe(e){return function(t,i,n){var s=!1,r=0,a=null;Je(e,(function(e,t,i,o){if("function"===typeof e&&void 0===e.cid){s=!0,r++;var l,h=et((function(t){Ze(t)&&(t=t.default),e.resolved="function"===typeof t?t:te.extend(t),i.components[o]=t,r--,r<=0&&n()})),c=et((function(e){var t="Failed to resolve async component "+o+": "+e;a||(a=Xe(e)?e:new Error(t),n(a))}));try{l=e(h,c)}catch(d){c(d)}if(l)if("function"===typeof l.then)l.then(h,c);else{var u=l.component;u&&"function"===typeof u.then&&u.then(h,c)}}})),s||n()}}function Je(e,t){return Qe(e.map((function(e){return Object.keys(e.components).map((function(i){return t(e.components[i],e.instances[i],e,i)}))})))}function Qe(e){return Array.prototype.concat.apply([],e)}var Ke="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Ze(e){return e.__esModule||Ke&&"Module"===e[Symbol.toStringTag]}function et(e){var t=!1;return function(){var i=[],n=arguments.length;while(n--)i[n]=arguments[n];if(!t)return t=!0,e.apply(this,i)}}var tt=function(e,t){this.router=e,this.base=it(t),this.current=b,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function it(e){if(!e)if(he){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function nt(e,t){var i,n=Math.max(e.length,t.length);for(i=0;i<n;i++)if(e[i]!==t[i])break;return{updated:t.slice(0,i),activated:t.slice(i),deactivated:e.slice(i)}}function st(e,t,i,n){var s=Je(e,(function(e,n,s,r){var a=rt(e,t);if(a)return Array.isArray(a)?a.map((function(e){return i(e,n,s,r)})):i(a,n,s,r)}));return Qe(n?s.reverse():s)}function rt(e,t){return"function"!==typeof e&&(e=te.extend(e)),e.options[t]}function at(e){return st(e,"beforeRouteLeave",lt,!0)}function ot(e){return st(e,"beforeRouteUpdate",lt)}function lt(e,t){if(t)return function(){return e.apply(t,arguments)}}function ht(e){return st(e,"beforeRouteEnter",(function(e,t,i,n){return ct(e,i,n)}))}function ct(e,t,i){return function(n,s,r){return e(n,s,(function(e){"function"===typeof e&&(t.enteredCbs[i]||(t.enteredCbs[i]=[]),t.enteredCbs[i].push(e)),r(e)}))}}tt.prototype.listen=function(e){this.cb=e},tt.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},tt.prototype.onError=function(e){this.errorCbs.push(e)},tt.prototype.transitionTo=function(e,t,i){var n,s=this;try{n=this.router.match(e,this.current)}catch(a){throw this.errorCbs.forEach((function(e){e(a)})),a}var r=this.current;this.confirmTransition(n,(function(){s.updateRoute(n),t&&t(n),s.ensureURL(),s.router.afterHooks.forEach((function(e){e&&e(n,r)})),s.ready||(s.ready=!0,s.readyCbs.forEach((function(e){e(n)})))}),(function(e){i&&i(e),e&&!s.ready&&(Ye(e,Ve.redirected)&&r===b||(s.ready=!0,s.readyErrorCbs.forEach((function(t){t(e)}))))}))},tt.prototype.confirmTransition=function(e,t,i){var s=this,r=this.current;this.pending=e;var a=function(e){!Ye(e)&&Xe(e)&&(s.errorCbs.length?s.errorCbs.forEach((function(t){t(e)})):(n(!1,"uncaught error during route navigation:"),console.error(e))),i&&i(e)},o=e.matched.length-1,l=r.matched.length-1;if(w(e,r)&&o===l&&e.matched[o]===r.matched[l])return this.ensureURL(),a(Ge(r,e));var h=nt(this.current.matched,e.matched),c=h.updated,u=h.deactivated,d=h.activated,p=[].concat(at(u),this.router.beforeHooks,ot(c),d.map((function(e){return e.beforeEnter})),qe(d)),f=function(t,i){if(s.pending!==e)return a(We(r,e));try{t(e,r,(function(t){!1===t?(s.ensureURL(!0),a(je(r,e))):Xe(t)?(s.ensureURL(!0),a(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(a(He(r,e)),"object"===typeof t&&t.replace?s.replace(t):s.push(t)):i(t)}))}catch(n){a(n)}};Re(p,f,(function(){var i=ht(d),n=i.concat(s.router.resolveHooks);Re(n,f,(function(){if(s.pending!==e)return a(We(r,e));s.pending=null,t(e),s.router.app&&s.router.app.$nextTick((function(){T(e)}))}))}))},tt.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},tt.prototype.setupListeners=function(){},tt.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=b,this.pending=null};var ut=function(e){function t(t,i){e.call(this,t,i),this._startLocation=dt(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,i=t.options.scrollBehavior,n=Ae&&i;n&&this.listeners.push(ke());var s=function(){var i=e.current,s=dt(e.base);e.current===b&&s===e._startLocation||e.transitionTo(s,(function(e){n&&Te(t,e,i,!0)}))};window.addEventListener("popstate",s),this.listeners.push((function(){window.removeEventListener("popstate",s)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,i){var n=this,s=this,r=s.current;this.transitionTo(e,(function(e){Ie(P(n.base+e.fullPath)),Te(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,s=this,r=s.current;this.transitionTo(e,(function(e){De(P(n.base+e.fullPath)),Te(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.ensureURL=function(e){if(dt(this.base)!==this.current.fullPath){var t=P(this.base+this.current.fullPath);e?Ie(t):De(t)}},t.prototype.getCurrentLocation=function(){return dt(this.base)},t}(tt);function dt(e){var t=window.location.pathname,i=t.toLowerCase(),n=e.toLowerCase();return!e||i!==n&&0!==i.indexOf(P(n+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var pt=function(e){function t(t,i,n){e.call(this,t,i),n&&ft(this.base)||gt()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,i=t.options.scrollBehavior,n=Ae&&i;n&&this.listeners.push(ke());var s=function(){var t=e.current;gt()&&e.transitionTo(mt(),(function(i){n&&Te(e.router,i,t,!0),Ae||vt(i.fullPath)}))},r=Ae?"popstate":"hashchange";window.addEventListener(r,s),this.listeners.push((function(){window.removeEventListener(r,s)}))}},t.prototype.push=function(e,t,i){var n=this,s=this,r=s.current;this.transitionTo(e,(function(e){yt(e.fullPath),Te(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this,s=this,r=s.current;this.transitionTo(e,(function(e){vt(e.fullPath),Te(n.router,e,r,!1),t&&t(e)}),i)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;mt()!==t&&(e?yt(t):vt(t))},t.prototype.getCurrentLocation=function(){return mt()},t}(tt);function ft(e){var t=dt(e);if(!/^\/#/.test(t))return window.location.replace(P(e+"/#"+t)),!0}function gt(){var e=mt();return"/"===e.charAt(0)||(vt("/"+e),!1)}function mt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function bt(e){var t=window.location.href,i=t.indexOf("#"),n=i>=0?t.slice(0,i):t;return n+"#"+e}function yt(e){Ae?Ie(bt(e)):window.location.hash=e}function vt(e){Ae?De(bt(e)):window.location.replace(bt(e))}var wt=function(e){function t(t,i){e.call(this,t,i),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index+1).concat(e),n.index++,t&&t(e)}),i)},t.prototype.replace=function(e,t,i){var n=this;this.transitionTo(e,(function(e){n.stack=n.stack.slice(0,n.index).concat(e),t&&t(e)}),i)},t.prototype.go=function(e){var t=this,i=this.index+e;if(!(i<0||i>=this.stack.length)){var n=this.stack[i];this.confirmTransition(n,(function(){var e=t.current;t.index=i,t.updateRoute(n),t.router.afterHooks.forEach((function(t){t&&t(n,e)}))}),(function(e){Ye(e,Ve.duplicated)&&(t.index=i)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(tt),St=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=fe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Ae&&!1!==e.fallback,this.fallback&&(t="hash"),he||(t="abstract"),this.mode=t,t){case"history":this.history=new ut(this,e.base);break;case"hash":this.history=new pt(this,e.base,this.fallback);break;case"abstract":this.history=new wt(this,e.base);break;default:0}},_t={currentRoute:{configurable:!0}};function kt(e,t){return e.push(t),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function Tt(e,t,i){var n="hash"===i?"#"+t:t;return e?P(e+"/"+n):n}St.prototype.match=function(e,t,i){return this.matcher.match(e,t,i)},_t.currentRoute.get=function(){return this.history&&this.history.current},St.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var i=t.apps.indexOf(e);i>-1&&t.apps.splice(i,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var i=this.history;if(i instanceof ut||i instanceof pt){var n=function(e){var n=i.current,s=t.options.scrollBehavior,r=Ae&&s;r&&"fullPath"in e&&Te(t,e,n,!1)},s=function(e){i.setupListeners(),n(e)};i.transitionTo(i.getCurrentLocation(),s,s)}i.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},St.prototype.beforeEach=function(e){return kt(this.beforeHooks,e)},St.prototype.beforeResolve=function(e){return kt(this.resolveHooks,e)},St.prototype.afterEach=function(e){return kt(this.afterHooks,e)},St.prototype.onReady=function(e,t){this.history.onReady(e,t)},St.prototype.onError=function(e){this.history.onError(e)},St.prototype.push=function(e,t,i){var n=this;if(!t&&!i&&"undefined"!==typeof Promise)return new Promise((function(t,i){n.history.push(e,t,i)}));this.history.push(e,t,i)},St.prototype.replace=function(e,t,i){var n=this;if(!t&&!i&&"undefined"!==typeof Promise)return new Promise((function(t,i){n.history.replace(e,t,i)}));this.history.replace(e,t,i)},St.prototype.go=function(e){this.history.go(e)},St.prototype.back=function(){this.go(-1)},St.prototype.forward=function(){this.go(1)},St.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},St.prototype.resolve=function(e,t,i){t=t||this.history.current;var n=ee(e,t,i,this),s=this.match(n,t),r=s.redirectedFrom||s.fullPath,a=this.history.base,o=Tt(a,r,this.mode);return{location:n,route:s,href:o,normalizedTo:n,resolved:s}},St.prototype.getRoutes=function(){return this.matcher.getRoutes()},St.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==b&&this.history.transitionTo(this.history.getCurrentLocation())},St.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==b&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(St.prototype,_t),St.install=le,St.version="3.5.2",St.isNavigationFailure=Ye,St.NavigationFailureType=Ve,St.START_LOCATION=b,he&&window.Vue&&window.Vue.use(St),t["a"]=St},"8d4f":function(e,t,i){},"8da5":function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return h}));var n=i("80d2"),s=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],r=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},a=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],o=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function l(e){for(var t=Array(3),i=r,a=s,o=0;o<3;++o)t[o]=Math.round(255*Object(n["e"])(i(a[o][0]*e[0]+a[o][1]*e[1]+a[o][2]*e[2])));return(t[0]<<16)+(t[1]<<8)+(t[2]<<0)}function h(e){for(var t=[0,0,0],i=o,n=a,s=i((e>>16&255)/255),r=i((e>>8&255)/255),l=i((e>>0&255)/255),h=0;h<3;++h)t[h]=n[h][0]*s+n[h][1]*r+n[h][2]*l;return t}},"8dd9":function(e,t,i){"use strict";var n=i("5530"),s=(i("25a8"),i("7e2b")),r=i("a9ad"),a=i("c995"),o=i("24b2"),l=i("a236"),h=i("7560"),c=i("58df");t["a"]=Object(c["a"])(s["a"],r["a"],a["a"],o["a"],l["a"],h["a"]).extend({name:"v-sheet",props:{outlined:Boolean,shaped:Boolean,tag:{type:String,default:"div"}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])(Object(n["a"])({"v-sheet":!0,"v-sheet--outlined":this.outlined,"v-sheet--shaped":this.shaped},this.themeClasses),this.elevationClasses),this.roundedClasses)},styles:function(){return this.measurableStyles}},render:function(e){var t={class:this.classes,style:this.styles,on:this.listeners$};return e(this.tag,this.setBackgroundColor(this.color,t),this.$slots.default)}})},"8e36":function(e,t,i){"use strict";var n=i("5530"),s=i("ade3"),r=(i("a9e3"),i("c7cd"),i("6ece"),i("0789")),a=i("90a2"),o=i("a9ad"),l=i("fe6c"),h=i("a452"),c=i("7560"),u=i("80d2"),d=i("58df"),p=Object(d["a"])(o["a"],Object(l["b"])(["absolute","fixed","top","bottom"]),h["a"],c["a"]);t["a"]=p.extend({name:"v-progress-linear",directives:{intersect:a["a"]},props:{active:{type:Boolean,default:!0},backgroundColor:{type:String,default:null},backgroundOpacity:{type:[Number,String],default:null},bufferValue:{type:[Number,String],default:100},color:{type:String,default:"primary"},height:{type:[Number,String],default:4},indeterminate:Boolean,query:Boolean,reverse:Boolean,rounded:Boolean,stream:Boolean,striped:Boolean,value:{type:[Number,String],default:0}},data:function(){return{internalLazyValue:this.value||0,isVisible:!0}},computed:{__cachedBackground:function(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor||this.color,{staticClass:"v-progress-linear__background",style:this.backgroundStyle}))},__cachedBar:function(){return this.$createElement(this.computedTransition,[this.__cachedBarType])},__cachedBarType:function(){return this.indeterminate?this.__cachedIndeterminate:this.__cachedDeterminate},__cachedBuffer:function(){return this.$createElement("div",{staticClass:"v-progress-linear__buffer",style:this.styles})},__cachedDeterminate:function(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__determinate",style:{width:Object(u["f"])(this.normalizedValue,"%")}}))},__cachedIndeterminate:function(){return this.$createElement("div",{staticClass:"v-progress-linear__indeterminate",class:{"v-progress-linear__indeterminate--active":this.active}},[this.genProgressBar("long"),this.genProgressBar("short")])},__cachedStream:function(){return this.stream?this.$createElement("div",this.setTextColor(this.color,{staticClass:"v-progress-linear__stream",style:{width:Object(u["f"])(100-this.normalizedBuffer,"%")}})):null},backgroundStyle:function(){var e,t=null==this.backgroundOpacity?this.backgroundColor?1:.3:parseFloat(this.backgroundOpacity);return e={opacity:t},Object(s["a"])(e,this.isReversed?"right":"left",Object(u["f"])(this.normalizedValue,"%")),Object(s["a"])(e,"width",Object(u["f"])(Math.max(0,this.normalizedBuffer-this.normalizedValue),"%")),e},classes:function(){return Object(n["a"])({"v-progress-linear--absolute":this.absolute,"v-progress-linear--fixed":this.fixed,"v-progress-linear--query":this.query,"v-progress-linear--reactive":this.reactive,"v-progress-linear--reverse":this.isReversed,"v-progress-linear--rounded":this.rounded,"v-progress-linear--striped":this.striped,"v-progress-linear--visible":this.isVisible},this.themeClasses)},computedTransition:function(){return this.indeterminate?r["c"]:r["e"]},isReversed:function(){return this.$vuetify.rtl!==this.reverse},normalizedBuffer:function(){return this.normalize(this.bufferValue)},normalizedValue:function(){return this.normalize(this.internalLazyValue)},reactive:function(){return Boolean(this.$listeners.change)},styles:function(){var e={};return this.active||(e.height=0),this.indeterminate||100===parseFloat(this.normalizedBuffer)||(e.width=Object(u["f"])(this.normalizedBuffer,"%")),e}},methods:{genContent:function(){var e=Object(u["m"])(this,"default",{value:this.internalLazyValue});return e?this.$createElement("div",{staticClass:"v-progress-linear__content"},e):null},genListeners:function(){var e=this.$listeners;return this.reactive&&(e.click=this.onClick),e},genProgressBar:function(e){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__indeterminate",class:Object(s["a"])({},e,!0)}))},onClick:function(e){if(this.reactive){var t=this.$el.getBoundingClientRect(),i=t.width;this.internalValue=e.offsetX/i*100}},onObserve:function(e,t,i){this.isVisible=i},normalize:function(e){return e<0?0:e>100?100:parseFloat(e)}},render:function(e){var t={staticClass:"v-progress-linear",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":this.normalizedBuffer,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:{bottom:this.bottom?0:void 0,height:this.active?Object(u["f"])(this.height):0,top:this.top?0:void 0},on:this.genListeners()};return e("div",t,[this.__cachedStream,this.__cachedBackground,this.__cachedBuffer,this.__cachedBar,this.genContent()])}})},"8efc":function(e,t,i){},"8ff2":function(e,t,i){},"90a2":function(e,t,i){"use strict";var n=i("53ca");function s(e,t){if("undefined"!==typeof window&&"IntersectionObserver"in window){var i=t.modifiers||{},s=t.value,a="object"===Object(n["a"])(s)?s:{handler:s,options:{}},o=a.handler,l=a.options,h=new IntersectionObserver((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;if(e._observe){var s=t.some((function(e){return e.isIntersecting}));!o||i.quiet&&!e._observe.init||i.once&&!s&&e._observe.init||o(t,n,s),s&&i.once?r(e):e._observe.init=!0}}),l);e._observe={init:!1,observer:h},h.observe(e)}}function r(e){e._observe&&(e._observe.observer.unobserve(e),delete e._observe)}var a={inserted:s,unbind:r};t["a"]=a},"90e3":function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+n).toString(36)}},9112:function(e,t,i){var n=i("83ab"),s=i("9bf2"),r=i("5c6c");e.exports=n?function(e,t,i){return s.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},9263:function(e,t,i){"use strict";var n=i("577e"),s=i("ad6d"),r=i("9f7f"),a=i("5692"),o=i("7c73"),l=i("69f3").get,h=i("fce3"),c=i("107c"),u=RegExp.prototype.exec,d=a("native-string-replace",String.prototype.replace),p=u,f=function(){var e=/a/,t=/b*/g;return u.call(e,"a"),u.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),g=r.UNSUPPORTED_Y||r.BROKEN_CARET,m=void 0!==/()??/.exec("")[1],b=f||m||g||h||c;b&&(p=function(e){var t,i,r,a,h,c,b,y=this,v=l(y),w=n(e),S=v.raw;if(S)return S.lastIndex=y.lastIndex,t=p.call(S,w),y.lastIndex=S.lastIndex,t;var _=v.groups,k=g&&y.sticky,T=s.call(y),B=y.source,x=0,N=w;if(k&&(T=T.replace("y",""),-1===T.indexOf("g")&&(T+="g"),N=w.slice(y.lastIndex),y.lastIndex>0&&(!y.multiline||y.multiline&&"\n"!==w.charAt(y.lastIndex-1))&&(B="(?: "+B+")",N=" "+N,x++),i=new RegExp("^(?:"+B+")",T)),m&&(i=new RegExp("^"+B+"$(?!\\s)",T)),f&&(r=y.lastIndex),a=u.call(k?i:y,N),k?a?(a.input=a.input.slice(x),a[0]=a[0].slice(x),a.index=y.lastIndex,y.lastIndex+=a[0].length):y.lastIndex=0:f&&a&&(y.lastIndex=y.global?a.index+a[0].length:r),m&&a&&a.length>1&&d.call(a[0],i,(function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(a[h]=void 0)})),a&&_)for(a.groups=c=o(null),h=0;h<_.length;h++)b=_[h],c[b[0]]=a[b[1]];return a}),e.exports=p},"94aa":function(e,t,i){},"94ca":function(e,t,i){var n=i("d039"),s=/#|\.prototype\./,r=function(e,t){var i=o[a(e)];return i==h||i!=l&&("function"==typeof t?n(t):!!t)},a=r.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=r.data={},l=r.NATIVE="N",h=r.POLYFILL="P";e.exports=r},"95ed":function(e,t,i){},"96cf":function(e,t,i){var n=function(e){"use strict";var t,i=Object.prototype,n=i.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,i){return e[t]=i}}function h(e,t,i,n){var s=t&&t.prototype instanceof m?t:m,r=Object.create(s.prototype),a=new E(n||[]);return r._invoke=B(e,i,a),r}function c(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(O){return{type:"throw",arg:O}}}e.wrap=h;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",g={};function m(){}function b(){}function y(){}var v={};l(v,r,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(P([])));S&&S!==i&&n.call(S,r)&&(v=S);var _=y.prototype=m.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function i(s,r,a,o){var l=c(e[s],e,r);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"===typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,a,o)}),(function(e){i("throw",e,a,o)})):t.resolve(u).then((function(e){h.value=e,a(h)}),(function(e){return i("throw",e,a,o)}))}o(l.arg)}var s;function r(e,n){function r(){return new t((function(t,s){i(e,n,t,s)}))}return s=s?s.then(r,r):r()}this._invoke=r}function B(e,t,i){var n=u;return function(s,r){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===s)throw r;return L()}i.method=s,i.arg=r;while(1){var a=i.delegate;if(a){var o=x(a,i);if(o){if(o===g)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=f,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var l=c(e,t,i);if("normal"===l.type){if(n=i.done?f:d,l.arg===g)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=f,i.method="throw",i.arg=l.arg)}}}function x(e,i){var n=e.iterator[i.method];if(n===t){if(i.delegate=null,"throw"===i.method){if(e.iterator["return"]&&(i.method="return",i.arg=t,x(e,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var s=c(n,e.iterator,i.arg);if("throw"===s.type)return i.method="throw",i.arg=s.arg,i.delegate=null,g;var r=s.arg;return r?r.done?(i[e.resultName]=r.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(e){if(e){var i=e[r];if(i)return i.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function i(){while(++s<e.length)if(n.call(e,s))return i.value=e[s],i.done=!1,i;return i.value=t,i.done=!0,i};return a.next=a}}return{next:L}}function L(){return{value:t,done:!0}}return b.prototype=y,l(_,"constructor",y),l(y,"constructor",b),b.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(T.prototype),l(T.prototype,a,(function(){return this})),e.AsyncIterator=T,e.async=function(t,i,n,s,r){void 0===r&&(r=Promise);var a=new T(h(t,i,n,s),r);return e.isGeneratorFunction(i)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(_),l(_,o,"Generator"),l(_,r,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){while(t.length){var n=t.pop();if(n in e)return i.value=n,i.done=!1,i}return i.done=!0,i}},e.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function s(n,s){return o.type="throw",o.arg=e,i.next=n,s&&(i.method="next",i.arg=t),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(l&&h){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var r=s;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),C(i),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var n=i.completion;if("throw"===n.type){var s=n.arg;C(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,n){return this.delegate={iterator:P(e),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=n}catch(s){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},9911:function(e,t,i){"use strict";var n=i("23e7"),s=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("link")},{link:function(e){return s(this,"a","href",e)}})},"99af":function(e,t,i){"use strict";var n=i("23e7"),s=i("d039"),r=i("e8b5"),a=i("861d"),o=i("7b0b"),l=i("50c4"),h=i("8418"),c=i("65f0"),u=i("1dde"),d=i("b622"),p=i("2d00"),f=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",b=p>=51||!s((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),y=u("concat"),v=function(e){if(!a(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},w=!b||!y;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,i,n,s,r,a=o(this),u=c(a,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?a:arguments[t],v(r)){if(s=l(r.length),d+s>g)throw TypeError(m);for(i=0;i<s;i++,d++)i in r&&h(u,d,r[i])}else{if(d>=g)throw TypeError(m);h(u,d++,r)}return u.length=d,u}})},"99d9":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return l}));var n=i("b0af"),s=i("80d2"),r=Object(s["h"])("v-card__actions"),a=Object(s["h"])("v-card__subtitle"),o=Object(s["h"])("v-card__text"),l=Object(s["h"])("v-card__title");n["a"]},"9a1f":function(e,t,i){var n=i("825a"),s=i("35a1");e.exports=function(e,t){var i=arguments.length<2?s(e):t;if("function"!=typeof i)throw TypeError(String(e)+" is not iterable");return n(i.call(e))}},"9a8c":function(e,t,i){"use strict";var n=i("ebb5"),s=i("145e"),r=n.aTypedArray,a=n.exportTypedArrayMethod;a("copyWithin",(function(e,t){return s.call(r(this),e,t,arguments.length>2?arguments[2]:void 0)}))},"9bdd":function(e,t,i){var n=i("825a"),s=i("2a62");e.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(a){s(e,"throw",a)}}},"9bf2":function(e,t,i){var n=i("83ab"),s=i("0cfb"),r=i("825a"),a=i("a04b"),o=Object.defineProperty;t.f=n?o:function(e,t,i){if(r(e),t=a(t),r(i),s)try{return o(e,t,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},"9d26":function(e,t,i){"use strict";var n=i("132d");t["a"]=n["a"]},"9d65":function(e,t,i){"use strict";var n=i("d9bd"),s=i("2b0e");t["a"]=s["a"].extend().extend({name:"bootable",props:{eager:Boolean},data:function(){return{isBooted:!1}},computed:{hasContent:function(){return this.isBooted||this.eager||this.isActive}},watch:{isActive:function(){this.isBooted=!0}},created:function(){"lazy"in this.$attrs&&Object(n["e"])("lazy",this)},methods:{showLazyContent:function(e){return this.hasContent&&e?e():[this.$createElement()]}}})},"9e29":function(e,t,i){},"9ed3":function(e,t,i){"use strict";var n=i("ae93").IteratorPrototype,s=i("7c73"),r=i("5c6c"),a=i("d44e"),o=i("3f8c"),l=function(){return this};e.exports=function(e,t,i){var h=t+" Iterator";return e.prototype=s(n,{next:r(1,i)}),a(e,h,!1,!0),o[h]=l,e}},"9f7f":function(e,t,i){var n=i("d039"),s=i("da84"),r=s.RegExp;t.UNSUPPORTED_Y=n((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a04b:function(e,t,i){var n=i("c04e"),s=i("d9b5");e.exports=function(e){var t=n(e,"string");return s(t)?t:String(t)}},a078:function(e,t,i){var n=i("7b0b"),s=i("50c4"),r=i("9a1f"),a=i("35a1"),o=i("e95a"),l=i("0366"),h=i("ebb5").aTypedArrayConstructor;e.exports=function(e){var t,i,c,u,d,p,f=n(e),g=arguments.length,m=g>1?arguments[1]:void 0,b=void 0!==m,y=a(f);if(void 0!=y&&!o(y)){d=r(f,y),p=d.next,f=[];while(!(u=p.call(d)).done)f.push(u.value)}for(b&&g>2&&(m=l(m,arguments[2],2)),i=s(f.length),c=new(h(this))(i),t=0;i>t;t++)c[t]=b?m(f[t],t):f[t];return c}},a15b:function(e,t,i){"use strict";var n=i("23e7"),s=i("44ad"),r=i("fc6a"),a=i("a640"),o=[].join,l=s!=Object,h=a("join",",");n({target:"Array",proto:!0,forced:l||!h},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},a236:function(e,t,i){"use strict";var n=i("ade3"),s=i("b85c"),r=(i("ac1f"),i("1276"),i("a15b"),i("2b0e"));t["a"]=r["a"].extend({name:"roundable",props:{rounded:[Boolean,String],tile:Boolean},computed:{roundedClasses:function(){var e=[],t="string"===typeof this.rounded?String(this.rounded):!0===this.rounded;if(this.tile)e.push("rounded-0");else if("string"===typeof t){var i,r=t.split(" "),a=Object(s["a"])(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;e.push("rounded-".concat(o))}}catch(l){a.e(l)}finally{a.f()}}else t&&e.push("rounded");return e.length>0?Object(n["a"])({},e.join(" "),!0):{}}}})},a293:function(e,t,i){"use strict";var n=i("53ca"),s=i("dd89");function r(){return!0}function a(e,t,i){if(!e||!1===o(e,i))return!1;var r=Object(s["a"])(t);if(r instanceof ShadowRoot&&r.host===e.target)return!1;var a=("object"===Object(n["a"])(i.value)&&i.value.include||function(){return[]})();return a.push(t),!a.some((function(t){return t.contains(e.target)}))}function o(e,t){var i="object"===Object(n["a"])(t.value)&&t.value.closeConditional||r;return i(e)}function l(e,t,i){var n="function"===typeof i.value?i.value:i.value.handler;t._clickOutside.lastMousedownWasOutside&&a(e,t,i)&&setTimeout((function(){o(e,i)&&n&&n(e)}),0)}function h(e,t){var i=Object(s["a"])(e);t(document.body),i instanceof ShadowRoot&&t(i)}var c={inserted:function(e,t){var i=function(i){return l(i,e,t)},n=function(i){e._clickOutside.lastMousedownWasOutside=a(i,e,t)};h(e,(function(e){e.addEventListener("click",i,!0),e.addEventListener("mousedown",n,!0)})),e._clickOutside={lastMousedownWasOutside:!0,onClick:i,onMousedown:n}},unbind:function(e){e._clickOutside&&(h(e,(function(t){t&&e._clickOutside&&(t.removeEventListener("click",e._clickOutside.onClick,!0),t.removeEventListener("mousedown",e._clickOutside.onMousedown,!0))})),delete e._clickOutside)}};t["a"]=c},a2bf:function(e,t,i){"use strict";var n=i("e8b5"),s=i("50c4"),r=i("0366"),a=function(e,t,i,o,l,h,c,u){var d,p=l,f=0,g=!!c&&r(c,u,3);while(f<o){if(f in i){if(d=g?g(i[f],f,t):i[f],h>0&&n(d))p=a(e,t,d,s(d.length),p,h-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=d}p++}f++}return p};e.exports=a},a434:function(e,t,i){"use strict";var n=i("23e7"),s=i("23cb"),r=i("a691"),a=i("50c4"),o=i("7b0b"),l=i("65f0"),h=i("8418"),c=i("1dde"),u=c("splice"),d=Math.max,p=Math.min,f=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,n,c,u,m,b,y=o(this),v=a(y.length),w=s(e,v),S=arguments.length;if(0===S?i=n=0:1===S?(i=0,n=v-w):(i=S-2,n=p(d(r(t),0),v-w)),v+i-n>f)throw TypeError(g);for(c=l(y,n),u=0;u<n;u++)m=w+u,m in y&&h(c,u,y[m]);if(c.length=n,i<n){for(u=w;u<v-n;u++)m=u+n,b=u+i,m in y?y[b]=y[m]:delete y[b];for(u=v;u>v-n+i;u--)delete y[u-1]}else if(i>n)for(u=v-n;u>w;u--)m=u+n-1,b=u+i-1,m in y?y[b]=y[m]:delete y[b];for(u=0;u<i;u++)y[u+w]=arguments[u+2];return y.length=v-n+i,c}})},a452:function(e,t,i){"use strict";var n=i("ade3"),s=i("2b0e");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change";return s["a"].extend({name:"proxyable",model:{prop:e,event:t},props:Object(n["a"])({},e,{required:!1}),data:function(){return{internalLazyValue:this[e]}},computed:{internalValue:{get:function(){return this.internalLazyValue},set:function(e){e!==this.internalLazyValue&&(this.internalLazyValue=e,this.$emit(t,e))}}},watch:Object(n["a"])({},e,(function(e){this.internalLazyValue=e}))})}var a=r();t["a"]=a},a4b4:function(e,t,i){var n=i("342f");e.exports=/web0s(?!.*chrome)/i.test(n)},a4d3:function(e,t,i){"use strict";var n=i("23e7"),s=i("da84"),r=i("d066"),a=i("c430"),o=i("83ab"),l=i("4930"),h=i("d039"),c=i("5135"),u=i("e8b5"),d=i("861d"),p=i("d9b5"),f=i("825a"),g=i("7b0b"),m=i("fc6a"),b=i("a04b"),y=i("577e"),v=i("5c6c"),w=i("7c73"),S=i("df75"),_=i("241c"),k=i("057f"),T=i("7418"),B=i("06cf"),x=i("9bf2"),N=i("d1e7"),C=i("9112"),E=i("6eeb"),P=i("5692"),L=i("f772"),O=i("d012"),F=i("90e3"),M=i("b622"),A=i("e538"),I=i("746f"),D=i("d44e"),R=i("69f3"),V=i("b727").forEach,H=L("hidden"),G="Symbol",W="prototype",j=M("toPrimitive"),$=R.set,z=R.getterFor(G),U=Object[W],X=s.Symbol,Y=r("JSON","stringify"),q=B.f,J=x.f,Q=k.f,K=N.f,Z=P("symbols"),ee=P("op-symbols"),te=P("string-to-symbol-registry"),ie=P("symbol-to-string-registry"),ne=P("wks"),se=s.QObject,re=!se||!se[W]||!se[W].findChild,ae=o&&h((function(){return 7!=w(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=q(U,t);n&&delete U[t],J(e,t,i),n&&e!==U&&J(U,t,n)}:J,oe=function(e,t){var i=Z[e]=w(X[W]);return $(i,{type:G,tag:e,description:t}),o||(i.description=t),i},le=function(e,t,i){e===U&&le(ee,t,i),f(e);var n=b(t);return f(i),c(Z,n)?(i.enumerable?(c(e,H)&&e[H][n]&&(e[H][n]=!1),i=w(i,{enumerable:v(0,!1)})):(c(e,H)||J(e,H,v(1,{})),e[H][n]=!0),ae(e,n,i)):J(e,n,i)},he=function(e,t){f(e);var i=m(t),n=S(i).concat(fe(i));return V(n,(function(t){o&&!ue.call(i,t)||le(e,t,i[t])})),e},ce=function(e,t){return void 0===t?w(e):he(w(e),t)},ue=function(e){var t=b(e),i=K.call(this,t);return!(this===U&&c(Z,t)&&!c(ee,t))&&(!(i||!c(this,t)||!c(Z,t)||c(this,H)&&this[H][t])||i)},de=function(e,t){var i=m(e),n=b(t);if(i!==U||!c(Z,n)||c(ee,n)){var s=q(i,n);return!s||!c(Z,n)||c(i,H)&&i[H][n]||(s.enumerable=!0),s}},pe=function(e){var t=Q(m(e)),i=[];return V(t,(function(e){c(Z,e)||c(O,e)||i.push(e)})),i},fe=function(e){var t=e===U,i=Q(t?ee:m(e)),n=[];return V(i,(function(e){!c(Z,e)||t&&!c(U,e)||n.push(Z[e])})),n};if(l||(X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?y(arguments[0]):void 0,t=F(e),i=function(e){this===U&&i.call(ee,e),c(this,H)&&c(this[H],t)&&(this[H][t]=!1),ae(this,t,v(1,e))};return o&&re&&ae(U,t,{configurable:!0,set:i}),oe(t,e)},E(X[W],"toString",(function(){return z(this).tag})),E(X,"withoutSetter",(function(e){return oe(F(e),e)})),N.f=ue,x.f=le,B.f=de,_.f=k.f=pe,T.f=fe,A.f=function(e){return oe(M(e),e)},o&&(J(X[W],"description",{configurable:!0,get:function(){return z(this).description}}),a||E(U,"propertyIsEnumerable",ue,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:X}),V(S(ne),(function(e){I(e)})),n({target:G,stat:!0,forced:!l},{for:function(e){var t=y(e);if(c(te,t))return te[t];var i=X(t);return te[t]=i,ie[i]=t,i},keyFor:function(e){if(!p(e))throw TypeError(e+" is not a symbol");if(c(ie,e))return ie[e]},useSetter:function(){re=!0},useSimple:function(){re=!1}}),n({target:"Object",stat:!0,forced:!l,sham:!o},{create:ce,defineProperty:le,defineProperties:he,getOwnPropertyDescriptor:de}),n({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:pe,getOwnPropertySymbols:fe}),n({target:"Object",stat:!0,forced:h((function(){T.f(1)}))},{getOwnPropertySymbols:function(e){return T.f(g(e))}}),Y){var ge=!l||h((function(){var e=X();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}));n({target:"JSON",stat:!0,forced:ge},{stringify:function(e,t,i){var n,s=[e],r=1;while(arguments.length>r)s.push(arguments[r++]);if(n=t,(d(t)||void 0!==e)&&!p(e))return u(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!p(t))return t}),s[1]=t,Y.apply(null,s)}})}X[W][j]||C(X[W],j,X[W].valueOf),D(X,G),O[H]=!0},a523:function(e,t,i){"use strict";i("4de4"),i("b64b"),i("2ca0"),i("99af"),i("20f6"),i("4b85");var n=i("e8f2"),s=i("d9f7");t["a"]=Object(n["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(e,t){var i,n=t.props,r=t.data,a=t.children,o=r.attrs;return o&&(r.attrs={},i=Object.keys(o).filter((function(e){if("slot"===e)return!1;var t=o[e];return e.startsWith("data-")?(r.attrs[e]=t,!1):t||"string"===typeof t}))),n.id&&(r.domProps=r.domProps||{},r.domProps.id=n.id),e(n.tag,Object(s["a"])(r,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(i||[])}),a)}})},a630:function(e,t,i){var n=i("23e7"),s=i("4df4"),r=i("1c7e"),a=!r((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:a},{from:s})},a640:function(e,t,i){"use strict";var n=i("d039");e.exports=function(e,t){var i=[][e];return!!i&&n((function(){i.call(null,t||function(){throw 1},1)}))}},a691:function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},a79d:function(e,t,i){"use strict";var n=i("23e7"),s=i("c430"),r=i("fea9"),a=i("d039"),o=i("d066"),l=i("4840"),h=i("cdf9"),c=i("6eeb"),u=!!r&&a((function(){r.prototype["finally"].call({then:function(){}},(function(){}))}));if(n({target:"Promise",proto:!0,real:!0,forced:u},{finally:function(e){var t=l(this,o("Promise")),i="function"==typeof e;return this.then(i?function(i){return h(t,e()).then((function(){return i}))}:e,i?function(i){return h(t,e()).then((function(){throw i}))}:e)}}),!s&&"function"==typeof r){var d=o("Promise").prototype["finally"];r.prototype["finally"]!==d&&c(r.prototype,"finally",d,{unsafe:!0})}},a975:function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").every,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("every",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},a981:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9ad:function(e,t,i){"use strict";var n=i("3835"),s=i("ade3"),r=i("5530"),a=(i("ac1f"),i("1276"),i("498a"),i("d3b7"),i("25f0"),i("2b0e")),o=i("d9bd"),l=i("7bc6");t["a"]=a["a"].extend({name:"colorable",props:{color:String},methods:{setBackgroundColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t.style?(Object(o["b"])("style must be an object",this),t):"string"===typeof t.class?(Object(o["b"])("class must be an object",this),t):(Object(l["d"])(e)?t.style=Object(r["a"])(Object(r["a"])({},t.style),{},{"background-color":"".concat(e),"border-color":"".concat(e)}):e&&(t.class=Object(r["a"])(Object(r["a"])({},t.class),{},Object(s["a"])({},e,!0))),t)},setTextColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"===typeof t.style)return Object(o["b"])("style must be an object",this),t;if("string"===typeof t.class)return Object(o["b"])("class must be an object",this),t;if(Object(l["d"])(e))t.style=Object(r["a"])(Object(r["a"])({},t.style),{},{color:"".concat(e),"caret-color":"".concat(e)});else if(e){var i=e.toString().trim().split(" ",2),a=Object(n["a"])(i,2),h=a[0],c=a[1];t.class=Object(r["a"])(Object(r["a"])({},t.class),{},Object(s["a"])({},h+"--text",!0)),c&&(t.class["text--"+c]=!0)}return t}}})},a9e3:function(e,t,i){"use strict";var n=i("83ab"),s=i("da84"),r=i("94ca"),a=i("6eeb"),o=i("5135"),l=i("c6b6"),h=i("7156"),c=i("d9b5"),u=i("c04e"),d=i("d039"),p=i("7c73"),f=i("241c").f,g=i("06cf").f,m=i("9bf2").f,b=i("58a8").trim,y="Number",v=s[y],w=v.prototype,S=l(p(w))==y,_=function(e){if(c(e))throw TypeError("Cannot convert a Symbol value to a number");var t,i,n,s,r,a,o,l,h=u(e,"number");if("string"==typeof h&&h.length>2)if(h=b(h),t=h.charCodeAt(0),43===t||45===t){if(i=h.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(h.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+h}for(r=h.slice(2),a=r.length,o=0;o<a;o++)if(l=r.charCodeAt(o),l<48||l>s)return NaN;return parseInt(r,n)}return+h};if(r(y,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var k,T=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof T&&(S?d((function(){w.valueOf.call(i)})):l(i)!=y)?h(new v(_(t)),i,T):_(t)},B=n?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;B.length>x;x++)o(v,k=B[x])&&!o(T,k)&&m(T,k,g(v,k));T.prototype=w,w.constructor=T,a(s,y,T)}},ab13:function(e,t,i){var n=i("b622"),s=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[s]=!1,"/./"[e](t)}catch(n){}}return!1}},ac1f:function(e,t,i){"use strict";var n=i("23e7"),s=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},ad6d:function(e,t,i){"use strict";var n=i("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},adda:function(e,t,i){"use strict";var n=i("53ca"),s=(i("a9e3"),i("a15b"),i("8a79"),i("2ca0"),i("8efc"),i("90a2")),r=(i("36a7"),i("24b2")),a=i("58df"),o=Object(a["a"])(r["a"]).extend({name:"v-responsive",props:{aspectRatio:[String,Number],contentClass:String},computed:{computedAspectRatio:function(){return Number(this.aspectRatio)},aspectStyle:function(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer:function(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-responsive__content",class:this.contentClass},this.$slots.default)}},render:function(e){return e("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),l=o,h=i("7560"),c=i("d9f7"),u=i("d9bd"),d="undefined"!==typeof window&&"IntersectionObserver"in window;t["a"]=Object(a["a"])(l,h["a"]).extend({name:"v-img",directives:{intersect:s["a"]},props:{alt:String,contain:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:function(){return{root:void 0,rootMargin:void 0,threshold:void 0}}},position:{type:String,default:"center center"},sizes:String,src:{type:[String,Object],default:""},srcset:String,transition:{type:[Boolean,String],default:"fade-transition"}},data:function(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0,naturalWidth:void 0,hasError:!1}},computed:{computedAspectRatio:function(){return Number(this.normalisedSrc.aspect||this.calculatedAspectRatio)},normalisedSrc:function(){return this.src&&"object"===Object(n["a"])(this.src)?{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect)}:{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||0)}},__cachedImage:function(){if(!(this.normalisedSrc.src||this.normalisedSrc.lazySrc||this.gradient))return[];var e=[],t=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&e.push("linear-gradient(".concat(this.gradient,")")),t&&e.push('url("'.concat(t,'")'));var i=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:e.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[i]):i}},watch:{src:function(){this.isLoading?this.loadImage():this.init(void 0,void 0,!0)},"$vuetify.breakpoint.width":"getSrc"},mounted:function(){this.init()},methods:{init:function(e,t,i){if(!d||i||this.eager){if(this.normalisedSrc.lazySrc){var n=new Image;n.src=this.normalisedSrc.lazySrc,this.pollForSize(n,null)}this.normalisedSrc.src&&this.loadImage()}},onLoad:function(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src),this.image&&(this.normalisedSrc.src.endsWith(".svg")||this.normalisedSrc.src.startsWith("data:image/svg+xml"))&&(this.image.naturalHeight&&this.image.naturalWidth?(this.naturalWidth=this.image.naturalWidth,this.calculatedAspectRatio=this.image.naturalWidth/this.image.naturalHeight):this.calculatedAspectRatio=1)},onError:function(){this.hasError=!0,this.$emit("error",this.src)},getSrc:function(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage:function(){var e=this,t=new Image;this.image=t,t.onload=function(){t.decode?t.decode().catch((function(t){Object(u["c"])("Failed to decode image, trying to render anyway\n\n"+"src: ".concat(e.normalisedSrc.src)+(t.message?"\nOriginal error: ".concat(t.message):""),e)})).then(e.onLoad):e.onLoad()},t.onerror=this.onError,this.hasError=!1,this.sizes&&(t.sizes=this.sizes),this.normalisedSrc.srcset&&(t.srcset=this.normalisedSrc.srcset),t.src=this.normalisedSrc.src,this.$emit("loadstart",this.normalisedSrc.src),this.aspectRatio||this.pollForSize(t),this.getSrc()},pollForSize:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=function n(){var s=e.naturalHeight,r=e.naturalWidth;s||r?(t.naturalWidth=r,t.calculatedAspectRatio=r/s):e.complete||!t.isLoading||t.hasError||null==i||setTimeout(n,i)};n()},genContent:function(){var e=l.options.methods.genContent.call(this);return this.naturalWidth&&this._b(e.data,"div",{style:{width:"".concat(this.naturalWidth,"px")}}),e},__genPlaceholder:function(){if(this.$slots.placeholder){var e=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},this.$slots.placeholder)]:[];return this.transition?this.$createElement("transition",{props:{appear:!0,name:this.transition}},e):e[0]}}},render:function(e){var t=l.options.render.call(this,e),i=Object(c["a"])(t.data,{staticClass:"v-image",attrs:{"aria-label":this.alt,role:this.alt?"img":void 0},class:this.themeClasses,directives:d?[{name:"intersect",modifiers:{once:!0},value:{handler:this.init,options:this.options}}]:void 0});return t.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],e(t.tag,i,t.children)}})},addb:function(e,t){var i=Math.floor,n=function(e,t){var a=e.length,o=i(a/2);return a<8?s(e,t):r(n(e.slice(0,o),t),n(e.slice(o),t),t)},s=function(e,t){var i,n,s=e.length,r=1;while(r<s){n=r,i=e[r];while(n&&t(e[n-1],i)>0)e[n]=e[--n];n!==r++&&(e[n]=i)}return e},r=function(e,t,i){var n=e.length,s=t.length,r=0,a=0,o=[];while(r<n||a<s)r<n&&a<s?o.push(i(e[r],t[a])<=0?e[r++]:t[a++]):o.push(r<n?e[r++]:t[a++]);return o};e.exports=n},ade3:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return n}))},ae93:function(e,t,i){"use strict";var n,s,r,a=i("d039"),o=i("e163"),l=i("9112"),h=i("5135"),c=i("b622"),u=i("c430"),d=c("iterator"),p=!1,f=function(){return this};[].keys&&(r=[].keys(),"next"in r?(s=o(o(r)),s!==Object.prototype&&(n=s)):p=!0);var g=void 0==n||a((function(){var e={};return n[d].call(e)!==e}));g&&(n={}),u&&!g||h(n,d)||l(n,d,f),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:p}},af03:function(e,t,i){var n=i("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},af2b:function(e,t,i){"use strict";i("c96a");var n=i("2b0e");t["a"]=n["a"].extend({name:"sizeable",props:{large:Boolean,small:Boolean,xLarge:Boolean,xSmall:Boolean},computed:{medium:function(){return Boolean(!this.xSmall&&!this.small&&!this.large&&!this.xLarge)},sizeableClasses:function(){return{"v-size--x-small":this.xSmall,"v-size--small":this.small,"v-size--default":this.medium,"v-size--large":this.large,"v-size--x-large":this.xLarge}}}})},afd9:function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("c7cd"),i("8308"),i("3a66")),r=i("a9ad"),a=i("7560"),o=i("58df"),l=i("80d2");t["a"]=Object(o["a"])(Object(s["a"])("bar",["height","window"]),r["a"],a["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes:function(){return Object(n["a"])({"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window},this.themeClasses)},computedHeight:function(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles:function(){return{height:Object(l["f"])(this.computedHeight)}}},methods:{updateApplication:function(){return this.$el?this.$el.clientHeight:this.computedHeight}},render:function(e){var t={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return e("div",this.setBackgroundColor(this.color,t),Object(l["m"])(this))}})},b041:function(e,t,i){"use strict";var n=i("00ee"),s=i("f5df");e.exports=n?{}.toString:function(){return"[object "+s(this)+"]"}},b0af:function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("0481"),i("615b"),i("10d2")),r=i("297c"),a=i("1c87"),o=i("58df");t["a"]=Object(o["a"])(r["a"],a["a"],s["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({"v-card":!0},a["a"].options.computed.classes.call(this)),{},{"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised},s["a"].options.computed.classes.call(this))},styles:function(){var e=Object(n["a"])({},s["a"].options.computed.styles.call(this));return this.img&&(e.background='url("'.concat(this.img,'") center center / cover no-repeat')),e}},methods:{genProgress:function(){var e=r["a"].options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render:function(e){var t=this.generateRouteLink(),i=t.tag,n=t.data;return n.style=this.styles,this.isClickable&&(n.attrs=n.attrs||{},n.attrs.tabindex=0),e(i,this.setBackgroundColor(this.color,n),[this.genProgress(),this.$slots.default])}})},b0c0:function(e,t,i){var n=i("83ab"),s=i("9bf2").f,r=Function.prototype,a=r.toString,o=/^\s*function ([^ (]*)/,l="name";n&&!(l in r)&&s(r,l,{configurable:!0,get:function(){try{return a.call(this).match(o)[1]}catch(e){return""}}})},b39a:function(e,t,i){"use strict";var n=i("da84"),s=i("ebb5"),r=i("d039"),a=n.Int8Array,o=s.aTypedArray,l=s.exportTypedArrayMethod,h=[].toLocaleString,c=[].slice,u=!!a&&r((function(){h.call(new a(1))})),d=r((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!r((function(){a.prototype.toLocaleString.call([1,2])}));l("toLocaleString",(function(){return h.apply(u?c.call(o(this)):o(this),arguments)}),d)},b575:function(e,t,i){var n,s,r,a,o,l,h,c,u=i("da84"),d=i("06cf").f,p=i("2cf4").set,f=i("1cdc"),g=i("d4c3"),m=i("a4b4"),b=i("605d"),y=u.MutationObserver||u.WebKitMutationObserver,v=u.document,w=u.process,S=u.Promise,_=d(u,"queueMicrotask"),k=_&&_.value;k||(n=function(){var e,t;b&&(e=w.domain)&&e.exit();while(s){t=s.fn,s=s.next;try{t()}catch(i){throw s?a():r=void 0,i}}r=void 0,e&&e.enter()},f||b||m||!y||!v?!g&&S&&S.resolve?(h=S.resolve(void 0),h.constructor=S,c=h.then,a=function(){c.call(h,n)}):a=b?function(){w.nextTick(n)}:function(){p.call(u,n)}:(o=!0,l=v.createTextNode(""),new y(n).observe(l,{characterData:!0}),a=function(){l.data=o=!o})),e.exports=k||function(e){var t={fn:e,next:void 0};r&&(r.next=t),s||(s=t,a()),r=t}},b5b6:function(e,t,i){},b622:function(e,t,i){var n=i("da84"),s=i("5692"),r=i("5135"),a=i("90e3"),o=i("4930"),l=i("fdbf"),h=s("wks"),c=n.Symbol,u=l?c:c&&c.withoutSetter||a;e.exports=function(e){return r(h,e)&&(o||"string"==typeof h[e])||(o&&r(c,e)?h[e]=c[e]:h[e]=u("Symbol."+e)),h[e]}},b64b:function(e,t,i){var n=i("23e7"),s=i("7b0b"),r=i("df75"),a=i("d039"),o=a((function(){r(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(e){return r(s(e))}})},b680:function(e,t,i){"use strict";var n=i("23e7"),s=i("a691"),r=i("408a"),a=i("1148"),o=i("d039"),l=1..toFixed,h=Math.floor,c=function(e,t,i){return 0===t?i:t%2===1?c(e,t-1,i*e):c(e*e,t/2,i)},u=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},d=function(e,t,i){var n=-1,s=i;while(++n<6)s+=t*e[n],e[n]=s%1e7,s=h(s/1e7)},p=function(e,t){var i=6,n=0;while(--i>=0)n+=e[i],e[i]=h(n/t),n=n%t*1e7},f=function(e){var t=6,i="";while(--t>=0)if(""!==i||0===t||0!==e[t]){var n=String(e[t]);i=""===i?n:i+a.call("0",7-n.length)+n}return i},g=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));n({target:"Number",proto:!0,forced:g},{toFixed:function(e){var t,i,n,o,l=r(this),h=s(e),g=[0,0,0,0,0,0],m="",b="0";if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(t=u(l*c(2,69,1))-69,i=t<0?l*c(2,-t,1):l/c(2,t,1),i*=4503599627370496,t=52-t,t>0){d(g,0,i),n=h;while(n>=7)d(g,1e7,0),n-=7;d(g,c(10,n,1),0),n=t-1;while(n>=23)p(g,1<<23),n-=23;p(g,1<<n),d(g,1,1),p(g,2),b=f(g)}else d(g,0,i),d(g,1<<-t,0),b=f(g)+a.call("0",h);return h>0?(o=b.length,b=m+(o<=h?"0."+a.call("0",h-o)+b:b.slice(0,o-h)+"."+b.slice(o-h))):b=m+b,b}})},b6b7:function(e,t,i){var n=i("ebb5"),s=i("4840"),r=n.TYPED_ARRAY_CONSTRUCTOR,a=n.aTypedArrayConstructor;e.exports=function(e){return a(s(e,e[r]))}},b727:function(e,t,i){var n=i("0366"),s=i("44ad"),r=i("7b0b"),a=i("50c4"),o=i("65f0"),l=[].push,h=function(e){var t=1==e,i=2==e,h=3==e,c=4==e,u=6==e,d=7==e,p=5==e||u;return function(f,g,m,b){for(var y,v,w=r(f),S=s(w),_=n(g,m,3),k=a(S.length),T=0,B=b||o,x=t?B(f,k):i||d?B(f,0):void 0;k>T;T++)if((p||T in S)&&(y=S[T],v=_(y,T,w),e))if(t)x[T]=v;else if(v)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:l.call(x,y)}else switch(e){case 4:return!1;case 7:l.call(x,y)}return u?-1:h||c?c:x}};e.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6),filterReject:h(7)}},b848:function(e,t,i){"use strict";var n=i("2909"),s=i("58df");function r(e){for(var t=[],i=0;i<e.length;i++){var s=e[i];s.isActive&&s.isDependent?t.push(s):t.push.apply(t,Object(n["a"])(r(s.$children)))}return t}t["a"]=Object(s["a"])().extend({name:"dependent",data:function(){return{closeDependents:!0,isActive:!1,isDependent:!0}},watch:{isActive:function(e){if(!e)for(var t=this.getOpenDependents(),i=0;i<t.length;i++)t[i].isActive=!1}},methods:{getOpenDependents:function(){return this.closeDependents?r(this.$children):[]},getOpenDependentElements:function(){for(var e=[],t=this.getOpenDependents(),i=0;i<t.length;i++)e.push.apply(e,Object(n["a"])(t[i].getClickableDependentElements()));return e},getClickableDependentElements:function(){var e=[this.$el];return this.$refs.content&&e.push(this.$refs.content),this.overlay&&e.push(this.overlay.$el),e.push.apply(e,Object(n["a"])(this.getOpenDependentElements())),e}}})},b85c:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");var n=i("06c5");function s(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Object(n["a"])(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0,r=function(){};return{s:r,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i["return"]||i["return"]()}finally{if(l)throw a}}}}},ba0d:function(e,t,i){"use strict";var n=i("ade3"),s=i("5530"),r=(i("a9e3"),i("d81d"),i("99af"),i("caad"),i("2532"),i("498a"),i("d3b7"),i("25f0"),i("b680"),i("9e29"),i("c37a")),a=i("0789"),o=i("58df"),l=i("297c"),h=i("a293"),c=i("80d2"),u=i("d9bd");t["a"]=Object(o["a"])(r["a"],l["a"]).extend({name:"v-slider",directives:{ClickOutside:h["a"]},mixins:[l["a"]],props:{disabled:Boolean,inverseLabel:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:1},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:function(e){return"boolean"===typeof e||"always"===e}},thumbSize:{type:[Number,String],default:32},tickLabels:{type:Array,default:function(){return[]}},ticks:{type:[Boolean,String],default:!1,validator:function(e){return"boolean"===typeof e||"always"===e}},tickSize:{type:[Number,String],default:2},trackColor:String,trackFillColor:String,value:[Number,String],vertical:Boolean},data:function(){return{app:null,oldValue:null,thumbPressed:!1,mouseTimeout:-1,isFocused:!1,isActive:!1,noClick:!1,startOffset:0}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input__slider":!0,"v-input__slider--vertical":this.vertical,"v-input__slider--inverse-label":this.inverseLabel})},internalValue:{get:function(){return this.lazyValue},set:function(e){e=isNaN(e)?this.minValue:e;var t=this.roundValue(Math.min(Math.max(e,this.minValue),this.maxValue));t!==this.lazyValue&&(this.lazyValue=t,this.$emit("input",t))}},trackTransition:function(){return this.thumbPressed?this.showTicks||this.stepNumeric?"0.1s cubic-bezier(0.25, 0.8, 0.5, 1)":"none":""},minValue:function(){return parseFloat(this.min)},maxValue:function(){return parseFloat(this.max)},stepNumeric:function(){return this.step>0?parseFloat(this.step):0},inputWidth:function(){return(this.roundValue(this.internalValue)-this.minValue)/(this.maxValue-this.minValue)*100},trackFillStyles:function(){var e,t=this.vertical?"bottom":"left",i=this.vertical?"top":"right",s=this.vertical?"height":"width",r=this.$vuetify.rtl?"auto":"0",a=this.$vuetify.rtl?"0":"auto",o=this.isDisabled?"calc(".concat(this.inputWidth,"% - 10px)"):"".concat(this.inputWidth,"%");return e={transition:this.trackTransition},Object(n["a"])(e,t,r),Object(n["a"])(e,i,a),Object(n["a"])(e,s,o),e},trackStyles:function(){var e,t=this.vertical?this.$vuetify.rtl?"bottom":"top":this.$vuetify.rtl?"left":"right",i=this.vertical?"height":"width",s="0px",r=this.isDisabled?"calc(".concat(100-this.inputWidth,"% - 10px)"):"calc(".concat(100-this.inputWidth,"%)");return e={transition:this.trackTransition},Object(n["a"])(e,t,s),Object(n["a"])(e,i,r),e},showTicks:function(){return this.tickLabels.length>0||!(this.isDisabled||!this.stepNumeric||!this.ticks)},numTicks:function(){return Math.ceil((this.maxValue-this.minValue)/this.stepNumeric)},showThumbLabel:function(){return!this.isDisabled&&!(!this.thumbLabel&&!this.$scopedSlots["thumb-label"])},computedTrackColor:function(){if(!this.isDisabled)return this.trackColor?this.trackColor:this.isDark?this.validationState:this.validationState||"primary lighten-3"},computedTrackFillColor:function(){if(!this.isDisabled)return this.trackFillColor?this.trackFillColor:this.validationState||this.computedColor},computedThumbColor:function(){return this.thumbColor?this.thumbColor:this.validationState||this.computedColor}},watch:{min:function(e){var t=parseFloat(e);t>this.internalValue&&this.$emit("input",t)},max:function(e){var t=parseFloat(e);t<this.internalValue&&this.$emit("input",t)},value:{handler:function(e){this.internalValue=e}}},beforeMount:function(){this.internalValue=this.value},mounted:function(){this.app=document.querySelector("[data-app]")||Object(u["c"])("Missing v-app or a non-body wrapping element with the [data-app] attribute",this)},methods:{genDefaultSlot:function(){var e=[this.genLabel()],t=this.genSlider();return this.inverseLabel?e.unshift(t):e.push(t),e.push(this.genProgress()),e},genSlider:function(){return this.$createElement("div",{class:Object(s["a"])({"v-slider":!0,"v-slider--horizontal":!this.vertical,"v-slider--vertical":this.vertical,"v-slider--focused":this.isFocused,"v-slider--active":this.isActive,"v-slider--disabled":this.isDisabled,"v-slider--readonly":this.isReadonly},this.themeClasses),directives:[{name:"click-outside",value:this.onBlur}],on:{click:this.onSliderClick,mousedown:this.onSliderMouseDown,touchstart:this.onSliderMouseDown}},this.genChildren())},genChildren:function(){return[this.genInput(),this.genTrackContainer(),this.genSteps(),this.genThumbContainer(this.internalValue,this.inputWidth,this.isActive,this.isFocused,this.onFocus,this.onBlur)]},genInput:function(){return this.$createElement("input",{attrs:Object(s["a"])({value:this.internalValue,id:this.computedId,disabled:!0,readonly:!0,tabindex:-1},this.$attrs)})},genTrackContainer:function(){var e=[this.$createElement("div",this.setBackgroundColor(this.computedTrackColor,{staticClass:"v-slider__track-background",style:this.trackStyles})),this.$createElement("div",this.setBackgroundColor(this.computedTrackFillColor,{staticClass:"v-slider__track-fill",style:this.trackFillStyles}))];return this.$createElement("div",{staticClass:"v-slider__track-container",ref:"track"},e)},genSteps:function(){var e=this;if(!this.step||!this.showTicks)return null;var t=parseFloat(this.tickSize),i=Object(c["g"])(this.numTicks+1),s=this.vertical?"bottom":this.$vuetify.rtl?"right":"left",r=this.vertical?this.$vuetify.rtl?"left":"right":"top";this.vertical&&i.reverse();var a=i.map((function(i){var a,o=[];e.tickLabels[i]&&o.push(e.$createElement("div",{staticClass:"v-slider__tick-label"},e.tickLabels[i]));var l=i*(100/e.numTicks),h=e.$vuetify.rtl?100-e.inputWidth<l:l<e.inputWidth;return e.$createElement("span",{key:i,staticClass:"v-slider__tick",class:{"v-slider__tick--filled":h},style:(a={width:"".concat(t,"px"),height:"".concat(t,"px")},Object(n["a"])(a,s,"calc(".concat(l,"% - ").concat(t/2,"px)")),Object(n["a"])(a,r,"calc(50% - ".concat(t/2,"px)")),a)},o)}));return this.$createElement("div",{staticClass:"v-slider__ticks-container",class:{"v-slider__ticks-container--always-show":"always"===this.ticks||this.tickLabels.length>0}},a)},genThumbContainer:function(e,t,i,n,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"thumb",l=[this.genThumb()],h=this.genThumbLabelContent(e);return this.showThumbLabel&&l.push(this.genThumbLabel(h)),this.$createElement("div",this.setTextColor(this.computedThumbColor,{ref:o,key:o,staticClass:"v-slider__thumb-container",class:{"v-slider__thumb-container--active":i,"v-slider__thumb-container--focused":n,"v-slider__thumb-container--show-label":this.showThumbLabel},style:this.getThumbContainerStyles(t),attrs:Object(s["a"])({role:"slider",tabindex:this.isDisabled?-1:this.$attrs.tabindex?this.$attrs.tabindex:0,"aria-label":this.label,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this.internalValue,"aria-readonly":String(this.isReadonly),"aria-orientation":this.vertical?"vertical":"horizontal"},this.$attrs),on:{focus:r,blur:a,keydown:this.onKeyDown}}),l)},genThumbLabelContent:function(e){return this.$scopedSlots["thumb-label"]?this.$scopedSlots["thumb-label"]({value:e}):[this.$createElement("span",[String(e)])]},genThumbLabel:function(e){var t=Object(c["f"])(this.thumbSize),i=this.vertical?"translateY(20%) translateY(".concat(Number(this.thumbSize)/3-1,"px) translateX(55%) rotate(135deg)"):"translateY(-20%) translateY(-12px) translateX(-50%) rotate(45deg)";return this.$createElement(a["d"],{props:{origin:"bottom center"}},[this.$createElement("div",{staticClass:"v-slider__thumb-label-container",directives:[{name:"show",value:this.isFocused||this.isActive||"always"===this.thumbLabel}]},[this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb-label",style:{height:t,width:t,transform:i}}),[this.$createElement("div",e)])])])},genThumb:function(){return this.$createElement("div",this.setBackgroundColor(this.computedThumbColor,{staticClass:"v-slider__thumb"}))},getThumbContainerStyles:function(e){var t=this.vertical?"top":"left",i=this.$vuetify.rtl?100-e:e;return i=this.vertical?100-i:i,Object(n["a"])({transition:this.trackTransition},t,"".concat(i,"%"))},onSliderMouseDown:function(e){var t,i=this;if(e.preventDefault(),this.oldValue=this.internalValue,this.isActive=!0,null!=(t=e.target)&&t.matches(".v-slider__thumb-container, .v-slider__thumb-container *")){this.thumbPressed=!0;var n=e.target.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;this.startOffset=this.vertical?s.clientY-(n.top+n.height/2):s.clientX-(n.left+n.width/2)}else this.startOffset=0,window.clearTimeout(this.mouseTimeout),this.mouseTimeout=window.setTimeout((function(){i.thumbPressed=!0}),300);var r=!c["v"]||{passive:!0,capture:!0},a=!!c["v"]&&{passive:!0},o="touches"in e;this.onMouseMove(e),this.app.addEventListener(o?"touchmove":"mousemove",this.onMouseMove,a),Object(c["a"])(this.app,o?"touchend":"mouseup",this.onSliderMouseUp,r),this.$emit("start",this.internalValue)},onSliderMouseUp:function(e){e.stopPropagation(),window.clearTimeout(this.mouseTimeout),this.thumbPressed=!1;var t=!!c["v"]&&{passive:!0};this.app.removeEventListener("touchmove",this.onMouseMove,t),this.app.removeEventListener("mousemove",this.onMouseMove,t),this.$emit("mouseup",e),this.$emit("end",this.internalValue),Object(c["i"])(this.oldValue,this.internalValue)||(this.$emit("change",this.internalValue),this.noClick=!0),this.isActive=!1},onMouseMove:function(e){"mousemove"===e.type&&(this.thumbPressed=!0),this.internalValue=this.parseMouseMove(e)},onKeyDown:function(e){if(this.isInteractive){var t=this.parseKeyDown(e,this.internalValue);null==t||t<this.minValue||t>this.maxValue||(this.internalValue=t,this.$emit("change",t))}},onSliderClick:function(e){if(this.noClick)this.noClick=!1;else{var t=this.$refs.thumb;t.focus(),this.onMouseMove(e),this.$emit("change",this.internalValue)}},onBlur:function(e){this.isFocused=!1,this.$emit("blur",e)},onFocus:function(e){this.isFocused=!0,this.$emit("focus",e)},parseMouseMove:function(e){var t=this.vertical?"top":"left",i=this.vertical?"height":"width",n=this.vertical?"clientY":"clientX",s=this.$refs.track.getBoundingClientRect(),r=s[t],a=s[i],o="touches"in e?e.touches[0][n]:e[n],l=Math.min(Math.max((o-r-this.startOffset)/a,0),1)||0;return this.vertical&&(l=1-l),this.$vuetify.rtl&&(l=1-l),parseFloat(this.min)+l*(this.maxValue-this.minValue)},parseKeyDown:function(e,t){if(this.isInteractive){var i=c["r"].pageup,n=c["r"].pagedown,s=c["r"].end,r=c["r"].home,a=c["r"].left,o=c["r"].right,l=c["r"].down,h=c["r"].up;if([i,n,s,r,a,o,l,h].includes(e.keyCode)){e.preventDefault();var u=this.stepNumeric||1,d=(this.maxValue-this.minValue)/u;if([a,o,l,h].includes(e.keyCode)){var p=this.$vuetify.rtl?[a,h]:[o,h],f=p.includes(e.keyCode)?1:-1,g=e.shiftKey?3:e.ctrlKey?2:1;t+=f*u*g}else if(e.keyCode===r)t=this.minValue;else if(e.keyCode===s)t=this.maxValue;else{var m=e.keyCode===n?1:-1;t-=m*u*(d>100?d/10:10)}return t}}},roundValue:function(e){if(!this.stepNumeric)return e;var t=this.step.toString().trim(),i=t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0,n=this.minValue%this.stepNumeric,s=Math.round((e-n)/this.stepNumeric)*this.stepNumeric+n;return parseFloat(Math.min(s,this.maxValue).toFixed(i))}}})},ba87:function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("1b2c"),i("a9ad")),r=i("7560"),a=i("58df"),o=i("80d2"),l=Object(a["a"])(r["a"]).extend({name:"v-label",functional:!0,props:{absolute:Boolean,color:{type:String,default:"primary"},disabled:Boolean,focused:Boolean,for:String,left:{type:[Number,String],default:0},right:{type:[Number,String],default:"auto"},value:Boolean},render:function(e,t){var i=t.children,a=t.listeners,l=t.props,h={staticClass:"v-label",class:Object(n["a"])({"v-label--active":l.value,"v-label--is-disabled":l.disabled},Object(r["b"])(t)),attrs:{for:l.for,"aria-hidden":!l.for},on:a,style:{left:Object(o["f"])(l.left),right:Object(o["f"])(l.right),position:l.absolute?"absolute":"relative"},ref:"label"};return e("label",s["a"].options.methods.setTextColor(l.focused&&l.color,h),i)}});t["a"]=l},bb2f:function(e,t,i){var n=i("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bd0c:function(e,t,i){},c04e:function(e,t,i){var n=i("861d"),s=i("d9b5"),r=i("485a"),a=i("b622"),o=a("toPrimitive");e.exports=function(e,t){if(!n(e)||s(e))return e;var i,a=e[o];if(void 0!==a){if(void 0===t&&(t="default"),i=a.call(e,t),!n(i)||s(i))return i;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),r(e,t)}},c1ac:function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").filter,r=i("1448"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("filter",(function(e){var t=s(a(this),e,arguments.length>1?arguments[1]:void 0);return r(this,t)}))},c37a:function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("4de4"),i("d81d"),i("ac1f"),i("1276"),i("99af"),i("d191"),i("9d26")),r=i("ba87"),a=(i("8ff2"),i("a9ad")),o=i("7560"),l=i("58df"),h=i("80d2"),c=Object(l["a"])(a["a"],o["a"]).extend({name:"v-messages",props:{value:{type:Array,default:function(){return[]}}},methods:{genChildren:function(){return this.$createElement("transition-group",{staticClass:"v-messages__wrapper",attrs:{name:"message-transition",tag:"div"}},this.value.map(this.genMessage))},genMessage:function(e,t){return this.$createElement("div",{staticClass:"v-messages__message",key:t},Object(h["m"])(this,"default",{message:e,key:t})||[e])}},render:function(e){return e("div",this.setTextColor(this.color,{staticClass:"v-messages",class:this.themeClasses}),[this.genChildren()])}}),u=c,d=i("7e2b"),p=i("38cb"),f=i("d9f7"),g=Object(l["a"])(d["a"],p["a"]),m=g.extend().extend({name:"v-input",inheritAttrs:!1,props:{appendIcon:String,backgroundColor:{type:String,default:""},dense:Boolean,height:[Number,String],hideDetails:[Boolean,String],hint:String,id:String,label:String,loading:Boolean,persistentHint:Boolean,prependIcon:String,value:null},data:function(){return{lazyValue:this.value,hasMouseDown:!1}},computed:{classes:function(){return Object(n["a"])({"v-input--has-state":this.hasState,"v-input--hide-details":!this.showDetails,"v-input--is-label-active":this.isLabelActive,"v-input--is-dirty":this.isDirty,"v-input--is-disabled":this.isDisabled,"v-input--is-focused":this.isFocused,"v-input--is-loading":!1!==this.loading&&null!=this.loading,"v-input--is-readonly":this.isReadonly,"v-input--dense":this.dense},this.themeClasses)},computedId:function(){return this.id||"input-".concat(this._uid)},hasDetails:function(){return this.messagesToDisplay.length>0},hasHint:function(){return!this.hasMessages&&!!this.hint&&(this.persistentHint||this.isFocused)},hasLabel:function(){return!(!this.$slots.label&&!this.label)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit(this.$_modelEvent,e)}},isDirty:function(){return!!this.lazyValue},isLabelActive:function(){return this.isDirty},messagesToDisplay:function(){var e=this;return this.hasHint?[this.hint]:this.hasMessages?this.validations.map((function(t){if("string"===typeof t)return t;var i=t(e.internalValue);return"string"===typeof i?i:""})).filter((function(e){return""!==e})):[]},showDetails:function(){return!1===this.hideDetails||"auto"===this.hideDetails&&this.hasDetails}},watch:{value:function(e){this.lazyValue=e}},beforeCreate:function(){this.$_modelEvent=this.$options.model&&this.$options.model.event||"input"},methods:{genContent:function(){return[this.genPrependSlot(),this.genControl(),this.genAppendSlot()]},genControl:function(){return this.$createElement("div",{staticClass:"v-input__control",attrs:{title:this.attrs$.title}},[this.genInputSlot(),this.genMessages()])},genDefaultSlot:function(){return[this.genLabel(),this.$slots.default]},genIcon:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this["".concat(e,"Icon")],a="click:".concat(Object(h["q"])(e)),o=!(!this.listeners$[a]&&!t),l=Object(f["a"])({attrs:{"aria-label":o?Object(h["q"])(e).split("-")[0]+" icon":void 0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,light:this.light},on:o?{click:function(e){e.preventDefault(),e.stopPropagation(),i.$emit(a,e),t&&t(e)},mouseup:function(e){e.preventDefault(),e.stopPropagation()}}:void 0},n);return this.$createElement("div",{staticClass:"v-input__icon",class:e?"v-input__icon--".concat(Object(h["q"])(e)):void 0},[this.$createElement(s["a"],l,r)])},genInputSlot:function(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor,{staticClass:"v-input__slot",style:{height:Object(h["f"])(this.height)},on:{click:this.onClick,mousedown:this.onMouseDown,mouseup:this.onMouseUp},ref:"input-slot"}),[this.genDefaultSlot()])},genLabel:function(){return this.hasLabel?this.$createElement(r["a"],{props:{color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:this.hasState,for:this.computedId,light:this.light}},this.$slots.label||this.label):null},genMessages:function(){var e=this;return this.showDetails?this.$createElement(u,{props:{color:this.hasHint?"":this.validationState,dark:this.dark,light:this.light,value:this.messagesToDisplay},attrs:{role:this.hasMessages?"alert":null},scopedSlots:{default:function(t){return Object(h["m"])(e,"message",t)}}}):null},genSlot:function(e,t,i){if(!i.length)return null;var n="".concat(e,"-").concat(t);return this.$createElement("div",{staticClass:"v-input__".concat(n),ref:n},i)},genPrependSlot:function(){var e=[];return this.$slots.prepend?e.push(this.$slots.prepend):this.prependIcon&&e.push(this.genIcon("prepend")),this.genSlot("prepend","outer",e)},genAppendSlot:function(){var e=[];return this.$slots.append?e.push(this.$slots.append):this.appendIcon&&e.push(this.genIcon("append")),this.genSlot("append","outer",e)},onClick:function(e){this.$emit("click",e)},onMouseDown:function(e){this.hasMouseDown=!0,this.$emit("mousedown",e)},onMouseUp:function(e){this.hasMouseDown=!1,this.$emit("mouseup",e)}},render:function(e){return e("div",this.setTextColor(this.validationState,{staticClass:"v-input",class:this.classes}),this.genContent())}});t["a"]=m},c430:function(e,t){e.exports=!1},c6b6:function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},c6cd:function(e,t,i){var n=i("da84"),s=i("ce4e"),r="__core-js_shared__",a=n[r]||s(r,{});e.exports=a},c740:function(e,t,i){"use strict";var n=i("23e7"),s=i("b727").findIndex,r=i("44d2"),a="findIndex",o=!0;a in[]&&Array(1)[a]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r(a)},c7cd:function(e,t,i){"use strict";var n=i("23e7"),s=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("fixed")},{fixed:function(){return s(this,"tt","","")}})},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}e.exports=i},c8d2:function(e,t,i){var n=i("d039"),s=i("5899"),r="";e.exports=function(e){return n((function(){return!!s[e]()||r[e]()!=r||s[e].name!==e}))}},c96a:function(e,t,i){"use strict";var n=i("23e7"),s=i("857a"),r=i("af03");n({target:"String",proto:!0,forced:r("small")},{small:function(){return s(this,"small","","")}})},c995:function(e,t,i){"use strict";var n=i("ade3"),s=(i("a9e3"),i("2b0e"));t["a"]=s["a"].extend({name:"elevatable",props:{elevation:[Number,String]},computed:{computedElevation:function(){return this.elevation},elevationClasses:function(){var e=this.computedElevation;return null==e||isNaN(parseInt(e))?{}:Object(n["a"])({},"elevation-".concat(this.elevation),!0)}}})},ca84:function(e,t,i){var n=i("5135"),s=i("fc6a"),r=i("4d64").indexOf,a=i("d012");e.exports=function(e,t){var i,o=s(e),l=0,h=[];for(i in o)!n(a,i)&&n(o,i)&&h.push(i);while(t.length>l)n(o,i=t[l++])&&(~r(h,i)||h.push(i));return h}},ca91:function(e,t,i){"use strict";var n=i("ebb5"),s=i("d58f").left,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduce",(function(e){return s(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},caad:function(e,t,i){"use strict";var n=i("23e7"),s=i("4d64").includes,r=i("44d2");n({target:"Array",proto:!0},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),r("includes")},cb29:function(e,t,i){var n=i("23e7"),s=i("81d5"),r=i("44d2");n({target:"Array",proto:!0},{fill:s}),r("fill")},cc12:function(e,t,i){var n=i("da84"),s=i("861d"),r=n.document,a=s(r)&&s(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},cca6:function(e,t,i){var n=i("23e7"),s=i("60da");n({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},cd26:function(e,t,i){"use strict";var n=i("ebb5"),s=n.aTypedArray,r=n.exportTypedArrayMethod,a=Math.floor;r("reverse",(function(){var e,t=this,i=s(t).length,n=a(i/2),r=0;while(r<n)e=t[r],t[r++]=t[--i],t[i]=e;return t}))},cdf9:function(e,t,i){var n=i("825a"),s=i("861d"),r=i("f069");e.exports=function(e,t){if(n(e),s(t)&&t.constructor===e)return t;var i=r.f(e),a=i.resolve;return a(t),i.promise}},ce4e:function(e,t,i){var n=i("da84");e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,i){var n=i("da84"),s=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?s(n[e]):n[e]&&n[e][t]}},d10f:function(e,t,i){"use strict";var n=i("2b0e");t["a"]=n["a"].extend({name:"ssr-bootable",data:function(){return{isBooted:!1}},mounted:function(){var e=this;window.requestAnimationFrame((function(){e.$el.setAttribute("data-booted","true"),e.isBooted=!0}))}})},d139:function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").find,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("find",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},d191:function(e,t,i){},d1e7:function(e,t,i){"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,r=s&&!n.call({1:2},1);t.f=r?function(e){var t=s(this,e);return!!t&&t.enumerable}:n},d28b:function(e,t,i){var n=i("746f");n("iterator")},d2bb:function(e,t,i){var n=i("825a"),s=i("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(i,[]),t=i instanceof Array}catch(r){}return function(i,r){return n(i),s(r),t?e.call(i,r):i.__proto__=r,i}}():void 0)},d3b7:function(e,t,i){var n=i("00ee"),s=i("6eeb"),r=i("b041");n||s(Object.prototype,"toString",r,{unsafe:!0})},d44e:function(e,t,i){var n=i("9bf2").f,s=i("5135"),r=i("b622"),a=r("toStringTag");e.exports=function(e,t,i){e&&!s(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},d4c3:function(e,t,i){var n=i("342f"),s=i("da84");e.exports=/ipad|iphone|ipod/i.test(n)&&void 0!==s.Pebble},d58f:function(e,t,i){var n=i("1c0b"),s=i("7b0b"),r=i("44ad"),a=i("50c4"),o=function(e){return function(t,i,o,l){n(i);var h=s(t),c=r(h),u=a(h.length),d=e?u-1:0,p=e?-1:1;if(o<2)while(1){if(d in c){l=c[d],d+=p;break}if(d+=p,e?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;e?d>=0:u>d;d+=p)d in c&&(l=i(l,c[d],d,h));return l}};e.exports={left:o(!1),right:o(!0)}},d5d6:function(e,t,i){"use strict";var n=i("ebb5"),s=i("b727").forEach,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("forEach",(function(e){s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},d784:function(e,t,i){"use strict";i("ac1f");var n=i("6eeb"),s=i("9263"),r=i("d039"),a=i("b622"),o=i("9112"),l=a("species"),h=RegExp.prototype;e.exports=function(e,t,i,c){var u=a(e),d=!r((function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})),p=d&&!r((function(){var t=!1,i=/a/;return"split"===e&&(i={},i.constructor={},i.constructor[l]=function(){return i},i.flags="",i[u]=/./[u]),i.exec=function(){return t=!0,null},i[u](""),!t}));if(!d||!p||i){var f=/./[u],g=t(u,""[e],(function(e,t,i,n,r){var a=t.exec;return a===s||a===h.exec?d&&!r?{done:!0,value:f.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}}));n(String.prototype,e,g[0]),n(h,u,g[1])}c&&o(h[u],"sham",!0)}},d81d:function(e,t,i){"use strict";var n=i("23e7"),s=i("b727").map,r=i("1dde"),a=r("map");n({target:"Array",proto:!0,forced:!a},{map:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},d998:function(e,t,i){var n=i("342f");e.exports=/MSIE|Trident/.test(n)},d9b5:function(e,t,i){var n=i("d066"),s=i("fdbf");e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t}},d9bd:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return l})),i.d(t,"e",(function(){return h}));i("caad"),i("2532"),i("99af"),i("ac1f"),i("5319"),i("b0c0"),i("466d"),i("a15b"),i("d81d"),i("38cf");var n=i("f309");function s(e,t,i){if(!n["a"].config.silent){if(i&&(t={_isVue:!0,$parent:i,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return"[Vuetify] ".concat(e)+(t?p(t):"")}}function r(e,t,i){var n=s(e,t,i);null!=n&&console.warn(n)}function a(e,t,i){var n=s(e,t,i);null!=n&&console.error(n)}function o(e,t,i,n){r("[UPGRADE] '".concat(e,"' is deprecated, use '").concat(t,"' instead."),i,n)}function l(e,t,i,n){a("[BREAKING] '".concat(e,"' has been removed, use '").concat(t,"' instead. For more information, see the upgrade guide https://github.com/vuetifyjs/vuetify/releases/tag/v2.0.0#user-content-upgrade-guide"),i,n)}function h(e,t,i){r("[REMOVED] '".concat(e,"' has been removed. You can safely omit it."),t,i)}var c=/(?:^|[-_])(\w)/g,u=function(e){return e.replace(c,(function(e){return e.toUpperCase()})).replace(/[-_]/g,"")};function d(e,t){if(e.$root===e)return"<Root>";var i="function"===typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},n=i.name||i._componentTag,s=i.__file;if(!n&&s){var r=s.match(/([^/\\]+)\.vue$/);n=r&&r[1]}return(n?"<".concat(u(n),">"):"<Anonymous>")+(s&&!1!==t?" at ".concat(s):"")}function p(e){if(e._isVue&&e.$parent){var t=[],i=0;while(e){if(t.length>0){var n=t[t.length-1];if(n.constructor===e.constructor){i++,e=e.$parent;continue}i>0&&(t[t.length-1]=[n,i],i=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map((function(e,t){return"".concat(0===t?"---\x3e ":" ".repeat(5+2*t)).concat(Array.isArray(e)?"".concat(d(e[0]),"... (").concat(e[1]," recursive calls)"):d(e))})).join("\n")}return"\n\n(found in ".concat(d(e),")")}},d9f7:function(e,t,i){"use strict";i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return c}));var n=i("5530"),s=i("3835"),r=i("b85c"),a=(i("ac1f"),i("1276"),i("498a"),i("b64b"),i("99af"),i("80d2")),o={styleList:/;(?![^(]*\))/g,styleProp:/:(.*)/};function l(e){var t,i={},n=Object(r["a"])(e.split(o.styleList));try{for(n.s();!(t=n.n()).done;){var l=t.value,h=l.split(o.styleProp),c=Object(s["a"])(h,2),u=c[0],d=c[1];u=u.trim(),u&&("string"===typeof d&&(d=d.trim()),i[Object(a["c"])(u)]=d)}}catch(p){n.e(p)}finally{n.f()}return i}function h(){var e,t={},i=arguments.length;while(i--)for(var s=0,r=Object.keys(arguments[i]);s<r.length;s++)switch(e=r[s],e){case"class":case"directives":arguments[i][e]&&(t[e]=u(t[e],arguments[i][e]));break;case"style":arguments[i][e]&&(t[e]=c(t[e],arguments[i][e]));break;case"staticClass":if(!arguments[i][e])break;void 0===t[e]&&(t[e]=""),t[e]&&(t[e]+=" "),t[e]+=arguments[i][e].trim();break;case"on":case"nativeOn":arguments[i][e]&&(t[e]=d(t[e],arguments[i][e]));break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":if(!arguments[i][e])break;t[e]||(t[e]={}),t[e]=Object(n["a"])(Object(n["a"])({},arguments[i][e]),t[e]);break;default:t[e]||(t[e]=arguments[i][e])}return t}function c(e,t){return e?t?(e=Object(a["y"])("string"===typeof e?l(e):e),e.concat("string"===typeof t?l(t):t)):e:t}function u(e,t){return t?e&&e?Object(a["y"])(e).concat(t):t:e}function d(){if(!(arguments.length<=0?void 0:arguments[0]))return arguments.length<=1?void 0:arguments[1];if(!(arguments.length<=1?void 0:arguments[1]))return arguments.length<=0?void 0:arguments[0];for(var e={},t=2;t--;){var i=t<0||arguments.length<=t?void 0:arguments[t];for(var n in i)i[n]&&(e[n]?e[n]=[].concat(i[n],e[n]):e[n]=i[n])}return e}},da13:function(e,t,i){"use strict";var n=i("5530"),s=(i("61d2"),i("a9ad")),r=i("1c87"),a=i("4e82"),o=i("7560"),l=i("f2e7"),h=i("5607"),c=i("80d2"),u=i("d9bd"),d=i("58df"),p=Object(d["a"])(s["a"],r["a"],o["a"],Object(a["a"])("listItemGroup"),Object(l["b"])("inputValue"));t["a"]=p.extend().extend({name:"v-list-item",directives:{Ripple:h["a"]},inject:{isInGroup:{default:!1},isInList:{default:!1},isInMenu:{default:!1},isInNav:{default:!1}},inheritAttrs:!1,props:{activeClass:{type:String,default:function(){return this.listItemGroup?this.listItemGroup.activeClass:""}},dense:Boolean,inactive:Boolean,link:Boolean,selectable:{type:Boolean},tag:{type:String,default:"div"},threeLine:Boolean,twoLine:Boolean,value:null},data:function(){return{proxyClass:"v-list-item--active"}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({"v-list-item":!0},r["a"].options.computed.classes.call(this)),{},{"v-list-item--dense":this.dense,"v-list-item--disabled":this.disabled,"v-list-item--link":this.isClickable&&!this.inactive,"v-list-item--selectable":this.selectable,"v-list-item--three-line":this.threeLine,"v-list-item--two-line":this.twoLine},this.themeClasses)},isClickable:function(){return Boolean(r["a"].options.computed.isClickable.call(this)||this.listItemGroup)}},created:function(){this.$attrs.hasOwnProperty("avatar")&&Object(u["e"])("avatar",this)},methods:{click:function(e){e.detail&&this.$el.blur(),this.$emit("click",e),this.to||this.toggle()},genAttrs:function(){var e=Object(n["a"])({"aria-disabled":!!this.disabled||void 0,tabindex:this.isClickable&&!this.disabled?0:-1},this.$attrs);return this.$attrs.hasOwnProperty("role")||this.isInNav||(this.isInGroup?(e.role="option",e["aria-selected"]=String(this.isActive)):this.isInMenu?(e.role=this.isClickable?"menuitem":void 0,e.id=e.id||"list-item-".concat(this._uid)):this.isInList&&(e.role="listitem")),e}},render:function(e){var t=this,i=this.generateRouteLink(),s=i.tag,r=i.data;r.attrs=Object(n["a"])(Object(n["a"])({},r.attrs),this.genAttrs()),r[this.to?"nativeOn":"on"]=Object(n["a"])(Object(n["a"])({},r[this.to?"nativeOn":"on"]),{},{keydown:function(e){e.keyCode===c["r"].enter&&t.click(e),t.$emit("keydown",e)}}),this.inactive&&(s="div"),this.inactive&&this.to&&(r.on=r.nativeOn,delete r.nativeOn);var a=this.$scopedSlots.default?this.$scopedSlots.default({active:this.isActive,toggle:this.toggle}):this.$slots.default;return e(s,this.isActive?this.setTextColor(this.color,r):r,a)}})},da84:function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,i("c8ba"))},db42:function(e,t,i){},dbb4:function(e,t,i){var n=i("23e7"),s=i("83ab"),r=i("56ef"),a=i("fc6a"),o=i("06cf"),l=i("8418");n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(e){var t,i,n=a(e),s=o.f,h=r(n),c={},u=0;while(h.length>u)i=s(n,t=h[u++]),void 0!==i&&l(c,t,i);return c}})},dc22:function(e,t,i){"use strict";function n(e,t){var i=t.value,n=t.options||{passive:!0};window.addEventListener("resize",i,n),e._onResize={callback:i,options:n},t.modifiers&&t.modifiers.quiet||i()}function s(e){if(e._onResize){var t=e._onResize,i=t.callback,n=t.options;window.removeEventListener("resize",i,n),delete e._onResize}}var r={inserted:n,unbind:s};t["a"]=r},dca8:function(e,t,i){var n=i("23e7"),s=i("bb2f"),r=i("d039"),a=i("861d"),o=i("f183").onFreeze,l=Object.freeze,h=r((function(){l(1)}));n({target:"Object",stat:!0,forced:h,sham:!s},{freeze:function(e){return l&&a(e)?l(o(e)):e}})},dd89:function(e,t,i){"use strict";function n(e){if("function"!==typeof e.getRootNode){while(e.parentNode)e=e.parentNode;return e!==document?null:document}var t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}i.d(t,"a",(function(){return n}))},ddb0:function(e,t,i){var n=i("da84"),s=i("fdbc"),r=i("e260"),a=i("9112"),o=i("b622"),l=o("iterator"),h=o("toStringTag"),c=r.values;for(var u in s){var d=n[u],p=d&&d.prototype;if(p){if(p[l]!==c)try{a(p,l,c)}catch(g){p[l]=c}if(p[h]||a(p,h,u),s[u])for(var f in r)if(p[f]!==r[f])try{a(p,f,r[f])}catch(g){p[f]=r[f]}}}},df75:function(e,t,i){var n=i("ca84"),s=i("7839");e.exports=Object.keys||function(e){return n(e,s)}},df7c:function(e,t,i){(function(e){function i(e,t){for(var i=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function n(e){"string"!==typeof e&&(e+="");var t,i=0,n=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){i=t+1;break}}else-1===n&&(s=!1,n=t+1);return-1===n?"":e.slice(i,n)}function s(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}t.resolve=function(){for(var t="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var a=r>=0?arguments[r]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,n="/"===a.charAt(0))}return t=i(s(t.split("/"),(function(e){return!!e})),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),a="/"===r(e,-1);return e=i(s(e.split("/"),(function(e){return!!e})),!n).join("/"),e||n||(e="."),e&&a&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,i){function n(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var i=e.length-1;i>=0;i--)if(""!==e[i])break;return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var s=n(e.split("/")),r=n(i.split("/")),a=Math.min(s.length,r.length),o=a,l=0;l<a;l++)if(s[l]!==r[l]){o=l;break}var h=[];for(l=o;l<s.length;l++)h.push("..");return h=h.concat(r.slice(o)),h.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,n=-1,s=!0,r=e.length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!s){n=r;break}}else s=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var i=n(e);return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,i=0,n=-1,s=!0,r=0,a=e.length-1;a>=0;--a){var o=e.charCodeAt(a);if(47!==o)-1===n&&(s=!1,n=a+1),46===o?-1===t?t=a:1!==r&&(r=1):-1!==t&&(r=-1);else if(!s){i=a+1;break}}return-1===t||-1===n||0===r||1===r&&t===n-1&&t===i+1?"":e.slice(t,n)};var r="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,i("4362"))},df86:function(e,t,i){},dfb9:function(e,t){e.exports=function(e,t){var i=0,n=t.length,s=new e(n);while(n>i)s[i]=t[i++];return s}},e01a:function(e,t,i){"use strict";var n=i("23e7"),s=i("83ab"),r=i("da84"),a=i("5135"),o=i("861d"),l=i("9bf2").f,h=i("e893"),c=r.Symbol;if(s&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new c(e):void 0===e?c():c(e);return""===e&&(u[t]=!0),t};h(d,c);var p=d.prototype=c.prototype;p.constructor=d;var f=p.toString,g="Symbol(test)"==String(c("test")),m=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=f.call(e);if(a(u,e))return"";var i=g?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:d})}},e163:function(e,t,i){var n=i("5135"),s=i("7b0b"),r=i("f772"),a=i("e177"),o=r("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=s(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},e177:function(e,t,i){var n=i("d039");e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e260:function(e,t,i){"use strict";var n=i("fc6a"),s=i("44d2"),r=i("3f8c"),a=i("69f3"),o=i("7dd0"),l="Array Iterator",h=a.set,c=a.getterFor(l);e.exports=o(Array,"Array",(function(e,t){h(this,{type:l,target:n(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),r.Arguments=r.Array,s("keys"),s("values"),s("entries")},e2cc:function(e,t,i){var n=i("6eeb");e.exports=function(e,t,i){for(var s in t)n(e,s,t[s],i);return e}},e439:function(e,t,i){var n=i("23e7"),s=i("d039"),r=i("fc6a"),a=i("06cf").f,o=i("83ab"),l=s((function(){a(1)})),h=!o||l;n({target:"Object",stat:!0,forced:h,sham:!o},{getOwnPropertyDescriptor:function(e,t){return a(r(e),t)}})},e449:function(e,t,i){"use strict";var n=i("ade3"),s=i("2909"),r=i("5530"),a=(i("a9e3"),i("7db0"),i("a630"),i("3ca3"),i("99af"),i("498a"),i("caad"),i("2532"),i("ee6f"),i("7560")),o=a["a"].extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:a["a"].options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find((function(e){return!e.isComment&&" "!==e.text}))}}),l=i("53ca"),h=(i("b64b"),i("b0c0"),i("2b0e")),c=h["a"].extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:function(){return{openTimeout:void 0,closeTimeout:void 0}},methods:{clearDelay:function(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay:function(e,t){var i=this;this.clearDelay();var n=parseInt(this["".concat(e,"Delay")],10);this["".concat(e,"Timeout")]=setTimeout(t||function(){i.isActive={open:!0,close:!1}[e]},n)}}}),u=i("f2e7"),d=i("58df"),p=i("80d2"),f=i("d9bd"),g=Object(d["a"])(c,u["a"]),m=g.extend({name:"activatable",props:{activator:{default:null,validator:function(e){return["string","object"].includes(Object(l["a"])(e))}},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean,openOnFocus:Boolean},data:function(){return{activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}},watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted:function(){var e=Object(p["n"])(this,"activator",!0);e&&["v-slot","normal"].includes(e)&&Object(f["b"])('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy:function(){this.removeActivatorEvents()},methods:{addActivatorEvents:function(){if(this.activator&&!this.disabled&&this.getActivator()){this.listeners=this.genActivatorListeners();for(var e=Object.keys(this.listeners),t=0,i=e;t<i.length;t++){var n=i[t];this.getActivator().addEventListener(n,this.listeners[n])}}},genActivator:function(){var e=Object(p["m"])(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=e,e},genActivatorAttributes:function(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners:function(){var e=this;if(this.disabled)return{};var t={};return this.openOnHover?(t.mouseenter=function(t){e.getActivator(t),e.runDelay("open")},t.mouseleave=function(t){e.getActivator(t),e.runDelay("close")}):t.click=function(t){var i=e.getActivator(t);i&&i.focus(),t.stopPropagation(),e.isActive=!e.isActive},this.openOnFocus&&(t.focus=function(t){e.getActivator(t),t.stopPropagation(),e.isActive=!e.isActive}),t},getActivator:function(e){var t;if(this.activatorElement)return this.activatorElement;var i=null;if(this.activator){var n=this.internalActivator?this.$el:document;i="string"===typeof this.activator?n.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!e){var s=this.activatorNode[0].componentInstance;i=s&&s.$options.mixins&&s.$options.mixins.some((function(e){return e.options&&["activatable","menuable"].includes(e.options.name)}))?s.getActivator():this.activatorNode[0].elm}else e&&(i=e.currentTarget||e.target);return this.activatorElement=(null==(t=i)?void 0:t.nodeType)===Node.ELEMENT_NODE?i:null,this.activatorElement},getContentSlot:function(){return Object(p["m"])(this,"default",this.getValueProxy(),!0)},getValueProxy:function(){var e=this;return{get value(){return e.isActive},set value(t){e.isActive=t}}},removeActivatorEvents:function(){if(this.activator&&this.activatorElement){for(var e=Object.keys(this.listeners),t=0,i=e;t<i.length;t++){var n=i[t];this.activatorElement.removeEventListener(n,this.listeners[n])}this.listeners={}}},resetActivator:function(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}}),b=i("b848"),y=(i("d3b7"),i("fe6c")),v=h["a"].extend().extend({name:"stackable",data:function(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex:function(){if("undefined"===typeof window)return 0;var e=this.stackElement||this.$refs.content,t=this.isActive?this.getMaxZIndex(this.stackExclude||[e])+2:Object(p["o"])(e);return null==t?t:parseInt(t)}},methods:{getMaxZIndex:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.$el,i=[this.stackMinZIndex,Object(p["o"])(t)],n=[].concat(Object(s["a"])(document.getElementsByClassName("v-menu__content--active")),Object(s["a"])(document.getElementsByClassName("v-dialog__content--active"))),r=0;r<n.length;r++)e.includes(n[r])||i.push(Object(p["o"])(n[r]));return Math.max.apply(Math,i)}}}),w=(i("159b"),i("9d65"));function S(e){var t=Object(l["a"])(e);return"boolean"===t||"string"===t||e.nodeType===Node.ELEMENT_NODE}var _=Object(d["a"])(w["a"]).extend({name:"detachable",props:{attach:{default:!1,validator:S},contentClass:{type:String,default:""}},data:function(){return{activatorNode:null,hasDetached:!1}},watch:{attach:function(){this.hasDetached=!1,this.initDetach()},hasContent:function(){this.$nextTick(this.initDetach)}},beforeMount:function(){var e=this;this.$nextTick((function(){if(e.activatorNode){var t=Array.isArray(e.activatorNode)?e.activatorNode:[e.activatorNode];t.forEach((function(t){if(t.elm&&e.$el.parentNode){var i=e.$el===e.$el.parentNode.firstChild?e.$el:e.$el.nextSibling;e.$el.parentNode.insertBefore(t.elm,i)}}))}}))},mounted:function(){this.hasContent&&this.initDetach()},deactivated:function(){this.isActive=!1},beforeDestroy:function(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode){var e=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];e.forEach((function(e){e.elm&&e.elm.parentNode&&e.elm.parentNode.removeChild(e.elm)}))}}catch(t){console.log(t)}},methods:{getScopeIdAttrs:function(){var e=Object(p["l"])(this.$vnode,"context.$options._scopeId");return e&&Object(n["a"])({},e,"")},initDetach:function(){var e;this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach||(e=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,e?(e.appendChild(this.$refs.content),this.hasDetached=!0):Object(f["c"])("Unable to locate target ".concat(this.attach||"[data-app]"),this))}}}),k=Object(d["a"])(v,y["a"],m,_),T=k.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,openOnClick:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:function(){return{activatorNode:[],absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},relativeYOffset:0,hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}},computed:{computedLeft:function(){var e=this.dimensions.activator,t=this.dimensions.content,i=(!1!==this.attach?e.offsetLeft:e.left)||0,n=Math.max(e.width,t.width),s=0;if(s+=this.left?i-(n-e.width):i,this.offsetX){var r=isNaN(Number(this.maxWidth))?e.width:Math.min(e.width,Number(this.maxWidth));s+=this.left?-r:e.width}return this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),s},computedTop:function(){var e=this.dimensions.activator,t=this.dimensions.content,i=0;return this.top&&(i+=e.height-t.height),!1!==this.attach?i+=e.offsetTop:i+=e.top+this.pageYOffset,this.offsetY&&(i+=this.top?-e.height:e.height),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),i},hasActivator:function(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator},absoluteYOffset:function(){return this.pageYOffset-this.relativeYOffset}},watch:{disabled:function(e){e&&this.callDeactivate()},isActive:function(e){this.disabled||(e?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount:function(){this.hasWindow="undefined"!==typeof window,this.hasWindow&&window.addEventListener("resize",this.updateDimensions,!1)},beforeDestroy:function(){this.hasWindow&&window.removeEventListener("resize",this.updateDimensions,!1)},methods:{absolutePosition:function(){return{offsetTop:0,offsetLeft:0,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate:function(){},calcLeft:function(e){return Object(p["f"])(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,e))},calcTop:function(){return Object(p["f"])(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow:function(e,t){var i=e+t-this.pageWidth+12;return e=(!this.left||this.right)&&i>0?Math.max(e-i,0):Math.max(e,12),e+this.getOffsetLeft()},calcYOverflow:function(e){var t=this.getInnerHeight(),i=this.absoluteYOffset+t,n=this.dimensions.activator,s=this.dimensions.content.height,r=e+s,a=i<r;return a&&this.offsetOverflow&&n.top>s?e=this.pageYOffset+(n.top-s):a&&!this.allowOverflow?e=i-s-12:e<this.absoluteYOffset&&!this.allowOverflow&&(e=this.absoluteYOffset+12),e<12?12:e},callActivate:function(){this.hasWindow&&this.activate()},callDeactivate:function(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset:function(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed:function(){if(!1===this.attach){var e=this.getActivator();while(e){if("fixed"===window.getComputedStyle(e).position)return void(this.activatorFixed=!0);e=e.offsetParent}this.activatorFixed=!1}},deactivate:function(){},genActivatorListeners:function(){var e=this,t=m.options.methods.genActivatorListeners.call(this),i=t.click;return t.click=function(t){e.openOnClick&&i&&i(t),e.absoluteX=t.clientX,e.absoluteY=t.clientY},t},getInnerHeight:function(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft:function(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop:function(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect:function(e){var t=e.getBoundingClientRect();return{top:Math.round(t.top),left:Math.round(t.left),bottom:Math.round(t.bottom),right:Math.round(t.right),width:Math.round(t.width),height:Math.round(t.height)}},measure:function(e){if(!e||!this.hasWindow)return null;var t=this.getRoundedBoundedClientRect(e);if(!1!==this.attach){var i=window.getComputedStyle(e);t.left=parseInt(i.marginLeft),t.top=parseInt(i.marginTop)}return t},sneakPeek:function(e){var t=this;requestAnimationFrame((function(){var i=t.$refs.content;i&&"none"===i.style.display?(i.style.display="inline-block",e(),i.style.display="none"):e()}))},startTransition:function(){var e=this;return new Promise((function(t){return requestAnimationFrame((function(){e.isContentActive=e.hasJustFocused=e.isActive,t()}))}))},updateDimensions:function(){var e=this;this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;var t={activator:Object(r["a"])({},this.dimensions.activator),content:Object(r["a"])({},this.dimensions.content)};if(!this.hasActivator||this.absolute)t.activator=this.absolutePosition();else{var i=this.getActivator();if(!i)return;t.activator=this.measure(i),t.activator.offsetLeft=i.offsetLeft,!1!==this.attach?t.activator.offsetTop=i.offsetTop:t.activator.offsetTop=0}this.sneakPeek((function(){if(e.$refs.content){if(e.$refs.content.offsetParent){var i=e.getRoundedBoundedClientRect(e.$refs.content.offsetParent);e.relativeYOffset=window.pageYOffset+i.top,t.activator.top-=e.relativeYOffset,t.activator.left-=window.pageXOffset+i.left}t.content=e.measure(e.$refs.content)}e.dimensions=t}))}}}),B=h["a"].extend({name:"returnable",props:{returnValue:null},data:function(){return{isActive:!1,originalValue:null}},watch:{isActive:function(e){e?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save:function(e){var t=this;this.originalValue=e,setTimeout((function(){t.isActive=!1}))}}}),x=i("a236"),N=i("a293"),C=i("dc22"),E=Object(d["a"])(b["a"],c,T,B,x["a"],u["a"],a["a"]);t["a"]=E.extend({name:"v-menu",directives:{ClickOutside:N["a"],Resize:C["a"]},provide:function(){return{isInMenu:!0,theme:this.theme}},props:{auto:Boolean,closeOnClick:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},disabled:Boolean,disableKeys:Boolean,maxHeight:{type:[Number,String],default:"auto"},offsetX:Boolean,offsetY:Boolean,openOnClick:{type:Boolean,default:!0},openOnHover:Boolean,origin:{type:String,default:"top left"},transition:{type:[Boolean,String],default:"v-menu-transition"}},data:function(){return{calculatedTopAuto:0,defaultOffset:8,hasJustFocused:!1,listIndex:-1,resizeTimeout:0,selectedIndex:null,tiles:[]}},computed:{activeTile:function(){return this.tiles[this.listIndex]},calculatedLeft:function(){var e=Math.max(this.dimensions.content.width,parseFloat(this.calculatedMinWidth));return this.auto?Object(p["f"])(this.calcXOverflow(this.calcLeftAuto(),e))||"0":this.calcLeft(e)||"0"},calculatedMaxHeight:function(){var e=this.auto?"200px":Object(p["f"])(this.maxHeight);return e||"0"},calculatedMaxWidth:function(){return Object(p["f"])(this.maxWidth)||"0"},calculatedMinWidth:function(){if(this.minWidth)return Object(p["f"])(this.minWidth)||"0";var e=Math.min(this.dimensions.activator.width+Number(this.nudgeWidth)+(this.auto?16:0),Math.max(this.pageWidth-24,0)),t=isNaN(parseInt(this.calculatedMaxWidth))?e:parseInt(this.calculatedMaxWidth);return Object(p["f"])(Math.min(t,e))||"0"},calculatedTop:function(){var e=this.auto?Object(p["f"])(this.calcYOverflow(this.calculatedTopAuto)):this.calcTop();return e||"0"},hasClickableTiles:function(){return Boolean(this.tiles.find((function(e){return e.tabIndex>-1})))},styles:function(){return{maxHeight:this.calculatedMaxHeight,minWidth:this.calculatedMinWidth,maxWidth:this.calculatedMaxWidth,top:this.calculatedTop,left:this.calculatedLeft,transformOrigin:this.origin,zIndex:this.zIndex||this.activeZIndex}}},watch:{isActive:function(e){e||(this.listIndex=-1)},isContentActive:function(e){this.hasJustFocused=e},listIndex:function(e,t){if(e in this.tiles){var i=this.tiles[e];i.classList.add("v-list-item--highlighted"),this.$refs.content.scrollTop=i.offsetTop-i.clientHeight}t in this.tiles&&this.tiles[t].classList.remove("v-list-item--highlighted")}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(f["e"])("full-width",this)},mounted:function(){this.isActive&&this.callActivate()},methods:{activate:function(){var e=this;this.updateDimensions(),requestAnimationFrame((function(){e.startTransition().then((function(){e.$refs.content&&(e.calculatedTopAuto=e.calcTopAuto(),e.auto&&(e.$refs.content.scrollTop=e.calcScrollPosition()))}))}))},calcScrollPosition:function(){var e=this.$refs.content,t=e.querySelector(".v-list-item--active"),i=e.scrollHeight-e.offsetHeight;return t?Math.min(i,Math.max(0,t.offsetTop-e.offsetHeight/2+t.offsetHeight/2)):e.scrollTop},calcLeftAuto:function(){return parseInt(this.dimensions.activator.left-2*this.defaultOffset)},calcTopAuto:function(){var e=this.$refs.content,t=e.querySelector(".v-list-item--active");if(t||(this.selectedIndex=null),this.offsetY||!t)return this.computedTop;this.selectedIndex=Array.from(this.tiles).indexOf(t);var i=t.offsetTop-this.calcScrollPosition(),n=e.querySelector(".v-list-item").offsetTop;return this.computedTop-i-n-1},changeListIndex:function(e){if(this.getTiles(),this.isActive&&this.hasClickableTiles)if(e.keyCode!==p["r"].tab){if(e.keyCode===p["r"].down)this.nextTile();else if(e.keyCode===p["r"].up)this.prevTile();else if(e.keyCode===p["r"].end)this.lastTile();else if(e.keyCode===p["r"].home)this.firstTile();else{if(e.keyCode!==p["r"].enter||-1===this.listIndex)return;this.tiles[this.listIndex].click()}e.preventDefault()}else this.isActive=!1},closeConditional:function(e){var t=e.target;return this.isActive&&!this._isDestroyed&&this.closeOnClick&&!this.$refs.content.contains(t)},genActivatorAttributes:function(){var e=m.options.methods.genActivatorAttributes.call(this);return this.activeTile&&this.activeTile.id?Object(r["a"])(Object(r["a"])({},e),{},{"aria-activedescendant":this.activeTile.id}):e},genActivatorListeners:function(){var e=T.options.methods.genActivatorListeners.call(this);return this.disableKeys||(e.keydown=this.onKeyDown),e},genTransition:function(){var e=this.genContent();return this.transition?this.$createElement("transition",{props:{name:this.transition}},[e]):e},genDirectives:function(){var e=this,t=[{name:"show",value:this.isContentActive}];return!this.openOnHover&&this.closeOnClick&&t.push({name:"click-outside",value:{handler:function(){e.isActive=!1},closeConditional:this.closeConditional,include:function(){return[e.$el].concat(Object(s["a"])(e.getOpenDependentElements()))}}}),t},genContent:function(){var e=this,t={attrs:Object(r["a"])(Object(r["a"])({},this.getScopeIdAttrs()),{},{role:"role"in this.$attrs?this.$attrs.role:"menu"}),staticClass:"v-menu__content",class:Object(r["a"])(Object(r["a"])(Object(r["a"])({},this.rootThemeClasses),this.roundedClasses),{},Object(n["a"])({"v-menu__content--auto":this.auto,"v-menu__content--fixed":this.activatorFixed,menuable__content__active:this.isActive},this.contentClass.trim(),!0)),style:this.styles,directives:this.genDirectives(),ref:"content",on:{click:function(t){var i=t.target;i.getAttribute("disabled")||e.closeOnContentClick&&(e.isActive=!1)},keydown:this.onKeyDown}};return this.$listeners.scroll&&(t.on=t.on||{},t.on.scroll=this.$listeners.scroll),!this.disabled&&this.openOnHover&&(t.on=t.on||{},t.on.mouseenter=this.mouseEnterHandler),this.openOnHover&&(t.on=t.on||{},t.on.mouseleave=this.mouseLeaveHandler),this.$createElement("div",t,this.getContentSlot())},getTiles:function(){this.$refs.content&&(this.tiles=Array.from(this.$refs.content.querySelectorAll(".v-list-item")))},mouseEnterHandler:function(){var e=this;this.runDelay("open",(function(){e.hasJustFocused||(e.hasJustFocused=!0)}))},mouseLeaveHandler:function(e){var t=this;this.runDelay("close",(function(){t.$refs.content.contains(e.relatedTarget)||requestAnimationFrame((function(){t.isActive=!1,t.callDeactivate()}))}))},nextTile:function(){var e=this.tiles[this.listIndex+1];if(!e){if(!this.tiles.length)return;return this.listIndex=-1,void this.nextTile()}this.listIndex++,-1===e.tabIndex&&this.nextTile()},prevTile:function(){var e=this.tiles[this.listIndex-1];if(!e){if(!this.tiles.length)return;return this.listIndex=this.tiles.length,void this.prevTile()}this.listIndex--,-1===e.tabIndex&&this.prevTile()},lastTile:function(){var e=this.tiles[this.tiles.length-1];e&&(this.listIndex=this.tiles.length-1,-1===e.tabIndex&&this.prevTile())},firstTile:function(){var e=this.tiles[0];e&&(this.listIndex=0,-1===e.tabIndex&&this.nextTile())},onKeyDown:function(e){var t=this;if(e.keyCode===p["r"].esc){setTimeout((function(){t.isActive=!1}));var i=this.getActivator();this.$nextTick((function(){return i&&i.focus()}))}else!this.isActive&&[p["r"].up,p["r"].down].includes(e.keyCode)&&(this.isActive=!0);this.$nextTick((function(){return t.changeListIndex(e)}))},onResize:function(){this.isActive&&(this.$refs.content.offsetWidth,this.updateDimensions(),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateDimensions,100))}},render:function(e){var t=this,i={staticClass:"v-menu",class:{"v-menu--attached":""===this.attach||!0===this.attach||"attach"===this.attach},directives:[{arg:"500",name:"resize",value:this.onResize}]};return e("div",i,[!this.activator&&this.genActivator(),this.showLazyContent((function(){return[t.$createElement(o,{props:{root:!0,light:t.light,dark:t.dark}},[t.genTransition()])]}))])}})},e538:function(e,t,i){var n=i("b622");t.f=n},e58c:function(e,t,i){"use strict";var n=i("fc6a"),s=i("a691"),r=i("50c4"),a=i("a640"),o=Math.min,l=[].lastIndexOf,h=!!l&&1/[1].lastIndexOf(1,-0)<0,c=a("lastIndexOf"),u=h||!c;e.exports=u?function(e){if(h)return l.apply(this,arguments)||0;var t=n(this),i=r(t.length),a=i-1;for(arguments.length>1&&(a=o(a,s(arguments[1]))),a<0&&(a=i+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:l},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e6cf:function(e,t,i){"use strict";var n,s,r,a,o=i("23e7"),l=i("c430"),h=i("da84"),c=i("d066"),u=i("fea9"),d=i("6eeb"),p=i("e2cc"),f=i("d2bb"),g=i("d44e"),m=i("2626"),b=i("861d"),y=i("1c0b"),v=i("19aa"),w=i("8925"),S=i("2266"),_=i("1c7e"),k=i("4840"),T=i("2cf4").set,B=i("b575"),x=i("cdf9"),N=i("44de"),C=i("f069"),E=i("e667"),P=i("69f3"),L=i("94ca"),O=i("b622"),F=i("6069"),M=i("605d"),A=i("2d00"),I=O("species"),D="Promise",R=P.get,V=P.set,H=P.getterFor(D),G=u&&u.prototype,W=u,j=G,$=h.TypeError,z=h.document,U=h.process,X=C.f,Y=X,q=!!(z&&z.createEvent&&h.dispatchEvent),J="function"==typeof PromiseRejectionEvent,Q="unhandledrejection",K="rejectionhandled",Z=0,ee=1,te=2,ie=1,ne=2,se=!1,re=L(D,(function(){var e=w(W),t=e!==String(W);if(!t&&66===A)return!0;if(l&&!j["finally"])return!0;if(A>=51&&/native code/.test(e))return!1;var i=new W((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))},s=i.constructor={};return s[I]=n,se=i.then((function(){}))instanceof n,!se||!t&&F&&!J})),ae=re||!_((function(e){W.all(e)["catch"]((function(){}))})),oe=function(e){var t;return!(!b(e)||"function"!=typeof(t=e.then))&&t},le=function(e,t){if(!e.notified){e.notified=!0;var i=e.reactions;B((function(){var n=e.value,s=e.state==ee,r=0;while(i.length>r){var a,o,l,h=i[r++],c=s?h.ok:h.fail,u=h.resolve,d=h.reject,p=h.domain;try{c?(s||(e.rejection===ne&&de(e),e.rejection=ie),!0===c?a=n:(p&&p.enter(),a=c(n),p&&(p.exit(),l=!0)),a===h.promise?d($("Promise-chain cycle")):(o=oe(a))?o.call(a,u,d):u(a)):d(n)}catch(f){p&&!l&&p.exit(),d(f)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ce(e)}))}},he=function(e,t,i){var n,s;q?(n=z.createEvent("Event"),n.promise=t,n.reason=i,n.initEvent(e,!1,!0),h.dispatchEvent(n)):n={promise:t,reason:i},!J&&(s=h["on"+e])?s(n):e===Q&&N("Unhandled promise rejection",i)},ce=function(e){T.call(h,(function(){var t,i=e.facade,n=e.value,s=ue(e);if(s&&(t=E((function(){M?U.emit("unhandledRejection",n,i):he(Q,i,n)})),e.rejection=M||ue(e)?ne:ie,t.error))throw t.value}))},ue=function(e){return e.rejection!==ie&&!e.parent},de=function(e){T.call(h,(function(){var t=e.facade;M?U.emit("rejectionHandled",t):he(K,t,e.value)}))},pe=function(e,t,i){return function(n){e(t,n,i)}},fe=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=te,le(e,!0))},ge=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw $("Promise can't be resolved itself");var n=oe(t);n?B((function(){var i={done:!1};try{n.call(t,pe(ge,i,e),pe(fe,i,e))}catch(s){fe(i,s,e)}})):(e.value=t,e.state=ee,le(e,!1))}catch(s){fe({done:!1},s,e)}}};if(re&&(W=function(e){v(this,W,D),y(e),n.call(this);var t=R(this);try{e(pe(ge,t),pe(fe,t))}catch(i){fe(t,i)}},j=W.prototype,n=function(e){V(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:Z,value:void 0})},n.prototype=p(j,{then:function(e,t){var i=H(this),n=X(k(this,W));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=M?U.domain:void 0,i.parent=!0,i.reactions.push(n),i.state!=Z&&le(i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new n,t=R(e);this.promise=e,this.resolve=pe(ge,t),this.reject=pe(fe,t)},C.f=X=function(e){return e===W||e===r?new s(e):Y(e)},!l&&"function"==typeof u&&G!==Object.prototype)){a=G.then,se||(d(G,"then",(function(e,t){var i=this;return new W((function(e,t){a.call(i,e,t)})).then(e,t)}),{unsafe:!0}),d(G,"catch",j["catch"],{unsafe:!0}));try{delete G.constructor}catch(me){}f&&f(G,j)}o({global:!0,wrap:!0,forced:re},{Promise:W}),g(W,D,!1,!0),m(D),r=c(D),o({target:D,stat:!0,forced:re},{reject:function(e){var t=X(this);return t.reject.call(void 0,e),t.promise}}),o({target:D,stat:!0,forced:l||re},{resolve:function(e){return x(l&&this===r?W:this,e)}}),o({target:D,stat:!0,forced:ae},{all:function(e){var t=this,i=X(t),n=i.resolve,s=i.reject,r=E((function(){var i=y(t.resolve),r=[],a=0,o=1;S(e,(function(e){var l=a++,h=!1;r.push(void 0),o++,i.call(t,e).then((function(e){h||(h=!0,r[l]=e,--o||n(r))}),s)})),--o||n(r)}));return r.error&&s(r.value),i.promise},race:function(e){var t=this,i=X(t),n=i.reject,s=E((function(){var s=y(t.resolve);S(e,(function(e){s.call(t,e).then(i.resolve,n)}))}));return s.error&&n(s.value),i.promise}})},e893:function(e,t,i){var n=i("5135"),s=i("56ef"),r=i("06cf"),a=i("9bf2");e.exports=function(e,t){for(var i=s(t),o=a.f,l=r.f,h=0;h<i.length;h++){var c=i[h];n(e,c)||o(e,c,l(t,c))}}},e8b5:function(e,t,i){var n=i("c6b6");e.exports=Array.isArray||function(e){return"Array"==n(e)}},e8f2:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("498a"),i("99af"),i("4de4"),i("b64b"),i("2ca0"),i("a15b");var n=i("2b0e");function s(e){return n["a"].extend({name:"v-".concat(e),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,i){var n=i.props,s=i.data,r=i.children;s.staticClass="".concat(e," ").concat(s.staticClass||"").trim();var a=s.attrs;if(a){s.attrs={};var o=Object.keys(a).filter((function(e){if("slot"===e)return!1;var t=a[e];return e.startsWith("data-")?(s.attrs[e]=t,!1):t||"string"===typeof t}));o.length&&(s.staticClass+=" ".concat(o.join(" ")))}return n.id&&(s.domProps=s.domProps||{},s.domProps.id=n.id),t(n.tag,s,r)}})}},e91f:function(e,t,i){"use strict";var n=i("ebb5"),s=i("4d64").indexOf,r=n.aTypedArray,a=n.exportTypedArrayMethod;a("indexOf",(function(e){return s(r(this),e,arguments.length>1?arguments[1]:void 0)}))},e95a:function(e,t,i){var n=i("b622"),s=i("3f8c"),r=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||a[r]===e)}},e9b1:function(e,t,i){},ebb5:function(e,t,i){"use strict";var n,s,r,a=i("a981"),o=i("83ab"),l=i("da84"),h=i("861d"),c=i("5135"),u=i("f5df"),d=i("9112"),p=i("6eeb"),f=i("9bf2").f,g=i("e163"),m=i("d2bb"),b=i("b622"),y=i("90e3"),v=l.Int8Array,w=v&&v.prototype,S=l.Uint8ClampedArray,_=S&&S.prototype,k=v&&g(v),T=w&&g(w),B=Object.prototype,x=B.isPrototypeOf,N=b("toStringTag"),C=y("TYPED_ARRAY_TAG"),E=y("TYPED_ARRAY_CONSTRUCTOR"),P=a&&!!m&&"Opera"!==u(l.opera),L=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},F={BigInt64Array:8,BigUint64Array:8},M=function(e){if(!h(e))return!1;var t=u(e);return"DataView"===t||c(O,t)||c(F,t)},A=function(e){if(!h(e))return!1;var t=u(e);return c(O,t)||c(F,t)},I=function(e){if(A(e))return e;throw TypeError("Target is not a typed array")},D=function(e){if(m&&!x.call(k,e))throw TypeError("Target is not a typed array constructor");return e},R=function(e,t,i){if(o){if(i)for(var n in O){var s=l[n];if(s&&c(s.prototype,e))try{delete s.prototype[e]}catch(r){}}T[e]&&!i||p(T,e,i?t:P&&w[e]||t)}},V=function(e,t,i){var n,s;if(o){if(m){if(i)for(n in O)if(s=l[n],s&&c(s,e))try{delete s[e]}catch(r){}if(k[e]&&!i)return;try{return p(k,e,i?t:P&&k[e]||t)}catch(r){}}for(n in O)s=l[n],!s||s[e]&&!i||p(s,e,t)}};for(n in O)s=l[n],r=s&&s.prototype,r?d(r,E,s):P=!1;for(n in F)s=l[n],r=s&&s.prototype,r&&d(r,E,s);if((!P||"function"!=typeof k||k===Function.prototype)&&(k=function(){throw TypeError("Incorrect invocation")},P))for(n in O)l[n]&&m(l[n],k);if((!P||!T||T===B)&&(T=k.prototype,P))for(n in O)l[n]&&m(l[n].prototype,T);if(P&&g(_)!==T&&m(_,T),o&&!c(T,N))for(n in L=!0,f(T,N,{get:function(){return h(this)?this[C]:void 0}}),O)l[n]&&d(l[n],C,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_CONSTRUCTOR:E,TYPED_ARRAY_TAG:L&&C,aTypedArray:I,aTypedArrayConstructor:D,exportTypedArrayMethod:R,exportTypedArrayStaticMethod:V,isView:M,isTypedArray:A,TypedArray:k,TypedArrayPrototype:T}},ee6f:function(e,t,i){},f069:function(e,t,i){"use strict";var n=i("1c0b"),s=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)};e.exports.f=function(e){return new s(e)}},f183:function(e,t,i){var n=i("23e7"),s=i("d012"),r=i("861d"),a=i("5135"),o=i("9bf2").f,l=i("241c"),h=i("057f"),c=i("90e3"),u=i("bb2f"),d=!1,p=c("meta"),f=0,g=Object.isExtensible||function(){return!0},m=function(e){o(e,p,{value:{objectID:"O"+f++,weakData:{}}})},b=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,p)){if(!g(e))return"F";if(!t)return"E";m(e)}return e[p].objectID},y=function(e,t){if(!a(e,p)){if(!g(e))return!0;if(!t)return!1;m(e)}return e[p].weakData},v=function(e){return u&&d&&g(e)&&!a(e,p)&&m(e),e},w=function(){S.enable=function(){},d=!0;var e=l.f,t=[].splice,i={};i[p]=1,e(i).length&&(l.f=function(i){for(var n=e(i),s=0,r=n.length;s<r;s++)if(n[s]===p){t.call(n,s,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:h.f}))},S=e.exports={enable:w,fastKey:b,getWeakData:y,onFreeze:v};s[p]=!0},f2e7:function(e,t,i){"use strict";i.d(t,"b",(function(){return r}));var n=i("ade3"),s=i("2b0e");function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";return s["a"].extend({name:"toggleable",model:{prop:t,event:i},props:Object(n["a"])({},t,{required:!1}),data:function(){return{isActive:!!this[t]}},watch:(e={},Object(n["a"])(e,t,(function(e){this.isActive=!!e})),Object(n["a"])(e,"isActive",(function(e){!!e!==this[t]&&this.$emit(i,e)})),e)})}var a=r();t["a"]=a},f309:function(e,t,i){"use strict";i.d(t,"a",(function(){return Me}));var n={};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}i.r(n),i.d(n,"linear",(function(){return P})),i.d(n,"easeInQuad",(function(){return L})),i.d(n,"easeOutQuad",(function(){return O})),i.d(n,"easeInOutQuad",(function(){return F})),i.d(n,"easeInCubic",(function(){return M})),i.d(n,"easeOutCubic",(function(){return A})),i.d(n,"easeInOutCubic",(function(){return I})),i.d(n,"easeInQuart",(function(){return D})),i.d(n,"easeOutQuart",(function(){return R})),i.d(n,"easeInOutQuart",(function(){return V})),i.d(n,"easeInQuint",(function(){return H})),i.d(n,"easeOutQuint",(function(){return G})),i.d(n,"easeInOutQuint",(function(){return W}));i("159b"),i("caad"),i("2532");var o=i("2b0e"),l=i("d9bd");function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!h.installed){h.installed=!0,o["a"]!==e&&Object(l["b"])("Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this");var i=t.components||{},n=t.directives||{};for(var s in n){var r=n[s];e.directive(s,r)}(function t(i){if(i){for(var n in i){var s=i[n];s&&!t(s.$_vuetify_subcomponents)&&e.component(n,s)}return!0}return!1})(i),e.$_vuetify_installed||(e.$_vuetify_installed=!0,e.mixin({beforeCreate:function(){var t=this.$options;t.vuetify?(t.vuetify.init(this,this.$ssrContext),this.$vuetify=e.observable(t.vuetify.framework)):this.$vuetify=t.parent&&t.parent.$vuetify||this},beforeMount:function(){this.$options.vuetify&&this.$el&&this.$el.hasAttribute("data-server-rendered")&&(this.$vuetify.isHydrating=!0,this.$vuetify.breakpoint.update(!0))},mounted:function(){this.$options.vuetify&&this.$vuetify.isHydrating&&(this.$vuetify.isHydrating=!1,this.$vuetify.breakpoint.update())}}))}}var c=i("15fd");function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}i("4ae1"),i("3410");function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var g=i("7037"),m=i.n(g);function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if(t&&("object"===m()(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function v(e){var t=f();return function(){var i,n=p(e);if(t){var s=p(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return y(this,i)}}i("95ed");var w={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{wrapper:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Current Page, Page {0}"}},rating:{ariaLabel:{icon:"Rating {0} of {1}"}}},S={breakpoint:{mobileBreakpoint:1264,scrollBarWidth:16,thresholds:{xs:600,sm:960,md:1280,lg:1920}},icons:{iconfont:"mdi",values:{}},lang:{current:"en",locales:{en:w},t:void 0},rtl:!1,theme:{dark:!1,default:"light",disable:!1,options:{cspNonce:void 0,customProperties:void 0,minifyTheme:void 0,themeCache:void 0,variations:!0},themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},dark:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}}}},_=i("80d2"),k=function(){function e(){s(this,e),this.framework={}}return a(e,[{key:"init",value:function(e,t){}}]),e}(),T=["preset"],B=function(e){d(i,e);var t=v(i);function i(e,n){var r;s(this,i),r=t.call(this);var a=Object(_["t"])({},S),o=n.userPreset,h=o.preset,u=void 0===h?{}:h,d=Object(c["a"])(o,T);return null!=u.preset&&Object(l["c"])("Global presets do not support the **preset** option, it can be safely omitted"),n.preset=Object(_["t"])(Object(_["t"])(a,u),d),r}return i}(k);B.property="presets";var x=i("ade3"),N=(i("07ac"),function(e){d(i,e);var t=v(i);function i(){var e;return s(this,i),e=t.apply(this,arguments),e.bar=0,e.top=0,e.left=0,e.insetFooter=0,e.right=0,e.bottom=0,e.footer=0,e.application={bar:{},top:{},left:{},insetFooter:{},right:{},bottom:{},footer:{}},e}return a(i,[{key:"register",value:function(e,t,i){this.application[t]=Object(x["a"])({},e,i),this.update(t)}},{key:"unregister",value:function(e,t){null!=this.application[t][e]&&(delete this.application[t][e],this.update(t))}},{key:"update",value:function(e){this[e]=Object.values(this.application[e]).reduce((function(e,t){return e+t}),0)}}]),i}(k));N.property="application";i("b0c0");var C=function(e){d(i,e);var t=v(i);function i(e){var n;s(this,i),n=t.call(this),n.xs=!1,n.sm=!1,n.md=!1,n.lg=!1,n.xl=!1,n.xsOnly=!1,n.smOnly=!1,n.smAndDown=!1,n.smAndUp=!1,n.mdOnly=!1,n.mdAndDown=!1,n.mdAndUp=!1,n.lgOnly=!1,n.lgAndDown=!1,n.lgAndUp=!1,n.xlOnly=!1,n.name="xs",n.height=0,n.width=0,n.mobile=!0,n.resizeTimeout=0;var r=e[i.property],a=r.mobileBreakpoint,o=r.scrollBarWidth,l=r.thresholds;return n.mobileBreakpoint=a,n.scrollBarWidth=o,n.thresholds=l,n}return a(i,[{key:"init",value:function(){this.update(),"undefined"!==typeof window&&window.addEventListener("resize",this.onResize.bind(this),{passive:!0})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?0:this.getClientHeight(),i=e?0:this.getClientWidth(),n=i<this.thresholds.xs,s=i<this.thresholds.sm&&!n,r=i<this.thresholds.md-this.scrollBarWidth&&!(s||n),a=i<this.thresholds.lg-this.scrollBarWidth&&!(r||s||n),o=i>=this.thresholds.lg-this.scrollBarWidth;switch(this.height=t,this.width=i,this.xs=n,this.sm=s,this.md=r,this.lg=a,this.xl=o,this.xsOnly=n,this.smOnly=s,this.smAndDown=(n||s)&&!(r||a||o),this.smAndUp=!n&&(s||r||a||o),this.mdOnly=r,this.mdAndDown=(n||s||r)&&!(a||o),this.mdAndUp=!(n||s)&&(r||a||o),this.lgOnly=a,this.lgAndDown=(n||s||r||a)&&!o,this.lgAndUp=!(n||s||r)&&(a||o),this.xlOnly=o,!0){case n:this.name="xs";break;case s:this.name="sm";break;case r:this.name="md";break;case a:this.name="lg";break;default:this.name="xl";break}if("number"!==typeof this.mobileBreakpoint){var l={xs:0,sm:1,md:2,lg:3,xl:4},h=l[this.name],c=l[this.mobileBreakpoint];this.mobile=h<=c}else this.mobile=i<parseInt(this.mobileBreakpoint,10)}},{key:"onResize",value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.update.bind(this),200)}},{key:"getClientWidth",value:function(){return"undefined"===typeof document?0:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}},{key:"getClientHeight",value:function(){return"undefined"===typeof document?0:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}]),i}(k);C.property="breakpoint";var E=i("5530"),P=(i("d3b7"),function(e){return e}),L=function(e){return Math.pow(e,2)},O=function(e){return e*(2-e)},F=function(e){return e<.5?2*Math.pow(e,2):(4-2*e)*e-1},M=function(e){return Math.pow(e,3)},A=function(e){return Math.pow(--e,3)+1},I=function(e){return e<.5?4*Math.pow(e,3):(e-1)*(2*e-2)*(2*e-2)+1},D=function(e){return Math.pow(e,4)},R=function(e){return 1-Math.pow(--e,4)},V=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},H=function(e){return Math.pow(e,5)},G=function(e){return 1+Math.pow(--e,5)},W=function(e){return e<.5?16*Math.pow(e,5):1+16*Math.pow(--e,5)};function j(e){if("number"===typeof e)return e;var t=U(e);if(!t)throw"string"===typeof e?new Error('Target element "'.concat(e,'" not found.')):new TypeError("Target must be a Number/Selector/HTMLElement/VueComponent, received ".concat(z(e)," instead."));var i=0;while(t)i+=t.offsetTop,t=t.offsetParent;return i}function $(e){var t=U(e);if(t)return t;throw"string"===typeof e?new Error('Container element "'.concat(e,'" not found.')):new TypeError("Container must be a Selector/HTMLElement/VueComponent, received ".concat(z(e)," instead."))}function z(e){return null==e?e:e.constructor.name}function U(e){return"string"===typeof e?document.querySelector(e):e&&e._isVue?e.$el:e instanceof HTMLElement?e:null}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(E["a"])({container:document.scrollingElement||document.body||document.documentElement,duration:500,offset:0,easing:"easeInOutCubic",appOffset:!0},t),s=$(i.container);if(i.appOffset&&X.framework.application){var r=s.classList.contains("v-navigation-drawer"),a=s.classList.contains("v-navigation-drawer--clipped"),o=X.framework.application,l=o.bar,h=o.top;i.offset+=l,r&&!a||(i.offset+=h)}var c,u=performance.now();c="number"===typeof e?j(e)-i.offset:j(e)-j(s)-i.offset;var d=s.scrollTop;if(c===d)return Promise.resolve(c);var p="function"===typeof i.easing?i.easing:n[i.easing];if(!p)throw new TypeError('Easing function "'.concat(i.easing,'" not found.'));return new Promise((function(e){return requestAnimationFrame((function t(n){var r=n-u,a=Math.abs(i.duration?Math.min(r/i.duration,1):1);s.scrollTop=Math.floor(d+(c-d)*p(a));var o=s===document.body?document.documentElement.clientHeight:s.clientHeight;if(1===a||o+s.scrollTop===s.scrollHeight)return e(c);requestAnimationFrame(t)}))}))}X.framework={},X.init=function(){};var Y=function(e){d(i,e);var t=v(i);function i(){var e;return s(this,i),e=t.call(this),y(e,X)}return i}(k);Y.property="goTo";i("ddb0"),i("dca8");var q={complete:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",cancel:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",delete:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",clear:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",success:"M12,2C17.52,2 22,6.48 22,12C22,17.52 17.52,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z",info:"M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",warning:"M11,4.5H13V15.5H11V4.5M13,17.5V19.5H11V17.5H13Z",error:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z",prev:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",next:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",checkboxOn:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",checkboxOff:"M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",checkboxIndeterminate:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",delimiter:"M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",sort:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",expand:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",subgroup:"M7,10L12,15L17,10H7Z",dropdown:"M7,10L12,15L17,10H7Z",radioOn:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z",radioOff:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ratingEmpty:"M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",ratingFull:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ratingHalf:"M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",loading:"M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12",first:"M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z",last:"M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z",unfold:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",file:"M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z"},J=q,Q={complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"clear",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached",first:"first_page",last:"last_page",unfold:"unfold_more",file:"attach_file",plus:"add",minus:"remove"},K=Q,Z={complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-exclamation",error:"mdi-alert",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},ee=Z,te={complete:"fas fa-check",cancel:"fas fa-times-circle",close:"fas fa-times",delete:"fas fa-times-circle",clear:"fas fa-times-circle",success:"fas fa-check-circle",info:"fas fa-info-circle",warning:"fas fa-exclamation",error:"fas fa-exclamation-triangle",prev:"fas fa-chevron-left",next:"fas fa-chevron-right",checkboxOn:"fas fa-check-square",checkboxOff:"far fa-square",checkboxIndeterminate:"fas fa-minus-square",delimiter:"fas fa-circle",sort:"fas fa-sort-up",expand:"fas fa-chevron-down",menu:"fas fa-bars",subgroup:"fas fa-caret-down",dropdown:"fas fa-caret-down",radioOn:"far fa-dot-circle",radioOff:"far fa-circle",edit:"fas fa-edit",ratingEmpty:"far fa-star",ratingFull:"fas fa-star",ratingHalf:"fas fa-star-half",loading:"fas fa-sync",first:"fas fa-step-backward",last:"fas fa-step-forward",unfold:"fas fa-arrows-alt-v",file:"fas fa-paperclip",plus:"fas fa-plus",minus:"fas fa-minus"},ie=te,ne={complete:"fa fa-check",cancel:"fa fa-times-circle",close:"fa fa-times",delete:"fa fa-times-circle",clear:"fa fa-times-circle",success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation",error:"fa fa-exclamation-triangle",prev:"fa fa-chevron-left",next:"fa fa-chevron-right",checkboxOn:"fa fa-check-square",checkboxOff:"fa fa-square-o",checkboxIndeterminate:"fa fa-minus-square",delimiter:"fa fa-circle",sort:"fa fa-sort-up",expand:"fa fa-chevron-down",menu:"fa fa-bars",subgroup:"fa fa-caret-down",dropdown:"fa fa-caret-down",radioOn:"fa fa-dot-circle-o",radioOff:"fa fa-circle-o",edit:"fa fa-pencil",ratingEmpty:"fa fa-star-o",ratingFull:"fa fa-star",ratingHalf:"fa fa-star-half-o",loading:"fa fa-refresh",first:"fa fa-step-backward",last:"fa fa-step-forward",unfold:"fa fa-angle-double-down",file:"fa fa-paperclip",plus:"fa fa-plus",minus:"fa fa-minus"},se=ne;i("ac1f"),i("1276");function re(e,t){var i={};for(var n in t)i[n]={component:e,props:{icon:t[n].split(" fa-")}};return i}var ae=re("font-awesome-icon",ie),oe=Object.freeze({mdiSvg:J,md:K,mdi:ee,fa:ie,fa4:se,faSvg:ae}),le=function(e){d(i,e);var t=v(i);function i(e){var n;s(this,i),n=t.call(this);var r=e[i.property],a=r.iconfont,o=r.values,l=r.component;return n.component=l,n.iconfont=a,n.values=Object(_["t"])(oe[a],o),n}return i}(k);le.property="icons";i("a4d3"),i("e01a"),i("5319"),i("2ca0"),i("99af");var he="$vuetify.",ce=Symbol("Lang fallback");function ue(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=t.replace(he,""),r=Object(_["l"])(e,s,ce);return r===ce&&(i?(Object(l["b"])('Translation key "'.concat(s,'" not found in fallback')),r=t):(Object(l["c"])('Translation key "'.concat(s,'" not found, falling back to default')),r=ue(n,t,!0,n))),r}var de=function(e){d(i,e);var t=v(i);function i(e){var n;s(this,i),n=t.call(this),n.defaultLocale="en";var r=e[i.property],a=r.current,o=r.locales,l=r.t;return n.current=a,n.locales=o,n.translator=l||n.defaultTranslator,n}return a(i,[{key:"currentLocale",value:function(e){var t=this.locales[this.current],i=this.locales[this.defaultLocale];return ue(t,e,!1,i)}},{key:"t",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.startsWith(he)?this.translator.apply(this,[e].concat(i)):this.replace(e,i)}},{key:"defaultTranslator",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this.replace(this.currentLocale(e),i)}},{key:"replace",value:function(e,t){return e.replace(/\{(\d+)\}/g,(function(e,i){return String(t[+i])}))}}]),i}(k);de.property="lang";i("7db0");var pe=i("3835"),fe=i("53ca"),ge=(i("18a5"),i("b64b"),i("7bc6")),me=i("8da5"),be=(i("3ea3"),.20689655172413793),ye=function(e){return e>Math.pow(be,3)?Math.cbrt(e):e/(3*Math.pow(be,2))+4/29},ve=function(e){return e>be?Math.pow(e,3):3*Math.pow(be,2)*(e-4/29)};function we(e){var t=ye,i=t(e[1]);return[116*i-16,500*(t(e[0]/.95047)-i),200*(i-t(e[2]/1.08883))]}function Se(e){var t=ve,i=(e[0]+16)/116;return[.95047*t(i+e[1]/500),t(i),1.08883*t(i-e[2]/200)]}var _e=["anchor"],ke=["anchor"];function Te(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.anchor,s=Object(c["a"])(e,_e),r=Object.keys(s),a={},o=0;o<r.length;++o){var l=r[o],h=e[l];null!=h&&(i?t?("base"===l||l.startsWith("lighten")||l.startsWith("darken"))&&(a[l]=Object(ge["a"])(h)):"object"===Object(fe["a"])(h)?a[l]=Te(h,!0,i):a[l]=Pe(l,Object(ge["b"])(h)):a[l]={base:Object(ge["c"])(Object(ge["b"])(h))})}return t||(a.anchor=n||a.base||a.primary.base),a}var Be=function(e,t){return"\n.v-application .".concat(e," {\n  background-color: ").concat(t," !important;\n  border-color: ").concat(t," !important;\n}\n.v-application .").concat(e,"--text {\n  color: ").concat(t," !important;\n  caret-color: ").concat(t," !important;\n}")},xe=function(e,t,i){var n=t.split(/(\d)/,2),s=Object(pe["a"])(n,2),r=s[0],a=s[1];return"\n.v-application .".concat(e,".").concat(r,"-").concat(a," {\n  background-color: ").concat(i," !important;\n  border-color: ").concat(i," !important;\n}\n.v-application .").concat(e,"--text.text--").concat(r,"-").concat(a," {\n  color: ").concat(i," !important;\n  caret-color: ").concat(i," !important;\n}")},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"--v-".concat(e,"-").concat(t)},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"var(".concat(Ne(e,t),")")};function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.anchor,n=Object(c["a"])(e,ke),s=Object.keys(n);if(!s.length)return"";var r="",a="",o=t?Ce("anchor"):i;a+=".v-application a { color: ".concat(o,"; }"),t&&(r+="  ".concat(Ne("anchor"),": ").concat(i,";\n"));for(var l=0;l<s.length;++l){var h=s[l],u=e[h];a+=Be(h,t?Ce(h):u.base),t&&(r+="  ".concat(Ne(h),": ").concat(u.base,";\n"));for(var d=Object(_["s"])(u),p=0;p<d.length;++p){var f=d[p],g=u[f];"base"!==f&&(a+=xe(h,f,t?Ce(h,f):g),t&&(r+="  ".concat(Ne(h,f),": ").concat(g,";\n")))}}return t&&(r=":root {\n".concat(r,"}\n\n")),r+a}function Pe(e,t){for(var i={base:Object(ge["c"])(t)},n=5;n>0;--n)i["lighten".concat(n)]=Object(ge["c"])(Le(t,n));for(var s=1;s<=4;++s)i["darken".concat(s)]=Object(ge["c"])(Oe(t,s));return i}function Le(e,t){var i=we(me["b"](e));return i[0]=i[0]+10*t,me["a"](Se(i))}function Oe(e,t){var i=we(me["b"](e));return i[0]=i[0]-10*t,me["a"](Se(i))}var Fe=function(e){d(i,e);var t=v(i);function i(e){var n;s(this,i),n=t.call(this),n.disabled=!1,n.isDark=null,n.unwatch=null,n.vueMeta=null;var r=e[i.property],a=r.dark,o=r.disable,l=r.options,h=r.themes;return n.dark=Boolean(a),n.defaults=n.themes=h,n.options=l,o?(n.disabled=!0,y(n)):(n.themes={dark:n.fillVariant(h.dark,!0),light:n.fillVariant(h.light,!1)},n)}return a(i,[{key:"css",set:function(e){this.vueMeta?this.isVueMeta23&&this.applyVueMeta23():this.checkOrCreateStyleElement()&&(this.styleEl.innerHTML=e)}},{key:"dark",get:function(){return Boolean(this.isDark)},set:function(e){var t=this.isDark;this.isDark=e,null!=t&&this.applyTheme()}},{key:"applyTheme",value:function(){if(this.disabled)return this.clearCss();this.css=this.generatedStyles}},{key:"clearCss",value:function(){this.css=""}},{key:"init",value:function(e,t){this.disabled||(e.$meta?this.initVueMeta(e):t&&this.initSSR(t),this.initTheme(e))}},{key:"setTheme",value:function(e,t){this.themes[e]=Object.assign(this.themes[e],t),this.applyTheme()}},{key:"resetThemes",value:function(){this.themes.light=Object.assign({},this.defaults.light),this.themes.dark=Object.assign({},this.defaults.dark),this.applyTheme()}},{key:"checkOrCreateStyleElement",value:function(){return this.styleEl=document.getElementById("vuetify-theme-stylesheet"),!!this.styleEl||(this.genStyleElement(),Boolean(this.styleEl))}},{key:"fillVariant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,i=this.themes[t?"dark":"light"];return Object.assign({},i,e)}},{key:"genStyleElement",value:function(){"undefined"!==typeof document&&(this.styleEl=document.createElement("style"),this.styleEl.type="text/css",this.styleEl.id="vuetify-theme-stylesheet",this.options.cspNonce&&this.styleEl.setAttribute("nonce",this.options.cspNonce),document.head.appendChild(this.styleEl))}},{key:"initVueMeta",value:function(e){var t=this;if(this.vueMeta=e.$meta(),this.isVueMeta23)e.$nextTick((function(){t.applyVueMeta23()}));else{var i="function"===typeof this.vueMeta.getOptions?this.vueMeta.getOptions().keyName:"metaInfo",n=e.$options[i]||{};e.$options[i]=function(){n.style=n.style||[];var e=n.style.find((function(e){return"vuetify-theme-stylesheet"===e.id}));return e?e.cssText=t.generatedStyles:n.style.push({cssText:t.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:(t.options||{}).cspNonce}),n}}}},{key:"applyVueMeta23",value:function(){var e=this.vueMeta.addApp("vuetify"),t=e.set;t({style:[{cssText:this.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:this.options.cspNonce}]})}},{key:"initSSR",value:function(e){var t=this.options.cspNonce?' nonce="'.concat(this.options.cspNonce,'"'):"";e.head=e.head||"",e.head+='<style type="text/css" id="vuetify-theme-stylesheet"'.concat(t,">").concat(this.generatedStyles,"</style>")}},{key:"initTheme",value:function(e){var t=this;"undefined"!==typeof document&&(this.unwatch&&(this.unwatch(),this.unwatch=null),e.$once("hook:created",(function(){var i=o["a"].observable({themes:t.themes});t.unwatch=e.$watch((function(){return i.themes}),(function(){return t.applyTheme()}),{deep:!0})})),this.applyTheme())}},{key:"currentTheme",get:function(){var e=this.dark?"dark":"light";return this.themes[e]}},{key:"generatedStyles",get:function(){var e,t=this.parsedTheme,i=this.options||{};return null!=i.themeCache&&(e=i.themeCache.get(t),null!=e)||(e=Ee(t,i.customProperties),null!=i.minifyTheme&&(e=i.minifyTheme(e)),null!=i.themeCache&&i.themeCache.set(t,e)),e}},{key:"parsedTheme",get:function(){return Te(this.currentTheme||{},void 0,Object(_["k"])(this.options,["variations"],!0))}},{key:"isVueMeta23",get:function(){return"function"===typeof this.vueMeta.addApp}}]),i}(k);Fe.property="theme";var Me=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.framework={isHydrating:!1},this.installed=[],this.preset={},this.userPreset={},this.userPreset=t,this.use(B),this.use(N),this.use(C),this.use(Y),this.use(le),this.use(de),this.use(Fe)}return a(e,[{key:"init",value:function(e,t){var i=this;this.installed.forEach((function(n){var s=i.framework[n];s.framework=i.framework,s.init(e,t)})),this.framework.rtl=Boolean(this.preset.rtl)}},{key:"use",value:function(e){var t=e.property;this.installed.includes(t)||(this.framework[t]=new e(this.preset,this),this.installed.push(t))}}]),e}();Me.install=h,Me.installed=!1,Me.version="2.5.8",Me.config={silent:!1}},f5df:function(e,t,i){var n=i("00ee"),s=i("c6b6"),r=i("b622"),a=r("toStringTag"),o="Arguments"==s(function(){return arguments}()),l=function(e,t){try{return e[t]}catch(i){}};e.exports=n?s:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=l(t=Object(e),a))?i:o?s(t):"Object"==(n=s(t))&&"function"==typeof t.callee?"Arguments":n}},f6c4:function(e,t,i){"use strict";i("bd0c");var n=i("d10f");t["a"]=n["a"].extend({name:"v-main",props:{tag:{type:String,default:"main"}},computed:{styles:function(){var e=this.$vuetify.application,t=e.bar,i=e.top,n=e.right,s=e.footer,r=e.insetFooter,a=e.bottom,o=e.left;return{paddingTop:"".concat(i+t,"px"),paddingRight:"".concat(n,"px"),paddingBottom:"".concat(s+r+a,"px"),paddingLeft:"".concat(o,"px")}}},render:function(e){var t={staticClass:"v-main",style:this.styles,ref:"main"};return e(this.tag,t,[e("div",{staticClass:"v-main__wrap"},this.$slots.default)])}})},f748:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},f772:function(e,t,i){var n=i("5692"),s=i("90e3"),r=n("keys");e.exports=function(e){return r[e]||(r[e]=s(e))}},f774:function(e,t,i){"use strict";var n=i("5530"),s=(i("a9e3"),i("c7cd"),i("99af"),i("7958"),i("adda")),r=i("3a66"),a=i("a9ad"),o=i("b848"),l=(i("caad"),i("b0c0"),i("d9bd")),h=i("2b0e"),c=h["a"].extend({name:"mobile",props:{mobileBreakpoint:{type:[Number,String],default:function(){return this.$vuetify?this.$vuetify.breakpoint.mobileBreakpoint:void 0},validator:function(e){return!isNaN(Number(e))||["xs","sm","md","lg","xl"].includes(String(e))}}},computed:{isMobile:function(){var e=this.$vuetify.breakpoint,t=e.mobile,i=e.width,n=e.name,s=e.mobileBreakpoint;if(s===this.mobileBreakpoint)return t;var r=parseInt(this.mobileBreakpoint,10),a=!isNaN(r);return a?i<r:n===this.mobileBreakpoint}},created:function(){this.$attrs.hasOwnProperty("mobile-break-point")&&Object(l["d"])("mobile-break-point","mobile-breakpoint",this)}}),u=(i("2532"),i("3c93"),i("7560")),d=i("f2e7"),p=i("58df"),f=Object(p["a"])(a["a"],u["a"],d["a"]).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim:function(){var e=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",e)},classes:function(){return Object(n["a"])({"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive},this.themeClasses)},computedOpacity:function(){return Number(this.isActive?this.opacity:0)},styles:function(){return{zIndex:this.zIndex}}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render:function(e){var t=[this.__scrim];return this.isActive&&t.push(this.genContent()),e("div",{staticClass:"v-overlay",class:this.classes,style:this.styles},t)}}),g=f,m=i("80d2"),b=h["a"].extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data:function(){return{animationFrame:0,overlay:null}},watch:{hideOverlay:function(e){this.isActive&&(e?this.removeOverlay():this.genOverlay())}},beforeDestroy:function(){this.removeOverlay()},methods:{createOverlay:function(){var e=new g({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});e.$mount();var t=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");t&&t.insertBefore(e.$el,t.firstChild),this.overlay=e},genOverlay:function(){var e=this;if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((function(){e.overlay&&(void 0!==e.activeZIndex?e.overlay.zIndex=String(e.activeZIndex-1):e.$el&&(e.overlay.zIndex=Object(m["o"])(e.$el)),e.overlay.value=!0)})),!0},removeOverlay:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.overlay&&(Object(m["a"])(this.overlay.$el,"transitionend",(function(){e.overlay&&e.overlay.$el&&e.overlay.$el.parentNode&&!e.overlay.value&&!e.isActive&&(e.overlay.$el.parentNode.removeChild(e.overlay.$el),e.overlay.$destroy(),e.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),t&&this.showScroll()},scrollListener:function(e){if("keydown"===e.type){if(["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||e.target.isContentEditable)return;var t=[m["r"].up,m["r"].pageup],i=[m["r"].down,m["r"].pagedown];if(t.includes(e.keyCode))e.deltaY=-1;else{if(!i.includes(e.keyCode))return;e.deltaY=1}}(e.target===this.overlay||"keydown"!==e.type&&e.target===document.body||this.checkPath(e))&&e.preventDefault()},hasScrollbar:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e);return["auto","scroll"].includes(t.overflowY)&&e.scrollHeight>e.clientHeight},shouldScroll:function(e,t){if(e.hasAttribute("data-app"))return!1;var i=0===e.scrollTop,n=e.scrollTop+e.clientHeight===e.scrollHeight,s=t<0,r=t>0;return!(i||!s)||(!(n||!r)||!(!i&&!n)&&this.shouldScroll(e.parentNode,t))},isInside:function(e,t){return e===t||null!==e&&e!==document.body&&this.isInside(e.parentNode,t)},checkPath:function(e){var t=e.path||this.composedPath(e),i=e.deltaY;if("keydown"===e.type&&t[0]===document.body){var n=this.$refs.dialog,s=window.getSelection().anchorNode;return!(n&&this.hasScrollbar(n)&&this.isInside(s,n))||!this.shouldScroll(n,i)}for(var r=0;r<t.length;r++){var a=t[r];if(a===document)return!0;if(a===document.documentElement)return!0;if(a===this.$refs.content)return!0;if(this.hasScrollbar(a))return!this.shouldScroll(a,i)}return!0},composedPath:function(e){if(e.composedPath)return e.composedPath();var t=[],i=e.target;while(i){if(t.push(i),"HTML"===i.tagName)return t.push(document),t.push(window),t;i=i.parentElement}return t},hideScroll:function(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(m["b"])(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll:function(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),y=i("d10f"),v=i("a293"),w=i("dc22"),S=(i("159b"),function(e){var t=e.touchstartX,i=e.touchendX,n=e.touchstartY,s=e.touchendY,r=.5,a=16;e.offsetX=i-t,e.offsetY=s-n,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&i<t-a&&e.left(e),e.right&&i>t+a&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<n-a&&e.up(e),e.down&&s>n+a&&e.down(e))});function _(e,t){var i=e.changedTouches[0];t.touchstartX=i.clientX,t.touchstartY=i.clientY,t.start&&t.start(Object.assign(e,t))}function k(e,t){var i=e.changedTouches[0];t.touchendX=i.clientX,t.touchendY=i.clientY,t.end&&t.end(Object.assign(e,t)),S(t)}function T(e,t){var i=e.changedTouches[0];t.touchmoveX=i.clientX,t.touchmoveY=i.clientY,t.move&&t.move(Object.assign(e,t))}function B(e){var t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:function(e){return _(e,t)},touchend:function(e){return k(e,t)},touchmove:function(e){return T(e,t)}}}function x(e,t,i){var n=t.value,s=n.parent?e.parentElement:e,r=n.options||{passive:!0};if(s){var a=B(t.value);s._touchHandlers=Object(s._touchHandlers),s._touchHandlers[i.context._uid]=a,Object(m["s"])(a).forEach((function(e){s.addEventListener(e,a[e],r)}))}}function N(e,t,i){var n=t.value.parent?e.parentElement:e;if(n&&n._touchHandlers){var s=n._touchHandlers[i.context._uid];Object(m["s"])(s).forEach((function(e){n.removeEventListener(e,s[e])})),delete n._touchHandlers[i.context._uid]}}var C={inserted:x,unbind:N},E=C,P=Object(p["a"])(Object(r["a"])("left",["isActive","isMobile","miniVariant","expandOnHover","permanent","right","temporary","width"]),a["a"],o["a"],c,b,y["a"],u["a"]);t["a"]=P.extend({name:"v-navigation-drawer",directives:{ClickOutside:v["a"],Resize:w["a"],Touch:E},provide:function(){return{isInNav:"nav"===this.tag}},props:{bottom:Boolean,clipped:Boolean,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,height:{type:[Number,String],default:function(){return this.app?"100vh":"100%"}},miniVariant:Boolean,miniVariantWidth:{type:[Number,String],default:56},permanent:Boolean,right:Boolean,src:{type:[String,Object],default:""},stateless:Boolean,tag:{type:String,default:function(){return this.app?"nav":"aside"}},temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},value:null},data:function(){return{isMouseover:!1,touchArea:{left:0,right:0},stackMinZIndex:6}},computed:{applicationProperty:function(){return this.right?"right":"left"},classes:function(){return Object(n["a"])({"v-navigation-drawer":!0,"v-navigation-drawer--absolute":this.absolute,"v-navigation-drawer--bottom":this.bottom,"v-navigation-drawer--clipped":this.clipped,"v-navigation-drawer--close":!this.isActive,"v-navigation-drawer--fixed":!this.absolute&&(this.app||this.fixed),"v-navigation-drawer--floating":this.floating,"v-navigation-drawer--is-mobile":this.isMobile,"v-navigation-drawer--is-mouseover":this.isMouseover,"v-navigation-drawer--mini-variant":this.isMiniVariant,"v-navigation-drawer--custom-mini-variant":56!==Number(this.miniVariantWidth),"v-navigation-drawer--open":this.isActive,"v-navigation-drawer--open-on-hover":this.expandOnHover,"v-navigation-drawer--right":this.right,"v-navigation-drawer--temporary":this.temporary},this.themeClasses)},computedMaxHeight:function(){if(!this.hasApp)return null;var e=this.$vuetify.application.bottom+this.$vuetify.application.footer+this.$vuetify.application.bar;return this.clipped?e+this.$vuetify.application.top:e},computedTop:function(){if(!this.hasApp)return 0;var e=this.$vuetify.application.bar;return e+=this.clipped?this.$vuetify.application.top:0,e},computedTransform:function(){return this.isActive?0:this.isBottom||this.right?100:-100},computedWidth:function(){return this.isMiniVariant?this.miniVariantWidth:this.width},hasApp:function(){return this.app&&!this.isMobile&&!this.temporary},isBottom:function(){return this.bottom&&this.isMobile},isMiniVariant:function(){return!this.expandOnHover&&this.miniVariant||this.expandOnHover&&!this.isMouseover},isMobile:function(){return!this.stateless&&!this.permanent&&c.options.computed.isMobile.call(this)},reactsToClick:function(){return!this.stateless&&!this.permanent&&(this.isMobile||this.temporary)},reactsToMobile:function(){return this.app&&!this.disableResizeWatcher&&!this.permanent&&!this.stateless&&!this.temporary},reactsToResize:function(){return!this.disableResizeWatcher&&!this.stateless},reactsToRoute:function(){return!this.disableRouteWatcher&&!this.stateless&&(this.temporary||this.isMobile)},showOverlay:function(){return!this.hideOverlay&&this.isActive&&(this.isMobile||this.temporary)},styles:function(){var e=this.isBottom?"translateY":"translateX";return{height:Object(m["f"])(this.height),top:this.isBottom?"auto":Object(m["f"])(this.computedTop),maxHeight:null!=this.computedMaxHeight?"calc(100% - ".concat(Object(m["f"])(this.computedMaxHeight),")"):void 0,transform:"".concat(e,"(").concat(Object(m["f"])(this.computedTransform,"%"),")"),width:Object(m["f"])(this.computedWidth)}}},watch:{$route:"onRouteChange",isActive:function(e){this.$emit("input",e)},isMobile:function(e,t){!e&&this.isActive&&!this.temporary&&this.removeOverlay(),null!=t&&this.reactsToResize&&this.reactsToMobile&&(this.isActive=!e)},permanent:function(e){e&&(this.isActive=!0)},showOverlay:function(e){e?this.genOverlay():this.removeOverlay()},value:function(e){this.permanent||(null!=e?e!==this.isActive&&(this.isActive=e):this.init())},expandOnHover:"updateMiniVariant",isMouseover:function(e){this.updateMiniVariant(!e)}},beforeMount:function(){this.init()},methods:{calculateTouchArea:function(){var e=this.$el.parentNode;if(e){var t=e.getBoundingClientRect();this.touchArea={left:t.left+50,right:t.right-50}}},closeConditional:function(){return this.isActive&&!this._isDestroyed&&this.reactsToClick},genAppend:function(){return this.genPosition("append")},genBackground:function(){var e={height:"100%",width:"100%",src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img(e):this.$createElement(s["a"],{props:e});return this.$createElement("div",{staticClass:"v-navigation-drawer__image"},[t])},genDirectives:function(){var e=this,t=[{name:"click-outside",value:{handler:function(){e.isActive=!1},closeConditional:this.closeConditional,include:this.getOpenDependentElements}}];return this.touchless||this.stateless||t.push({name:"touch",value:{parent:!0,left:this.swipeLeft,right:this.swipeRight}}),t},genListeners:function(){var e=this,t={transitionend:function(t){if(t.target===t.currentTarget){e.$emit("transitionend",t);var i=document.createEvent("UIEvents");i.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(i)}}};return this.miniVariant&&(t.click=function(){return e.$emit("update:mini-variant",!1)}),this.expandOnHover&&(t.mouseenter=function(){return e.isMouseover=!0},t.mouseleave=function(){return e.isMouseover=!1}),t},genPosition:function(e){var t=Object(m["m"])(this,e);return t?this.$createElement("div",{staticClass:"v-navigation-drawer__".concat(e)},t):t},genPrepend:function(){return this.genPosition("prepend")},genContent:function(){return this.$createElement("div",{staticClass:"v-navigation-drawer__content"},this.$slots.default)},genBorder:function(){return this.$createElement("div",{staticClass:"v-navigation-drawer__border"})},init:function(){this.permanent?this.isActive=!0:this.stateless||null!=this.value?this.isActive=this.value:this.temporary||(this.isActive=!this.isMobile)},onRouteChange:function(){this.reactsToRoute&&this.closeConditional()&&(this.isActive=!1)},swipeLeft:function(e){this.isActive&&this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(this.right&&e.touchstartX>=this.touchArea.right?this.isActive=!0:!this.right&&this.isActive&&(this.isActive=!1)))},swipeRight:function(e){this.isActive&&!this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(!this.right&&e.touchstartX<=this.touchArea.left?this.isActive=!0:this.right&&this.isActive&&(this.isActive=!1)))},updateApplication:function(){if(!this.isActive||this.isMobile||this.temporary||!this.$el)return 0;var e=Number(this.computedWidth);return isNaN(e)?this.$el.clientWidth:e},updateMiniVariant:function(e){this.miniVariant!==e&&this.$emit("update:mini-variant",e)}},render:function(e){var t=[this.genPrepend(),this.genContent(),this.genAppend(),this.genBorder()];return(this.src||Object(m["m"])(this,"img"))&&t.unshift(this.genBackground()),e(this.tag,this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,directives:this.genDirectives(),on:this.genListeners()}),t)}})},f8cd:function(e,t,i){var n=i("a691");e.exports=function(e){var t=n(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},fb6a:function(e,t,i){"use strict";var n=i("23e7"),s=i("861d"),r=i("e8b5"),a=i("23cb"),o=i("50c4"),l=i("fc6a"),h=i("8418"),c=i("b622"),u=i("1dde"),d=u("slice"),p=c("species"),f=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var i,n,c,u=l(this),d=o(u.length),m=a(e,d),b=a(void 0===t?d:t,d);if(r(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?s(i)&&(i=i[p],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return f.call(u,m,b);for(n=new(void 0===i?Array:i)(g(b-m,0)),c=0;m<b;m++,c++)m in u&&h(n,c,u[m]);return n.length=c,n}})},fc6a:function(e,t,i){var n=i("44ad"),s=i("1d80");e.exports=function(e){return n(s(e))}},fce3:function(e,t,i){var n=i("d039"),s=i("da84"),r=s.RegExp;e.exports=n((function(){var e=r(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,i){var n=i("4930");e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fe6c:function(e,t,i){"use strict";i.d(t,"b",(function(){return a}));var n=i("2b0e"),s=i("80d2"),r={absolute:Boolean,bottom:Boolean,fixed:Boolean,left:Boolean,right:Boolean,top:Boolean};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n["a"].extend({name:"positionable",props:e.length?Object(s["j"])(r,e):r})}t["a"]=a()},fea9:function(e,t,i){var n=i("da84");e.exports=n.Promise}}]);
//# sourceMappingURL=chunk-vendors.2f487bac.js.map